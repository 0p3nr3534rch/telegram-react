{"version":3,"sources":["Components/Viewer/MediaViewerFooterButton.js","Components/Viewer/MediaViewerButton.js","Components/Viewer/MediaViewerFooterText.js","Components/Viewer/MediaViewerDownloadButton.js","../node_modules/@material-ui/icons/GetApp.js","../node_modules/@material-ui/icons/NavigateBefore.js","../node_modules/@material-ui/icons/NavigateNext.js","../node_modules/@material-ui/icons/Delete.js","Components/Viewer/ProfileMediaViewerContent.js","Components/Tile/ProfileMediaViewerControl.js","Components/Viewer/ProfileMediaViewer.js"],"names":["MediaViewerFooterButton","handleClick","event","stopPropagation","_this$props","_this","props","onClick","disabled","_this$props2","this","checked","children","classes","title","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","className","classNames","Object","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","React","Component","withStyles","theme","color","palette","primary","main","MediaViewerButton","grow","react__WEBPACK_IMPORTED_MODULE_5___default","MediaViewerFooterText","subtitle","Boolean","iconStyle","padding","MediaViewerDownloadButton","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","onClientUpdateMediaBlob","update","fileId","state","setState","saveDisabled","prevPropsFileId","FileStore","on","removeListener","_MediaViewerFooterButton__WEBPACK_IMPORTED_MODULE_7__","_material_ui_icons_GetApp__WEBPACK_IMPORTED_MODULE_6___default","style","getBlob","_interopRequireDefault","__webpack_require__","defineProperty","exports","value","default","_react","_default","Fragment","d","fill","ProfileMediaViewerContent","classCallCheck","possibleConstructorReturn","getPrototypeOf","onClientUpdateChatBlob","chatId","photo","big","id","file","get","onClientUpdateUserBlob","getChatUserId","userId","handleContentClick","_this$props3","prevChatId","prevPhoto","width","PROFILE_PHOTO_BIG_SIZE","height","_this$state","blob","src","getBlobUrl","react_default","alt","FileProgress","ProfileMediaViewerControl","date","ChatTileControl","showSavedMessages","MessageAuthor","forwardIconStyle","transform","deleteIconStyle","navigationIconStyle","ProfileMediaViewer","onKeyDown","keyCode","deleteConfirmationOpened","handleClose","handlePrevious","handleNext","loadHistory","asyncToGenerator","regenerator_default","mark","_callee","result","wrap","_context","prev","next","isPrivateChat","abrupt","TdLibController","send","@type","user_id","offset","limit","sent","history","photos","firstSliceLoaded","length","currentIndex","hasNextMedia","hasPreviousMedia","totalCount","total_count","preloadProfileMediaViewerContent","stop","ApplicationStore","setProfileMediaViewerContent","handleSave","chat","ChatStore","index","getProfilePhoto","getPhotoFromChat","saveOrDownload","updateChatPhotoBlob","handleForward","_this$state2","photoSize","type","clientUpdate","info","handleDelete","_this$state3","messageId","store","getReadWriteStore","deleteLocalFile","nextIndex","loadMedia","loadPrevious","_callee2","_context2","loadNext","_callee3","_context3","callback","prevFileId","nextProps","nextState","_this$state4","currentFileId","hasPrevousMedia","loadProfileMediaViewerContent","document","addEventListener","removeEventListener","_this$props4","t","_this$state5","deleteForAll","inHistory","userProfilePhoto","NavigateBefore_default","fontSize","Viewer_ProfileMediaViewerContent","Close_default","NavigateNext_default","Tile_ProfileMediaViewerControl","getProfilePhotoDateHint","concat","Reply_default","Delete_default","withTranslation"],"mappings":"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","file":"static/js/12.64436f7f.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport './MediaViewerFooterButton.css';\n\nconst styles = theme => ({\n    checked: {\n        color: theme.palette.primary.main\n    }\n});\n\nclass MediaViewerFooterButton extends React.Component {\n    handleClick = event => {\n        event.stopPropagation();\n\n        const { onClick, disabled } = this.props;\n\n        if (disabled) return;\n\n        onClick(event);\n    };\n\n    render() {\n        const { checked, children, classes, disabled, title } = this.props;\n\n        return (\n            <div\n                className={classNames(disabled ? 'media-viewer-footer-button-disabled' : 'media-viewer-footer-button', {\n                    [classes.checked]: checked\n                })}\n                title={title}\n                onClick={this.handleClick}>\n                {children}\n            </div>\n        );\n    }\n}\n\nMediaViewerFooterButton.propTypes = {\n    title: PropTypes.string,\n    disabled: PropTypes.bool,\n    checked: PropTypes.bool,\n    onClick: PropTypes.func\n};\n\nexport default withStyles(styles)(MediaViewerFooterButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport './MediaViewerButton.css';\n\nclass MediaViewerButton extends React.Component {\n    handleClick = event => {\n        event.stopPropagation();\n\n        const { disabled, onClick } = this.props;\n\n        if (disabled) return;\n\n        onClick(event);\n    };\n\n    render() {\n        const { disabled, grow, children } = this.props;\n\n        const className = classNames(\n            disabled ? 'media-viewer-button-disabled' : 'media-viewer-button',\n            { grow: grow }\n        );\n\n        return (\n            <div className={className} onClick={this.handleClick}>\n                {children}\n            </div>\n        );\n    }\n}\n\nMediaViewerButton.propTypes = {\n    disabled: PropTypes.bool,\n    onClick: PropTypes.func\n};\n\nexport default MediaViewerButton;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport './MediaViewerFooterText.css';\n\nclass MediaViewerFooterText extends React.Component {\n    render() {\n        const { title, subtitle } = this.props;\n\n        return (\n            <div className=\"media-viewer-footer-text\">\n                <div className=\"media-viewer-footer-text-wrapper\">\n                    <span>{title}</span>\n                    {\n                        Boolean(subtitle) && (\n                            <span>\n                                &nbsp;\n                                {subtitle}\n                            </span>\n                        )}\n                </div>\n            </div>\n        );\n    }\n}\n\nMediaViewerFooterText.propTypes = {\n    title: PropTypes.string,\n    subtitle: PropTypes.string\n};\n\nexport default MediaViewerFooterText;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport SaveIcon from '@material-ui/icons/GetApp';\nimport MediaViewerFooterButton from './MediaViewerFooterButton';\nimport FileStore from '../../Stores/FileStore';\nimport './MediaViewerFooterButton.css';\n\nconst iconStyle = {\n    padding: 20,\n    color: 'white'\n};\n\nclass MediaViewerDownloadButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { fileId } = props;\n\n        this.state = {\n            prevPropsFileId: fileId,\n            fileId: fileId,\n            disabled: MediaViewerDownloadButton.saveDisabled(fileId)\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        const { fileId } = props;\n        const { prevPropsFileId } = state;\n\n        if (fileId !== prevPropsFileId) {\n            return {\n                prevPropsFileId: fileId,\n                fileId: fileId,\n                disabled: MediaViewerDownloadButton.saveDisabled(fileId)\n            };\n        }\n\n        return null;\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdateAnimationBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateChatBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateDocumentBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdatePhotoBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateUserBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateVideoBlob', this.onClientUpdateMediaBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateAnimationBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateChatBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateDocumentBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdatePhotoBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateUserBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateVideoBlob', this.onClientUpdateMediaBlob);\n    }\n\n    onClientUpdateMediaBlob = update => {\n        const { fileId } = this.state;\n\n        if (fileId === update.fileId) {\n            this.setState({\n                disabled: MediaViewerDownloadButton.saveDisabled(fileId)\n            });\n        }\n    };\n\n    static saveDisabled = fileId => {\n        return !Boolean(FileStore.getBlob(fileId));\n    };\n\n    handleClick = event => {\n        event.stopPropagation();\n\n        const { onClick } = this.props;\n        const { disabled } = this.state;\n        if (disabled) return;\n\n        onClick(event);\n    };\n\n    render() {\n        const { title } = this.props;\n        const { disabled } = this.state;\n\n        return (\n            <MediaViewerFooterButton disabled={disabled} title={title} onClick={this.handleClick}>\n                <SaveIcon style={iconStyle} />\n            </MediaViewerFooterButton>\n        );\n    }\n}\n\nMediaViewerDownloadButton.propTypes = {\n    fileId: PropTypes.number.isRequired,\n    onClick: PropTypes.func.isRequired,\n    title: PropTypes.string\n};\n\nexport default MediaViewerDownloadButton;\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(_react.default.Fragment, null, _react.default.createElement(\"path\", {\n  d: \"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"\n}), _react.default.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n})), 'GetApp');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(_react.default.Fragment, null, _react.default.createElement(\"path\", {\n  d: \"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\"\n}), _react.default.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n})), 'NavigateBefore');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(_react.default.Fragment, null, _react.default.createElement(\"path\", {\n  d: \"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"\n}), _react.default.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n})), 'NavigateNext');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(_react.default.Fragment, null, _react.default.createElement(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n}), _react.default.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n})), 'Delete');\n\nexports.default = _default;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport FileProgress from './FileProgress';\nimport { getChatUserId } from '../../Utils/Chat';\nimport { PROFILE_PHOTO_BIG_SIZE } from '../../Constants';\nimport FileStore from '../../Stores/FileStore';\nimport './ProfileMediaViewer.css';\n\nclass ProfileMediaViewerContent extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { chatId, photo } = this.props;\n\n        let { big: file } = photo;\n        file = FileStore.get(file.id) || file;\n\n        this.state = {\n            prevChatId: chatId,\n            prevPhoto: photo,\n            width: PROFILE_PHOTO_BIG_SIZE,\n            height: PROFILE_PHOTO_BIG_SIZE,\n            file: file\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        const { chatId, photo } = props;\n\n        if (chatId !== state.prevChatId || photo !== state.prevPhoto) {\n            return {\n                prevChatId: chatId,\n                prevPhoto: photo,\n                width: PROFILE_PHOTO_BIG_SIZE,\n                height: PROFILE_PHOTO_BIG_SIZE,\n                file: photo.big\n            };\n        }\n\n        return null;\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdateChatBlob', this.onClientUpdateChatBlob);\n        FileStore.on('clientUpdateUserBlob', this.onClientUpdateUserBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateChatBlob', this.onClientUpdateChatBlob);\n        FileStore.removeListener('clientUpdateUserBlob', this.onClientUpdateUserBlob);\n    }\n\n    onClientUpdateChatBlob = update => {\n        const { chatId, photo } = this.props;\n\n        if (chatId === update.chatId && photo.big.id === update.fileId) {\n            const file = FileStore.get(update.fileId) || this.state.file;\n            this.setState({\n                file: file\n            });\n        }\n    };\n\n    onClientUpdateUserBlob = update => {\n        const { chatId, photo } = this.props;\n        const userId = getChatUserId(chatId);\n\n        if (userId === update.userId && photo.big.id === update.fileId) {\n            const file = FileStore.get(update.fileId) || this.state.file;\n            this.setState({\n                file: file\n            });\n        }\n    };\n\n    handleContentClick = event => {\n        if (event) event.stopPropagation();\n\n        this.props.onClick(event);\n    };\n\n    render() {\n        const { width, height, file } = this.state;\n        if (!file) return null;\n\n        const blob = FileStore.getBlob(file.id) || file.blob;\n        const src = FileStore.getBlobUrl(blob);\n\n        return (\n            <div className='media-viewer-content'>\n                <img className='media-viewer-content-image' src={src} alt='' onClick={this.handleContentClick} />\n                {/*<img className='media-viewer-content-image-preview' src={previewSrc} alt='' />*/}\n                <FileProgress file={file} />\n            </div>\n        );\n    }\n}\n\nProfileMediaViewerContent.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    photo: PropTypes.object.isRequired\n};\n\nexport default ProfileMediaViewerContent;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ChatTileControl from './ChatTileControl';\nimport MessageAuthor from '../Message/MessageAuthor';\nimport './MediaViewerControl.css';\n\nclass ProfileMediaViewerControl extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        const { chatId, date } = this.props;\n\n        return (\n            <div className='media-viewer-control'>\n                <div className='media-viewer-control-wrapper'>\n                    <ChatTileControl chatId={chatId} showSavedMessages={false} />\n                    <div className='media-viewer-control-content'>\n                        <div className='media-viewer-row'>\n                            <MessageAuthor chatId={chatId} />\n                        </div>\n                        {date && (\n                            <div className='media-viewer-row message-meta'>\n                                <span className='message-date'>{date}</span>\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nProfileMediaViewerControl.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    date: PropTypes.string\n};\n\nexport default ProfileMediaViewerControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport CloseIcon from '@material-ui/icons/Close';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\nimport ReplyIcon from '@material-ui/icons/Reply';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport MediaViewerDownloadButton from './MediaViewerDownloadButton';\nimport MediaViewerButton from './MediaViewerButton';\nimport MediaViewerFooterText from './MediaViewerFooterText';\nimport MediaViewerFooterButton from './MediaViewerFooterButton';\nimport ProfileMediaViewerContent from './ProfileMediaViewerContent';\nimport ProfileMediaViewerControl from '../Tile/ProfileMediaViewerControl';\nimport { getPhotoFromChat, getChatUserId, isPrivateChat } from '../../Utils/Chat';\nimport { getProfilePhotoDateHint, getProfilePhoto } from '../../Utils/User';\nimport { loadProfileMediaViewerContent, preloadProfileMediaViewerContent, saveOrDownload } from '../../Utils/File';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport FileStore from '../../Stores/FileStore';\nimport ChatStore from '../../Stores/ChatStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './ProfileMediaViewer.css';\n\nconst forwardIconStyle = {\n    padding: 20,\n    color: 'white',\n    transform: 'scaleX(-1)'\n};\n\nconst deleteIconStyle = {\n    padding: 20,\n    color: 'white'\n};\n\nconst navigationIconStyle = {\n    padding: 35,\n    color: 'white'\n};\n\nclass ProfileMediaViewer extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.history = [];\n\n        const { chatId, fileId } = this.props;\n\n        this.state = {\n            prevChatId: chatId,\n            prevFileId: fileId,\n            currentIndex: 0,\n            hasNextMedia: false,\n            hasPreviousMedia: false,\n            deleteConfirmationOpened: false\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId, messageId } = this.props;\n        const {\n            currentFileId,\n            hasPreviousMedia,\n            hasNextMedia,\n            firstSliceLoaded,\n            totalCount,\n            deleteConfirmationOpened\n        } = this.state;\n\n        if (nextProps.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextProps.messageId !== messageId) {\n            return true;\n        }\n\n        if (nextState.currentFileId !== currentFileId) {\n            return true;\n        }\n\n        if (nextState.hasPrevousMedia !== hasPreviousMedia) {\n            return true;\n        }\n\n        if (nextState.hasNextMedia !== hasNextMedia) {\n            return true;\n        }\n\n        if (nextState.firstSliceLoaded !== firstSliceLoaded) {\n            return true;\n        }\n\n        if (nextState.totalCount !== totalCount) {\n            return true;\n        }\n\n        if (nextState.deleteConfirmationOpened !== deleteConfirmationOpened) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        const { chatId } = this.props;\n        const photo = getPhotoFromChat(chatId);\n        loadProfileMediaViewerContent(chatId, [photo]);\n\n        this.loadHistory();\n\n        document.addEventListener('keydown', this.onKeyDown, false);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('keydown', this.onKeyDown, false);\n    }\n\n    onKeyDown = event => {\n        if (event.keyCode === 27) {\n            const { deleteConfirmationOpened } = this.state;\n            if (deleteConfirmationOpened) return;\n\n            this.handleClose();\n        } else if (event.keyCode === 39) {\n            this.handlePrevious();\n        } else if (event.keyCode === 37) {\n            this.handleNext();\n        }\n    };\n\n    loadHistory = async () => {\n        const { chatId } = this.props;\n\n        if (!isPrivateChat(chatId)) return;\n\n        const result = await TdLibController.send({\n            '@type': 'getUserProfilePhotos',\n            user_id: getChatUserId(chatId),\n            offset: 0,\n            limit: 100\n        });\n\n        this.history = result.photos;\n        this.firstSliceLoaded = result.photos.length === 0;\n\n        const index = 0;\n\n        this.setState({\n            currentIndex: index,\n            hasNextMedia: this.hasNextMedia(index),\n            hasPreviousMedia: this.hasPreviousMedia(index),\n            totalCount: result.total_count\n        });\n\n        preloadProfileMediaViewerContent(chatId, index, this.history);\n    };\n\n    handleClose = () => {\n        ApplicationStore.setProfileMediaViewerContent(null);\n    };\n\n    handleSave = () => {\n        const { chatId } = this.props;\n        const { currentIndex, totalCount } = this.state;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        let index = -1;\n        if (totalCount) {\n            index = currentIndex;\n        }\n\n        const photo =\n            index > 0 && index < this.history.length ? getProfilePhoto(this.history[index]) : getPhotoFromChat(chatId);\n        if (!photo) return;\n        if (!photo.big) return;\n\n        const file = FileStore.get(photo.big.id) || photo.big;\n        if (!file) return;\n\n        saveOrDownload(file, file.id + '.jpg', chat, () => FileStore.updateChatPhotoBlob(chatId, file.id));\n    };\n\n    handleForward = () => {\n        const { chatId } = this.props;\n        if (!isPrivateChat(chatId)) return;\n\n        const { currentIndex, totalCount } = this.state;\n\n        let index = -1;\n        if (totalCount) {\n            index = currentIndex;\n        }\n\n        if (index < 0 || index >= this.history.length) return;\n        const photo = getProfilePhoto(this.history[index]);\n        if (!photo) return;\n\n        let { big: file } = photo;\n        file = FileStore.get(file.id) || file;\n        if (!file) return;\n\n        const photoSize = {\n            '@type': 'photoSize',\n            type: 'c',\n            photo: file,\n            width: 640,\n            height: 640\n        };\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateForward',\n            info: { photoSize }\n        });\n    };\n\n    handleDelete = () => {\n        const { chatId, messageId } = this.props;\n        const { currentIndex, totalCount } = this.state;\n\n        let index = -1;\n        if (totalCount) {\n            index = currentIndex;\n        }\n\n        const photo =\n            index > 0 && index < this.history.length ? getProfilePhoto(this.history[index]) : getPhotoFromChat(chatId);\n\n        if (photo) {\n            let file = photo.big;\n            file = FileStore.get(file.id) || file;\n            if (file) {\n                const store = FileStore.getReadWriteStore();\n\n                FileStore.deleteLocalFile(store, file);\n            }\n        }\n    };\n\n    hasPreviousMedia = index => {\n        if (index === -1) return false;\n\n        const nextIndex = index + 1;\n        return nextIndex < this.history.length;\n    };\n\n    handlePrevious = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        const { currentIndex } = this.state;\n        const nextIndex = currentIndex + 1;\n\n        return this.loadMedia(nextIndex, () => {\n            if (nextIndex === this.history.length - 1) {\n                this.loadPrevious();\n            }\n        });\n    };\n\n    loadPrevious = async () => {\n        return;\n    };\n\n    hasNextMedia = index => {\n        if (index === -1) return false;\n\n        const nextIndex = index - 1;\n        return nextIndex >= 0;\n    };\n\n    handleNext = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        const { currentIndex } = this.state;\n        const nextIndex = currentIndex - 1;\n\n        return this.loadMedia(nextIndex, () => {\n            if (nextIndex === 0) {\n                this.loadNext();\n            }\n        });\n    };\n\n    loadNext = async () => {\n        return;\n    };\n\n    loadMedia = (index, callback) => {\n        if (index < 0) return false;\n        if (index >= this.history.length) return false;\n\n        this.setState(\n            {\n                currentIndex: index,\n                hasNextMedia: this.hasNextMedia(index),\n                hasPreviousMedia: this.hasPreviousMedia(index)\n            },\n            callback\n        );\n\n        const { chatId } = this.props;\n\n        preloadProfileMediaViewerContent(chatId, index, this.history);\n        return true;\n    };\n\n    render() {\n        const { chatId, t } = this.props;\n        const {\n            currentIndex,\n            hasNextMedia,\n            hasPreviousMedia,\n            firstSliceLoaded,\n            totalCount,\n            deleteConfirmationOpened,\n            deleteForAll\n        } = this.state;\n\n        let index = -1;\n        if (totalCount) {\n            index = currentIndex;\n        }\n\n        const deleteConfirmation = null;\n        const inHistory = index >= 0 && index < this.history.length;\n        const photo = inHistory ? getProfilePhoto(this.history[index]) : getPhotoFromChat(chatId);\n        const userProfilePhoto = inHistory ? this.history[index] : null;\n        const { big: file } = photo;\n\n        return (\n            <div className='media-viewer'>\n                {deleteConfirmation}\n                <div className='media-viewer-wrapper' onClick={this.handlePrevious}>\n                    <div className='media-viewer-left-column'>\n                        <div className='media-viewer-button-placeholder' />\n                        <MediaViewerButton disabled={!hasNextMedia} grow onClick={this.handleNext}>\n                            <NavigateBeforeIcon fontSize='large' style={navigationIconStyle} />\n                        </MediaViewerButton>\n                    </div>\n\n                    <div className='media-viewer-content-column'>\n                        <ProfileMediaViewerContent chatId={chatId} photo={photo} onClick={this.handlePrevious} />\n                    </div>\n\n                    <div className='media-viewer-right-column'>\n                        <MediaViewerButton onClick={this.handleClose}>\n                            <CloseIcon fontSize='large' style={navigationIconStyle} />\n                        </MediaViewerButton>\n                        <MediaViewerButton disabled={!hasPreviousMedia} grow onClick={this.handlePrevious}>\n                            <NavigateNextIcon fontSize='large' style={navigationIconStyle} />\n                        </MediaViewerButton>\n                    </div>\n                </div>\n                <div className='media-viewer-footer'>\n                    <ProfileMediaViewerControl chatId={chatId} date={getProfilePhotoDateHint(userProfilePhoto)} />\n                    <MediaViewerFooterText\n                        title={t('AttachPhoto')}\n                        subtitle={totalCount && index >= 0 ? `${index + 1} of ${totalCount}` : null}\n                    />\n                    <MediaViewerDownloadButton title={t('Save')} fileId={file.id} onClick={this.handleSave} />\n                    {isPrivateChat(chatId) && (\n                        <MediaViewerFooterButton\n                            title={t('Forward')}\n                            disabled={!inHistory}\n                            onClick={this.handleForward}>\n                            <ReplyIcon style={forwardIconStyle} />\n                        </MediaViewerFooterButton>\n                    )}\n                    <MediaViewerFooterButton title={t('Delete')} disabled onClick={this.handleDelete}>\n                        <DeleteIcon style={deleteIconStyle} />\n                    </MediaViewerFooterButton>\n                </div>\n            </div>\n        );\n    }\n}\n\nProfileMediaViewer.propTypes = {\n    chatId: PropTypes.number.isRequired\n};\n\nexport default withTranslation()(ProfileMediaViewer);\n"],"sourceRoot":""}