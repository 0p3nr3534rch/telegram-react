{"version":3,"sources":["Utils/HOC.js","Constants.js","Utils/Common.js","Controllers/TdLibController.js","Stores/LocalizationStore.js","Language.js","Utils/ActionScheduler.js","Stores/ApplicationStore.js","Theme.js","Notifications.js","Stores/OptionStore.js","Stores/UserStore.js","Utils/User.js","Stores/SupergroupStore.js","Utils/InputTypingManager.js","Stores/ChatStore.js","Stores/FileStore.js","Components/Viewer/FileProgress.js","Stores/MessageStore.js","Utils/File.js","Components/Tile/DocumentTile.js","Stores/PlayerStore.js","Components/Message/Media/AudioAction.js","Utils/Media.js","Components/Message/Media/DocumentAction.js","Components/Message/Media/Document.js","Components/Message/Media/Audio.js","Components/Message/Media/Animation.js","Components/Tile/UserTileControl.js","Components/Message/Media/Contact.js","Components/Message/Media/Photo.js","Components/Theme.js","Components/Message/Media/Game.js","Components/Message/Media/Location.js","Components/Message/Media/PollRadio.js","Components/Message/Media/PollPercentage.js","Components/Message/Media/PollOption.js","Components/Message/Media/Poll.js","Actions/Poll.js","Components/Message/Media/Sticker.js","Components/Message/Media/Venue.js","Components/Message/Media/Video.js","Components/Message/Media/MediaStatus.js","Components/Message/Media/VideoNote.js","Components/Message/Media/VoiceNoteSlider.js","Components/Message/Media/VoiceNote.js","Actions/Client.js","Utils/Currency.js","Components/Message/MessageAuthor.js","Utils/ServiceMessage.js","Utils/Message.js","Stores/BasicGroupStore.js","Components/ColumnMiddle/EmojiPickerButton.js","Components/Tile/ReplyTile.js","Components/Message/Reply.js","Components/ColumnMiddle/InputBoxHeader.js","Components/ColumnMiddle/AttachButton.js","Utils/Component.js","Utils/Key.js","Components/Dialog/CreatePollOption.js","Utils/Poll.js","Stores/PollStore.js","Components/Dialog/CreatePollDialog.js","Utils/OutputTypingManager.js","Components/ColumnMiddle/InputBoxControl.js","Components/ColumnMiddle/FooterCommand.js","Components/ColumnMiddle/NotificationsControl.js","Components/ColumnMiddle/NotificationsCommandControl.js","Components/ColumnMiddle/Footer.js","Utils/Chat.js","Utils/BasicGroup.js","Utils/Supergroup.js","Components/Tile/ChatStatus.js","Components/Tile/ChatTileControl.js","Components/Tile/ForwardTargetChat.js","Utils/Language.js","Components/Dialog/ForwardDialog.js","Components/Additional/NotificationTimer.js","Components/ColumnMiddle/MainMenuButton.js","Components/Tile/UserStatusControl.js","Components/Tile/UserControl.js","Components/Tile/DialogTitleControl.js","Components/Tile/DialogStatusControl.js","Components/Tile/ChatControl.js","Components/ColumnRight/ChatDetailsHeader.js","Components/ColumnRight/NotificationsListItem.js","Components/ColumnRight/MoreListItem.js","Components/ColumnRight/ChatDetails.js","Components/ColumnRight/GroupsInCommonHeader.js","Components/ColumnRight/GroupsInCommon.js","Components/ColumnRight/SharedMediaHeaderControl.js","Components/ColumnRight/SharedMedia.js","Components/ColumnRight/ChatInfo.js","Components/Tile/TopChat.js","Components/Tile/RecentlyFoundChat.js","Components/Tile/FoundPublicChat.js","Components/Tile/FoundMessage.js","Components/ColumnLeft/Search/SearchCaption.js","Components/ColumnLeft/Search/Search.js","Components/ColumnLeft/ThemePicker.js","Components/ColumnLeft/LanguagePicker.js","registerServiceWorker.js","Components/ColumnLeft/MainMenuButton.js","Components/ColumnLeft/DialogsHeader.js","Components/Tile/DialogContentControl.js","Components/Tile/DialogBadgeControl.js","Components/Tile/DialogMetaControl.js","Components/Tile/DialogControl.js","Components/ColumnLeft/DialogsList.js","Components/ColumnLeft/UpdatePanel.js","Components/ColumnLeft/Dialogs.js","Components/ColumnMiddle/HeaderCommand.js","Components/ColumnMiddle/Header.js","Components/Player/VolumeButton.js","Components/Player/RepeatButton.js","Components/Player/ShuffleButton.js","Components/Player/PlaybackRateButton.js","Components/Player/Time.js","Components/Player/Playlist.js","Components/Player/HeaderPlayer.js","Components/Message/UnreadSeparator.js","Components/Message/ServiceMessage.js","Components/Message/Forward.js","Components/Message/MessageStatus.js","Components/Message/Media/WebPage.js","Components/Message/Message.js","Components/ColumnMiddle/FilesDropTarget.js","Components/ColumnMiddle/MessagesList.js","Components/Dialog/ChatInfoDialog.js","Stores/StickerStore.js","Components/Dialog/ShareStickerSetButton.js","Components/Dialog/StickerSetDialog.js","Components/ColumnMiddle/DialogDetails.js","Components/Auth/SignInControl.js","Components/Auth/ConfirmCodeControl.js","Components/Auth/PasswordControl.js","Components/Auth/AuthErrorDialog.js","Components/Auth/AuthFormControl.js","Components/Footer.js","Components/Tile/MediaViewerControl.js","Components/Viewer/Lottie.js","Components/Viewer/MediaCaption.js","Components/Viewer/MediaViewerContent.js","Components/Viewer/MediaViewerButton.js","Components/Viewer/MediaViewerFooterText.js","Components/Viewer/MediaViewerFooterButton.js","Components/Viewer/MediaViewerDownloadButton.js","Components/Viewer/MediaViewer.js","Components/Viewer/ProfileMediaViewerContent.js","Components/Tile/ProfileMediaViewerControl.js","Components/Viewer/ProfileMediaViewer.js","Components/Additional/AppInactiveControl.js","TelegramApp.js","index.js"],"names":["withSaveRef","Component","React","forwardRef","props","ref","react_default","a","createElement","Object","assign","forwardedRef","withRestoreRef","_React$Component","_class","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","key","value","_this$props","rest","objectWithoutProperties","getDisplayName","WrappedComponent","displayName","name","ANIMATION_DURATION_200MS","ANIMATION_DURATION_300MS","CHAT_SLICE_LIMIT","LOCATION_HEIGHT","LOCATION_SCALE","LOCATION_WIDTH","LOCATION_ZOOM","MEDIA_SLICE_LIMIT","MESSAGE_SLICE_LIMIT","MUTED_VALUE_MAX","MUTED_VALUE_MIN","NOTIFICATIONS_DEBOUNCE_DELAY_MS","PHOTO_BIG_SIZE","PHOTO_SIZE","PHOTO_THUMBNAIL_SIZE","POLL_QUESTION_LENGTH","POLL_QUESTION_HINT_LENGTH","POLL_QUESTION_MAX_LENGTH","POLL_OPTION_LENGTH","POLL_OPTION_HINT_LENGTH","POLL_OPTION_MAX_LENGTH","POLL_OPTIONS_MAX_COUNT","SERVICE_NOTIFICATIONS_USER_ID","PROFILE_PHOTO_BIG_SIZE","PROFILE_PHOTO_SMALL_SIZE","VERBOSITY_JS_MAX","VERBOSITY_JS_MIN","VERBOSITY_MAX","VERBOSITY_MIN","USERNAME_LENGTH_MIN","MAX_SNACK","NOTIFICATION_AUTO_HIDE_DURATION_MS","THUMBNAIL_BLURRED_SIZE","PRELOAD_AUDIO_SIZE","PRELOAD_ANIMATION_SIZE","PRELOAD_DOCUMENT_SIZE","PRELOAD_STICKER_SIZE","PRELOAD_VOICENOTE_SIZE","PRELOAD_VIDEO_SIZE","PRELOAD_VIDEONOTE_SIZE","THUMBNAIL_PRIORITY","FILE_PRIORITY","FIRST_START_OPTIMIZATIONS","PLAYER_VOLUME_NORMAL","PLAYER_STARTTIME","PLAYER_PLAYBACKRATE_NORMAL","PLAYER_PLAYBACKRATE_FAST","PLAYER_PROGRESS_TIMEOUT_MS","getOSName","OSName","window","navigator","userAgent","indexOf","getBrowser","isEdge","document","documentMode","StyleMedia","isValidPhoneNumber","phoneNumber","isBad","match","replace","length","stringToBoolean","string","toLowerCase","trim","Boolean","orderCompare","order1","order2","diff","getPhotoSize","sizes","getSize","dimension","useWidth","width","height","Math","abs","index","i","type","photo","local","is_downloading_completed","currDiff","getFitSize","size","max","increaseToMax","undefined","floor","debounce","func","wait","immediate","timeout","context","args","callNow","clearTimeout","setTimeout","getFirstLetter","str","toUpperCase","getLetters","title","split","formatPhoneNumber","number","unformattedNumber","startsWith","formatNumber","arrayBufferToBase64","buffer","binary","bytes","Uint8Array","len","byteLength","String","fromCharCode","btoa","isAuthorizationReady","state","getDurationString","secondsTotal","hours","minutes","seconds","getRandomInt","min","ceil","random","controller","TdLibController","_this","call","init","location","setParameters","_this$parameters","parameters","verbosity","jsVerbosity","useTestDC","readOnly","fastUpdating","useDatabase","options","logVerbosityLevel","jsLogVerbosityLevel","mode","prefix","isBackground","console","log","concat","JSON","stringify","client","TdClient","onUpdate","update","disableLog","file","id","emit","clientUpdate","search","params","URLSearchParams","has","get","parseInt","tag","tagVerbosity","send","request","then","result","sendTdParameters","asyncToGenerator","regenerator_default","mark","_callee","apiHash","version","wrap","_context","prev","next","process","packageJson","@type","use_test_dc","api_id","api_hash","system_language_code","language","device_model","system_version","application_version","use_secret_chats","use_message_database","use_file_database","database_directory","files_directory","new_verbosity_level","stop","setChatId","chatId","messageId","setMaxListeners","Infinity","_this2","catch","error","content","EventEmitter","defaultNamespace","Cookies","i18n","use","initReactI18next","ns","defaultNS","fallbackNS","resources","en","DeletedMessage","YourPhone","StartText","Next","InvalidPhoneNumber","More","SendMessage","ChatInfo","ChannelInfo","emoji","Search","NotEmojiFound","ChooseDefaultSkinTone","SearchResults","Recent","SmileysPeople","AnimalsNature","FoodDrink","Activity","TravelPlaces","Objects","Symbols","Flags","Custom","translation","AppName","Loading","Connecting","Updating","ru","lng","fallbackLng","interpolation","escapeValue","react","cache","LocalStorageBackend","enabled","expirationTime","translationDefaultLng","read","err","data","translationCurrentLng","addResourceBundle","store","LocalizationStore","addTdLibListener","addListener","onClientUpdate","removeTdLibListener","removeListener","authorization_state","only_local","info","_ref","_callee2","_language","_context2","t0","language_pack_id","keys","_ref2","set","processStrings","save","changeLanguage","_x2","abrupt","_x","languagePackStrings","strings","loadLanguage","_ref3","_callee3","_context3","sent","_x3","localization","withLanguage","LanguageWrapper","es","ActionScheduler","actionCallback","cancelCallback","add","action","cancel","actions","expire","Date","setMilliseconds","getMilliseconds","timerId","invoke","item","delete","remove","now","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","_ref4","slicedToArray","actionTimeout","return","handleTimer","expired","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_ref7","_ref6","push","_arr","_i","Map","ApplicationStore","addScheduledAction","actionScheduler","invokeScheduledAction","removeScheduledAction","handleScheduledAction","handleCancelScheduledAction","authorizationState","loggingOut","connectionState","setNotificationSettings","scope","notification_settings","text","confirm","logOut","alert","extendedUpdate","nextChatId","nextMessageId","previousChatId","previousMessageId","dialogChatId","focused","inProgress","onUpdateStatistics","statistics","count","addStatistics","getDragging","dragging","setDragging","scopeNotificationSettings","isChatDetailsVisible","mediaViewerContent","profileMediaViewerContent","visibility","notificationSettings","source1","source2","application","withTheme","ThemeWrapper","onClientUpdateThemeChanging","primary","theme","createMuiTheme","palette","secondary","main","typography","useNextVariants","setState","blue","on","core_styles","withSnackbarNotifications","NotificationsWrapper","build","maxSnack","OptionStore","items","option","UserStore","user","setFullInfo","user_id","user_full_info","status","fullInfoItems","myId","userId","fullInfo","getUserStatus","was_online","wasOnline","getTime","today","setHours","dateFormat","yesterday","setDate","getDate","isUserOnline","getUserFullName","first_name","last_name","getUserShortName","isUserBlocked","getFullInfo","is_blocked","getUserStatusOrder","expires","getProfilePhoto","userProfilePhoto","smallPhotoSize","bigPhotoSize","small","big","getProfilePhotoDateHint","added_date","date","SupergroupStore","supergroup","supergroup_id","supergroup_full_info","InputTypingManager","timeoutCallback","bind","addAction","clearAction","setActionsTimeout","expiredActions","chat_id","setSeconds","getSeconds","_ref5","ChatStore","updating","skippedUpdates","emitUpdate","updates","emitFastUpdate","setOnlineMemberCount","online_member_count","chat","order","draft_message","is_marked_as_unread","is_pinned","is_sponsored","last_message","profile_photo","last_read_inbox_message_id","unread_count","last_read_outbox_message_id","reply_markup_message_id","unread_mention_count","typingManager","getTypingManager","setTypingManager","typingManagers","onlineMemberCount","useReadFile","FileStore","onUpdateFile","onUpdateAuthorizationState","initDB","handleDownloads","handleUploads","arr","idb_key","downloads","getStore","forEach","handleChat","handleMessage","handleSticker","handleUser","remote","uploads","is_uploading_completed","getLocalFile","updateChatPhotoBlob","getRemoteFile","updateUserPhotoBlob","message","animation","handleAnimation","audio","handleAudio","handlePhoto","handleDocument","game","handleGame","handleLocation","sticker","web_page","video","video_note","voice_note","handleVideo","handleVoiceNote","handleVideoNote","venue","obj","photoSize","source","updatePhotoBlob","album_cover_thumbnail","updateAudioThumbnailBlob","updateAudioBlob","thumbnail","updateDocumentThumbnailBlob","updateDocumentBlob","locationId","getLocationId","getLocationFile","updateLocationBlob","updateStickerThumbnailBlob","updateStickerBlob","voiceNote","voice","updateVoiceNoteBlob","videoNote","updateVideoNoteThumbnailBlob","updateVideoNoteBlob","updateVideoThumbnailBlob","updateVideoBlob","updateAnimationThumbnailBlob","updateAnimationBlob","deleteLocalFile","fileId","getBlob","blobItems","setBlob","blob","deleteBlob","locationItems","setLocationFile","getBlobUrl","urls","url","URL","createObjectURL","deleteBlobUrl","callbacks","db","WeakMap","callback","initiatingDB","openDB","Promise","resolve","reject","indexedDB","open","onsuccess","onerror","transaction","objectStore","faultCallback","_callee4","response","_context4","file_id","_x4","Blob","event","target","priority","some","x","filter","only_if_pending","message_ids","revoke","circleStyle","circle","FileProgress","currentFile","nextFile","prevFile","isDownloading","download","wasActive","is_downloading_active","isActive","isUploading","upload","is_uploading_active","getProgressParams","isCompleted","progressSize","downloaded_size","uploaded_size","completeAnimation","prevPropsFile","nextProps","nextState","icon","thumbnailSrc","nextLocal","nextIdbKey","prevLocal","prevIdbKey","isDownloadingCompleted","receiveIdbKey","mount","_this$props2","cancelButton","zIndex","completeIcon","_this$state","_this$getProgressPara","_this$getProgressPara2","progress","style","background","className","CircularProgress_default","classes","variant","thickness","Close_default","defaultProps","MessageStore","message_id","reply_markup","edit_date","views","old_content","new_content","is_listened","is_viewed","old_message_id","sending_state","error_code","error_message","selected","selectedItems","clear","deletedMessage","messages","getSizeString","toFixed","getFileSize","saveBlob","filename","msSaveBlob","blobURL","tempLink","display","href","setAttribute","body","appendChild","click","removeChild","revokeObjectURL","loadReplies","messageIds","map","setItems","loadReplyContents","loadAnimationThumbnailContent","loadAudioThumbnailContent","loadPhotoContent","loadDocumentThumbnailContent","loadGameThumbnailContent","loadStickerThumbnailContent","loadVideoThumbnailContent","loadVideoNoteThumbnailContent","loadAudioContent","useFileSize","_file","loadAnimationContent","_file3","loadContactContent","contact","loadUserContent","loadDocumentContent","_file5","loadGameContent","loadLocationContent","zoom","scale","loadBigPhotoContent","loadPhotoThumbnailContent","loadStickerContent","_file10","loadVideoContent","_file12","loadVideoNoteContent","_file14","loadVoiceNoteContent","_file16","loadMessageContents","users","replies","sender_user_id","reply_to_message_id","loadPhoto","loadUsersContent","toConsumableArray","saveOrDownload","fileName","mime","saveData","can_be_downloaded","getMediaPreviewFile","getMediaFile","cancelLoadMediaViewerContent","cancelGetRemoteFile","loadMediaViewerContent","useSizeLimit","preloadMediaViewerContent","history","loadUserFileContent","loadChatFileContent","loadProfileMediaViewerContent","photos","_photo9","getChatUserId","_photo10","_photo11","preloadProfileMediaViewerContent","ids","loadChatContent","loadChatsContent","loadDraftContent","getSrc","getDownloadedSize","getUploadedSize","getExtension","parts","pop","DocumentTile","onClientUpdateDocumentThumbnailBlob","forceUpdate","openMedia","classNames","document-tile-background","onClick","src","draggable","alt","Components_Viewer_FileProgress","withStyles","borderRadius","RepeatEnum","freeze","NONE","REPEAT","REPEAT_ONE","PlayerStore","close","playlist","time","videoStream","getPlaylist","volume","repeat","shuffle","playbackRate","playing","moveToNextMedia","moveToPrevMedia","moveNext","duration","currentTime","timestamp","stream","_this$message","findIndex","useRepeatShuffle","_this$message2","nextIndex","_assertThisInitialize","currentPlaylist","_messages","total_count","assertThisInitialized","getSearchMessagesFilter","totalCount","query","from_message_id","offset","limit","cookies","Number","player","AudioAction","onClientUpdateMediaEnd","active","timeString","getTimeString","onClientUpdateMediaTime","_this$state2","onClientUpdateMediaActive","_this$props3","_this$state3","durationString","currentTimeString","_this$props4","audioDuration","_this$state4","_this$state5","isDownloadingActive","isUploadingActive","sizeString","isBlurredThumbnail","getAudioTitle","file_name","performer","trimmedTitle","trimmedPerformer","DocumentAction","Document","Components_Tile_DocumentTile","ArrowDownward_default","InsertDriveFile_default","data-name","data-ext","Message_Media_DocumentAction","Audio","onClientUpdateMediaPlay","onClientUpdateMediaPause","nextContext","_this$props5","Pause_default","PlayArrow_default","Message_Media_AudioAction","Animation","startStopPlayer","videoRef","current","inView","openMediaViewer","openProfileMediaViewer","play","pause","onClientUpdateProfileMediaViewerContent","onClientUpdateMediaViewerContent","onClientUpdateFocusWindow","onClientUpdateMessagesInView","onClientUpdateAnimationBlob","onClientUpdateAnimationThumbnailBlob","createRef","hasFocus","displaySize","t","_this$props$animation","mime_type","fitPhotoSize","mimeType","isBlurred","isGif","poster","muted","autoPlay","loop","playsInline","Fragment","media-blurred","withTranslation","UserTileControl","onClientUpdateUserBlob","onClientUpdateChatBlob","onUpdateChatPhoto","onUpdateChatTitle","handleSelect","onSelect","stopPropagation","letters","charAt","getUserLetters","tileColor","defineProperty","pointer","Contact","phone_number","fullName","Components_Tile_UserTileControl","Photo","onClientUpdatePhotoBlob","thumbnailSize","showProgress","photoStyle","objectSpread","borderStyle","borderColor","divider","accentStyles","accentColorDark","color","accentBackgroundLight","light","Game","getContent","Message_Media_Animation","Message_Media_Photo","description","formattedText","getFormattedText","Location","onClientUpdateLocationBlob","longitude","latitude","rel","Room_default","fontSize","PollRadio","chosen","beingChosen","hidden","onChange","poll-radio-hidden","Radio_default","root","radioRoot","checked","checkedIcon","RadioButtonChecked_default","progressRoot","position","top","left","pointerEvents","padding","PollPercentage","updateAnimation","stopAnimation","handle","requestAnimationFrame","onAnimationFrame","cancelAnimationFrame","startTime","from","to","timePassed","animated","prevPropsValue","closed","prevProps","prevState","snapshot","poll-percentage-subtitle","PollOption","getTitleString","canBeSelected","handleClick","onVote","handleCancel","onUnvote","maxVoterCount","voter_count","vote_percentage","is_chosen","is_being_chosen","Message_Media_PollPercentage","Message_Media_PollRadio","LinearProgress_default","bar","progressBar","enhance","compose","backgroundColor","margin","right","bottom","transition","Poll","dialog","contextMenu","getTotalVoterCountString","handleVote","optionIds","option_ids","setPollAnswer","handleUnvote","poll","handleCloseContextMenu","is_closed","cancelPollAnswer","handleStopPoll","stopPoll","handleDialog","handleCloseDialog","handleContextMenu","preventDefault","clientX","clientY","question","total_voter_count","canUnvote","canStopPoll","can_be_edited","every","onContextMenu","Message_Media_PollOption","Popover_default","onClose","anchorReference","anchorPosition","anchorOrigin","vertical","horizontal","transformOrigin","MenuList_default","e","MenuItem_default","Dialog_default","transitionDuration","aria-labelledby","DialogTitle_default","DialogContent_default","DialogContentText_default","DialogActions_default","Button_default","Sticker","onClientUpdateStickerBlob","onClientUpdateStickerThumbnailBlob","blur","fitSize","stickerStyle","Venue","address","Message_Media_Location","Video","onClientUpdateVideoThumbnailBlob","_this$props$video","MediaStatus","onUpdateMessageContentOpened","isOpened","isContentOpened","openedIcon","VideoNote","onClientUpdateMediaCaptureStream","srcObject","updateVideoSrc","videoDuration","onClientUpdateVideoNoteBlob","onClientUpdateVideoNoteThumbnailBlob","handleCanPlay","getTracks","track","_this$props6","_this$props$videoNote","video-note-playing","onCanPlay","Media_MediaStatus","VolumeOff_default","VoiceNoteSlider","reset","getValue","Slider_default","slider","thumbWrapper","thumb","maxWidth","VoiceNote","Message_Media_VoiceNoteSlider","openUser","popup","openChat","highlightMessage","currency","Currency","list","symbol","includes","totalAmount","amount","pow","getPow","MessageAuthor","openUserCommand","openChatCommand","isPrivateChat","getChatTitle","serviceMap","isServiceMessage","ttl","getServiceMessageContent","isOutgoing","getMyId","isChannel","is_channel","Components_Message_MessageAuthor","members","member_user_ids","reduce","accumulator","array","separator","ttlString","days","getTTLString","messageGame","game_message_id","score","passportElementTypes","types","getPassportElementTypeString","messageInvoice","invoice_message_id","invoice","getString","total_amount","author","getMessageAuthor","pinnedMessage","pinnedContent","substring","domain_name","getTitle","start","end","entities","beforeEntityText","entityText","decodedUrl","decodeURI","hashtag","command","afterEntityText","getText","caption","getDateHint","getMedia","Message_Media_Audio","Message_Media_Contact","Message_Media_Document","Message_Media_Game","Message_Media_Poll","Message_Media_Sticker","Message_Media_Venue","Message_Media_Video","Message_Media_VideoNote","Message_Media_VoiceNote","getSenderUserId","filterMessages","isMediaContent","isVideoMessage","isLottieMessage","endsWith","isAnimationMessage","getMediaTitle","forward_info","getAuthor","hasAudio","openAnimation","fileCancel","cancelUploadFile","setMediaViewerContent","openAudio","openDocument","openPhoto","openSticker","set_id","stickerSet","openVideo","openVideoNote","openVoiceNote","openChatPhoto","openContact","openGame","isDeletedMessage","BasicGroupStore","basic_group","basic_group_id","basic_group_full_info","groupId","group","basicgroup","EmojiPickerButton","onClientUpdateChange","picker","updateAnchorEl","anchorEl","switchPopover","currentTarget","notfound","skintext","categories","recent","people","nature","foods","activity","places","objects","symbols","flags","custom","emoji_mart_dist_es","showPreview","showSkinTones","dark","IconButton_default","iconButton","aria-label","InsertEmoticon_default","ReplyTile","isVideoNote","hasVideoNote","reply-tile-photo-round","reply-tile-photo-loading","Reply","onGetMessageResult","handleOpen","getReplyPhotoSize","onMouseDown","Components_Tile_ReplyTile","InputBoxHeader","handleClose","Reply_default","replyIcon","Components_Message_Reply","closeIconButton","AttachButton","handleMenuClick","handleMenuClose","handleAttachPhoto","onAttachPhoto","handleAttachDocument","onAttachDocument","handleAttachPoll","onAttachPoll","AttachFile_default","Menu_default","getContentAnchorEl","disableAutoFocusItem","disableRestoreFocus","disabled","canSendPhotos","ListItemIcon_default","icons_Photo_default","ListItemText_default","inset","canSendDocuments","icons_Poll_default","focusNode","node","toEnd","childNodes","lastNode","range","createRange","setStart","collapse","selection","getSelection","removeAllRanges","addRange","scrollTop","scrollHeight","focus","utils","special","navigational","isSpecial","keyCode","isNavigational","CreatePollOption","optionTextRef","innerText","handleDelete","onDelete","handleInput","dataset","maxLength","remainLength","handleKeyDown","hasSelection","toString","onFocusNext","isCollapsed","firstChild","anchorNode","anchorOffset","onFocusPrev","lastChild","handlePaste","selectionString","pasteText","clipboardData","getData","substr","execCommand","contentEditable","suppressContentEditableWarning","placeholder","data-length","data-max-length","onInput","onKeyDown","onPaste","Typography_Typography","align","counterRoot","minWidth","userSelect","isValidPoll","isValidQuestion","noneEmptyOptions","isValidOption","PollStore","_this$poll","CreatePollDialog","handleClientUpdateNewPoll","handleClientUpdatePollQuestion","questionRef","handleClientUpdatePoll","handleClientUpdateNewPollOption","optionsRefMap","shiftKey","handleFocusNextOption","innerHTML","handleAddOption","handleDeleteOption","handleDeleteByBackspace","prevIndex","deleteOption","prevNode","handleFocusPrevOption","nextNode","getHint","addCount","hasPollData","handleConfirmationDone","handleSend","onSend","inputMessagePoll","getInputMessagePoll","handleConfirmationClose","_this3","Components_Dialog_CreatePollOption","el","canAddOption","hint","dialogRoot","contentRoot","Typography_default","flexGrow","Divider_default","dividerRoot","List_default","listRoot","ListItem_default","listItem","button","disableTypography","typographyRoot","OutputTypingManager","lastAction","lastTypingDate","InputBoxControl","onClientUpdateReply","currentChatId","replyToMessageId","setInputFocus","onClientUpdateChatId","getChatDraftReplyToMessageId","openPasteDialog","newMessageRef","element","setChatDraftMessage","chatDraftMessage","draftMessage","getNewChatDraftMessage","newDraft","getInputText","previousDraft","previousReplyToMessageId","input_message_text","disable_web_page_preview","clear_draft","handleSubmit","textContent","onSendInternal","attachPhotoRef","handleAttachPhotoComplete","files","Array","reader","FileReader","addEventListener","image","Image","photoWidth","photoHeight","readAsDataURL","readImageSize","handleSendPhoto","attachDocumentRef","handleAttachDocumentComplete","handleSendDocument","handleInputChange","isMeChat","setTyping","cachedMessage","handleSendingMessage","uploadFile","handleSendPoll","originalEvent","kind","getAsFile","plainText","handlePasteContinue","handleClosePaste","input_message_content","handleEmojiSelect","native","getChatId","newChatDraftMessage","draft","getChatDraft","Components_ColumnMiddle_InputBoxHeader","Components_ColumnMiddle_EmojiPickerButton","onKeyUp","multiple","accept","ColumnMiddle_AttachButton","Send_default","Components_Dialog_CreatePollDialog","FooterCommand","onCommand","Button_Button_default","NotificationsControl","onUpdateChatNotificationSettings","isMuted","isChatMuted","onUpdateScopeNotificationSettings","handleSetChatNotifications","debouncedSetChatNotificationSettings","setChatNotificationSettings","muteFor","newNotificationSettings","use_default_mute_for","mute_for","prevChatId","NotificationsCommandControl","Components_ColumnMiddle_FooterCommand","Footer","onUpdateBasicGroup","basicGroupId","hasBasicGroupId","onUpdateSupergroup","supergroupId","isSupergroup","hasSupergroupId","handleJoin","handleDeleteAndExit","remove_from_chat_list","basicGroup","Components_ColumnMiddle_InputBoxControl","is_member","can_send_messages","ColumnMiddle_NotificationsCommandControl","getChatTypingString","typingString","inputTypingManager","values","getPrivateChatTypingString","firstUser","secondUser","second_name","getGroupChatTypingString","getMessageSenderName","getNotificationSettings","getChatMuteFor","getMessageDate","dayStart","day","getDay","weekStart","getChatSubtitleWithoutTyping","member_count","onlineCount","getOnlineMemberCount","getBasicGroupStatus","getSupergroupStatus","isAccentChatSubtitleWithoutTyping","getChatUsername","username","getChatPhoneNumber","isGroupChat","isChannelChat","showSavedMessages","getGroupChatMembers","fallbackValue","getChatFullInfo","getSupergroupId","getPhotoFromChat","getChatShortTitle","can_send_media_messages","canSendMessages","showChatDraft","ChatStatus","onUpdateUserStatus","online","borderSize","iconIndicator","default","overflow","boxSizing","ChatTileControl","onFastUpdatingComplete","showOnline","BookmarkBorder_default","getChatLetters","Components_Tile_ChatStatus","statusRoot","statusIcon","ForwardTargetChat","shortTitle","forward-target-chat-selected","Components_Tile_ChatTileControl","border","markSelected","markUnselected","boxShadow","paper","cyrillicInput","getCyrillicInput","input","output","latinInput","getLatinInput","ForwardDialog","loadContent","promises","getChatsPromise","savedMessagesPromise","chats","savedMessages","getPublicMessageLink","offset_order","offset_chat_id","force","all","chatIds","chat_ids","for_album","publicMessageLink","handleCopyLink","link","copy","enqueueSnackbar","autoHideDuration","getForwardPhotoSize","can_be_forwarded","getInnerText","messageRef","targetChats","targetChatId","disable_notifications","from_background","added_sticker_file_ids","from_chat_id","as_album","handleChangeSelection","div","handleSearchKeyDown","handleSearchKeyUp","searchRef","latinText","cyrillicText","searchResults","hasSearchText","searchText","handleSearchPaste","handleMessageKeyUp","handleMessagePaste","toLocaleLowerCase","setSearchFocus","Components_Tile_ForwardTargetChat","foundChats","aria-describedby","searchList","autoFocus","spacing","unit","dialogContent","withSnackbar","NotificationTimer","clearInterval","setInterval","menuAnchorOrigin","menuTransformOrigin","LeaveChatDialog","getDeleteDialogText","other","ClearHistoryDialog","MainMenuButton","handleButtonClick","handleChatInfo","openChatDetails","handleClearHistory","openClearHistory","handleClearHistoryContinue","handleLeave","openDelete","handleLeaveContinue","getLeaveChatNotification","clientUpdateType","finish","_this2$props","Components_Additional_NotificationTimer","getLeaveChatTitle","clearHistory","canClearHistory","deleteChat","canDeleteChat","leaveChatTitle","aria-owns","aria-haspopup","menuIconButton","MoreVert_default","MainMenuButton_LeaveChatDialog","MainMenuButton_ClearHistoryDialog","UserStatusControl","isAccent","prevUserId","userStatusSubtitle","accent-color","userStatusAccentSubtitle","UserControl","Components_Tile_UserStatusControl","DialogTitleControl","DialogStatusControl","updateSubtitle","find","subtitle","onUpdateUserFullInfo","onUpdateBasicGroupFullInfo","onUpdateSupergroupFullInfo","statusAccentSubtitle","statusSubtitle","ChatControl","onTileSelect","showStatus","Components_Tile_DialogTitleControl","Components_Tile_DialogStatusControl","ChatDetailsHeader","backButton","index_es","leftIconButton","ArrowBack_default","rightIconButton","NotificationsListItem","Notifications_default","NotificationsActive_default","noWrap","ListItemSecondaryAction_default","Switch_default","MoreListItem","handleMoreClick","openMore","handleSendMessage","handleBlock","isGroup","isBlocked","isMember","isChatMember","MoreHoriz_default","ExpandLess_default","ExpandMore_default","Collapse_default","in","unmountOnExit","component","disablePadding","ChatDetails","handleSelectChat","getGroupsInCommon","loadChatContents","hasGroupsInCommon","handleUsernameHint","telegramUrlOption","usernameLink","handlePhoneHint","handleHeaderClick","chatDetailsListRef","handleOpenViewer","setProfileMediaViewerContent","handleOpenChat","offsetHeight","onOpenSharedMedia","onOpenGroupsInCommon","Components_ColumnRight_ChatDetailsHeader","bio","getChatBio","isMe","member","sort","y","Components_Tile_UserControl","handleSelectUser","Components_Tile_ChatControl","AlternateEmail_default","Call_default","ErrorOutline_default","whiteSpace","wordWrap","ColumnRight_NotificationsListItem","ColumnRight_MoreListItem","nested","GroupsInCommonHeader","backIconButton","GroupsInCommon","Components_ColumnRight_GroupsInCommonHeader","SharedMediaHeaderControl","SharedMedia","handleChange","Components_ColumnRight_SharedMediaHeaderControl","Tabs_default","indicatorColor","textColor","scrollable","scrollButtons","fullWidth","Tab_default","label","userChatId","openSharedMedia","openGroupsInCommon","handelOpenSharedMedia","handleCloseSharedMedia","handleOpenGroupsInCommon","handleCloseGroupsInCommon","handleCloseChatDetails","changeChatDetailsVisibility","Components_ColumnRight_SharedMedia","Components_ColumnRight_GroupsInCommon","Components_ColumnRight_ChatDetails","right-column","TopChat","PureComponent","userStatusRoot","RecentlyFoundChat","FoundPublicChat","_classNames","selectedChatId","membersCount","getGroupChatMembersCount","subscribersString","listItemSelected","foundPublicChatSubtitle","FoundMessage","getMessageId","chatSearch","selectedMessageId","senderName","senderFullName","getMessageSenderFullName","tile","accentBackground","accent-background","foundMessageSubtitle","searchCaption","grey","searchCaptionCommand","onClientUpdateSearchText","trimmedText","concatSearchResults","results","j","b","sessionId","localPromise","latinLocalPromise","cyrillicLocalPromise","savedMessagesStrings","globalPromises","globalPromise","globalLatinPromise","globalResults","global","splice","recentlyFound","offset_date","offset_message_id","topPromise","recentlyFoundPromise","category","handleRecentlyFound","handleClearRecentlyFound","handleSelectMessage","addToRecent","keepOpen","onSelectMessage","handleScroll","listRef","onLoadPrevious","getOffset","concatMessages","loading","handleTopChatsScroll","prevPropsChatId","prevPropsText","topChats","Components_Tile_TopChat","recentlyFoundChats","Components_Tile_RecentlyFoundChat","localChats","globalChats","Components_Tile_FoundPublicChat","globalMessages","Components_Tile_FoundMessage","messagesCaption","onScroll","Search_SearchCaption","closeSearchIconButton","ThemePicker","getColor","handleAccentChange","getColorString","red","orange","amber","green","indigo","deepPurple","FormControl_default","formControl","FormLabel_default","RadioGroup_default","FormControlLabel_default","control","redRoot","orangeRoot","amberRoot","greenRoot","blueRoot","indigoRoot","deepPurpleRoot","&$checked","LanguagePicker","languages","language_packs","native_name","isLocalhost","hostname","register","_register","swUrl","origin","registerValidSW","checkValidServiceWorker","registration","serviceWorker","onupdatefound","installingWorker","installing","onstatechange","subscribeNotifications","pushSubscription","endpoint","p256dh_base64url","auth_base64url","pushManager","getSubscription","unsubscribe","subscribe","userVisibleOnly","getKey","device_token","other_user_ids","fetch","headers","ready","unregister","reload","_update","_callee6","_context6","handleMenuOpen","handleLogOut","onLogOut","handleCheckUpdates","handleAppearance","themePicker","handleLanguage","languagePicker","setRef","getAuthorizationState","mainMenuControl","icons_Menu_default","ColumnLeft_ThemePicker","innerRef","ColumnLeft_LanguagePicker","searchIconButton","DialogsHeader","handleDone","handleSearch","onSearch","openSearch","handleKeyUp","searchInput","confirmLogoutDialog","dialogText","ColumnLeft_MainMenuButton","headerIconButton","SpeedDialIcon_default","icons_Search_default","openIcon","DialogContentControl","onClientUpdateClearHistory","contentControl","getLastMessageContent","getLastMessageSenderName","DialogBadgeControl","unreadMessageIcon","is_outgoing","getChatUnreadMessageIcon","unreadCount","getChatUnreadCount","unreadMentionCount","getChatUnreadMentionCount","showUnreadCount","showDraftChat","muteClassName","dialogBadge","DialogMetaControl","getLastMessageDate","DialogControl","isSelected","dialogActive","Components_Tile_DialogMetaControl","Components_Tile_DialogContentControl","Components_Tile_DialogBadgeControl","cursor","& $statusRoot","&:hover","& $statusIcon","DialogsList","onClientUpdateLeaveChat","hiddenChats","loadFirstSlice","onLoadNext","onUpdateConnectionState","newConnectionState","onUpdateChatOrder","reorderChats","newChatIds","offsetOrder","offsetChatId","_args2","finally","shift","replaceChats","appendChats","getConnectionState","orderedChatIds","isDifferentOrder","dialogs","Components_Tile_DialogControl","oldChatIds","UpdatePanel","onClientUpdateNewContentAvailable","newContentAvailable","handleUpdate","handled","maxHeight","Dialogs","onClientUpdateThemeChange","onClientUpdateChatDetailsVisibility","onClientUpdateSearchChat","searchChatId","dialogsList","scrollToTop","visible","onSelectChat","handleSearchTextChange","dialogs-third-column","ColumnLeft_DialogsHeader","onSearchTextChange","Components_ColumnLeft_DialogsList","ColumnLeft_Search_Search","ColumnLeft_UpdatePanel","HeaderCommand","canBeDeletedForAllUsers","can_be_deleted_for_all_users","openDeleteDialog","handleDeleteContinue","handleRevokeChange","handleCloseDelete","handleForward","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","handleReply","_MessageStore$selecte","canBeDeleted","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","_ref9","can_be_deleted_only_for_self","canBeForwarded","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_ref10","canBeReplied","buttonLeft","buttonRight","Checkbox_default","Header","onUpdateChatOnlineMemberCount","onClientUpdateMessageSelected","selectionCount","onUpdateUserChatAction","handleSearchChat","searchChat","localize","Components_ColumnMiddle_HeaderCommand","isAccentSubtitle","isAccentChatSubtitle","chatTypingString","getChatSubtitle","showProgressAnimation","headerStatusAccentTitle","messageSearchIconButton","Components_ColumnMiddle_MainMenuButton","moreIconButton","VolumeButton","prevValue","buttonOver","popupOver","onClientUpdateMediaVolume","prevVolume","handlePopoverOpen","handlePopoverClose","handleMouseEnter","openPopover","handleMouseLeave","handlePopupMouseLeave","handleVoiceClick","nextValue","handleDragStart","handleDragEnd","getVolumeIcon","VolumeMute_default","VolumeDown_default","VolumeUp_default","onMouseEnter","onMouseLeave","marginTop","borderWidth","container","onDragStart","onDragEnd","RepeatButton","onClientUpdateMediaRepeat","handleRepeat","nextRepeat","getIcon","Repeat_default","RepeatOne_default","ShuffleButton","onClientUpdateMediaShuffle","handleShuffle","Shuffle_default","PlaybackRateButton","onClientUpdateMediaPlaybackRate","handlePlaybackRate","nextPlaybackRate","Time","Playlist","scrollToActive","itemRefMap","ReactDOM","offsetTop","onClientUpdateMediaTitleMouseOver","over","playlistMouseOver","tryOpen","tryClose","onClientUpdateMediaPlaylistLoading","_assertThisInitialize2","onClientUpdateMediaPlaylist","_assertThisInitialize3","openTimeout","titleMouseOver","slice","reverse","HeaderPlayer","playingMediaViewer","onClientUpdateMediaViewerEnded","onClientUpdateMediaViewerPause","onClientUpdateMediaViewerPlay","startPlayingFile","getMediaSrc","onClientUpdateMediaBlob","onClientUpdateMediaClose","paused","handlePrev","handlePlay","handleNext","handleEnded","handleVideoEnded","handleTimeUpdate","captureStream","mozCaptureStream","handleVideoPlay","handleVideoPause","hasPrev","hasNext","handleTitleMouseEnter","handleTitleMouseLeave","handleTitleClick","dateHint","showDate","showPlaybackRate","showRepeat","showShuffle","controls","onPlay","onPause","onTimeUpdate","onEnded","SkipPrevious_default","SkipNext_default","Components_Player_Playlist","Player_Time","Components_Player_VolumeButton","Player_PlaybackRateButton","Player_RepeatButton","Player_ShuffleButton","unreadSeparator","chatPhotoStyle","ServiceMessage","onClientUpdateMessageHighlighted","highlighted","handleAnimationEnd","sendingState","showUnreadSeparator","messageClassName","messageHighlighted","onAnimationEnd","Message_UnreadSeparator","@keyframes highlighted","Forward","arrowRef","handleArrowRef","openForward","forwardInfo","sender_name","author_signature","getForwardTitle","tooltip","isForwardOriginHidden","arrow","forwardColor","Tooltip_default","popper","arrowPopper","PopperProps","popperOptions","modifiers","placement","&[x-placement*=\"bottom\"] $arrow","&::before","&[x-placement*=\"top\"] $arrow","marginBottom","&[x-placement*=\"right\"] $arrow","marginLeft","&[x-placement*=\"left\"] $arrow","marginRight","MessageStatus","handleUpdateMessageSend","handleUpdateChatReadOutbox","unread","payload","newMessageId","stateClassName","WebPage","displaySmallSize","site_name","smallPhoto","float","Message","onClientUpdateClearSelection","onUpdateMessageEdited","onUpdateMessageViews","onUpdateMessageContent","handleSelection","mouseDown","selectMessage","handleDateClick","_this$props7","_this$props8","handleMouseDown","handleMouseOver","handleMouseOut","mouseOut","_this$props10","_this$props11","webPage","getWebPage","media","getUnread","senderUserId","message-selected","messageSelected","onMouseOver","onMouseOut","Components_Message_MessageStatus","Components_Message_Forward","Message_Media_WebPage","messageAuthorColor","FilesDropTarget","onClientUpdateDragging","handleDragEnter","handleDrop","dataTransfer","handleDragLeave","onDragEnter","onDragLeave","onDrop","ScrollBehaviorEnum","SCROLL_TO_BOTTOM","SCROLL_TO_UNREAD","SCROLL_TO_MESSAGE","KEEP_SCROLL_POSITION","MessagesList","prevOffsetHeight","prevScrollTop","playerOpened","onClientUpdateMediaEnding","udpate","onClientUpdateSelection","selectionActive","scrollBehavior","onUpdateChatLastMessage","onUpdateMessageSendSucceeded","handleSendSucceeded","replaceMessage","viewMessages","onUpdateNewMessage","completed","insertAfter","onUpdateDeleteMessages","is_permanent","deleteHistory","updateItemsInView","scrollContainerRef","itemsContainerRef","scrollContainer","itemsContainer","children","child","itemsInView","itemsRef","_message$props","loadIncompleteHistory","MAX_ITERATIONS","incomplete","fromMessageId","loadMigratedHistory","onLoadMigratedHistory","insertBefore","basicGroupChat","upgraded_from_basic_group_id","suppressHandleScroll","suppressHandleScrollOnSelectChat","handleScrollBehavior","scrollToBottom","scrollToMessage","scrolled","itemComponent","itemsMap","scrollToStart","_callee5","_context5","handleListDragEnter","canSendFiles","prevMessageId","separatorMessageId","previous","later","leading","remaining","trailing","throttle","previousChat","MAX_VALUE","_this$getMessagePhoto","getMessagePhoto","_this$getMessagePhoto2","_this$getMessageStick","getMessageSticker","_this$getMessageStick2","oldMessageId","Components_Message_ServiceMessage","Components_Message_Message","showTitle","messages-list-selection-active","Components_ColumnMiddle_FilesDropTarget","ChatInfoDialog","handleClientUpdateDialogChatId","containerRoot","paperRoot","Components_ColumnRight_ChatInfo","chatInfoRoot","alignItems","StickerStore","sticker_set_ids","_this$stickerSet","is_installed","ShareStickerSetButton","getStickersLink","handleShare","Link_default","Share_default","StickerSetDialog","handleUpdateInstalledStickerSets","handleClientUpdateStickerSet","stickers","loadStickerSetContent","emojis","dialogTitleRoot","Dialog_ShareStickerSetButton","shareButtonRoot","flexDirection","flexWrap","flexShrink","DialogDetails","onUpdateChatDetailsVisibility","messagesList","selectedCount","dialog-details-third-column","Components_Player_HeaderPlayer","Components_ColumnMiddle_Header","Components_ColumnMiddle_MessagesList","Components_ColumnMiddle_Footer","Components_Dialog_StickerSetDialog","Components_Dialog_ChatInfoDialog","SignInControl","handleUpdateOption","handleSuggestedLanguagePackId","languagePackId","suggestedLanguage","phone","openConfirmation","code","handleKeyPress","onPhoneEnter","errorString","handleChangeLanguage","TextField_default","onKeyPress","defaultValue","FormHelperText_default","continueAtLanguage","core_Link_default","fontWeight","textAlign","transform","ConfirmCodeControl","handleBack","isValid","onChangePhone","codeLength","codeInfo","getPhoneNumber","getCodeLength","getSubtitle","FormHelperText_FormHelperText_default","PasswordControl","handleMouseDownPassword","handleClickShowPassword","showPassword","password","passwordHint","textField","htmlFor","Input_default","endAdornment","VisibilityOff_default","Visibility_default","withoutLabel","flexBasis","AuthErrorDialog","handleAuthError","AuthFormControl","handlePhoneEnter","Components_Auth_SignInControl","Components_Auth_ConfirmCodeControl","termsOfService","terms_of_service","code_info","Components_Auth_PasswordControl","password_hint","hasRecoveryEmailAddress","has_recovery_email_address","recoveryEmailAddressPattern","recovery_email_address_pattern","authorizationFormContent","Auth_AuthErrorDialog","MediaViewerControl","tileControl","Lottie","handleClickToPause","anim","isPaused","eventListeners","autoplay","animationData","rendererSettings","segments","renderer","lottie","loadAnimation","registerEvents","path","deRegisterEvents","destroy","isStopped","playSegments","setSpeed","setDirection","speed","direction","eventListener","eventName","removeEventListener","_this4","ariaRole","ariaLabel","isClickToPauseDisabled","initial","lottieStyles","outline","onClickHandler","c","role","tabIndex","MediaCaption","MediaViewerContent","onClientUpdateDocumentBlob","updateAnimationData","_getMediaFile","_getMediaFile2","getAnimationData","fileReader","onload","parse","onabort","readAsText","_getMediaFile3","_getMediaFile4","onClientUpdateMediaThumbnailBlob","_getMediaPreviewFile","_getMediaPreviewFile2","thumbnailWidth","thumbnailHeight","_getMediaFile5","_getMediaFile6","handleContentClick","changeSpeed","lottieRef","_getMediaFile7","_getMediaFile8","_getMediaPreviewFile3","_getMediaPreviewFile4","isPlaying","thumbnailBlob","isVideo","isAnimation","isLottie","videoWidth","videoHeight","onVolumeChange","defaultOptions","preserveAspectRatio","Components_Viewer_Lottie","Components_Viewer_MediaCaption","_getMediaFile9","_getMediaFile10","_getMediaPreviewFile5","_getMediaPreviewFile6","MediaViewerButton","grow","MediaViewerFooterText","MediaViewerFooterButton","iconStyle","MediaViewerDownloadButton","saveDisabled","prevPropsFileId","Components_Viewer_MediaViewerFooterButton","GetApp_default","forwardIconStyle","navigationIconStyle","MediaViewer","deleteConfirmationOpened","handlePrevious","currentMessageId","first","last","firstSliceLoaded","inserted","hasNextMedia","hasPreviousMedia","oldHistory","filterMap","currentId","deletedCount","getFilter","loadHistory","_filter","maxCount","_loop","delegateYield","cancelPreloadMediaViewerContent","saveAnimation","saveDocument","saveVideo","savePhoto","handleSave","handleDialogOpen","loadMedia","loadPrevious","loadNext","nextId","handleDialogClose","deleteForAll","handleChangeDeleteForAll","handleInvertColors","nextBackground","handleChangeSpeed","contentRef","nextSpeed","hasPrevousMedia","_this$state6","deleteConfirmationContent","deleteConfirmation","Components_Viewer_MediaViewerButton","NavigateBefore_default","Components_Viewer_MediaViewerContent","NavigateNext_default","Components_Tile_MediaViewerControl","Components_Viewer_MediaViewerFooterText","SlowMotionVideo_default","InvertColors_default","Viewer_MediaViewerDownloadButton","Delete_default","ProfileMediaViewerContent","prevPhoto","ProfileMediaViewerControl","deleteIconStyle","ProfileMediaViewer","currentIndex","getReadWriteStore","prevFileId","currentFileId","inHistory","Viewer_ProfileMediaViewerContent","Tile_ProfileMediaViewerControl","AppInactiveControl","handleReload","TelegramApp","onClientUpdateOpenChat","onClientUpdateOpenUser","checkServiceWorker","cookieEnabled","registerServiceWorker","onClientUpdateForward","onUpdateFatalError","fatalError","onClientUpdateAppInactive","inactive","currentDialogChatId","dialogDetailsRef","handleChangePhone","handleDragOver","handleRefresh","handleDestroy","page","page-third-column","Components_ColumnLeft_Dialogs","onClearCache","clearCache","Components_ColumnMiddle_DialogDetails","src_Components_Footer","Components_Additional_AppInactiveControl","Components_Auth_AuthFormControl","onDragOver","Components_Viewer_MediaViewer","Components_Viewer_ProfileMediaViewer","Components_Dialog_ForwardDialog","keyMap","openPinnedChat","pinnedIndex","altKey","ctrlKey","onblur","onfocus","pushState","onpopstate","go","@global","render","react_router_dom","react_router","getElementById"],"mappings":"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","file":"static/js/main.b0efb40f.chunk.js","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\n\nexport function withSaveRef() {\n    return Component => {\n        return React.forwardRef((props, ref) => <Component {...props} forwardedRef={ref} />);\n    };\n}\n\nexport function withRestoreRef() {\n    return Component => {\n        return class extends React.Component {\n            render() {\n                const { forwardedRef, ...rest } = this.props;\n\n                return <Component {...rest} ref={forwardedRef} />;\n            }\n        };\n    };\n}\n\nexport function getDisplayName(WrappedComponent) {\n    return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n}\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nexport const ANIMATION_FRAME_DURATION_MS = 40;\nexport const ANIMATION_DURATION_200MS = 200;\nexport const ANIMATION_DURATION_300MS = 300;\nexport const CHAT_SLICE_LIMIT = 25;\nexport const LOCATION_HEIGHT = 150;\nexport const LOCATION_SCALE = 2;\nexport const LOCATION_WIDTH = 300;\nexport const LOCATION_ZOOM = 16;\nexport const MEDIA_SLICE_LIMIT = 20;\nexport const MESSAGE_SLICE_LIMIT = 20;\nexport const MUTED_VALUE_MAX = 2147483647; // int32.max = 2^32 - 1\nexport const MUTED_VALUE_MIN = 0;\nexport const NOTIFICATIONS_DEBOUNCE_DELAY_MS = 500;\nexport const PHOTO_BIG_SIZE = 1280;\nexport const PHOTO_DISPLAY_SIZE = 260;\nexport const PHOTO_DISPLAY_SMALL_SIZE = 65;\nexport const PHOTO_SIZE = 320;\nexport const PHOTO_THUMBNAIL_SIZE = 90;\nexport const POLL_QUESTION_LENGTH = 255;\nexport const POLL_QUESTION_HINT_LENGTH = POLL_QUESTION_LENGTH - 79;\nexport const POLL_QUESTION_MAX_LENGTH = POLL_QUESTION_LENGTH + 99;\nexport const POLL_OPTION_LENGTH = 100;\nexport const POLL_OPTION_HINT_LENGTH = POLL_OPTION_LENGTH - 29;\nexport const POLL_OPTION_MAX_LENGTH = POLL_OPTION_LENGTH + 99;\nexport const POLL_OPTIONS_MAX_COUNT = 10;\nexport const SERVICE_NOTIFICATIONS_USER_ID = 777000;\nexport const STICKER_DISPLAY_SIZE = 192;\nexport const STICKER_SMALL_DISPLAY_SIZE = 64;\nexport const PROFILE_PHOTO_BIG_SIZE = 640;\nexport const PROFILE_PHOTO_SMALL_SIZE = 160;\nexport const TYPING_INPUT_INTERVAL_S = 8;\nexport const TYPING_OUTPUT_INTERVAL_S = 8;\nexport const VERBOSITY_JS_MAX = 20;\nexport const VERBOSITY_JS_MIN = 0;\nexport const VERBOSITY_MAX = 20;\nexport const VERBOSITY_MIN = 0;\nexport const USERNAME_LENGTH_MIN = 5;\nexport const MAX_SNACK = 10;\nexport const NOTIFICATION_AUTO_HIDE_DURATION_MS = 5000;\nexport const THUMBNAIL_BLURRED_SIZE = 320;\nexport const PRELOAD_AUDIO_SIZE = 200 * 1024; //10 * 1024 * 1024;\nexport const PRELOAD_ANIMATION_SIZE = 200 * 1024; //10 * 1024 * 1024;\nexport const PRELOAD_DOCUMENT_SIZE = 200 * 1024;\nexport const PRELOAD_STICKER_SIZE = 10 * 200 * 1024;\nexport const PRELOAD_VOICENOTE_SIZE = 200 * 1024; //10 * 1024 * 1024;\nexport const PRELOAD_VIDEO_SIZE = 10 * 1024 * 1024;\nexport const PRELOAD_VIDEONOTE_SIZE = 200 * 1024; //10 * 1024 * 1024;\nexport const THUMBNAIL_PRIORITY = 32;\nexport const FILE_PRIORITY = 1;\nexport const FIRST_START_OPTIMIZATIONS = true;\nexport const PLAYER_VOLUME_NORMAL = 0.25;\nexport const PLAYER_STARTTIME = 0.0;\nexport const PLAYER_PLAYBACKRATE_NORMAL = 1.0;\nexport const PLAYER_PLAYBACKRATE_FAST = 1.75;\nexport const PLAYER_PROGRESS_TIMEOUT_MS = 250;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { formatNumber } from 'libphonenumber-js';\nimport { PHOTO_SIZE, PHOTO_THUMBNAIL_SIZE } from '../Constants';\n\nfunction getOSName() {\n    let OSName = 'Unknown';\n    if (window.navigator.userAgent.indexOf('Windows NT 10.0') != -1) OSName = 'Windows 10';\n    if (window.navigator.userAgent.indexOf('Windows NT 6.2') != -1) OSName = 'Windows 8';\n    if (window.navigator.userAgent.indexOf('Windows NT 6.1') != -1) OSName = 'Windows 7';\n    if (window.navigator.userAgent.indexOf('Windows NT 6.0') != -1) OSName = 'Windows Vista';\n    if (window.navigator.userAgent.indexOf('Windows NT 5.1') != -1) OSName = 'Windows XP';\n    if (window.navigator.userAgent.indexOf('Windows NT 5.0') != -1) OSName = 'Windows 2000';\n    if (window.navigator.userAgent.indexOf('Mac') != -1) OSName = 'Mac/iOS';\n    if (window.navigator.userAgent.indexOf('X11') != -1) OSName = 'UNIX';\n    if (window.navigator.userAgent.indexOf('Linux') != -1) OSName = 'Linux';\n\n    return OSName;\n}\n\nfunction getBrowser() {\n    let browser_name = '';\n    let isIE = /*@cc_on!@*/ false || !!document.documentMode;\n    let isEdge = !isIE && !!window.StyleMedia;\n    if (navigator.userAgent.indexOf('Chrome') != -1 && !isEdge) {\n        browser_name = 'Chrome';\n    } else if (navigator.userAgent.indexOf('Safari') != -1 && !isEdge) {\n        browser_name = 'Safari';\n    } else if (navigator.userAgent.indexOf('Firefox') != -1) {\n        browser_name = 'Firefox';\n    } else if (navigator.userAgent.indexOf('MSIE') != -1 || !!document.documentMode == true) {\n        //IF IE > 10\n        browser_name = 'IE';\n    } else if (isEdge) {\n        browser_name = 'Edge';\n    } else {\n        browser_name = 'Unknown';\n    }\n\n    return browser_name;\n}\n\nfunction isValidPhoneNumber(phoneNumber) {\n    if (!phoneNumber) return false;\n\n    let isBad = !phoneNumber.match(/^[\\d\\-+\\s]+$/);\n    if (!isBad) {\n        phoneNumber = phoneNumber.replace(/\\D/g, '');\n        if (phoneNumber.length < 7) {\n            isBad = true;\n        }\n    }\n\n    return !isBad;\n}\n\nfunction stringToBoolean(string) {\n    switch (string.toLowerCase().trim()) {\n        case 'true':\n        case 'yes':\n        case '1':\n            return true;\n        case 'false':\n        case 'no':\n        case '0':\n        case null:\n            return false;\n        default:\n            return Boolean(string);\n    }\n}\n\nfunction orderCompare(order1, order2) {\n    let diff = order1.length - order2.length;\n    if (diff !== 0) return diff < 0 ? -1 : 1;\n    if (order1 === order2) return 0;\n\n    return order1 > order2 ? 1 : -1;\n}\n\nfunction getPhotoThumbnailSize(sizes) {\n    return getSize(sizes, PHOTO_THUMBNAIL_SIZE);\n}\n\nfunction getPhotoSize(sizes) {\n    return getSize(sizes, PHOTO_SIZE);\n}\n\nfunction getSize(sizes, dimension) {\n    if (!sizes) return null;\n    if (sizes.length === 0) return null;\n    if (dimension === 0) return null;\n\n    // let iSize = sizes[2];//.find(x => x.type === 'i');\n    // if (iSize){\n    //     return iSize;\n    // }\n\n    let useWidth = sizes[0].width >= sizes[0].height;\n    let diff = Math.abs(dimension - (useWidth ? sizes[0].width : sizes[0].height));\n    let index = 0;\n    for (let i = 1; i < sizes.length; i++) {\n        if (sizes[i].type === 'i' && !sizes[i].photo.local.is_downloading_completed) {\n            continue;\n        }\n\n        let currDiff = Math.abs(dimension - (useWidth ? sizes[i].width : sizes[i].height));\n        if (currDiff < diff) {\n            index = i;\n            currDiff = diff;\n        }\n    }\n\n    return sizes[index];\n}\n\nfunction getFitSize(size, max, increaseToMax = true) {\n    if (!size) return { width: 0, height: 0 };\n\n    if (!increaseToMax) {\n        if (size.width < max && size.height < max) {\n            return size;\n        }\n    }\n\n    if (size.width > size.height) {\n        return { width: max, height: Math.floor((size.height * max) / size.width) };\n    }\n\n    return { width: Math.floor((size.width * max) / size.height), height: max };\n}\n\nfunction itemsInView(scrollContainerRef, itemsContainerRef) {\n    let scrollContainer = scrollContainerRef.current;\n    let itemsContainer = itemsContainerRef ? itemsContainerRef.current : scrollContainer;\n\n    const items = [];\n    for (let i = 0; i < itemsContainer.children.length; i++) {\n        let child = itemsContainer.children[i];\n        if (\n            child.offsetTop + child.offsetHeight >= scrollContainer.scrollTop &&\n            child.offsetTop <= scrollContainer.scrollTop + scrollContainer.offsetHeight\n        ) {\n            items.push(i);\n        }\n    }\n\n    return items;\n}\n\n// Returns a function, that, when invoked, will only be triggered at most once\n// during a given window of time. Normally, the throttled function will run\n// as much as it can, without ever going more than once per `wait` duration;\n// but if you'd like to disable the execution on the leading edge, pass\n// `{leading: false}`. To disable execution on the trailing edge, ditto.\nfunction throttle(func, wait, options) {\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    if (!options) options = {};\n    var later = function() {\n        previous = options.leading === false ? 0 : Date.now();\n        timeout = null;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n    };\n    return function() {\n        var now = Date.now();\n        if (!previous && options.leading === false) previous = now;\n        var remaining = wait - (now - previous);\n        context = this;\n        args = arguments;\n        if (remaining <= 0 || remaining > wait) {\n            if (timeout) {\n                clearTimeout(timeout);\n                timeout = null;\n            }\n            previous = now;\n            result = func.apply(context, args);\n            if (!timeout) context = args = null;\n        } else if (!timeout && options.trailing !== false) {\n            timeout = setTimeout(later, remaining);\n        }\n        return result;\n    };\n}\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nfunction debounce(func, wait, immediate) {\n    var timeout;\n    return function() {\n        var context = this,\n            args = arguments;\n        var later = function() {\n            timeout = null;\n            if (!immediate) {\n                func.apply(context, args);\n            }\n        };\n        var callNow = immediate && !timeout;\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (callNow) {\n            func.apply(context, args);\n        }\n    };\n}\n\nfunction getFirstLetter(str) {\n    if (!str) return '';\n    for (let i = 0; i < str.length; i++) {\n        if (str[i].toUpperCase() !== str[i].toLowerCase()) {\n            return str[i];\n        } else if (str[i] >= '0' && str[i] <= '9') {\n            return str[i];\n        }\n    }\n\n    return '';\n}\n\nfunction getLetters(title) {\n    if (!title) return null;\n    if (title.length === 0) return null;\n\n    let split = title.split(' ');\n    if (split.length > 1) {\n        return getFirstLetter(split[0]) + getFirstLetter(split[1]);\n    }\n\n    return null;\n}\n\nfunction readImageSize(file, callback) {\n    let useBlob = false;\n    // Create a new FileReader instance\n    // https://developer.mozilla.org/en/docs/Web/API/FileReader\n    var reader = new FileReader();\n\n    // Once a file is successfully readed:\n    reader.addEventListener('load', function() {\n        // At this point `reader.result` contains already the Base64 Data-URL\n        // and we've could immediately show an image using\n        // `elPreview.insertAdjacentHTML(\"beforeend\", \"<img src='\"+ reader.result +\"'>\");`\n        // But we want to get that image's width and height px values!\n        // Since the File Object does not hold the size of an image\n        // we need to create a new image and assign it's src, so when\n        // the image is loaded we can calculate it's width and height:\n        var image = new Image();\n        image.addEventListener('load', function() {\n            // Concatenate our HTML image info\n            // var imageInfo = file.name    +' '+ // get the value of `name` from the `file` Obj\n            //     image.width  +'×'+ // But get the width from our `image`\n            //     image.height +' '+\n            //     file.type    +' '+\n            //     Math.round(file.size/1024) +'KB';\n\n            //alert(imageInfo);\n            file.photoWidth = image.width;\n            file.photoHeight = image.height;\n            // Finally append our created image and the HTML info string to our `#preview`\n            //elPreview.appendChild( this );\n            //elPreview.insertAdjacentHTML(\"beforeend\", imageInfo +'<br>');\n\n            // If we set the variable `useBlob` to true:\n            // (Data-URLs can end up being really large\n            // `src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAA...........etc`\n            // Blobs are usually faster and the image src will hold a shorter blob name\n            // src=\"blob:http%3A//example.com/2a303acf-c34c-4d0a-85d4-2136eef7d723\"\n            if (useBlob) {\n                // Free some memory for optimal performance\n                window.URL.revokeObjectURL(image.src);\n            }\n\n            callback(file);\n        });\n\n        image.src = useBlob ? window.URL.createObjectURL(file) : reader.result;\n    });\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsDataURL\n    reader.readAsDataURL(file);\n}\n\nfunction formatPhoneNumber(number) {\n    const unformattedNumber = number && number.startsWith('+') ? number : '+' + number;\n    const formattedNumber = formatNumber(unformattedNumber, 'International');\n    return formattedNumber || unformattedNumber;\n}\n\n/**\n * use this to make a Base64 encoded string URL friendly,\n * i.e. '+' and '/' are replaced with '-' and '_' also any trailing '='\n * characters are removed\n *\n * @param {String} str the encoded string\n * @returns {String} the URL friendly encoded String\n */\nfunction Base64EncodeUrl(str) {\n    return str\n        .replace(/\\+/g, '-')\n        .replace(/\\//g, '_')\n        .replace(/\\=+$/, '');\n}\n\n/**\n * Use this to recreate a Base64 encoded string that was made URL friendly\n * using Base64EncodeurlFriendly.\n * '-' and '_' are replaced with '+' and '/' and also it is padded with '+'\n *\n * @param {String} str the encoded string\n * @returns {String} the URL friendly encoded String\n */\nfunction Base64DecodeUrl(str) {\n    str = (str + '===').slice(0, str.length + (str.length % 4));\n    return str.replace(/-/g, '+').replace(/_/g, '/');\n}\n\nfunction arrayBufferToBase64(buffer) {\n    var binary = '';\n    var bytes = new Uint8Array(buffer);\n    var len = bytes.byteLength;\n    for (var i = 0; i < len; i++) {\n        binary += String.fromCharCode(bytes[i]);\n    }\n    return Base64EncodeUrl(window.btoa(binary));\n}\n\nfunction isAuthorizationReady(state) {\n    if (!state) return false;\n\n    return state['@type'] === 'authorizationStateReady';\n}\n\nfunction between(item, first, last) {\n    return item > first && item < last;\n}\n\nfunction getDurationString(secondsTotal) {\n    let hours = Math.floor(secondsTotal / 3600);\n    let minutes = Math.floor((secondsTotal - hours * 3600) / 60);\n    let seconds = secondsTotal - hours * 3600 - minutes * 60;\n\n    if (hours > 0 && minutes < 10) {\n        minutes = '0' + minutes;\n    }\n    if (seconds < 10) {\n        seconds = '0' + seconds;\n    }\n\n    return (hours > 0 ? hours + ':' : '') + minutes + ':' + seconds;\n}\n\nfunction getRandomInt(min, max) {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive\n}\n\nexport {\n    getBrowser,\n    getOSName,\n    isValidPhoneNumber,\n    stringToBoolean,\n    orderCompare,\n    getSize,\n    getPhotoThumbnailSize,\n    getPhotoSize,\n    getFitSize,\n    itemsInView,\n    throttle,\n    debounce,\n    getLetters,\n    readImageSize,\n    formatPhoneNumber,\n    arrayBufferToBase64,\n    isAuthorizationReady,\n    between,\n    getDurationString,\n    getRandomInt\n};\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport packageJson from '../../package.json';\nimport { stringToBoolean, getBrowser, getOSName } from '../Utils/Common';\nimport { VERBOSITY_JS_MAX, VERBOSITY_JS_MIN, VERBOSITY_MAX, VERBOSITY_MIN } from '../Constants';\nimport TdClient from '@arseny30/tdweb/dist/tdweb';\n\nclass TdLibController extends EventEmitter {\n    constructor() {\n        super();\n\n        this.parameters = {\n            useTestDC: false,\n            readOnly: false,\n            verbosity: 1,\n            jsVerbosity: 3,\n            fastUpdating: true,\n            useDatabase: false,\n            mode: 'wasm'\n        };\n\n        this.disableLog = false;\n\n        this.setMaxListeners(Infinity);\n    }\n\n    init = location => {\n        this.setParameters(location);\n\n        const { verbosity, jsVerbosity, useTestDC, readOnly, fastUpdating, useDatabase, mode } = this.parameters;\n\n        let options = {\n            logVerbosityLevel: verbosity,\n            jsLogVerbosityLevel: jsVerbosity,\n            mode: mode, // 'wasm-streaming'/'wasm'/'asmjs'\n            prefix: useTestDC ? 'tdlib_test' : 'tdlib',\n            readOnly: readOnly,\n            isBackground: false,\n            useDatabase: useDatabase\n            // onUpdate: update => this.emit('update', update)\n        };\n\n        console.log(\n            `[TdLibController] (fast_updating=${fastUpdating}) Start client with params=${JSON.stringify(options)}`\n        );\n\n        this.client = new TdClient(options);\n        this.client.onUpdate = update => {\n            if (!this.disableLog) {\n                if (update['@type'] === 'updateFile') {\n                    console.log('receive updateFile file_id=' + update.file.id, update);\n                } else {\n                    console.log('receive update', update);\n                }\n            }\n            this.emit('update', update);\n        };\n    };\n\n    clientUpdate = update => {\n        if (!this.disableLog) {\n            console.log('clientUpdate', update);\n        }\n        this.emit('clientUpdate', update);\n    };\n\n    setParameters = location => {\n        if (!location) return;\n\n        const { search } = location;\n        if (!search) return;\n\n        const params = new URLSearchParams(search.toLowerCase());\n\n        if (params.has('test')) {\n            this.parameters.useTestDC = stringToBoolean(params.get('test'));\n        }\n\n        if (params.has('verbosity')) {\n            const verbosity = parseInt(params.get('verbosity'), 10);\n            if (verbosity >= VERBOSITY_MIN && verbosity <= VERBOSITY_MAX) {\n                this.parameters.verbosity = verbosity;\n            }\n        }\n\n        if (params.has('jsverbosity')) {\n            const jsVerbosity = parseInt(params.get('jsverbosity'), 10);\n            if (jsVerbosity >= VERBOSITY_JS_MIN && jsVerbosity <= VERBOSITY_JS_MAX) {\n                this.parameters.jsVerbosity = jsVerbosity;\n            }\n        }\n\n        if (params.has('tag') && params.has('tagverbosity')) {\n            const tag = params\n                .get('tag')\n                .replace('[', '')\n                .replace(']', '')\n                .split(',');\n            const tagVerbosity = params\n                .get('tagverbosity')\n                .replace('[', '')\n                .replace(']', '')\n                .split(',');\n            if (tag && tagVerbosity && tag.length === tagVerbosity.length) {\n                this.parameters.tag = tag;\n                this.parameters.tagVerbosity = tagVerbosity;\n            }\n        }\n\n        if (params.has('readonly')) {\n            this.parameters.readOnly = stringToBoolean(params.get('readonly'));\n        }\n\n        if (params.has('fastupdating')) {\n            this.parameters.fastUpdating = stringToBoolean(params.get('fastupdating'));\n        }\n\n        if (params.has('db')) {\n            this.parameters.useDatabase = stringToBoolean(params.get('db'));\n        }\n        if (params.has('mode')) {\n            this.parameters.mode = params.get('mode');\n        }\n    };\n\n    send = request => {\n        if (!this.disableLog) {\n            console.log('send', request);\n            return this.client.send(request).then(result => {\n                console.log('receive', result);\n                return result;\n            });\n        } else {\n            return this.client.send(request);\n        }\n    };\n\n    sendTdParameters = async () => {\n        const apiId = process.env.REACT_APP_TELEGRAM_API_ID;\n        const apiHash = process.env.REACT_APP_TELEGRAM_API_HASH;\n\n        if (!apiId || !apiHash) {\n            if (\n                window.confirm(\n                    'API id is missing!\\n' +\n                        'In order to obtain an API id and develop your own application ' +\n                        'using the Telegram API please visit https://core.telegram.org/api/obtaining_api_id'\n                )\n            ) {\n                window.location.href = 'https://core.telegram.org/api/obtaining_api_id';\n            }\n        }\n\n        const { useTestDC } = this.parameters;\n        const { version } = packageJson;\n\n        this.send({\n            '@type': 'setTdlibParameters',\n            parameters: {\n                '@type': 'tdParameters',\n                use_test_dc: useTestDC,\n                api_id: apiId,\n                api_hash: apiHash,\n                system_language_code: navigator.language || 'en',\n                device_model: getBrowser(),\n                system_version: getOSName(),\n                application_version: version,\n                use_secret_chats: false,\n                use_message_database: true,\n                use_file_database: false,\n                database_directory: '/db',\n                files_directory: '/'\n            }\n            // ,\n            // extra: {\n            //     a: ['a', 'b'],\n            //     b: 123\n            // }\n        });\n\n        if (this.parameters.tag && this.parameters.tagVerbosity) {\n            for (let i = 0; i < this.parameters.tag.length; i++) {\n                let tag = this.parameters.tag[i];\n                let tagVerbosity = this.parameters.tagVerbosity[i];\n\n                this.send({\n                    '@type': 'setLogTagVerbosityLevel',\n                    tag: tag,\n                    new_verbosity_level: tagVerbosity\n                });\n            }\n        }\n    };\n\n    logOut() {\n        this.send({ '@type': 'logOut' }).catch(error => {\n            this.emit('tdlib_auth_error', error);\n        });\n    }\n\n    setChatId = (chatId, messageId = null) => {\n        const update = {\n            '@type': 'clientUpdateChatId',\n            chatId: chatId,\n            messageId: messageId\n        };\n\n        this.clientUpdate(update);\n    };\n\n    setMediaViewerContent(content) {\n        this.clientUpdate({\n            '@type': 'clientUpdateMediaViewerContent',\n            content: content\n        });\n    }\n}\n\nconst controller = new TdLibController();\n\nexport default controller;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport Cookies from 'universal-cookie';\nimport i18n from 'i18next';\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport LocalStorageBackend from 'i18next-localstorage-backend';\nimport { initReactI18next } from 'react-i18next';\nimport TdLibController from '../Controllers/TdLibController';\n\nconst defaultLanguage = 'en';\nconst defaultNamespace = 'translation';\nconst cookies = new Cookies();\nconst language = cookies.get('i18next') || defaultLanguage;\n\n// const detection = {\n//     // order and from where user language should be detected\n//     order: ['querystring', 'cookie', 'localStorage', 'navigator', 'htmlTag', 'path', 'subdomain'],\n//\n//     // keys or params to lookup language from\n//     lookupQuerystring: 'lng',\n//     lookupCookie: 'i18next',\n//     lookupLocalStorage: 'i18nextLng',\n//     lookupFromPathIndex: 0,\n//     lookupFromSubdomainIndex: 0,\n//\n//     // cache user language on\n//     caches: ['localStorage', 'cookie']\n// };\n\ni18n.use(initReactI18next) //.use(LanguageDetector) // passes i18n down to react-i18next\n    .init({\n        //detection: detection,\n        ns: [defaultNamespace, 'local'],\n        defaultNS: defaultNamespace,\n        fallbackNS: ['local', 'emoji'],\n        resources: {\n            en: {\n                local: {\n                    DeletedMessage: 'Deleted message',\n                    YourPhone: 'Your Phone',\n                    StartText: 'Please confirm your country code and enter your phone number.',\n                    Next: 'Next',\n                    InvalidPhoneNumber: 'Invalid phone number. Please check the number and try again.',\n                    More: 'More',\n                    SendMessage: 'Send Message',\n                    ChatInfo: 'Chat Info',\n                    ChannelInfo: 'Channel Info',\n                },\n                emoji: {\n                    Search: 'Search',\n                    NotEmojiFound: 'No Emoji Found',\n                    ChooseDefaultSkinTone: 'Choose your default skin tone',\n                    SearchResults: 'Search Results',\n                    Recent: 'Frequently Used',\n                    SmileysPeople: 'Smileys & People',\n                    AnimalsNature: 'Animals & Nature',\n                    FoodDrink: 'Food & Drink',\n                    Activity: 'Activity',\n                    TravelPlaces: 'Travel & Places',\n                    Objects: 'Objects',\n                    Symbols: 'Symbols',\n                    Flags: 'Flags',\n                    Custom: 'Custom'\n                },\n                translation: {\n                    AppName: 'Telegram',\n                    Loading: 'Loading',\n                    Connecting: 'Connecting',\n                    Updating: 'Updating'\n                }\n            },\n            ru: {\n                local: {\n                    DeletedMessage: 'Удаленное сообщение',\n                    YourPhone: 'Ваш телефон',\n                    StartText: 'Пожалуйста, укажите код страны и свой номер телефона.',\n                    Next: 'Далее',\n                    InvalidPhoneNumber:\n                        'Некорректный номер телефона. Пожалуйста, проверьте номер и попробуйте ещё раз.',\n                    More: 'Ещё',\n                    SendMessage: 'Отправить сообщение',\n                    ChatInfo: 'Информация о чате',\n                    ChannelInfo: 'Информация о канале',\n                },\n                emoji: {\n                    Search: 'Поиск',\n                    NotEmojiFound: 'Емодзи не найдены',\n                    ChooseDefaultSkinTone: 'Выберите тон кожи по умолчанию',\n                    SearchResults: 'Результаты поиска',\n                    Recent: 'Часто используемые',\n                    SmileysPeople: 'Смайлики и люди',\n                    AnimalsNature: 'Животные и природа',\n                    FoodDrink: 'Еда и напитки',\n                    Activity: 'Активность',\n                    TravelPlaces: 'Путешествия и местности',\n                    Objects: 'Предметы',\n                    Symbols: 'Символы',\n                    Flags: 'Флаги',\n                    Custom: 'Пользовательские'\n                },\n                translation: {\n                    AppName: 'Телеграм',\n                    Loading: 'Загрузка',\n                    Connecting: 'Соединение',\n                    Updating: 'Обновление'\n                }\n            }\n        },\n        lng: language,\n        fallbackLng: defaultLanguage,\n        interpolation: {\n            escapeValue: false\n        },\n        react: {\n            wait: false\n        }\n    });\n\nconst cache = new LocalStorageBackend(null, {\n    enabled: true,\n    prefix: 'i18next_res_',\n    expirationTime: Infinity\n});\n\nconst translationDefaultLng = cache.read(defaultLanguage, defaultNamespace, (err, data) => {\n    return data;\n});\nconst translationCurrentLng = cache.read(language, defaultNamespace, (err, data) => {\n    return data;\n});\ni18n.addResourceBundle(defaultLanguage, defaultNamespace, translationDefaultLng);\ni18n.addResourceBundle(language, defaultNamespace, translationCurrentLng);\n\nclass LocalizationStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.i18n = i18n;\n        this.cache = cache;\n\n        this.setMaxListeners(Infinity);\n        this.addTdLibListener();\n    }\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateAuthorizationState': {\n                switch (update.authorization_state['@type']) {\n                    case 'authorizationStateWaitTdlibParameters':\n                        TdLibController.send({\n                            '@type': 'setOption',\n                            name: 'localization_target',\n                            value: { '@type': 'optionValueString', value: 'android' }\n                        });\n                        TdLibController.send({\n                            '@type': 'setOption',\n                            name: 'language_pack_id',\n                            value: { '@type': 'optionValueString', value: language }\n                        });\n                        TdLibController.send({\n                            '@type': 'getLocalizationTargetInfo',\n                            only_local: false\n                        }).then(result => {\n                            this.info = result;\n\n                            TdLibController.clientUpdate({\n                                '@type': 'clientUpdateLanguageChange',\n                                language: language\n                            });\n                        });\n                        break;\n                }\n                break;\n            }\n            case 'updateLanguagePackStrings': {\n                // add/remove new strings\n\n                this.emit('updateLanguagePackStrings', update);\n                break;\n            }\n        }\n    };\n\n    onClientUpdate = async update => {\n        switch (update['@type']) {\n            case 'clientUpdateLanguageChange': {\n                const { language } = update;\n\n                TdLibController.send({\n                    '@type': 'getLanguagePackStrings',\n                    language_pack_id: language,\n                    keys: []\n                }).then(async result => {\n                    const cookies = new Cookies();\n                    cookies.set('i18next', language);\n\n                    const resources = this.processStrings(language, result);\n\n                    this.cache.save(language, defaultNamespace, resources);\n\n                    i18n.addResourceBundle(language, defaultNamespace, resources);\n\n                    await i18n.changeLanguage(language);\n\n                    TdLibController.send({\n                        '@type': 'setOption',\n                        name: 'language_pack_id',\n                        value: { '@type': 'optionValueString', value: language }\n                    });\n\n                    this.emit('clientUpdateLanguageChange', update);\n                });\n                break;\n            }\n        }\n    };\n\n    processStrings = (lng, languagePackStrings) => {\n        if (!languagePackStrings) return {};\n        const { strings } = languagePackStrings;\n        if (!strings) return {};\n\n        let result = {};\n        for (let i = 0; i < strings.length; i++) {\n            const { value } = strings[i];\n            switch (value['@type']) {\n                case 'languagePackStringValueOrdinary': {\n                    result[strings[i].key] = value.value;\n                    break;\n                }\n                case 'languagePackStringValuePluralized': {\n                    //result[strings[i].key] = value.value;\n                    break;\n                }\n                case 'languagePackStringValueDeleted': {\n                    break;\n                }\n            }\n        }\n\n        return result;\n    };\n\n    loadLanguage = async language => {\n        const result = await TdLibController.send({\n            '@type': 'getLanguagePackStrings',\n            language_pack_id: language,\n            keys: []\n        });\n\n        const resources = this.processStrings(language, result);\n\n        this.cache.save(language, defaultNamespace, resources);\n\n        i18n.addResourceBundle(language, defaultNamespace, resources);\n    };\n}\n\nconst store = new LocalizationStore();\nwindow.localization = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { I18nextProvider } from 'react-i18next';\nimport { getDisplayName } from './Utils/HOC';\nimport LocalizationStore from './Stores/LocalizationStore';\n\nfunction withLanguage(WrappedComponent) {\n    class LanguageWrapper extends React.Component {\n        render() {\n            const i18n = LocalizationStore.i18n;\n\n            return (\n                <I18nextProvider i18n={i18n}>\n                    <WrappedComponent {...this.props} />\n                </I18nextProvider>\n            );\n        }\n    }\n    LanguageWrapper.displayName = `WithLanguage(${getDisplayName(WrappedComponent)})`;\n\n    return LanguageWrapper;\n}\n\nexport default withLanguage;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nclass ActionScheduler {\n    constructor(actionCallback, cancelCallback) {\n        this.actions = new Map();\n        this.actionCallback = actionCallback;\n        this.cancelCallback = cancelCallback;\n    }\n\n    add = (key, timeout, action, cancel) => {\n        if (this.actions.has(key)) {\n            return false;\n        }\n\n        let expire = new Date();\n        expire.setMilliseconds(expire.getMilliseconds() + timeout);\n\n        this.actions.set(key, { expire: expire, action: action, cancel: cancel });\n\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n\n        this.setTimeout();\n\n        return true;\n    };\n\n    invoke = async key => {\n        const item = this.actions.get(key);\n        if (!item) return;\n\n        this.actions.delete(key);\n\n        await this.actionCallback({ key: key, action: item.action, cancel: item.cancel });\n        if (item.action) await item.action();\n\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n\n        this.setTimeout();\n    };\n\n    remove = key => {\n        const item = this.actions.get(key);\n        if (!item) return;\n\n        this.actions.delete(key);\n\n        this.cancelCallback({ key: key, action: item.action, cancel: item.cancel });\n        if (item.cancel) item.cancel();\n\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n\n        this.setTimeout();\n    };\n\n    setTimeout = () => {\n        let now = new Date();\n        let timeout = 1000000;\n        for (let [key, value] of this.actions) {\n            let actionTimeout = value.expire - now;\n            if (actionTimeout < timeout) timeout = actionTimeout;\n            if (timeout < 0) timeout = 0;\n        }\n\n        if (timeout < 1000000) {\n            this.timerId = setTimeout(this.handleTimer, timeout);\n        }\n    };\n\n    handleTimer = () => {\n        let now = new Date();\n        let expired = [];\n        for (let [key, value] of this.actions) {\n            let actionTimeout = value.expire - now;\n            if (actionTimeout <= 0) expired.push({ key: key, value: value });\n        }\n\n        for (let item of expired) {\n            this.actions.delete(item.key);\n            this.actionCallback({ key: item.key, action: item.value.action, cancel: item.value.cancel });\n            if (item.value.action) item.value.action();\n        }\n\n        this.setTimeout();\n    };\n}\n\nexport default ActionScheduler;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\nimport ActionScheduler from '../Utils/ActionScheduler';\n\nclass ApplicationStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.chatId = 0;\n        this.dialogChatId = 0;\n        this.messageId = null;\n        this.statistics = new Map();\n        this.scopeNotificationSettings = new Map();\n        this.authorizationState = null;\n        this.connectionState = null;\n        this.isChatDetailsVisible = false;\n        this.mediaViewerContent = null;\n        this.profileMediaViewerContent = null;\n        this.dragging = false;\n        this.actionScheduler = new ActionScheduler(this.handleScheduledAction, this.handleCancelScheduledAction);\n\n        this.addTdLibListener();\n        this.addStatistics();\n        this.setMaxListeners(Infinity);\n    }\n\n    addScheduledAction = (key, timeout, action, cancel) => {\n        return this.actionScheduler.add(key, timeout, action, cancel);\n    };\n\n    invokeScheduledAction = async key => {\n        await this.actionScheduler.invoke(key);\n    };\n\n    removeScheduledAction = key => {\n        this.actionScheduler.remove(key);\n    };\n\n    handleScheduledAction = item => {\n        console.log('Invoked scheduled action key=', item.key);\n    };\n\n    handleCancelScheduledAction = item => {\n        console.log('Cancel scheduled action key=', item.key);\n    };\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateAuthorizationState': {\n                this.authorizationState = update.authorization_state;\n\n                switch (update.authorization_state['@type']) {\n                    case 'authorizationStateLoggingOut':\n                        this.loggingOut = true;\n                        break;\n                    case 'authorizationStateWaitTdlibParameters':\n                        TdLibController.sendTdParameters();\n                        break;\n                    case 'authorizationStateWaitEncryptionKey':\n                        TdLibController.send({ '@type': 'checkDatabaseEncryptionKey' });\n                        break;\n                    case 'authorizationStateWaitPhoneNumber':\n                        break;\n                    case 'authorizationStateWaitCode':\n                        break;\n                    case 'authorizationStateWaitPassword':\n                        break;\n                    case 'authorizationStateReady':\n                        this.loggingOut = false;\n                        break;\n                    case 'authorizationStateClosing':\n                        break;\n                    case 'authorizationStateClosed':\n                        if (!this.loggingOut) {\n                            document.title += ': Zzz…';\n                            this.emit('clientUpdateAppInactive');\n                        } else {\n                            TdLibController.init();\n                        }\n                        break;\n                    default:\n                        break;\n                }\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateConnectionState': {\n                this.connectionState = update.state;\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateScopeNotificationSettings': {\n                this.setNotificationSettings(update.scope['@type'], update.notification_settings);\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateFatalError': {\n                this.emit(update['@type'], update);\n\n                break;\n            }\n            case 'updateServiceNotification': {\n                const { type, content } = update;\n\n                if (!content) return;\n                if (content['@type'] === 'messageText') {\n                    const { text } = content;\n                    if (!text) return;\n\n                    if (text['@type'] === 'formattedText' && text.text) {\n                        switch (type) {\n                            case 'AUTH_KEY_DROP_DUPLICATE':\n                                let result = window.confirm(text.text);\n                                if (result) {\n                                    TdLibController.logOut();\n                                }\n                                break;\n                            default:\n                                alert(text.text);\n                                break;\n                        }\n                    }\n                }\n\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateChatId': {\n                const extendedUpdate = {\n                    '@type': 'clientUpdateChatId',\n                    nextChatId: update.chatId,\n                    nextMessageId: update.messageId,\n                    previousChatId: this.chatId,\n                    previousMessageId: this.messageId\n                };\n\n                this.chatId = update.chatId;\n                this.messageId = update.messageId;\n\n                this.emit('clientUpdateChatId', extendedUpdate);\n                break;\n            }\n            case 'clientUpdateDialogChatId': {\n                const { chatId } = update;\n                this.dialogChatId = chatId;\n\n                this.emit('clientUpdateDialogChatId', update);\n                break;\n            }\n            case 'clientUpdateFocusWindow': {\n                TdLibController.send({\n                    '@type': 'setOption',\n                    name: 'online',\n                    value: { '@type': 'optionValueBoolean', value: update.focused }\n                });\n\n                this.emit('clientUpdateFocusWindow', update);\n                break;\n            }\n            case 'clientUpdateForward': {\n                this.emit('clientUpdateForward', update);\n                break;\n            }\n            case 'clientUpdateLeaveChat': {\n                if (update.inProgress && this.chatId === update.chatId) {\n                    TdLibController.setChatId(0);\n                }\n\n                break;\n            }\n        }\n    };\n\n    onUpdateStatistics = update => {\n        if (!update) return;\n\n        if (this.statistics.has(update['@type'])) {\n            const count = this.statistics.get(update['@type']);\n\n            this.statistics.set(update['@type'], count + 1);\n        } else {\n            this.statistics.set(update['@type'], 1);\n        }\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    addStatistics = () => {\n        TdLibController.addListener('update', this.onUpdateStatistics);\n    };\n\n    setChatId = (chatId, messageId = null) => {\n        const update = {\n            '@type': 'clientUpdateChatId',\n            nextChatId: chatId,\n            nextMessageId: messageId,\n            previousChatId: this.chatId,\n            previousMessageId: this.messageId\n        };\n\n        this.chatId = chatId;\n        this.messageId = messageId;\n        this.emit(update['@type'], update);\n    };\n\n    getChatId() {\n        return this.chatId;\n    }\n\n    getMessageId() {\n        return this.messageId;\n    }\n\n    searchChat(chatId) {\n        this.emit('clientUpdateSearchChat', { chatId: chatId });\n    }\n\n    changeChatDetailsVisibility(visibility) {\n        this.isChatDetailsVisible = visibility;\n        this.emit('clientUpdateChatDetailsVisibility', visibility);\n    }\n\n    setMediaViewerContent(content) {\n        this.mediaViewerContent = content;\n        this.emit('clientUpdateMediaViewerContent', content);\n    }\n\n    setProfileMediaViewerContent(content) {\n        this.profileMediaViewerContent = content;\n        this.emit('clientUpdateProfileMediaViewerContent', content);\n    }\n\n    getConnectionState() {\n        return this.connectionState;\n    }\n\n    getAuthorizationState() {\n        return this.authorizationState;\n    }\n\n    getNotificationSettings(scope) {\n        return this.scopeNotificationSettings.get(scope);\n    }\n\n    setNotificationSettings(scope, notificationSettings) {\n        return this.scopeNotificationSettings.set(scope, notificationSettings);\n    }\n\n    getDragging = () => {\n        return this.dragging;\n    };\n\n    setDragging = value => {\n        this.dragging = value;\n        this.emit('clientUpdateDragging', value);\n    };\n\n    assign(source1, source2) {\n        Object.assign(source1, source2);\n        //this.set(Object.assign({}, source1, source2));\n    }\n}\n\nconst store = new ApplicationStore();\nwindow.application = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { createMuiTheme, MuiThemeProvider } from '@material-ui/core';\nimport { getDisplayName } from './Utils/HOC';\nimport blue from '@material-ui/core/colors/blue';\nimport Cookies from 'universal-cookie';\nimport ApplicationStore from './Stores/ApplicationStore';\n\nfunction withTheme(WrappedComponent) {\n    class ThemeWrapper extends React.Component {\n        constructor(props) {\n            super(props);\n\n            const cookies = new Cookies();\n            const { type, primary } = cookies.get('themeOptions') || { type: 'light', primary: blue };\n\n            let theme = createMuiTheme({\n                palette: {\n                    type: type,\n                    primary: primary,\n                    secondary: { main: '#FF5555' }\n                },\n                typography: {\n                    useNextVariants: true\n                }\n            });\n\n            this.state = {\n                theme: theme\n            };\n        }\n\n        componentDidMount() {\n            ApplicationStore.on('clientUpdateThemeChanging', this.onClientUpdateThemeChanging);\n        }\n\n        componentWillUnmount() {\n            ApplicationStore.removeListener('clientUpdateThemeChanging', this.onClientUpdateThemeChanging);\n        }\n\n        onClientUpdateThemeChanging = update => {\n            const { type, primary } = update;\n\n            const theme = createMuiTheme({\n                palette: {\n                    type: type,\n                    primary: primary,\n                    secondary: { main: '#FF5555' },\n                    typography: {\n                        useNextVariants: true\n                    }\n                }\n            });\n\n            const cookies = new Cookies();\n            cookies.set('themeOptions', { type: type, primary: primary });\n\n            this.setState({ theme: theme }, () => ApplicationStore.emit('clientUpdateThemeChange'));\n        };\n\n        render() {\n            const { theme } = this.state;\n\n            return (\n                <MuiThemeProvider theme={theme}>\n                    <WrappedComponent {...this.props} />\n                </MuiThemeProvider>\n            );\n        }\n    }\n    ThemeWrapper.displayName = `WithTheme(${getDisplayName(WrappedComponent)})`;\n\n    return ThemeWrapper;\n}\n\nexport default withTheme;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { SnackbarProvider } from 'notistack';\nimport { getDisplayName } from './Utils/HOC';\nimport { MAX_SNACK } from './Constants';\n\nfunction withSnackbarNotifications(WrappedComponent) {\n    class NotificationsWrapper extends React.Component {\n        render() {\n            return (\n                <SnackbarProvider maxSnack={MAX_SNACK}>\n                    <WrappedComponent {...this.props} />\n                </SnackbarProvider>\n            );\n        }\n    }\n    NotificationsWrapper.displayName = `WithSnackbarNotifications(${getDisplayName(WrappedComponent)})`;\n\n    return NotificationsWrapper;\n}\n\nexport default withSnackbarNotifications;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass OptionStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.items = new Map();\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateOption':\n                this.items.set(update.name, update.value);\n\n                this.emit('updateOption', update);\n                break;\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {};\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    get(name) {\n        return this.items.get(name);\n    }\n}\n\nconst store = new OptionStore();\nwindow.option = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport OptionStore from '../Stores/OptionStore';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass UserStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.items = new Map();\n        this.fullInfoItems = new Map();\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateUser': {\n                this.set(update.user);\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateUserFullInfo':\n                this.setFullInfo(update.user_id, update.user_full_info);\n\n                this.emit(update['@type'], update);\n                break;\n            case 'updateUserStatus': {\n                let user = this.get(update.user_id);\n                if (user) {\n                    this.assign(user, { status: update.status });\n                }\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateOpenUser': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    assign(source1, source2) {\n        Object.assign(source1, source2);\n        //this.set(Object.assign({}, source1, source2));\n    }\n\n    getMyId() {\n        const myId = OptionStore.get('my_id');\n        if (!myId) return null;\n        if (!myId.value) return null;\n\n        return myId.value;\n    }\n\n    get(userId) {\n        return this.items.get(userId);\n    }\n\n    set(user) {\n        this.items.set(user.id, user);\n    }\n\n    getFullInfo(id) {\n        return this.fullInfoItems.get(id);\n    }\n\n    setFullInfo(id, fullInfo) {\n        this.fullInfoItems.set(id, fullInfo);\n    }\n}\n\nconst store = new UserStore();\nwindow.user = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport dateFormat from 'dateformat';\nimport { getLetters, getSize } from './Common';\nimport { PROFILE_PHOTO_BIG_SIZE, PROFILE_PHOTO_SMALL_SIZE, SERVICE_NOTIFICATIONS_USER_ID } from '../Constants';\nimport UserStore from '../Stores/UserStore';\n\nfunction getUserStatus(user) {\n    if (!user) return null;\n    if (!user.status) return null;\n\n    if (user.id === SERVICE_NOTIFICATIONS_USER_ID) {\n        return 'service notifications';\n    }\n\n    if (user.type && user.type['@type'] === 'userTypeBot') {\n        return 'bot';\n    }\n\n    switch (user.status['@type']) {\n        case 'userStatusEmpty': {\n            return 'last seen a long time ago';\n        }\n        case 'userStatusLastMonth': {\n            return 'last seen within a month';\n        }\n        case 'userStatusLastWeek': {\n            return 'last seen within a week';\n        }\n        case 'userStatusOffline': {\n            let { was_online } = user.status;\n            if (!was_online) return 'offline';\n\n            const now = new Date();\n            const wasOnline = new Date(was_online * 1000);\n            if (wasOnline > now) {\n                return 'last seen just now';\n            }\n\n            let diff = new Date(now - wasOnline);\n\n            // within a minute\n            if (diff.getTime() / 1000 < 60) {\n                return 'last seen just now';\n            }\n\n            // within an hour\n            if (diff.getTime() / 1000 < 60 * 60) {\n                const minutes = Math.floor(diff.getTime() / 1000 / 60);\n                return `last seen ${minutes === 1 ? '1 minute' : minutes + ' minutes'} ago`;\n            }\n\n            // today\n            const today = new Date();\n            today.setHours(0, 0, 0, 0);\n            if (wasOnline > today) {\n                // up to 6 hours ago\n                if (diff.getTime() / 1000 < 6 * 60 * 60) {\n                    const hours = Math.floor(diff.getTime() / 1000 / 60 / 60);\n                    return `last seen ${hours === 1 ? '1 hour' : hours + ' hours'} ago`;\n                }\n\n                // other\n                return `last seen today at ${dateFormat(wasOnline, 'H:MM')}`;\n            }\n\n            // yesterday\n            let yesterday = new Date();\n            yesterday.setDate(now.getDate() - 1);\n            today.setHours(0, 0, 0, 0);\n            if (wasOnline > yesterday) {\n                return `last seen yesterday at ${dateFormat(wasOnline, 'H:MM')}`;\n            }\n\n            return `last seen ${dateFormat(wasOnline, 'dd.mm.yyyy')}`;\n        }\n        case 'userStatusOnline': {\n            return 'online';\n        }\n        case 'userStatusRecently': {\n            return 'last seen recently';\n        }\n    }\n\n    return null;\n}\n\nfunction isUserOnline(user) {\n    if (!user) return false;\n\n    const { id, status, type } = user;\n    if (!status) return false;\n    if (!type) return false;\n    if (id === SERVICE_NOTIFICATIONS_USER_ID) return false;\n\n    return status['@type'] === 'userStatusOnline' && type['@type'] !== 'userTypeBot';\n}\n\nfunction getUserFullName(user) {\n    if (!user) return null;\n    if (!user.type) return null;\n\n    switch (user.type['@type']) {\n        case 'userTypeBot':\n        case 'userTypeRegular': {\n            if (user.first_name && user.last_name) return `${user.first_name} ${user.last_name}`;\n            if (user.first_name) return user.first_name;\n            if (user.last_name) return user.last_name;\n        }\n        case 'userTypeDeleted':\n        case 'userTypeUnknown': {\n            return 'Deleted account';\n        }\n    }\n\n    return null;\n}\n\nfunction getUserShortName(userId) {\n    const user = UserStore.get(userId);\n    if (!user) return null;\n    if (!user.type) return null;\n\n    switch (user.type['@type']) {\n        case 'userTypeBot':\n        case 'userTypeRegular': {\n            if (user.first_name) return user.first_name;\n            if (user.last_name) return user.last_name;\n        }\n        case 'userTypeDeleted':\n        case 'userTypeUnknown': {\n            return 'Deleted account';\n        }\n    }\n\n    return null;\n}\n\nfunction isUserBlocked(userId) {\n    const fullInfo = UserStore.getFullInfo(userId);\n    if (fullInfo) {\n        return fullInfo.is_blocked;\n    }\n\n    return false;\n}\n\nfunction getUserLetters(user) {\n    if (!user) return null;\n\n    let title = getUserFullName(user);\n    let letters = getLetters(title);\n    if (letters && letters.length > 0) {\n        return letters;\n    }\n\n    return user.first_name ? user.first_name.charAt(0) : user.last_name ? user.last_name.charAt(0) : '';\n}\n\nfunction getUserStatusOrder(user) {\n    if (!user) return 0;\n    if (!user.status) return 0;\n    if (user.type['@type'] === 'userTypeBot') return 0;\n\n    switch (user.status['@type']) {\n        case 'userStatusEmpty': {\n            return 1;\n        }\n        case 'userStatusLastMonth': {\n            return 10;\n        }\n        case 'userStatusLastWeek': {\n            return 100;\n        }\n        case 'userStatusOffline': {\n            return user.status.was_online;\n        }\n        case 'userStatusOnline': {\n            return user.status.expires;\n        }\n        case 'userStatusRecently': {\n            return 1000;\n        }\n    }\n}\n\nfunction getProfilePhoto(userProfilePhoto) {\n    if (!userProfilePhoto) return null;\n\n    const { id, sizes } = userProfilePhoto;\n    if (!sizes) return null;\n    if (!sizes.length) return null;\n\n    const smallPhotoSize = getSize(sizes, PROFILE_PHOTO_SMALL_SIZE);\n    const bigPhotoSize = getSize(sizes, PROFILE_PHOTO_BIG_SIZE);\n\n    return {\n        '@type': 'profilePhoto',\n        id: id,\n        small: smallPhotoSize.photo,\n        big: bigPhotoSize.photo\n    };\n}\n\nfunction getProfilePhotoDateHint(userProfilePhoto) {\n    if (!userProfilePhoto) return null;\n\n    const { added_date } = userProfilePhoto;\n    if (!added_date) return null;\n\n    const date = new Date(added_date * 1000);\n    return dateFormat(date, 'H:MM:ss d.mm.yyyy');\n}\n\nexport {\n    getUserStatus,\n    isUserOnline,\n    getUserFullName,\n    isUserBlocked,\n    getUserLetters,\n    getUserStatusOrder,\n    getProfilePhoto,\n    getProfilePhotoDateHint,\n    getUserShortName\n};\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass SupergroupStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.items = new Map();\n        this.fullInfoItems = new Map();\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateSupergroup':\n                this.set(update.supergroup);\n\n                this.emit(update['@type'], update);\n                break;\n            case 'updateSupergroupFullInfo':\n                this.setFullInfo(update.supergroup_id, update.supergroup_full_info);\n\n                this.emit(update['@type'], update);\n                break;\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {};\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    get(id) {\n        return this.items.get(id);\n    }\n\n    set(supergroup) {\n        this.items.set(supergroup.id, supergroup);\n    }\n\n    getFullInfo(id) {\n        return this.fullInfoItems.get(id);\n    }\n\n    setFullInfo(id, fullInfo) {\n        this.fullInfoItems.set(id, fullInfo);\n    }\n}\n\nconst store = new SupergroupStore();\nwindow.supergroup = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { TYPING_INPUT_INTERVAL_S } from '../Constants';\n\nclass InputTypingManager {\n    constructor(chatId, timeoutCallback) {\n        this.actions = new Map();\n        this.timerId = null;\n        this.chatId = chatId;\n        this.timeoutCallback = timeoutCallback;\n\n        this.handleTimer = this.handleTimer.bind(this);\n        this.addAction = this.addAction.bind(this);\n        this.clearAction = this.clearAction.bind(this);\n        this.setActionsTimeout = this.setActionsTimeout.bind(this);\n    }\n\n    handleTimer() {\n        let now = new Date();\n        let expiredActions = [];\n        for (let [key, value] of this.actions) {\n            let actionTimeout = value.expire - now;\n            if (actionTimeout <= 0) expiredActions.push(key);\n        }\n\n        for (let key of expiredActions) {\n            this.actions.delete(key);\n        }\n\n        let update = {\n            '@type': 'updateUserChatAction',\n            chat_id: this.chatId,\n            action: { '@type': 'chatActionTimerUpdate' }\n        };\n\n        this.timeoutCallback(update);\n        // ChatStore.emit('updateUserChatAction', update);\n\n        this.setActionsTimeout();\n    }\n\n    addAction(userId, action) {\n        let expire = new Date();\n        expire.setSeconds(expire.getSeconds() + TYPING_INPUT_INTERVAL_S);\n\n        this.actions.set(userId, { expire: expire, action: action });\n\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n\n        this.setActionsTimeout();\n    }\n\n    setActionsTimeout() {\n        let now = new Date();\n        let timeout = 1000000;\n        for (let [key, value] of this.actions) {\n            let actionTimeout = value.expire - now;\n            if (actionTimeout < timeout) timeout = actionTimeout;\n            if (timeout < 0) timeout = 0;\n        }\n\n        if (timeout < 1000000) {\n            this.timerId = setTimeout(this.handleTimer, timeout);\n        }\n    }\n\n    clearAction(userId) {\n        this.actions.delete(userId);\n\n        if (this.timerId) {\n            clearTimeout(this.timerId);\n        }\n\n        this.setActionsTimeout();\n    }\n}\n\nexport default InputTypingManager;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport InputTypingManager from '../Utils/InputTypingManager';\nimport UserStore from './UserStore';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass ChatStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.items = new Map();\n        this.typingManagers = new Map();\n        this.onlineMemberCount = new Map();\n        this.skippedUpdates = [];\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateConnectionState': {\n                if (update.state['@type'] === 'connectionStateUpdating') {\n                    this.updating = true;\n                    this.skippedUpdates = [];\n                } else {\n                    this.updating = false;\n                    if (this.skippedUpdates.length > 0) {\n                        TdLibController.parameters.fastUpdating = false;\n                        this.emitUpdate({\n                            '@type': 'clientUpdateFastUpdatingComplete',\n                            updates: this.skippedUpdates\n                        });\n                        this.skippedUpdates = [];\n                    }\n                }\n                break;\n            }\n            case 'updateChatDefaultDisableNotification': {\n                //TODO: handle updateChatDefaultDisableNotification\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatOnlineMemberCount': {\n                this.setOnlineMemberCount(update.chat_id, update.online_member_count);\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatDraftMessage': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        order: update.order === '0' ? chat.order : update.order,\n                        draft_message: update.draft_message\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatIsMarkedAsUnread': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        is_marked_as_unread: update.is_marked_as_unread\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatIsPinned': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        order: update.order === '0' ? chat.order : update.order,\n                        is_pinned: update.is_pinned\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatIsSponsored': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        order: update.order === '0' ? chat.order : update.order,\n                        is_sponsored: update.is_sponsored\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatLastMessage': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        order: update.order === '0' ? chat.order : update.order,\n                        last_message: update.last_message\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatNotificationSettings': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        notification_settings: update.notification_settings\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatOrder': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, { order: update.order });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatPhoto': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, { photo: update.photo });\n\n                    switch (chat.type['@type']) {\n                        case 'chatTypeBasicGroup': {\n                            break;\n                        }\n                        case 'chatTypeSupergroup': {\n                            break;\n                        }\n                        case 'chatTypePrivate':\n                        case 'chatTypeSecret': {\n                            const user = UserStore.get(chat.type.user_id);\n                            if (user) {\n                                UserStore.assign(user, { profile_photo: update.photo });\n                            }\n                            break;\n                        }\n                    }\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatReadInbox': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        last_read_inbox_message_id: update.last_read_inbox_message_id,\n                        unread_count: update.unread_count\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatReadOutbox': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        last_read_outbox_message_id: update.last_read_outbox_message_id\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatReplyMarkup': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        reply_markup_message_id: update.reply_markup_message_id\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatTitle': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, { title: update.title });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateChatUnreadMentionCount': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        unread_mention_count: update.unread_mention_count\n                    });\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateNewChat': {\n                this.set(update.chat);\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateSecretChat': {\n                //TODO: handle updateSecretChat\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateUnreadChatCount': {\n                //TODO: handle updateUnreadChatCount\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateUserChatAction': {\n                let typingManager = this.getTypingManager(update.chat_id);\n                if (!typingManager) {\n                    typingManager = new InputTypingManager(update.chat_id, update => this.emitUpdate(update));\n                    this.setTypingManager(update.chat_id, typingManager);\n                }\n\n                const key = update.user_id;\n                if (update.action['@type'] === 'chatActionCancel') {\n                    typingManager.clearAction(key);\n                } else {\n                    typingManager.addAction(key, update.action);\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            case 'updateMessageMentionRead': {\n                const chat = this.get(update.chat_id);\n                if (chat) {\n                    this.assign(chat, {\n                        unread_mention_count: update.unread_mention_count\n                    });\n\n                    //chat.unread_mention_count = update.unread_mention_count;\n                }\n\n                this.emitFastUpdate(update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateClearHistory': {\n                this.emitUpdate(update);\n                break;\n            }\n            case 'clientUpdateLeaveChat': {\n                this.emitUpdate(update);\n                break;\n            }\n            case 'clientUpdateOpenChat': {\n                this.emitUpdate(update);\n                break;\n            }\n        }\n    };\n\n    emitUpdate = update => {\n        this.emit(update['@type'], update);\n    };\n\n    emitFastUpdate = update => {\n        if (this.updating && TdLibController.parameters.fastUpdating) {\n            this.skippedUpdates.push(update);\n            return;\n        }\n\n        this.emit(update['@type'], update);\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    assign(source1, source2) {\n        //Object.assign(source1, source2);\n        this.set(Object.assign({}, source1, source2));\n    }\n\n    get(chatId) {\n        return this.items.get(chatId);\n    }\n\n    set(chat) {\n        this.items.set(chat.id, chat);\n    }\n\n    setOnlineMemberCount(chatId, onlineMemberCount) {\n        this.onlineMemberCount.set(chatId, onlineMemberCount);\n    }\n\n    getOnlineMemberCount(chatId) {\n        return this.onlineMemberCount.get(chatId) || 0;\n    }\n\n    getTypingManager(chatId) {\n        return this.typingManagers.get(chatId);\n    }\n\n    setTypingManager(chatId, typingManager) {\n        return this.typingManagers.set(chatId, typingManager);\n    }\n}\n\nconst store = new ChatStore();\nwindow.chat = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport { getLocationId } from '../Utils/Message';\nimport { FILE_PRIORITY, THUMBNAIL_PRIORITY } from '../Constants';\nimport TdLibController from '../Controllers/TdLibController';\n\nconst useReadFile = false;\n\nclass FileStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.callbacks = [];\n\n        this.db = null;\n        this.urls = new WeakMap();\n        this.items = new Map();\n        this.blobItems = new Map();\n        this.locationItems = new Map();\n\n        this.downloads = new Map();\n        this.uploads = new Map();\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = async update => {\n        switch (update['@type']) {\n            case 'updateFile': {\n                this.set(update.file);\n\n                this.onUpdateFile(update);\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateAuthorizationState': {\n                await this.onUpdateAuthorizationState(update);\n\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateAudioThumbnailBlob': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateAudioBlob': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateDocumentBlob': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    onUpdateAuthorizationState = async update => {\n        if (!update) return;\n        if (!update.authorization_state) return;\n\n        if (update.authorization_state['@type'] === 'authorizationStateWaitTdlibParameters') {\n            await this.initDB();\n        }\n    };\n\n    onUpdateFile = update => {\n        if (!update) return;\n\n        const { file } = update;\n        if (!file) return;\n\n        this.handleDownloads(file);\n        this.handleUploads(file);\n    };\n\n    handleDownloads = file => {\n        const { arr, id, idb_key, local } = file;\n        delete file.arr;\n\n        if (!this.downloads.has(id)) return;\n        if (!local.is_downloading_completed) return;\n        if (!useReadFile && !idb_key && !arr) return;\n\n        const items = this.downloads.get(id);\n        if (!items) return;\n\n        this.downloads.delete(id);\n\n        const store = this.getStore();\n\n        items.forEach(item => {\n            switch (item['@type']) {\n                case 'chat': {\n                    this.handleChat(store, item, file, arr);\n                    break;\n                }\n                case 'message': {\n                    this.handleMessage(store, item, file, arr);\n                    break;\n                }\n                case 'sticker': {\n                    this.handleSticker(store, item, file, arr, null);\n                    break;\n                }\n                case 'user': {\n                    this.handleUser(store, item, file, arr);\n                    break;\n                }\n                default:\n                    console.error('FileStore.onUpdateFile unhandled item', item);\n                    break;\n            }\n        });\n    };\n\n    handleUploads = file => {\n        const { id, remote } = file;\n        delete file.arr;\n\n        if (!this.uploads.has(id)) return;\n        if (remote.is_uploading_completed) return;\n\n        this.uploads.delete(id);\n    };\n\n    handleChat = (store, chat, file, arr) => {\n        if (!chat) return;\n\n        this.getLocalFile(\n            store,\n            file,\n            arr,\n            () => this.updateChatPhotoBlob(chat.id, file.id),\n            () => this.getRemoteFile(file.id, FILE_PRIORITY, chat)\n        );\n    };\n\n    handleUser = (store, user, file, arr) => {\n        if (!user) return;\n\n        this.getLocalFile(\n            store,\n            file,\n            arr,\n            () => this.updateUserPhotoBlob(user.id, file.id),\n            () => this.getRemoteFile(file.id, FILE_PRIORITY, user)\n        );\n    };\n\n    handleMessage = (store, message, file, arr) => {\n        if (!message) return;\n\n        const { content } = message;\n        if (!content) return;\n\n        switch (content['@type']) {\n            case 'messageAnimation': {\n                const { animation } = content;\n\n                this.handleAnimation(store, animation, file, arr, message);\n                break;\n            }\n            case 'messageAudio': {\n                const { audio } = content;\n\n                this.handleAudio(store, audio, file, arr, message);\n                break;\n            }\n            case 'messageChatChangePhoto': {\n                const { photo } = content;\n\n                this.handlePhoto(store, photo, file, arr, message);\n                break;\n            }\n            case 'messageDocument': {\n                const { document } = content;\n\n                this.handleDocument(store, document, file, arr, message);\n                break;\n            }\n            case 'messageGame': {\n                const { game } = content;\n\n                this.handleGame(store, game, file, arr, message);\n                break;\n            }\n            case 'messageLocation': {\n                const { location } = content;\n\n                this.handleLocation(store, location, file, arr, message);\n                break;\n            }\n            case 'messagePhoto': {\n                const { photo } = content;\n\n                this.handlePhoto(store, photo, file, arr, message);\n                break;\n            }\n            case 'messageSticker': {\n                const { sticker } = content;\n\n                this.handleSticker(store, sticker, file, arr, message);\n                break;\n            }\n            case 'messageText': {\n                const { web_page } = content;\n                if (!web_page) break;\n\n                const { animation, audio, document, photo, sticker, video, video_note, voice_note } = web_page;\n\n                if (animation) {\n                    this.handleAnimation(store, animation, file, arr, message);\n                }\n\n                if (audio) {\n                    this.handleAudio(store, audio, file, arr, message);\n                }\n\n                if (document) {\n                    this.handleDocument(store, document, file, arr, message);\n                }\n\n                if (photo) {\n                    this.handlePhoto(store, photo, file, arr, message);\n                }\n\n                if (sticker) {\n                    this.handleSticker(store, sticker, file, arr, message);\n                }\n\n                if (video) {\n                    this.handleVideo(store, video, file, arr, message);\n                }\n\n                if (voice_note) {\n                    this.handleVoiceNote(store, voice_note, file, arr, message);\n                }\n\n                if (video_note) {\n                    this.handleVideoNote(store, video_note, file, arr, message);\n                }\n\n                break;\n            }\n            case 'messageVenue': {\n                const { venue } = content;\n                const { location } = venue;\n\n                this.handleLocation(store, location, file, arr, message);\n                break;\n            }\n            case 'messageVideo': {\n                const { video } = content;\n\n                this.handleVideo(store, video, file, arr, message);\n                break;\n            }\n            case 'messageVideoNote': {\n                const { video_note } = content;\n\n                this.handleVideoNote(store, video_note, file, arr, message);\n                break;\n            }\n            case 'messageVoiceNote': {\n                const { voice_note } = content;\n\n                this.handleVoiceNote(store, voice_note, file, arr, message);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    handleGame = (store, game, file, arr, message) => {\n        if (!game) return;\n\n        const { animation, photo } = game;\n        if (photo) {\n            this.handlePhoto(store, photo, file, arr, message);\n        }\n\n        if (animation) {\n            this.handleAnimation(store, animation, file, arr, message);\n        }\n    };\n\n    handlePhoto = (store, photo, file, arr, obj) => {\n        if (photo) {\n            for (let i = 0; i < photo.sizes.length; i++) {\n                const photoSize = photo.sizes[i];\n                if (photoSize) {\n                    const source = photoSize.photo;\n                    if (source && source.id === file.id) {\n                        this.getLocalFile(\n                            store,\n                            source,\n                            arr,\n                            () => this.updatePhotoBlob(obj.chat_id, obj.id, file.id),\n                            () => this.getRemoteFile(file.id, FILE_PRIORITY, obj)\n                        );\n                        break;\n                    }\n                }\n            }\n        }\n    };\n\n    handleAudio = (store, audio, file, arr, obj) => {\n        if (audio.album_cover_thumbnail) {\n            const source = audio.album_cover_thumbnail.photo;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateAudioThumbnailBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, THUMBNAIL_PRIORITY, obj)\n                );\n            }\n        }\n\n        if (audio.audio) {\n            const source = audio.audio;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateAudioBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, FILE_PRIORITY, obj)\n                );\n            }\n        }\n    };\n\n    handleDocument = (store, document, file, arr, obj) => {\n        if (document.thumbnail) {\n            const { photo: source } = document.thumbnail;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateDocumentThumbnailBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, THUMBNAIL_PRIORITY, obj)\n                );\n            }\n        }\n\n        if (document.document) {\n            const { document: source } = document;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateDocumentBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, FILE_PRIORITY, obj)\n                );\n            }\n        }\n    };\n\n    handleLocation = (store, location, file, arr, obj) => {\n        const locationId = getLocationId(location);\n        if (locationId) {\n            const source = this.getLocationFile(locationId);\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateLocationBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, THUMBNAIL_PRIORITY, obj)\n                );\n            }\n        }\n    };\n\n    handleSticker = (store, sticker, file, arr, obj) => {\n        if (sticker.thumbnail) {\n            const source = sticker.thumbnail.photo;\n            if (source && source.id === file.id) {\n                const chatId = obj ? obj.chat_id : 0;\n                const messageId = obj ? obj.id : 0;\n\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateStickerThumbnailBlob(chatId, messageId, file.id),\n                    () => this.getRemoteFile(file.id, THUMBNAIL_PRIORITY, obj || sticker)\n                );\n            }\n        }\n\n        if (sticker.sticker) {\n            const source = sticker.sticker;\n            if (source && source.id === file.id) {\n                const chatId = obj ? obj.chat_id : 0;\n                const messageId = obj ? obj.id : 0;\n\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateStickerBlob(chatId, messageId, file.id),\n                    () => this.getRemoteFile(file.id, FILE_PRIORITY, obj || sticker)\n                );\n            }\n        }\n    };\n\n    handleVoiceNote = (store, voiceNote, file, arr, obj) => {\n        if (voiceNote.voice) {\n            const source = voiceNote.voice;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateVoiceNoteBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, FILE_PRIORITY, obj)\n                );\n            }\n        }\n    };\n\n    handleVideoNote = (store, videoNote, file, arr, obj) => {\n        if (videoNote.thumbnail) {\n            const source = videoNote.thumbnail.photo;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateVideoNoteThumbnailBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, THUMBNAIL_PRIORITY, obj)\n                );\n            }\n        }\n\n        if (videoNote.video) {\n            const source = videoNote.video;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateVideoNoteBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, FILE_PRIORITY, obj)\n                );\n            }\n        }\n    };\n\n    handleVideo = (store, video, file, arr, obj) => {\n        if (video.thumbnail) {\n            const source = video.thumbnail.photo;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateVideoThumbnailBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, THUMBNAIL_PRIORITY, obj)\n                );\n            }\n        }\n\n        if (video.video) {\n            const source = video.video;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateVideoBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, FILE_PRIORITY, obj)\n                );\n            }\n        }\n    };\n\n    handleAnimation = (store, animation, file, arr, obj) => {\n        if (animation.thumbnail) {\n            const source = animation.thumbnail.photo;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateAnimationThumbnailBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, THUMBNAIL_PRIORITY, obj)\n                );\n            }\n        }\n\n        if (animation.animation) {\n            const source = animation.animation;\n            if (source && source.id === file.id) {\n                this.getLocalFile(\n                    store,\n                    source,\n                    arr,\n                    () => this.updateAnimationBlob(obj.chat_id, obj.id, file.id),\n                    () => this.getRemoteFile(file.id, FILE_PRIORITY, obj)\n                );\n            }\n        }\n    };\n\n    async initDB(callback) {\n        /*if (this.store) return;\n            if (this.initiatingDB) return;\n\n            this.initiatingDB = true;\n            this.store = localForage.createInstance({\n                name: 'tdlib'\n            });\n            this.initiatingDB = false;\n\n            return;*/\n        if (this.db) {\n            console.log('[FileStore] db exists');\n            if (callback) callback();\n            return;\n        }\n\n        if (this.initiatingDB) {\n            console.log('[FileStore] add callback');\n            if (callback) this.callbacks.push(callback);\n            return;\n        }\n\n        console.log('[FileStore] start initDB');\n\n        this.initiatingDB = true;\n        this.db = await this.openDB().catch(error => console.log('[FileStore] initDB error', error));\n        this.initiatingDB = false;\n\n        console.log('[FileStore] stop initDB');\n\n        if (this.callbacks.length) {\n            console.log('[FileStore] invoke callbacks count=' + this.callbacks.length);\n            for (let i = 0; i < this.callbacks.length; i++) {\n                this.callbacks[i]();\n            }\n            this.callbacks = [];\n        }\n    }\n\n    openDB() {\n        return new Promise((resolve, reject) => {\n            const request = window.indexedDB.open('tdlib');\n            request.onsuccess = () => resolve(request.result);\n            request.onerror = () => reject(request.error);\n        });\n    }\n\n    getStore() {\n        return this.db.transaction(['keyvaluepairs'], 'readonly').objectStore('keyvaluepairs');\n    }\n\n    getReadWriteStore() {\n        if (useReadFile) {\n            return undefined;\n        }\n        return this.db.transaction(['keyvaluepairs'], 'readwrite').objectStore('keyvaluepairs');\n    }\n\n    deleteLocalFile = (store, file) => {};\n\n    getLocalFile(store, file, arr, callback, faultCallback) {\n        if (useReadFile) {\n            (async file => {\n                const response = await TdLibController.send({\n                    '@type': 'readFile',\n                    file_id: file.id\n                });\n                console.log(`readFile file_id=${file.id} result`, response);\n                this.setBlob(file.id, response.data);\n            })(file).then(callback, faultCallback);\n            return;\n        }\n\n        let idb_key = file.idb_key;\n        if (!idb_key) {\n            file = this.get(file.id) || file;\n            idb_key = file.idb_key;\n        }\n\n        if (!idb_key && !arr) {\n            faultCallback();\n            return;\n        }\n\n        if (arr) {\n            file.blob = new Blob([arr]);\n            this.setBlob(file.id, file.blob);\n            callback();\n            return;\n        }\n\n        if (file.blob) {\n            //callback();\n            return;\n        }\n\n        // if (this.getBlob(file.id)){\n        //     return;\n        // }\n\n        const request = store.get(idb_key);\n        request.onsuccess = event => {\n            const blob = event.target.result;\n\n            if (blob) {\n                file.blob = blob;\n                this.setBlob(file.id, file.blob);\n                callback();\n            } else {\n                faultCallback();\n            }\n        };\n        request.onerror = () => {\n            faultCallback();\n        };\n    }\n\n    getRemoteFile(fileId, priority, obj) {\n        const items = this.downloads.get(fileId) || [];\n        if (items.some(x => x === obj)) return;\n\n        items.push(obj);\n        this.downloads.set(fileId, items);\n\n        TdLibController.send({\n            '@type': 'downloadFile',\n            file_id: fileId,\n            priority: priority\n        });\n    }\n\n    cancelGetRemoteFile(fileId, obj) {\n        if (!this.downloads.has(fileId)) return;\n\n        if (!obj) {\n            this.downloads.delete(fileId);\n        } else {\n            const items = this.downloads.get(fileId).filter(x => x !== obj);\n            this.downloads.set(fileId, items);\n        }\n\n        TdLibController.send({\n            '@type': 'cancelDownloadFile',\n            file_id: fileId,\n            only_if_pending: false\n        });\n    }\n\n    uploadFile(fileId, obj) {\n        if (this.uploads.has(fileId)) {\n            let items = this.uploads.get(fileId);\n            items.push(obj);\n        } else {\n            this.uploads.set(fileId, [obj]);\n        }\n\n        console.log('[perf] uploadFile file_id=' + fileId);\n    }\n\n    cancelUploadFile(fileId, obj) {\n        if (this.uploads.has(fileId)) {\n            this.uploads.delete(fileId);\n            console.log('cancel_upload_message id=' + obj.id);\n            TdLibController.send({\n                '@type': 'deleteMessages',\n                chat_id: obj.chat_id,\n                message_ids: [obj.id],\n                revoke: true\n            });\n        }\n    }\n\n    get = fileId => {\n        return this.items.get(fileId);\n    };\n\n    set = file => {\n        this.items.set(file.id, file);\n    };\n\n    getBlob = fileId => {\n        return this.blobItems.get(fileId);\n    };\n\n    setBlob = (fileId, blob) => {\n        this.blobItems.set(fileId, blob);\n    };\n\n    deleteBlob = fileId => {\n        this.blobItems.delete(fileId);\n    };\n\n    getLocationFile = locationId => {\n        const fileId = this.locationItems.get(locationId);\n\n        return this.get(fileId);\n    };\n\n    setLocationFile = (locationId, file) => {\n        this.locationItems.set(locationId, file.id);\n\n        this.set(file);\n    };\n\n    getBlobUrl = blob => {\n        if (!blob) {\n            return null;\n        }\n\n        if (this.urls.has(blob)) {\n            return this.urls.get(blob);\n        }\n\n        const url = URL.createObjectURL(blob);\n        this.urls.set(blob, url);\n\n        return url;\n    };\n\n    deleteBlobUrl = blob => {\n        if (this.urls.has(blob)) {\n            this.urls.delete(blob);\n        }\n    };\n\n    updatePhotoBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdatePhotoBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateAudioThumbnailBlob = (chatId, messageId, fileId) => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateAudioThumbnailBlob',\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateAudioBlob = (chatId, messageId, fileId) => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateAudioBlob',\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateVoiceNoteBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateVoiceNoteBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateVideoNoteThumbnailBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateVideoNoteThumbnailBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateVideoNoteBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateVideoNoteBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateAnimationThumbnailBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateAnimationThumbnailBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateAnimationBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateAnimationBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateDocumentBlob = (chatId, messageId, fileId) => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateDocumentBlob',\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateVideoThumbnailBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateVideoThumbnailBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateVideoBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateVideoBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateStickerThumbnailBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateStickerThumbnailBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateStickerBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateStickerBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateLocationBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateLocationBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateDocumentThumbnailBlob = (chatId, messageId, fileId) => {\n        this.emit('clientUpdateDocumentThumbnailBlob', {\n            chatId: chatId,\n            messageId: messageId,\n            fileId: fileId\n        });\n    };\n\n    updateUserPhotoBlob(userId, fileId) {\n        this.emit('clientUpdateUserBlob', {\n            userId: userId,\n            fileId: fileId\n        });\n    }\n\n    updateChatPhotoBlob(chatId, fileId) {\n        this.emit('clientUpdateChatBlob', {\n            chatId: chatId,\n            fileId: fileId\n        });\n    }\n}\n\nconst store = new FileStore();\nwindow.file = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { ANIMATION_DURATION_300MS } from '../../Constants';\nimport FileStore from '../../Stores/FileStore';\nimport './FileProgress.css';\n\nconst circleStyle = { circle: 'file-progress-circle' };\n\nclass FileProgress extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.completeAnimation = false;\n        const { file } = this.props;\n        this.state = {\n            prevPropsFile: file,\n            prevFile: null,\n            file: FileStore.get(file.id) || file\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        const { file } = props;\n        const { prevPropsFile } = state;\n\n        if (file && prevPropsFile && file.id !== prevPropsFile.id) {\n            return {\n                prevPropsFile: file,\n                prevFile: null,\n                file: FileStore.get(file.id) || file\n            };\n        }\n\n        return null;\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { download, upload, icon, thumbnailSrc } = this.props;\n\n        if (nextProps.thumbnailSrc !== thumbnailSrc) {\n            return true;\n        }\n\n        if (nextProps.icon !== icon) {\n            return true;\n        }\n\n        if (this.isDownloading(nextState.file, nextState.prevFile) && !download) {\n            return false;\n        }\n\n        if (this.isUploading(nextState.file, nextState.prevFile) && !upload) {\n            return false;\n        }\n\n        const nextLocal = nextState.file ? nextState.file.local : null;\n        const nextIdbKey = nextState.file ? nextState.file.idb_key : null;\n        const prevLocal = this.state.prevFile ? this.state.prevFile.local : null;\n        const prevIdbKey = this.state.prevFile ? this.state.prevFile.idb_key : null;\n        const isDownloadingCompleted =\n            prevLocal && nextLocal && !prevLocal.is_downloading_completed && nextLocal.is_downloading_completed;\n        const receiveIdbKey = nextIdbKey && !prevIdbKey;\n\n        if (nextState.file.id === this.state.file.id && isDownloadingCompleted && receiveIdbKey) {\n            return false;\n        }\n\n        if (nextState.file !== this.state.file) {\n            return true;\n        }\n\n        if (nextState.prevFile !== this.state.prevFile) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        this.mount = true;\n        FileStore.on('updateFile', this.onUpdateFile);\n    }\n\n    componentWillUnmount() {\n        this.mount = false;\n        FileStore.removeListener('updateFile', this.onUpdateFile);\n    }\n\n    onUpdateFile = update => {\n        const currentFile = this.state.file;\n        const nextFile = update.file;\n\n        if (currentFile && currentFile.id === nextFile.id) {\n            this.setState({ file: nextFile, prevFile: currentFile });\n        }\n    };\n\n    isDownloading = (file, prevFile) => {\n        if (!this.props.download) return false;\n\n        const wasActive = prevFile && prevFile.local && prevFile.local.is_downloading_active;\n        const isActive = file && file.local && file.local.is_downloading_active;\n\n        return wasActive || isActive;\n    };\n\n    isUploading = (file, prevFile) => {\n        if (!this.props.upload) return false;\n\n        const wasActive = prevFile && prevFile.remote && prevFile.remote.is_uploading_active;\n        const isActive = file && file.remote && file.remote.is_uploading_active;\n\n        return wasActive || isActive;\n    };\n\n    getProgressParams = (file, prevFile) => {\n        const { local, remote } = file;\n\n        let wasActive = false;\n        let isActive = false;\n        let isCompleted = false;\n        let progressSize = 0;\n        let size = 0;\n        if (this.isDownloading(file, prevFile)) {\n            wasActive = prevFile && prevFile.local && prevFile.local.is_downloading_active;\n            isActive = local.is_downloading_active;\n            isCompleted = local.is_downloading_completed;\n            progressSize = local.downloaded_size;\n            size = file.size;\n            // console.log(\n            //     `FileProgress.getProgressParams isDownloading id=${\n            //         file.id\n            //     } was_active=${wasActive} is_active=${isActive} is_completed=${isCompleted} progress_size=${progressSize} size=${size}`,\n            //     file,\n            //     prevFile\n            // );\n        } else if (this.isUploading(file, prevFile)) {\n            wasActive = prevFile && prevFile.remote && prevFile.remote.is_uploading_active;\n            isActive = remote.is_uploading_active;\n            isCompleted = remote.is_uploading_completed;\n            progressSize = remote.uploaded_size;\n            size = file.size;\n            // console.log(\n            //     `FileProgress.getProgressParams isUploading id=${\n            //         file.id\n            //     } was_active=${wasActive} is_active=${isActive} is_completed=${isCompleted} progress_size=${progressSize} size=${size}`,\n            //     file,\n            //     prevFile\n            // );\n        } else {\n            // console.log(\n            //     `FileProgress.getProgressParams none id=${file.id} download=${this.props.download} upload=${\n            //         this.props.upload\n            //     } was_active=${wasActive} is_active=${isActive} is_completed=${isCompleted} progress_size=${progressSize} size=${size}`,\n            //     file,\n            //     prevFile\n            // );\n        }\n\n        return [wasActive, isActive, isCompleted, progressSize, size];\n    };\n\n    render() {\n        let { thumbnailSrc, cancelButton, zIndex, icon, completeIcon } = this.props;\n        const { file, prevFile } = this.state;\n        if (!file) return null;\n\n        const [wasActive, isActive, isCompleted, progressSize, size] = this.getProgressParams(file, prevFile);\n\n        let inProgress = isActive;\n        let progress = 0;\n        if (isActive) {\n            progress = progressSize && size ? 100 - ((size - progressSize) / size) * 100 : 1;\n        }\n\n        const startCompleteAnimation = wasActive && !isActive;\n        if (startCompleteAnimation) {\n            this.completeAnimation = true;\n            // console.log('FileProgress.render animationComplete=true');\n            progress = isCompleted ? 100 : 0;\n            inProgress = true;\n            setTimeout(() => {\n                this.completeAnimation = false;\n                if (!this.mount) return;\n                // console.log('FileProgress.render animationComplete=false');\n\n                this.setState({ prevFile: null });\n            }, ANIMATION_DURATION_300MS);\n        }\n\n        const style = {\n            zIndex: zIndex,\n            background: !thumbnailSrc && typeof thumbnailSrc !== 'undefined' ? null : 'rgba(0, 0, 0, 0.25)'\n        };\n\n        const isDownloadingCompleted =\n            file &&\n            file.local &&\n            (file.local.is_downloading_completed || file.idb_key || file.local.is_uploading_completed) &&\n            !this.completeAnimation &&\n            !isActive;\n\n        // console.log(\n        //     `FileProgress.render \\\\\n        //     id=${file.id} showProgress=${inProgress} progress=${progress} \\\\\n        //     was_active=${wasActive} is_active=${isActive} is_completed=${isCompleted} \\\\\n        //     progress_size=${progressSize} size=${size} complete_animation=${this.completeAnimation} \\\\\n        //     is_downloading_completed=${isDownloadingCompleted}\n        //     completeIcon=${completeIcon}`,\n        //     file,\n        //     prevFile\n        // );\n        //cancelButton = true;\n        //inProgress = true;\n\n        if (isDownloadingCompleted) {\n            // console.log('FileProgress.render completeIcon');\n            if (completeIcon) {\n                return (\n                    <div className='file-progress' style={style}>\n                        <div className='file-progress-icon'>{completeIcon}</div>\n                    </div>\n                );\n            }\n\n            return null;\n        }\n\n        if (inProgress || this.completeAnimation) {\n            // console.log('FileProgress.render inProgressIcon');\n            return (\n                <div className='file-progress' style={style}>\n                    <div className='file-progress-indicator'>\n                        <CircularProgress\n                            classes={circleStyle}\n                            variant='static'\n                            value={progress}\n                            size={42}\n                            thickness={2}\n                        />\n                    </div>\n                    {cancelButton && (\n                        <div className='file-progress-icon'>\n                            <CloseIcon />\n                        </div>\n                    )}\n                </div>\n            );\n        }\n\n        if (icon) {\n            // console.log('FileProgress.render icon');\n            return (\n                <div className='file-progress' style={style}>\n                    <div className='file-progress-icon'>{icon}</div>\n                </div>\n            );\n        }\n\n        return null;\n    }\n}\n\nFileProgress.propTypes = {\n    file: PropTypes.object.isRequired,\n    thumbnailSrc: PropTypes.object,\n    cancelButton: PropTypes.bool,\n    download: PropTypes.bool,\n    upload: PropTypes.bool,\n    zIndex: PropTypes.number,\n\n    icon: PropTypes.node,\n    completeIcon: PropTypes.node\n};\n\nFileProgress.defaultProps = {\n    cancelButton: false,\n    download: true,\n    upload: false\n};\n\nexport default FileProgress;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass MessageStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.items = new Map();\n        this.selectedItems = new Map();\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateNewMessage':\n                this.set(update.message);\n                this.emit('updateNewMessage', update);\n                break;\n            case 'updateDeleteMessages':\n                this.emit('updateDeleteMessages', update);\n                break;\n            case 'updateMessageEdited': {\n                const chat = this.items.get(update.chat_id);\n                if (chat) {\n                    const message = chat.get(update.message_id);\n                    if (message) {\n                        message.reply_markup = update.reply_markup;\n                        message.edit_date = update.edit_date;\n                    }\n                }\n                this.emit('updateMessageEdited', update);\n                break;\n            }\n            case 'updateMessageViews': {\n                const chat = this.items.get(update.chat_id);\n                if (chat) {\n                    const message = chat.get(update.message_id);\n                    if (message && update.views > message.views) {\n                        message.views = update.views;\n                    }\n                }\n                this.emit('updateMessageViews', update);\n                break;\n            }\n            case 'updateMessageContent': {\n                const chat = this.items.get(update.chat_id);\n                if (chat) {\n                    const message = chat.get(update.message_id);\n                    if (message) {\n                        update.old_content = message.content;\n                        message.content = update.new_content;\n                    }\n                }\n                this.emit('updateMessageContent', update);\n                break;\n            }\n            case 'updateMessageContentOpened': {\n                const { chat_id, message_id } = update;\n\n                const message = this.get(chat_id, message_id);\n                if (message) {\n                    const { content } = message;\n                    switch (content['@type']) {\n                        case 'messageVoiceNote': {\n                            message.content.is_listened = true;\n                            break;\n                        }\n                        case 'messageVideoNote': {\n                            message.content.is_viewed = true;\n                            break;\n                        }\n                    }\n                }\n\n                this.emit('updateMessageContentOpened', update);\n                break;\n            }\n            case 'updateMessageSendSucceeded': {\n                const chat = this.items.get(update.message.chat_id);\n                if (chat) {\n                    const message = chat.get(update.old_message_id);\n                    if (message) {\n                        message.sending_state = update.message.sending_state;\n                    }\n                    if (update.old_message_id !== update.message.id) {\n                        this.set(update.message);\n                    }\n                }\n\n                this.set(update.message);\n                this.emit('updateMessageSendSucceeded', update);\n                break;\n            }\n            case 'updateMessageSendFailed': {\n                if (update.message.sending_state) {\n                    update.message.sending_state.error_code = update.error_code;\n                    update.message.sending_state.error_message = update.error_message;\n                }\n\n                const chat = this.items.get(update.message.chat_id);\n                if (chat) {\n                    const message = chat.get(update.old_message_id);\n                    if (message) {\n                        message.sending_state = update.message.sending_state;\n                        if (message.sending_state) {\n                            message.sending_state.error_code = update.error_code;\n                            message.sending_state.error_message = update.error_message;\n                        }\n                    }\n                    if (update.old_message_id !== update.message.id) {\n                        this.set(update.message);\n                    }\n                }\n                this.emit('updateMessageSendFailed', update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateMessageHighlighted': {\n                this.emit('clientUpdateMessageHighlighted', update);\n                break;\n            }\n            case 'clientUpdateMessageSelected': {\n                if (update.selected) {\n                    this.selectedItems.set(`chatId=${update.chatId}_messageId=${update.messageId}`, {\n                        chatId: update.chatId,\n                        messageId: update.messageId\n                    });\n                } else {\n                    this.selectedItems.delete(`chatId=${update.chatId}_messageId=${update.messageId}`);\n                }\n\n                this.emit('clientUpdateMessageSelected', update);\n                break;\n            }\n            case 'clientUpdateClearSelection': {\n                this.selectedItems.clear();\n\n                this.emit('clientUpdateClearSelection', update);\n                break;\n            }\n            case 'clientUpdateChatId': {\n                if (this.selectedItems.size > 0) {\n                    this.selectedItems.clear();\n\n                    this.emit('clientUpdateClearSelection', { '@type': 'clientUpdateClearSelection' });\n                }\n\n                break;\n            }\n            case 'clientUpdateReply': {\n                this.emit('clientUpdateReply', update);\n                break;\n            }\n            case 'clientUpdateMessagesInView': {\n                this.emit('clientUpdateMessagesInView', update);\n                break;\n            }\n        }\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    load(chatId, messageId) {\n        TdLibController.send({\n            '@type': 'getMessage',\n            chat_id: chatId,\n            message_id: messageId\n        })\n            .then(message => {\n                this.set(message);\n                this.emit('getMessageResult', message);\n            })\n            .catch(error => {\n                const deletedMessage = {\n                    '@type': 'deletedMessage',\n                    chat_id: chatId,\n                    id: messageId,\n                    content: null\n                };\n                this.set(deletedMessage);\n                this.emit('getMessageResult', deletedMessage);\n            });\n    }\n\n    get(chatId, messageId) {\n        let chat = this.items.get(chatId);\n        if (!chat) {\n            //this.load(chatId, messageId);\n            return null;\n        }\n\n        let message = chat.get(messageId);\n        if (!message) {\n            //this.load(chatId, messageId);\n            return null;\n        }\n\n        return message;\n    }\n\n    set(message) {\n        let chat = this.items.get(message.chat_id);\n        if (!chat) {\n            chat = new Map();\n            this.items.set(message.chat_id, chat);\n        }\n\n        chat.set(message.id, message);\n    }\n\n    setItems(messages) {\n        for (let i = 0; i < messages.length; i++) {\n            this.set(messages[i]);\n        }\n    }\n}\n\nconst store = new MessageStore();\nwindow.message = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { getPhotoSize, getPhotoThumbnailSize, getSize } from './Common';\nimport { getChatUserId } from './Chat';\nimport { getProfilePhoto } from './User';\nimport { getLocationId } from './Message';\nimport {\n    FILE_PRIORITY,\n    LOCATION_HEIGHT,\n    LOCATION_SCALE,\n    LOCATION_WIDTH,\n    LOCATION_ZOOM,\n    PHOTO_BIG_SIZE,\n    PHOTO_SIZE,\n    PRELOAD_ANIMATION_SIZE,\n    PRELOAD_AUDIO_SIZE,\n    PRELOAD_DOCUMENT_SIZE,\n    PRELOAD_STICKER_SIZE,\n    PRELOAD_VIDEO_SIZE,\n    PRELOAD_VIDEONOTE_SIZE,\n    PRELOAD_VOICENOTE_SIZE,\n    THUMBNAIL_PRIORITY\n} from '../Constants';\nimport ChatStore from '../Stores/ChatStore';\nimport FileStore from '../Stores/FileStore';\nimport MessageStore from '../Stores/MessageStore';\nimport UserStore from '../Stores/UserStore';\nimport TdLibController from '../Controllers/TdLibController';\n\nfunction getSizeString(size) {\n    if (!size) return `0 B`;\n\n    if (size < 1024) {\n        return `${size} B`;\n    }\n\n    if (size < 1024 * 1024) {\n        return `${(size / 1024).toFixed(1)} KB`;\n    }\n\n    if (size < 1024 * 1024 * 1024) {\n        return `${(size / 1024 / 1024).toFixed(1)} MB`;\n    }\n\n    return `${(size / 1024 / 1024 / 1024).toFixed(1)} GB`;\n}\n\nfunction getFileSize(file) {\n    if (!file) return null;\n\n    let size = file.size;\n    if (!size) return null;\n\n    return getSizeString(size);\n}\n\nfunction getBigPhoto(photo) {\n    if (!photo) return null;\n\n    return photo.big;\n}\n\nfunction saveData(data, filename, mime) {\n    let blob = new Blob([data], { type: mime || 'application/octet-stream' });\n    if (typeof window.navigator.msSaveBlob !== 'undefined') {\n        // IE workaround for \"HTML7007: One or more blob URLs were\n        // revoked by closing the blob for which they were created.\n        // These URLs will no longer resolve as the data backing\n        // the URL has been freed.\"\n        window.navigator.msSaveBlob(blob, filename);\n    } else {\n        let blobURL = window.URL.createObjectURL(blob);\n        let tempLink = document.createElement('a');\n        tempLink.style.display = 'none';\n        tempLink.href = blobURL;\n        tempLink.setAttribute('download', filename);\n\n        // Safari thinks _blank anchor are pop ups. We only want to set _blank\n        // target if the browser does not support the HTML5 download attribute.\n        // This allows you to download files in desktop safari if pop up blocking\n        // is enabled.\n        if (typeof tempLink.download === 'undefined') {\n            tempLink.setAttribute('target', '_blank');\n        }\n\n        document.body.appendChild(tempLink);\n        tempLink.click();\n        document.body.removeChild(tempLink);\n        window.URL.revokeObjectURL(blobURL);\n    }\n}\n\nfunction saveBlob(blob, filename) {\n    if (typeof window.navigator.msSaveBlob !== 'undefined') {\n        // IE workaround for \"HTML7007: One or more blob URLs were\n        // revoked by closing the blob for which they were created.\n        // These URLs will no longer resolve as the data backing\n        // the URL has been freed.\"\n        window.navigator.msSaveBlob(blob, filename);\n    } else {\n        let blobURL = window.URL.createObjectURL(blob);\n        let tempLink = document.createElement('a');\n        tempLink.style.display = 'none';\n        tempLink.href = blobURL;\n        tempLink.setAttribute('download', filename);\n\n        // Safari thinks _blank anchor are pop ups. We only want to set _blank\n        // target if the browser does not support the HTML5 download attribute.\n        // This allows you to download files in desktop safari if pop up blocking\n        // is enabled.\n        if (typeof tempLink.download === 'undefined') {\n            tempLink.setAttribute('target', '_blank');\n        }\n\n        document.body.appendChild(tempLink);\n        tempLink.click();\n        document.body.removeChild(tempLink);\n        window.URL.revokeObjectURL(blobURL);\n    }\n}\n\nasync function loadReplies(store, chatId, messageIds) {\n    if (!chatId) return;\n    if (!messageIds) return;\n    if (!messageIds.length) return;\n\n    const result = await TdLibController.send({\n        '@type': 'getMessages',\n        chat_id: chatId,\n        message_ids: messageIds\n    });\n\n    result.messages = result.messages.map((message, i) => {\n        return (\n            message || {\n                '@type': 'deletedMessage',\n                chat_id: chatId,\n                id: messageIds[i],\n                content: null\n            }\n        );\n    });\n\n    MessageStore.setItems(result.messages);\n\n    for (let i = messageIds.length - 1; i >= 0; i--) {\n        MessageStore.emit('getMessageResult', MessageStore.get(chatId, messageIds[i]));\n    }\n\n    store = FileStore.getStore();\n\n    loadReplyContents(store, result.messages);\n}\n\nfunction loadReplyContents(store, messages) {\n    for (let i = messages.length - 1; i >= 0; i--) {\n        const message = messages[i];\n        if (!message) {\n            continue;\n        }\n\n        const { content } = message;\n        if (content) {\n            switch (content['@type']) {\n                case 'messageAnimation': {\n                    const { animation } = content;\n\n                    loadAnimationThumbnailContent(store, animation, message);\n                    break;\n                }\n                case 'messageAudio': {\n                    const { audio } = content;\n\n                    loadAudioThumbnailContent(store, audio, message);\n                    break;\n                }\n                case 'messageChatChangePhoto': {\n                    const { photo } = content;\n\n                    loadPhotoContent(store, photo, message);\n                    break;\n                }\n                case 'messageDocument': {\n                    const { document } = content;\n\n                    loadDocumentThumbnailContent(store, document, message);\n                    break;\n                }\n                case 'messageGame': {\n                    const { game } = content;\n\n                    loadGameThumbnailContent(store, game, message);\n                    break;\n                }\n                case 'messagePhoto': {\n                    const { photo } = content;\n\n                    loadPhotoContent(store, photo, message);\n                    break;\n                }\n                case 'messageSticker': {\n                    const { sticker } = content;\n\n                    loadStickerThumbnailContent(store, sticker, message);\n                    break;\n                }\n                case 'messageText': {\n                    const { web_page } = content;\n                    if (!web_page) break;\n\n                    const { animation, audio, document, photo, sticker, video, video_note } = web_page;\n\n                    if (photo) {\n                        loadPhotoContent(store, photo, message);\n                        break;\n                    }\n\n                    if (animation) {\n                        loadAnimationThumbnailContent(store, animation, message);\n                        break;\n                    }\n\n                    if (audio) {\n                        loadAudioThumbnailContent(store, audio, message);\n                        break;\n                    }\n\n                    if (document) {\n                        loadDocumentThumbnailContent(store, document, message);\n                        break;\n                    }\n\n                    if (sticker) {\n                        loadStickerThumbnailContent(store, sticker, message);\n                        break;\n                    }\n\n                    if (video) {\n                        loadVideoThumbnailContent(store, video, message);\n                        break;\n                    }\n\n                    if (video_note) {\n                        loadVideoNoteThumbnailContent(store, video_note, message);\n                        break;\n                    }\n\n                    break;\n                }\n                case 'messageVideo': {\n                    const { video } = content;\n\n                    loadVideoThumbnailContent(store, video, message);\n                    break;\n                }\n                case 'messageVideoNote': {\n                    const { video_note } = content;\n\n                    loadVideoNoteThumbnailContent(store, video_note, message);\n                    break;\n                }\n            }\n        }\n    }\n}\n\nfunction loadAudioContent(store, audio, message, useFileSize = true) {\n    if (!audio) return;\n    if (!message) return;\n\n    let { audio: file } = audio;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id, size } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateAudioBlob(message.chat_id, message.id, id),\n        () => {\n            if (!useFileSize || (size && size < PRELOAD_AUDIO_SIZE)) {\n                FileStore.getRemoteFile(id, FILE_PRIORITY, message);\n            }\n        }\n    );\n}\n\nfunction loadAudioThumbnailContent(store, audio, message) {\n    if (!audio) return false;\n    if (!message) return false;\n\n    const { album_cover_thumbnail: photoSize } = audio;\n    if (!photoSize) return false;\n\n    let { photo: file } = photoSize;\n    if (!file) return false;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(file.id);\n    if (blob) return true;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateAudioThumbnailBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, message)\n    );\n\n    return true;\n}\n\nfunction loadAnimationContent(store, animation, message, useFileSize = true) {\n    if (!animation) return;\n    if (!message) return;\n\n    let { animation: file } = animation;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id, size } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateAnimationBlob(message.chat_id, message.id, id),\n        () => {\n            if (!useFileSize || (size && size < PRELOAD_ANIMATION_SIZE)) {\n                FileStore.getRemoteFile(id, FILE_PRIORITY, message);\n            }\n        }\n    );\n}\n\nfunction loadAnimationThumbnailContent(store, animation, message) {\n    if (!animation) return false;\n    if (!message) return false;\n\n    const { thumbnail: photoSize } = animation;\n    if (!photoSize) return false;\n\n    let { photo: file } = photoSize;\n    if (!file) return false;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(file.id);\n    if (blob) return true;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateAnimationThumbnailBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, message)\n    );\n\n    return true;\n}\n\nfunction loadContactContent(store, contact, message) {\n    if (!contact) return;\n    if (!message) return;\n\n    const { user_id } = contact;\n    const user = UserStore.get(user_id);\n    if (!user) return;\n\n    loadUserContent(store, user);\n}\n\nfunction loadDocumentContent(store, document, message, useFileSize = true) {\n    if (!document) return;\n    if (!message) return;\n\n    let { document: file } = document;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id, size } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateDocumentBlob(message.chat_id, message.id, id),\n        () => {\n            if (!useFileSize || (size && size < PRELOAD_DOCUMENT_SIZE)) {\n                FileStore.getRemoteFile(id, FILE_PRIORITY, message);\n            }\n        }\n    );\n}\n\nfunction loadDocumentThumbnailContent(store, document, message) {\n    if (!document) return false;\n    if (!message) return false;\n\n    const { thumbnail: photoSize } = document;\n    if (!photoSize) return false;\n\n    let { photo: file } = photoSize;\n    if (!file) return false;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(file.id);\n    if (blob) return true;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateDocumentThumbnailBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, message)\n    );\n\n    return true;\n}\n\nfunction loadGameContent(store, game, message, useFileSize = true) {\n    if (!game) return;\n    if (!message) return;\n\n    const { animation } = game;\n\n    loadAnimationContent(store, animation, message, useFileSize);\n}\n\nfunction loadGameThumbnailContent(store, game, message) {\n    if (!game) return false;\n    if (!message) return false;\n\n    const { photo, animation } = game;\n    if (loadAnimationThumbnailContent(store, animation, message)) {\n        return true;\n    }\n\n    loadPhotoContent(store, photo, message);\n    return true;\n}\n\nasync function loadLocationContent(store, location, message) {\n    if (!location) return;\n    if (!message) return;\n\n    const locationId = getLocationId(location);\n    if (!locationId) return;\n\n    let file = FileStore.getLocationFile(locationId);\n    if (!file) {\n        file = await TdLibController.send({\n            '@type': 'getMapThumbnailFile',\n            location: location,\n            zoom: LOCATION_ZOOM,\n            width: LOCATION_WIDTH,\n            height: LOCATION_HEIGHT,\n            scale: LOCATION_SCALE,\n            chat_id: message.chat_id\n        });\n        FileStore.setLocationFile(locationId, file);\n\n        store = FileStore.getStore();\n    }\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(file.id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateLocationBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, FILE_PRIORITY, message)\n    );\n}\n\nfunction loadBigPhotoContent(store, photo, message) {\n    if (!photo) return;\n    if (!message) return;\n\n    const { sizes } = photo;\n    if (!sizes) return;\n\n    const photoSize = getSize(sizes, PHOTO_BIG_SIZE);\n    if (!photoSize) return;\n\n    let { photo: file } = photoSize;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updatePhotoBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, FILE_PRIORITY, message)\n    );\n}\n\nfunction loadPhotoContent(store, photo, message) {\n    if (!photo) return;\n    if (!message) return;\n\n    const { sizes } = photo;\n    if (!sizes) return;\n\n    const photoSize = getPhotoSize(sizes);\n    if (!photoSize) return;\n\n    let { photo: file } = photoSize;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updatePhotoBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, FILE_PRIORITY, message)\n    );\n}\n\nfunction loadPhotoThumbnailContent(store, photo, message) {\n    if (!photo) return false;\n    if (!message) return false;\n\n    const photoSize = getPhotoThumbnailSize(photo.sizes);\n    if (!photoSize) return false;\n\n    let { photo: file } = photoSize;\n    if (!file) return false;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return true;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updatePhotoBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, message)\n    );\n\n    return true;\n}\n\nfunction loadStickerContent(store, sticker, message, useFileSize = true) {\n    if (!sticker) return;\n    if (!message) return;\n\n    let { sticker: file } = sticker;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id, size } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateStickerBlob(message.chat_id, message.id, id),\n        () => {\n            if (!useFileSize || (size && size < PRELOAD_STICKER_SIZE)) {\n                FileStore.getRemoteFile(id, FILE_PRIORITY, message);\n            }\n        }\n    );\n}\n\nfunction loadStickerThumbnailContent(store, sticker, message) {\n    if (!sticker) return false;\n\n    const { thumbnail: photoSize } = sticker;\n    if (!photoSize) return false;\n\n    let { photo: file } = photoSize;\n    if (!file) return false;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return true;\n\n    const chatId = message ? message.chat_id : 0;\n    const messageId = message ? message.id : 0;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateStickerThumbnailBlob(chatId, messageId, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, message || sticker)\n    );\n\n    return true;\n}\n\nfunction loadVideoContent(store, video, message, useFileSize = true) {\n    if (!video) return;\n    if (!message) return;\n\n    let { video: file } = video;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id, size } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateVideoBlob(message.chat_id, message.id, id),\n        () => {\n            if (!useFileSize || (size && size < PRELOAD_VIDEO_SIZE)) {\n                FileStore.getRemoteFile(id, FILE_PRIORITY, message);\n            }\n        }\n    );\n}\n\nfunction loadVideoThumbnailContent(store, video, message) {\n    if (!video) return false;\n    if (!message) return false;\n\n    const { thumbnail: photoSize } = video;\n    if (!photoSize) return false;\n\n    let { photo: file } = photoSize;\n    if (!file) return false;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return true;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateVideoThumbnailBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, message)\n    );\n\n    return true;\n}\n\nfunction loadVideoNoteContent(store, videoNote, message, useFileSize = true) {\n    if (!videoNote) return;\n    if (!message) return;\n\n    let { video: file } = videoNote;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id, size } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateVideoNoteBlob(message.chat_id, message.id, id),\n        () => {\n            if (!useFileSize || (size && size < PRELOAD_VIDEONOTE_SIZE)) {\n                FileStore.getRemoteFile(id, FILE_PRIORITY, message);\n            }\n        }\n    );\n}\n\nfunction loadVideoNoteThumbnailContent(store, videoNote, message) {\n    if (!videoNote) return false;\n    if (!message) return false;\n\n    const { thumbnail: photoSize } = videoNote;\n    if (!photoSize) return false;\n\n    let { photo: file } = photoSize;\n    if (!file) return false;\n\n    file = FileStore.get(file.id) || file;\n    const { id } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return true;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateVideoNoteThumbnailBlob(message.chat_id, message.id, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, message)\n    );\n\n    return true;\n}\n\nfunction loadVoiceNoteContent(store, voiceNote, message, useFileSize = true) {\n    if (!voiceNote) return;\n    if (!message) return;\n\n    let { voice: file } = voiceNote;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    const { id, size } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateVoiceNoteBlob(message.chat_id, message.id, id),\n        () => {\n            if (!useFileSize || (size && size < PRELOAD_VOICENOTE_SIZE)) {\n                FileStore.getRemoteFile(id, FILE_PRIORITY, message);\n            }\n        }\n    );\n}\n\nfunction loadMessageContents(store, messages) {\n    const users = new Map();\n    let chatId = 0;\n    const replies = new Map();\n\n    for (let i = messages.length - 1; i >= 0; i--) {\n        const message = messages[i];\n        if (!message) {\n            continue;\n        }\n\n        const { chat_id, content, sender_user_id, reply_to_message_id } = message;\n\n        if (sender_user_id) {\n            users.set(sender_user_id, sender_user_id);\n        }\n\n        if (reply_to_message_id) {\n            chatId = chat_id;\n            replies.set(reply_to_message_id, reply_to_message_id);\n        }\n\n        if (content) {\n            switch (content['@type']) {\n                case 'messageAnimation': {\n                    const { animation } = content;\n\n                    loadAnimationContent(store, animation, message);\n                    loadAnimationThumbnailContent(store, animation, message);\n                    break;\n                }\n                case 'messageAudio': {\n                    const { audio } = content;\n\n                    loadAudioContent(store, audio, message);\n                    loadAudioThumbnailContent(store, audio, message);\n                    break;\n                }\n                case 'messageChatChangePhoto': {\n                    const { photo } = content;\n\n                    loadPhotoContent(store, photo, message);\n                    break;\n                }\n                case 'messageContact': {\n                    const { contact } = content;\n\n                    loadContactContent(store, contact, message);\n                    break;\n                }\n                case 'messageDocument': {\n                    const { document } = content;\n\n                    loadDocumentContent(store, document, message);\n                    loadDocumentThumbnailContent(store, document, message);\n                    break;\n                }\n                case 'messageGame': {\n                    const { game } = content;\n\n                    loadGameContent(store, game, message);\n                    loadGameThumbnailContent(store, game, message);\n                    break;\n                }\n                case 'messageLocation': {\n                    const { location } = content;\n\n                    loadLocationContent(store, location, message);\n                    break;\n                }\n                case 'messageText': {\n                    const { web_page } = content;\n                    if (!web_page) {\n                        break;\n                    }\n\n                    const { animation, audio, document, photo, sticker, video, video_note, voice_note } = web_page;\n                    let loadPhoto = true;\n\n                    if (animation) {\n                        loadAnimationContent(store, animation, message);\n                        loadPhoto = !loadAnimationThumbnailContent(store, animation, message);\n                    }\n\n                    if (audio) {\n                        loadAudioContent(store, audio, message);\n                        loadPhoto = !loadAudioThumbnailContent(store, audio, message);\n                    }\n\n                    if (document) {\n                        loadDocumentContent(store, document, message);\n                        loadPhoto = !loadDocumentThumbnailContent(store, document, message);\n                    }\n\n                    if (sticker) {\n                        loadStickerContent(store, sticker, message);\n                        loadPhoto = !loadStickerThumbnailContent(store, sticker, message);\n                    }\n\n                    if (video) {\n                        // loadVideoContent(store, video, message); // start loading only on video click event\n                        loadPhoto = !loadVideoThumbnailContent(store, video, message);\n                    }\n\n                    if (video_note) {\n                        loadVideoNoteContent(store, video_note, message);\n                        loadPhoto = !loadVideoNoteThumbnailContent(store, video_note, message);\n                    }\n\n                    if (voice_note) {\n                        loadVoiceNoteContent(store, voice_note, message);\n                    }\n\n                    if (loadPhoto) {\n                        loadBigPhotoContent(store, photo, message);\n                        loadPhotoContent(store, photo, message);\n                        loadPhotoThumbnailContent(store, photo, message);\n                    }\n                    break;\n                }\n                case 'messagePhoto': {\n                    const { photo } = content;\n\n                    loadBigPhotoContent(store, photo, message);\n                    loadPhotoContent(store, photo, message);\n                    loadPhotoThumbnailContent(store, photo, message);\n                    break;\n                }\n                case 'messageSticker': {\n                    const { sticker } = content;\n\n                    loadStickerContent(store, sticker, message);\n                    loadStickerThumbnailContent(store, sticker, message);\n                    break;\n                }\n                case 'messageVenue': {\n                    const { venue } = content;\n                    const { location } = venue;\n\n                    loadLocationContent(store, location, message);\n                    break;\n                }\n                case 'messageVideo': {\n                    const { video } = content;\n\n                    // loadVideoContent(store, video, message); // start loading only on video click event\n                    loadVideoThumbnailContent(store, video, message);\n                    break;\n                }\n                case 'messageVideoNote': {\n                    const { video_note } = content;\n\n                    loadVideoNoteContent(store, video_note, message);\n                    loadVideoNoteThumbnailContent(store, video_note, message);\n                    break;\n                }\n                case 'messageVoiceNote': {\n                    const { voice_note } = content;\n\n                    loadVoiceNoteContent(store, voice_note, message);\n                    break;\n                }\n                default: {\n                    break;\n                }\n            }\n        }\n    }\n\n    loadUsersContent(store, [...users.keys()]);\n    loadReplies(store, chatId, [...replies.keys()]);\n}\n\nfunction saveOrDownload(file, fileName, obj, callback) {\n    if (!file) return;\n    if (!fileName) return;\n\n    if (file.arr) {\n        saveData(file.arr, fileName);\n        return;\n    }\n\n    let blob = FileStore.getBlob(file.id) || file.blob;\n    if (blob) {\n        saveBlob(blob, fileName);\n        return;\n    }\n\n    download(file, obj, () => {\n        if (callback) callback();\n\n        blob = FileStore.getBlob(file.id) || file.blob;\n        if (blob) {\n            saveBlob(blob, fileName);\n        }\n    });\n}\n\nfunction download(file, obj, callback) {\n    if (!file) return;\n    const { id, local } = file;\n\n    const blob = FileStore.getBlob(id);\n    if (blob) {\n        return;\n    }\n\n    if (local.is_downloading_completed) {\n        const store = FileStore.getStore();\n\n        FileStore.getLocalFile(store, file, null, callback, () => {\n            if (local.can_be_downloaded) {\n                FileStore.getRemoteFile(file.id, FILE_PRIORITY, obj);\n            }\n        });\n        return;\n    }\n\n    if (local.can_be_downloaded) {\n        FileStore.getRemoteFile(id, FILE_PRIORITY, obj);\n    }\n}\n\nfunction getMediaPreviewFile(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return [0, 0, null];\n\n    const { content } = message;\n    if (!content) return [0, 0, null];\n\n    switch (content['@type']) {\n        case 'messageAnimation': {\n            const { animation } = content;\n            if (animation && animation.thumbnail) {\n                return [animation.thumbnail.width, animation.thumbnail.height, animation.thumbnail.photo];\n            }\n            break;\n        }\n        case 'messageChatChangePhoto': {\n            return getMediaFile(chatId, messageId, PHOTO_SIZE);\n        }\n        case 'messageDocument': {\n            const { document } = content;\n            if (document) {\n                return [50, 50, document.document];\n            }\n            break;\n        }\n        case 'messagePhoto': {\n            return getMediaFile(chatId, messageId, PHOTO_SIZE);\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (web_page) {\n                const { animation, document, video, photo } = web_page;\n\n                if (animation && animation.thumbnail) {\n                    return [animation.thumbnail.width, animation.thumbnail.height, animation.thumbnail.photo];\n                }\n\n                if (document) {\n                    return [50, 50, document.document];\n                }\n\n                if (video && video.thumbnail) {\n                    return [video.thumbnail.width, video.thumbnail.height, video.thumbnail.photo];\n                }\n\n                if (photo) {\n                    return getMediaFile(chatId, messageId, PHOTO_SIZE);\n                }\n            }\n            break;\n        }\n        case 'messageVideo': {\n            const { video } = content;\n            if (video.thumbnail) {\n                return [video.thumbnail.width, video.thumbnail.height, video.thumbnail.photo];\n            }\n            break;\n        }\n        default: {\n            return [0, 0, null];\n        }\n    }\n\n    return [0, 0, null];\n}\n\nfunction getMediaFile(chatId, messageId, size) {\n    if (!size) return [0, 0, null];\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return [0, 0, null];\n\n    const { content } = message;\n    if (!content) return [0, 0, null];\n\n    switch (content['@type']) {\n        case 'messageAnimation': {\n            const { animation } = content;\n            if (animation) {\n                return [animation.width, animation.height, animation.animation];\n            }\n            break;\n        }\n        case 'messageChatChangePhoto': {\n            const { photo } = content;\n            if (photo) {\n                const photoSize = getSize(photo.sizes, size);\n                if (photoSize) {\n                    return [photoSize.width, photoSize.height, photoSize.photo];\n                }\n            }\n            break;\n        }\n        case 'messageDocument': {\n            const { document } = content;\n            if (document) {\n                return [50, 50, document.document];\n            }\n            break;\n        }\n        case 'messagePhoto': {\n            const { photo } = content;\n            if (photo) {\n                const photoSize = getSize(photo.sizes, size);\n                if (photoSize) {\n                    return [photoSize.width, photoSize.height, photoSize.photo];\n                }\n            }\n            break;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (web_page) {\n                const { animation, document, photo, video } = web_page;\n                if (animation) {\n                    return [animation.width, animation.height, animation.animation];\n                }\n\n                if (document) {\n                    return [50, 50, document.document];\n                }\n\n                if (photo) {\n                    const photoSize = getSize(photo.sizes, size);\n                    if (photoSize) {\n                        return [photoSize.width, photoSize.height, photoSize.photo];\n                    }\n                    break;\n                }\n\n                if (video) {\n                    return [video.width, video.height, video.video];\n                }\n            }\n            break;\n        }\n        case 'messageVideo': {\n            const { video } = content;\n            if (video) {\n                return [video.width, video.height, video.video];\n            }\n            break;\n        }\n        default: {\n        }\n    }\n\n    return [0, 0, null];\n}\n\nfunction cancelLoadMediaViewerContent(messages) {\n    if (!messages) return;\n    if (!messages.length) return;\n\n    for (let i = 0; i < messages.length; i++) {\n        let message = messages[i];\n        const { content } = message;\n        if (content) {\n            switch (content['@type']) {\n                case 'messagePhoto': {\n                    const { photo } = content;\n                    if (!photo) break;\n\n                    // preview\n                    /*let [previewId, previewPid, previewIdbKey] = getPhotoPreviewFile(message);\n                    if (previewPid) {\n                        let preview = this.getPreviewPhotoSize(message.content.photo.sizes);\n                        if (!preview.blob){\n                            FileStore.getLocalFile(store, preview, null,\n                                () => MessageStore.updateMessagePhoto(message.id),\n                                () => { if (loadRemote)  FileStore.getRemoteFile(previewId, 2, message); },\n                                'load_contents_preview_',\n                                message.id);\n\n                        }\n                    }*/\n\n                    const photoSize = getSize(photo.sizes, PHOTO_BIG_SIZE);\n                    if (!photoSize) break;\n\n                    const { photo: file } = photoSize;\n                    const blob = file.blob || FileStore.getBlob(file.id);\n                    if (blob) return;\n\n                    FileStore.cancelGetRemoteFile(file.id);\n                    break;\n                }\n                case 'messageVideo': {\n                    const { video } = content;\n                    if (!video) break;\n\n                    if (video.thumbnail) {\n                        const { photo: file } = video.thumbnail;\n                        const blob = file.blob || FileStore.getBlob(file.id);\n                        if (blob) break;\n\n                        FileStore.cancelGetRemoteFile(file.id);\n                    }\n\n                    const { video: file } = video;\n                    if (!file) break;\n\n                    const blob = file.blob || FileStore.getBlob(file.id);\n                    if (blob) break;\n\n                    FileStore.cancelGetRemoteFile(file.id);\n                    break;\n                }\n                case 'messageText': {\n                    const { web_page } = message.content;\n                    if (web_page) {\n                        const { video } = web_page;\n\n                        if (video) {\n                            if (video.thumbnail) {\n                                const { photo: file } = video.thumbnail;\n                                const blob = file.blob || FileStore.getBlob(file.id);\n                                if (blob) break;\n\n                                FileStore.cancelGetRemoteFile(file.id);\n                            }\n\n                            const { video: file } = video;\n                            if (!file) break;\n\n                            const blob = file.blob || FileStore.getBlob(file.id);\n                            if (blob) break;\n\n                            FileStore.cancelGetRemoteFile(file.id);\n                        }\n                    }\n\n                    break;\n                }\n            }\n        }\n    }\n}\n\nfunction loadMediaViewerContent(messages, useSizeLimit = false) {\n    if (!messages) return;\n    if (!messages.length) return;\n\n    const store = FileStore.getStore();\n\n    for (let i = 0; i < messages.length; i++) {\n        let message = messages[i];\n        const { content } = message;\n        if (content) {\n            switch (content['@type']) {\n                case 'messageAnimation': {\n                    const { animation } = content;\n\n                    loadAnimationContent(store, animation, message, useSizeLimit);\n                    loadAnimationThumbnailContent(store, animation, message);\n                    break;\n                }\n                case 'messageChatChangePhoto': {\n                    const { photo } = content;\n\n                    loadBigPhotoContent(store, photo, message);\n                    break;\n                }\n                case 'messageDocument': {\n                    const { document } = content;\n\n                    loadDocumentContent(store, document, message, useSizeLimit);\n                    break;\n                }\n                case 'messagePhoto': {\n                    const { photo } = content;\n\n                    loadBigPhotoContent(store, photo, message);\n                    break;\n                }\n                case 'messageText': {\n                    const { web_page } = message.content;\n                    if (!web_page) {\n                        break;\n                    }\n\n                    const { animation, document, photo, video } = web_page;\n                    let loadPhoto = true;\n\n                    if (animation) {\n                        loadAnimationContent(store, animation, message, useSizeLimit);\n                        loadPhoto = !loadAnimationThumbnailContent(store, animation, message);\n                    }\n\n                    if (document) {\n                        loadDocumentContent(store, document, message, useSizeLimit);\n                        loadPhoto = false;\n                    }\n\n                    if (video) {\n                        loadVideoContent(store, video, message, useSizeLimit);\n                        loadPhoto = !loadVideoThumbnailContent(store, video, message);\n                    }\n\n                    if (loadPhoto) {\n                        loadBigPhotoContent(store, photo, message);\n                    }\n\n                    break;\n                }\n                case 'messageVideo': {\n                    const { video } = content;\n\n                    loadVideoThumbnailContent(store, video, message);\n                    loadVideoContent(store, video, message, useSizeLimit);\n                    break;\n                }\n            }\n        }\n    }\n}\n\nfunction cancelPreloadMediaViewerContent(index, history) {\n    if (!history.length) return;\n\n    const messages = [];\n    if (index > 0) {\n        messages.push(history[index - 1]);\n    }\n    if (index < history.length - 1) {\n        messages.push(history[index + 1]);\n    }\n\n    cancelLoadMediaViewerContent([history[index]]);\n    cancelLoadMediaViewerContent(messages);\n}\n\nfunction preloadMediaViewerContent(index, history) {\n    if (!history.length) return;\n\n    const messages = [];\n    if (index > 0) {\n        messages.push(history[index - 1]);\n    }\n    if (index < history.length - 1) {\n        messages.push(history[index + 1]);\n    }\n\n    loadMediaViewerContent([history[index]], false);\n    loadMediaViewerContent(messages, true);\n}\n\nfunction loadUserFileContent(store, file, userId) {\n    if (!file) return;\n\n    const { id } = file;\n    file = FileStore.get(id) || file;\n\n    const user = UserStore.get(userId);\n    if (!user) return;\n\n    const blob = file.blob || FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateUserPhotoBlob(userId, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, user)\n    );\n}\n\nfunction loadChatFileContent(store, file, chatId) {\n    if (!file) return;\n\n    const { id } = file;\n    file = FileStore.get(id) || file;\n\n    const chat = ChatStore.get(chatId);\n    if (!chat) return;\n\n    const blob = file.blob || FileStore.getBlob(id);\n    if (blob) return;\n\n    FileStore.getLocalFile(\n        store,\n        file,\n        null,\n        () => FileStore.updateChatPhotoBlob(chatId, id),\n        () => FileStore.getRemoteFile(id, THUMBNAIL_PRIORITY, chat)\n    );\n}\n\nfunction loadProfileMediaViewerContent(chatId, photos) {\n    if (!photos) return;\n\n    const store = FileStore.getStore();\n\n    photos.forEach(photo => {\n        switch (photo['@type']) {\n            case 'chatPhoto': {\n                const { small, big } = photo;\n\n                loadChatFileContent(store, small, chatId);\n                loadChatFileContent(store, big, chatId);\n                break;\n            }\n            case 'profilePhoto': {\n                const userId = getChatUserId(chatId);\n\n                const { small, big } = photo;\n\n                loadUserFileContent(store, small, userId);\n                loadUserFileContent(store, big, userId);\n                break;\n            }\n            case 'userProfilePhoto': {\n                photo = getProfilePhoto(photo);\n                if (!photo) break;\n\n                const userId = getChatUserId(chatId);\n\n                const { small, big } = photo;\n\n                loadUserFileContent(store, small, userId);\n                loadUserFileContent(store, big, userId);\n                break;\n            }\n        }\n    });\n}\n\nfunction preloadProfileMediaViewerContent(chatId, index, history) {\n    if (!history.length) return;\n\n    const items = [];\n    if (index > 0) {\n        items.push(history[index - 1]);\n    }\n    if (index < history.length - 1) {\n        items.push(history[index + 1]);\n    }\n    if (index >= 0 && index < history.length) {\n        items.push(history[index]);\n    }\n\n    loadProfileMediaViewerContent(chatId, items);\n}\n\nfunction loadUserContent(store, userId) {\n    const user = UserStore.get(userId);\n    if (!user) return;\n\n    const { profile_photo } = user;\n    if (!profile_photo) return;\n\n    const { small: file } = profile_photo;\n\n    loadUserFileContent(store, file, userId);\n}\n\nfunction loadUsersContent(store, ids) {\n    if (!ids) return;\n\n    ids.forEach(id => loadUserContent(store, id));\n}\n\nfunction loadChatContent(store, chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return;\n\n    const { photo } = chat;\n    if (!photo) return;\n\n    const { small: file } = photo;\n\n    loadChatFileContent(store, file, chatId);\n}\n\nfunction loadChatsContent(store, ids) {\n    if (!ids) return;\n\n    ids.forEach(id => loadChatContent(store, id));\n}\n\nfunction loadDraftContent(store, chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return;\n\n    const { draft_message } = chat;\n    if (!draft_message) return;\n\n    const { reply_to_message_id } = draft_message;\n    if (!reply_to_message_id) return;\n\n    loadReplies(store, chatId, [reply_to_message_id]);\n}\n\nfunction loadStickerSetContent(store, stickerSet) {\n    if (!stickerSet) return;\n\n    const { stickers } = stickerSet;\n    stickers.forEach(sticker => {\n        loadStickerThumbnailContent(store, sticker, null);\n    });\n}\n\nfunction isGifMimeType(mimeType) {\n    return mimeType && mimeType.toLowerCase() === 'image/gif';\n}\n\nfunction getSrc(file) {\n    const blob = getBlob(file);\n\n    return FileStore.getBlobUrl(blob) || '';\n}\n\nfunction getBlob(file) {\n    return file ? FileStore.getBlob(file.id) || file.blob : null;\n}\n\nfunction getDownloadedSize(file) {\n    if (!file) return '0';\n    if (!file.local) return '0';\n    if (!file.local.is_downloading_active) return '0';\n\n    return getSizeString(file.local.downloaded_size);\n}\n\nfunction getUploadedSize(file) {\n    if (!file) return '0';\n    if (!file.remote) return '0';\n    if (!file.remote.is_uploading_active) return '0';\n\n    return getSizeString(file.remote.uploaded_size);\n}\n\nfunction getExtension(fileName) {\n    if (!fileName) {\n        return '';\n    }\n\n    const parts = fileName.split('.');\n    if (parts.length === 1 || (parts[0] === '' && parts.length === 2)) {\n        return '';\n    }\n    return parts.pop().toLowerCase();\n}\n\nexport {\n    getFileSize,\n    getSizeString,\n    saveData,\n    saveBlob,\n    loadMessageContents,\n    loadMediaViewerContent,\n    preloadMediaViewerContent,\n    cancelLoadMediaViewerContent,\n    cancelPreloadMediaViewerContent,\n    loadProfileMediaViewerContent,\n    preloadProfileMediaViewerContent,\n    loadDraftContent,\n    loadUserContent,\n    loadChatContent,\n    loadChatsContent,\n    loadUsersContent,\n    loadStickerSetContent,\n    saveOrDownload,\n    download,\n    getMediaFile,\n    getMediaPreviewFile,\n    isGifMimeType,\n    getSrc,\n    getBlob,\n    getDownloadedSize,\n    getUploadedSize,\n    getExtension\n};\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport FileProgress from '../../Components/Viewer/FileProgress';\nimport { getSrc } from '../../Utils/File';\nimport FileStore from '../../Stores/FileStore';\nimport './DocumentTile.css';\n\nconst styles = theme => ({\n    background: {\n        background: theme.palette.primary.main,\n        borderRadius: '50%',\n        width: 48,\n        height: 48\n    }\n});\n\nclass DocumentTile extends React.Component {\n    componentDidMount() {\n        FileStore.on('clientUpdateDocumentThumbnailBlob', this.onClientUpdateDocumentThumbnailBlob);\n        FileStore.on('clientUpdateAudioThumbnailBlob', this.onClientUpdateDocumentThumbnailBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateDocumentThumbnailBlob', this.onClientUpdateDocumentThumbnailBlob);\n        FileStore.removeListener('clientUpdateAudioThumbnailBlob', this.onClientUpdateDocumentThumbnailBlob);\n    }\n\n    onClientUpdateDocumentThumbnailBlob = update => {\n        const { thumbnail } = this.props;\n        if (!thumbnail) return;\n\n        const file = thumbnail.photo;\n        if (!file) return;\n\n        const { fileId } = update;\n\n        if (file.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    render() {\n        const { classes, thumbnail, file, icon, completeIcon, openMedia } = this.props;\n\n        const thumbnailSrc = getSrc(thumbnail ? thumbnail.photo : null);\n        const className = classNames('tile-photo', { 'document-tile-background': !thumbnailSrc });\n\n        return (\n            <div className='document-tile' onClick={openMedia}>\n                {thumbnailSrc ? (\n                    <img className={className} src={thumbnailSrc} draggable={false} alt='' />\n                ) : (\n                    <div className={classes.background} />\n                )}\n                {file && (\n                    <FileProgress\n                        file={file}\n                        thumbnailSrc={thumbnailSrc}\n                        download\n                        upload\n                        cancelButton\n                        zIndex={1}\n                        icon={icon}\n                        completeIcon={completeIcon}\n                    />\n                )}\n            </div>\n        );\n    }\n}\n\nDocumentTile.propTypes = {\n    thumbnail: PropTypes.object,\n    file: PropTypes.object,\n    openMedia: PropTypes.func,\n    icon: PropTypes.node,\n    completeIcon: PropTypes.node\n};\n\nexport default withStyles(styles, { withTheme: true })(DocumentTile);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport Cookies from 'universal-cookie';\nimport { getSearchMessagesFilter, openMedia } from '../Utils/Message';\nimport { PLAYER_PLAYBACKRATE_NORMAL, PLAYER_VOLUME_NORMAL } from '../Constants';\nimport MessageStore from './MessageStore';\nimport TdLibController from '../Controllers/TdLibController';\nimport { getRandomInt } from '../Utils/Common';\n\nconst RepeatEnum = Object.freeze({\n    NONE: 'NONE',\n    REPEAT: 'REPEAT',\n    REPEAT_ONE: 'REPEAT_ONE'\n});\n\nexport { RepeatEnum };\n\nclass PlayerStore extends EventEmitter {\n    constructor() {\n        super();\n\n        const cookies = new Cookies();\n        let playbackRate = cookies.get('playbackRate');\n        let volume = cookies.get('volume');\n        playbackRate =\n            playbackRate && Number(playbackRate) >= 1 && Number(playbackRate) <= 2\n                ? Number(playbackRate)\n                : PLAYER_PLAYBACKRATE_NORMAL;\n        volume = volume && Number(volume) >= 0 && Number(volume) <= 1 ? Number(volume) : PLAYER_VOLUME_NORMAL;\n\n        this.playbackRate = playbackRate;\n        this.volume = volume;\n        this.repeat = RepeatEnum.NONE;\n        this.shuffle = false;\n\n        this.playlist = null;\n        this.message = null;\n        this.time = null;\n        this.videoStream = null;\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    onUpdate = async update => {\n        switch (update['@type']) {\n            default:\n                break;\n        }\n    };\n\n    close = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaClose'\n        });\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateMediaClose': {\n                this.playlist = null;\n                this.message = null;\n                this.time = null;\n                this.videoStream = null;\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaActive': {\n                const { chatId, messageId } = update;\n\n                const message = MessageStore.get(chatId, messageId);\n                if (!message) return;\n\n                this.message = message;\n\n                this.emit(update['@type'], update);\n\n                this.getPlaylist(chatId, messageId);\n                break;\n            }\n            case 'clientUpdateMediaVolume': {\n                const { volume } = update;\n\n                this.volume = volume;\n\n                const cookies = new Cookies();\n                cookies.set('volume', volume);\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaRepeat': {\n                const { repeat } = update;\n\n                this.repeat = repeat;\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaShuffle': {\n                const { shuffle } = update;\n\n                this.shuffle = shuffle;\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaPlaybackRate': {\n                const { playbackRate } = update;\n\n                this.playbackRate = playbackRate;\n\n                const cookies = new Cookies();\n                cookies.set('playbackRate', playbackRate);\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaPlay': {\n                this.playing = true;\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaTitleMouseOver': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaPause': {\n                this.playing = false;\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaStop': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaNext': {\n                this.emit(update['@type'], update);\n\n                this.moveToNextMedia(false);\n                break;\n            }\n            case 'clientUpdateMediaPrev': {\n                this.emit(update['@type'], update);\n\n                this.moveToPrevMedia();\n                break;\n            }\n            case 'clientUpdateMediaEnding': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaEnd': {\n                this.emit(update['@type'], update);\n\n                if (update.moveNext) {\n                    if (this.moveToNextMedia(true)) {\n                    } else {\n                        this.close();\n                    }\n                } else {\n                    this.close();\n                }\n                break;\n            }\n            case 'clientUpdateMediaTime': {\n                const { duration, currentTime, timestamp } = update;\n\n                this.time = {\n                    currentTime: currentTime,\n                    duration: duration,\n                    timestamp: timestamp\n                };\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaCaptureStream': {\n                this.videoStream = update.stream;\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaViewerPlay': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaViewerPause': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaViewerEnded': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaPlaylistLoading': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaPlaylistPrev': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaPlaylist': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'clientUpdateMediaPlaylistNext': {\n                this.emit(update['@type'], update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    moveToPrevMedia = () => {\n        if (!this.playlist) return;\n        if (!this.message) return;\n\n        const { chat_id, id } = this.message;\n        const { messages } = this.playlist;\n        if (!messages) return;\n\n        const index = messages.findIndex(x => x.chat_id === chat_id && x.id === id);\n        if (index === -1) return;\n\n        if (index + 1 < messages.length) {\n            const message = messages[index + 1];\n\n            openMedia(message.chat_id, message.id, false);\n        }\n    };\n\n    moveToNextMedia = useRepeatShuffle => {\n        if (!this.playlist) return false;\n        if (!this.message) return false;\n\n        const { chat_id, id } = this.message;\n        const { messages } = this.playlist;\n        if (!messages) return false;\n\n        const index = messages.findIndex(x => x.chat_id === chat_id && x.id === id);\n        if (index === -1) return false;\n\n        let nextIndex = -1;\n        if (!useRepeatShuffle) {\n            nextIndex = index - 1;\n        } else {\n            switch (this.repeat) {\n                case RepeatEnum.NONE: {\n                    if (this.shuffle) {\n                        nextIndex = getRandomInt(0, messages.length);\n                    } else {\n                        nextIndex = index - 1;\n                    }\n                    break;\n                }\n                case RepeatEnum.REPEAT_ONE: {\n                    nextIndex = index;\n                    break;\n                }\n                case RepeatEnum.REPEAT: {\n                    if (this.shuffle) {\n                        nextIndex = getRandomInt(0, messages.length);\n                    } else {\n                        nextIndex = index - 1 >= 0 ? index - 1 : messages.length - 1;\n                    }\n                    break;\n                }\n            }\n        }\n\n        if (nextIndex >= 0) {\n            const message = messages[nextIndex];\n\n            openMedia(message.chat_id, message.id, false);\n            return true;\n        }\n\n        return false;\n    };\n\n    getPlaylist = async (chatId, messageId) => {\n        const { playlist: currentPlaylist } = this;\n\n        if (currentPlaylist) {\n            const { messages } = currentPlaylist;\n            if (messages && messages.findIndex(x => x.chat_id === chatId && x.id === messageId) !== -1) {\n                return;\n            }\n        }\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaPlaylistLoading',\n            chatId: chatId,\n            messageId: messageId\n        });\n\n        const filter = getSearchMessagesFilter(chatId, messageId);\n        if (!filter) {\n            this.playlist = {\n                chatId: chatId,\n                messageId: messageId,\n                totalCount: 1,\n                messages: [MessageStore.get(chatId, messageId)]\n            };\n\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateMediaPlaylist',\n                playlist: this.playlist\n            });\n\n            return;\n        }\n\n        const result = await TdLibController.send({\n            '@type': 'searchChatMessages',\n            chat_id: chatId,\n            query: '',\n            sender_user_id: 0,\n            from_message_id: messageId,\n            offset: -50,\n            limit: 100,\n            filter: filter\n        });\n\n        MessageStore.setItems(result.messages);\n\n        const { total_count, messages } = result;\n\n        this.playlist = {\n            chatId: chatId,\n            messageId: messageId,\n            totalCount: total_count,\n            messages: messages\n        };\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaPlaylist',\n            playlist: this.playlist\n        });\n    };\n}\n\nconst store = new PlayerStore();\nwindow.player = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { getDownloadedSize, getUploadedSize, getFileSize } from '../../../Utils/File';\nimport { getDurationString } from '../../../Utils/Common';\nimport FileStore from '../../../Stores/FileStore';\nimport PlayerStore from '../../../Stores/PlayerStore';\nimport './AudioAction.css';\n\nclass AudioAction extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { message, time } = PlayerStore;\n        const { chatId, messageId, duration, file } = this.props;\n\n        const active = message && message.chat_id === chatId && message.id === messageId;\n        const currentTime = active && time ? time.currentTime : 0;\n        const audioDuration = active && time && time.duration ? time.duration : duration;\n        const currentFile = FileStore.get(file.id) || file;\n\n        this.state = {\n            active: active,\n            currentTime: currentTime,\n            duration: audioDuration,\n            timeString: this.getTimeString(currentTime, duration, active, currentFile),\n\n            prevFile: null,\n            file: currentFile\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { active, timeString, file, prevFile } = this.state;\n\n        if (nextState.timeString !== timeString) {\n            return true;\n        }\n\n        if (nextState.active !== active) {\n            return true;\n        }\n\n        if (nextState.file !== file) {\n            return true;\n        }\n\n        if (nextState.prevFile !== prevFile) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        FileStore.on('updateFile', this.onUpdateFile);\n\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n        PlayerStore.on('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('updateFile', this.onUpdateFile);\n\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n        PlayerStore.removeListener('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    onClientUpdateMediaEnd = update => {\n        const { chatId, messageId, duration } = this.props;\n        const { active, file } = this.state;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({\n                active: false,\n                currentTime: 0,\n                timeString: this.getTimeString(0, duration, false, file)\n            });\n        }\n    };\n\n    onClientUpdateMediaTime = update => {\n        const { chatId, messageId, duration } = this.props;\n        const { active, file } = this.state;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({\n                currentTime: update.currentTime,\n                duration: update.duration || duration,\n                timeString: this.getTimeString(update.currentTime, update.duration || duration, active, file)\n            });\n        }\n    };\n\n    onClientUpdateMediaActive = update => {\n        const { chatId, messageId, duration } = this.props;\n        const { active, currentTime, file } = this.state;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({\n                active: true,\n                currentTime: active ? currentTime : 0,\n                timeString: this.getTimeString(active ? currentTime : 0, duration, true, file)\n            });\n        } else if (active) {\n            this.setState({\n                active: false,\n                currentTime: 0,\n                timeString: this.getTimeString(0, duration, false, file)\n            });\n        }\n    };\n\n    onUpdateFile = update => {\n        const currentFile = this.state.file;\n        const nextFile = update.file;\n\n        if (currentFile && currentFile.id === nextFile.id) {\n            this.setState({ file: nextFile, prevFile: currentFile });\n        }\n    };\n\n    getTimeString = (currentTime, duration, active, file) => {\n        const isDownloadingCompleted = file.local && file.local.is_downloading_completed;\n        const isUploadingCompleted = file.remote && file.remote.is_uploading_completed;\n\n        const durationString = getDurationString(Math.floor(duration || 0));\n        const currentTimeString = getDurationString(Math.floor(currentTime || 0));\n\n        return active && isDownloadingCompleted ? `${currentTimeString}/${durationString}` : `${durationString}`;\n    };\n\n    render() {\n        const { file, timeString } = this.state;\n        if (!file) return null;\n\n        const isDownloadingActive = file.local && file.local.is_downloading_active;\n        const isUploadingActive = file.remote && file.remote.is_uploading_active;\n        const isDownloadingCompleted = file.local && file.local.is_downloading_completed;\n        const isUploadingCompleted = file.remote && file.remote.is_uploading_completed;\n\n        const size = getFileSize(file);\n        let progressSize = null;\n        if (isDownloadingActive) {\n            progressSize = getDownloadedSize(file);\n        } else if (isUploadingActive) {\n            progressSize = getUploadedSize(file);\n        }\n        const sizeString = progressSize ? `${progressSize}/${size}` : `${size}`;\n\n        return (\n            <div className='audio-action'>\n                {!isDownloadingCompleted && <span>{`${sizeString}, `}</span>}\n                <span>{timeString}</span>\n            </div>\n        );\n    }\n}\n\nAudioAction.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    duration: PropTypes.number.isRequired,\n    file: PropTypes.object.isRequired\n};\n\nexport default AudioAction;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { THUMBNAIL_BLURRED_SIZE } from '../Constants';\n\nfunction isBlurredThumbnail(thumbnail) {\n    if (!thumbnail) return false;\n\n    return Math.max(thumbnail.width, thumbnail.height) < THUMBNAIL_BLURRED_SIZE;\n}\n\nfunction getAudioTitle(audio) {\n    if (!audio) return null;\n\n    const { file_name, title, performer } = audio;\n    const trimmedTitle = title ? title.trim() : '';\n    const trimmedPerformer = performer ? performer.trim() : '';\n\n    return trimmedTitle || trimmedPerformer\n        ? `${trimmedPerformer || 'Unknown Artist'} — ${trimmedTitle || 'Unknown Track'}`\n        : file_name;\n}\n\nexport { isBlurredThumbnail, getAudioTitle };\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { getDownloadedSize, getUploadedSize, getFileSize } from '../../../Utils/File';\nimport FileStore from '../../../Stores/FileStore';\nimport './DocumentAction.css';\n\nclass DocumentAction extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { file } = this.props;\n        this.state = {\n            prevPropsFile: file,\n            prevFile: null,\n            file: FileStore.get(file.id) || file\n        };\n    }\n\n    componentDidMount() {\n        FileStore.on('updateFile', this.onUpdateFile);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('updateFile', this.onUpdateFile);\n    }\n\n    onUpdateFile = update => {\n        const currentFile = this.state.file;\n        const nextFile = update.file;\n\n        if (currentFile && currentFile.id === nextFile.id) {\n            this.setState({ file: nextFile, prevFile: currentFile });\n        }\n    };\n\n    static getDerivedStateFromProps(props, state) {\n        const { file } = props;\n        const { prevPropsFile } = state;\n\n        if (file && prevPropsFile && file.id !== prevPropsFile.id) {\n            return {\n                prevPropsFile: file,\n                prevFile: null,\n                file: FileStore.get(file.id) || file\n            };\n        }\n\n        return null;\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { file, prevFile } = this.state;\n\n        if (nextState.file !== file) {\n            return true;\n        }\n\n        if (nextState.prevFile !== prevFile) {\n            return true;\n        }\n\n        return false;\n    }\n\n    render() {\n        const { file } = this.state;\n        if (!file) return null;\n\n        const isDownloadingActive = file.local && file.local.is_downloading_active;\n        const isUploadingActive = file.remote && file.remote.is_uploading_active;\n\n        const size = getFileSize(file);\n        let progressSize = null;\n        if (isDownloadingActive) {\n            progressSize = getDownloadedSize(file);\n        } else if (isUploadingActive) {\n            progressSize = getUploadedSize(file);\n        }\n\n        const sizeString = progressSize ? `${progressSize}/${size}` : `${size}`;\n\n        return (\n            <div className='document-action'>\n                <span>{sizeString}</span>\n            </div>\n        );\n    }\n}\n\nDocumentAction.propTypes = {\n    file: PropTypes.object.isRequired\n};\n\nexport default DocumentAction;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport InsertDriveFileIcon from '@material-ui/icons/InsertDriveFile';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport DocumentTile from '../../Tile/DocumentTile';\nimport DocumentAction from './DocumentAction';\nimport { getExtension } from '../../../Utils/File';\nimport './Document.css';\n\nclass Document extends React.Component {\n    render() {\n        const { document, openMedia } = this.props;\n        if (!document) return null;\n\n        const { thumbnail, file_name } = document;\n        const file = document.document;\n\n        return (\n            <div className='document'>\n                <DocumentTile\n                    thumbnail={thumbnail}\n                    file={file}\n                    openMedia={openMedia}\n                    icon={<ArrowDownwardIcon />}\n                    completeIcon={<InsertDriveFileIcon />}\n                />\n                <div className='document-content'>\n                    <div className='document-title'>\n                        <a\n                            className='document-name'\n                            onClick={openMedia}\n                            title={file_name}\n                            data-name={file_name}\n                            data-ext={'.' + getExtension(file_name)}>\n                            {file_name}\n                        </a>\n                    </div>\n                    <DocumentAction file={file} />\n                </div>\n            </div>\n        );\n    }\n}\n\nDocument.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    document: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired\n};\n\nexport default Document;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport DocumentTile from '../../Tile/DocumentTile';\nimport AudioAction from './AudioAction';\nimport FileProgress from '../../Viewer/FileProgress';\nimport { getAudioTitle } from '../../../Utils/Media';\nimport PlayerStore from '../../../Stores/PlayerStore';\nimport './Audio.css';\nimport InsertDriveFileIcon from './Document';\n\nclass Audio extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { chatId, messageId } = props;\n\n        const { time, message, playing } = PlayerStore;\n        const active = message && message.chat_id === chatId && message.id === messageId;\n\n        this.state = {\n            active: active,\n            playing: active ? playing : false,\n            currentTime: active && time ? time.currentTime : 0,\n            duration: active && time ? time.duration : 0\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        const { active, playing, currentTime, duration } = this.state;\n\n        if (nextState.active !== active) {\n            return true;\n        }\n\n        if (nextState.playing !== playing) {\n            return true;\n        }\n\n        if (nextState.currentTime !== currentTime) {\n            return true;\n        }\n\n        if (nextState.duration !== duration) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaPlay', this.onClientUpdateMediaPlay);\n        PlayerStore.on('clientUpdateMediaPause', this.onClientUpdateMediaPause);\n        PlayerStore.on('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaPlay', this.onClientUpdateMediaPlay);\n        PlayerStore.removeListener('clientUpdateMediaPause', this.onClientUpdateMediaPause);\n        PlayerStore.removeListener('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    onClientUpdateMediaEnd = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({\n                active: false,\n                playing: false,\n                currentTime: 0\n            });\n        }\n    };\n\n    onClientUpdateMediaPlay = update => {\n        const { chatId, messageId, playing } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({ playing: true });\n        } else {\n            this.setState({ playing: false });\n        }\n    };\n\n    onClientUpdateMediaPause = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({ playing: false });\n        }\n    };\n\n    onClientUpdateMediaActive = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            if (!this.state.active) {\n                this.setState({\n                    active: true,\n                    currentTime: 0,\n                    playing: true\n                });\n            }\n        } else if (this.state.active) {\n            this.setState({\n                active: false,\n                currentTime: 0,\n                playing: false\n            });\n        }\n    };\n\n    render() {\n        const { chatId, messageId, audio, openMedia } = this.props;\n        const { playing } = this.state;\n        if (!audio) return null;\n\n        const { album_cover_thumbnail, duration, audio: file } = audio;\n\n        const title = getAudioTitle(audio);\n\n        return (\n            <div className='document'>\n                <DocumentTile\n                    thumbnail={album_cover_thumbnail}\n                    file={file}\n                    openMedia={openMedia}\n                    icon={<ArrowDownwardIcon />}\n                    completeIcon={playing ? <PauseIcon /> : <PlayArrowIcon />}\n                />\n                <div className='document-content'>\n                    <div className='document-title'>\n                        <a className='document-name' onClick={openMedia} title={title}>\n                            {title}\n                        </a>\n                    </div>\n                    <AudioAction chatId={chatId} messageId={messageId} duration={duration} file={file} />\n                </div>\n            </div>\n        );\n    }\n}\n\nAudio.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    audio: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired\n};\n\nexport default Audio;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withTranslation } from 'react-i18next';\nimport FileProgress from '../../Viewer/FileProgress';\nimport { getFitSize } from '../../../Utils/Common';\nimport { isBlurredThumbnail } from '../../../Utils/Media';\nimport { getFileSize, getSrc, isGifMimeType } from '../../../Utils/File';\nimport { PHOTO_DISPLAY_SIZE, PHOTO_SIZE } from '../../../Constants';\nimport FileStore from '../../../Stores/FileStore';\nimport MessageStore from '../../../Stores/MessageStore';\nimport ApplicationStore from '../../../Stores/ApplicationStore';\nimport './Animation.css';\n\nclass Animation extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.videoRef = React.createRef();\n\n        this.focused = window.hasFocus;\n        this.inView = false;\n        this.openMediaViewer = Boolean(ApplicationStore.mediaViewerContent);\n        this.openProfileMediaViewer = Boolean(ApplicationStore.profileMediaViewerContent);\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdateAnimationThumbnailBlob', this.onClientUpdateAnimationThumbnailBlob);\n        FileStore.on('clientUpdateAnimationBlob', this.onClientUpdateAnimationBlob);\n        ApplicationStore.on('clientUpdateFocusWindow', this.onClientUpdateFocusWindow);\n        ApplicationStore.on('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n        ApplicationStore.on('clientUpdateProfileMediaViewerContent', this.onClientUpdateProfileMediaViewerContent);\n        MessageStore.on('clientUpdateMessagesInView', this.onClientUpdateMessagesInView);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateAnimationThumbnailBlob', this.onClientUpdateAnimationThumbnailBlob);\n        FileStore.removeListener('clientUpdateAnimationBlob', this.onClientUpdateAnimationBlob);\n        ApplicationStore.removeListener('clientUpdateFocusWindow', this.onClientUpdateFocusWindow);\n        ApplicationStore.removeListener('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n        ApplicationStore.removeListener(\n            'clientUpdateProfileMediaViewerContent',\n            this.onClientUpdateProfileMediaViewerContent\n        );\n        MessageStore.removeListener('clientUpdateMessagesInView', this.onClientUpdateMessagesInView);\n    }\n\n    startStopPlayer = () => {\n        const player = this.videoRef.current;\n        if (player) {\n            if (this.inView && this.focused && !this.openMediaViewer && !this.openProfileMediaViewer) {\n                //console.log('clientUpdate player play message_id=' + this.props.messageId);\n                player.play();\n            } else {\n                //console.log('clientUpdate player pause message_id=' + this.props.messageId);\n                player.pause();\n            }\n        }\n    };\n\n    onClientUpdateProfileMediaViewerContent = update => {\n        this.openProfileMediaViewer = Boolean(ApplicationStore.profileMediaViewerContent);\n\n        this.startStopPlayer();\n    };\n\n    onClientUpdateMediaViewerContent = update => {\n        this.openMediaViewer = Boolean(ApplicationStore.mediaViewerContent);\n\n        this.startStopPlayer();\n    };\n\n    onClientUpdateFocusWindow = update => {\n        this.focused = update.focused;\n\n        this.startStopPlayer();\n    };\n\n    onClientUpdateMessagesInView = update => {\n        const { chatId, messageId } = this.props;\n        const key = `${chatId}_${messageId}`;\n\n        this.inView = update.messages.has(key);\n\n        this.startStopPlayer();\n    };\n\n    onClientUpdateAnimationBlob = update => {\n        const { animation } = this.props.animation;\n        const { fileId } = update;\n\n        if (!animation) return;\n\n        if (animation.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    onClientUpdateAnimationThumbnailBlob = update => {\n        const { thumbnail } = this.props.animation;\n        if (!thumbnail) return;\n\n        const { fileId } = update;\n\n        if (thumbnail.photo && thumbnail.photo.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    render() {\n        const { displaySize, openMedia, t } = this.props;\n        const { thumbnail, animation, mime_type, width, height } = this.props.animation;\n\n        const fitPhotoSize = getFitSize(thumbnail || { width: width, height: height }, displaySize);\n        if (!fitPhotoSize) return null;\n\n        const style = {\n            width: fitPhotoSize.width,\n            height: fitPhotoSize.height\n        };\n\n        const thumbnailSrc = getSrc(thumbnail ? thumbnail.photo : null);\n        const src = getSrc(animation);\n\n        const isBlurred = isBlurredThumbnail(thumbnail);\n        const isGif = isGifMimeType(mime_type);\n\n        return (\n            <div className='animation' style={style} onClick={openMedia}>\n                {src ? (\n                    isGif ? (\n                        <img className='media-viewer-content-image' style={style} src={src} alt='' />\n                    ) : (\n                        <video\n                            ref={this.videoRef}\n                            className='media-viewer-content-image'\n                            src={src}\n                            poster={thumbnailSrc}\n                            muted\n                            autoPlay\n                            loop\n                            playsInline\n                            width={style.width}\n                            height={style.height}\n                        />\n                    )\n                ) : (\n                    <>\n                        <img\n                            className={classNames('animation-preview', { 'media-blurred': isBlurred })}\n                            style={style}\n                            src={thumbnailSrc}\n                            alt=''\n                        />\n                        <div className='animation-meta'>{getFileSize(animation)}</div>\n                    </>\n                )}\n                <FileProgress\n                    file={animation}\n                    download\n                    upload\n                    cancelButton\n                    icon={<div className='animation-play'>{t('AttachGif')}</div>}\n                />\n            </div>\n        );\n    }\n}\n\nAnimation.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    animation: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired,\n    size: PropTypes.number,\n    displaySize: PropTypes.number\n};\n\nAnimation.defaultProps = {\n    size: PHOTO_SIZE,\n    displaySize: PHOTO_DISPLAY_SIZE\n};\n\nexport default withTranslation()(Animation);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { getUserLetters } from '../../Utils/User';\nimport { loadChatContent } from '../../Utils/File';\nimport UserStore from '../../Stores/UserStore';\nimport ChatStore from '../../Stores/ChatStore';\nimport FileStore from '../../Stores/FileStore';\nimport './UserTileControl.css';\n\nclass UserTileControl extends Component {\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextProps.userId !== this.props.userId) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdateUserBlob', this.onClientUpdateUserBlob);\n        FileStore.on('clientUpdateChatBlob', this.onClientUpdateChatBlob);\n        ChatStore.on('updateChatPhoto', this.onUpdateChatPhoto);\n        ChatStore.on('updateChatTitle', this.onUpdateChatTitle);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateUserBlob', this.onClientUpdateUserBlob);\n        FileStore.removeListener('clientUpdateChatBlob', this.onClientUpdateChatBlob);\n        ChatStore.removeListener('updateChatPhoto', this.onUpdateChatPhoto);\n        ChatStore.removeListener('updateChatTitle', this.onUpdateChatTitle);\n    }\n\n    onClientUpdateUserBlob = update => {\n        const { userId } = this.props;\n\n        if (userId === update.userId) {\n            this.forceUpdate();\n        }\n    };\n\n    onClientUpdateChatBlob = update => {\n        const { userId } = this.props;\n\n        const chat = ChatStore.get(update.chatId);\n        if (!chat) return;\n        if (!chat.type) return;\n\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup':\n            case 'chatTypeSupergroup': {\n                return;\n            }\n            case 'chatTypePrivate':\n            case 'chatTypeSecret': {\n                if (chat.type.user_id === userId) {\n                    //console.log('UserTileControl.onClientUpdateChatBlob user_id=' + userId);\n                    this.forceUpdate();\n                }\n            }\n        }\n    };\n\n    onUpdateChatPhoto = update => {\n        const { userId } = this.props;\n\n        const chat = ChatStore.get(update.chat_id);\n        if (!chat) return;\n        if (!chat.type) return;\n\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup':\n            case 'chatTypeSupergroup': {\n                return;\n            }\n            case 'chatTypePrivate':\n            case 'chatTypeSecret': {\n                if (chat.type.user_id === userId) {\n                    if (!update.photo) {\n                        //console.log('UserTileControl.onUpdateChatPhoto user_id=' + userId);\n                        this.forceUpdate();\n                    } else {\n                        const store = FileStore.getStore();\n                        loadChatContent(store, chat);\n                    }\n                }\n            }\n        }\n    };\n\n    onUpdateChatTitle = update => {\n        const { userId } = this.props;\n\n        const chat = ChatStore.get(update.chat_id);\n        if (!chat) return;\n        if (!chat.type) return;\n\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup':\n            case 'chatTypeSupergroup': {\n                return;\n            }\n            case 'chatTypePrivate':\n            case 'chatTypeSecret': {\n                if (chat.type.user_id === userId && !chat.photo) {\n                    //console.log('UserTileControl.onUpdateChatTitle user_id=' + userId);\n                    this.forceUpdate();\n                }\n            }\n        }\n    };\n\n    handleSelect = event => {\n        const { userId, onSelect } = this.props;\n        if (!onSelect) return;\n\n        event.stopPropagation();\n        onSelect(userId);\n    };\n\n    render() {\n        const { userId, onSelect } = this.props;\n        let { user } = this.props;\n        if (!userId && !user) return null;\n\n        user = UserStore.get(userId) || user;\n        if (!user) return null;\n\n        const { profile_photo } = user;\n\n        const letters = getUserLetters(user);\n        const blob = profile_photo && profile_photo.small ? FileStore.getBlob(profile_photo.small.id) : null;\n        const src = FileStore.getBlobUrl(blob);\n        const tileColor = `tile_color_${(Math.abs(userId) % 8) + 1}`;\n        const className = classNames('tile-photo', { [tileColor]: !blob }, { pointer: onSelect });\n\n        return src ? (\n            <img className={className} src={src} draggable={false} alt='' onClick={this.handleSelect} />\n        ) : (\n            <div className={className} onClick={this.handleSelect}>\n                <span className='tile-text'>{letters}</span>\n            </div>\n        );\n    }\n}\n\nUserTileControl.propTypes = {\n    userId: PropTypes.number.isRequired,\n    user: PropTypes.object,\n    onSelect: PropTypes.func\n};\n\nexport default UserTileControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport UserTileControl from '../../Tile/UserTileControl';\nimport { formatPhoneNumber } from '../../../Utils/Common';\nimport { getUserFullName } from '../../../Utils/User';\nimport UserStore from '../../../Stores/UserStore';\nimport './Contact.css';\n\nclass Contact extends React.Component {\n    render() {\n        const { contact, openMedia } = this.props;\n        if (!contact) return null;\n\n        const { user_id, first_name, last_name, phone_number } = contact;\n\n        const user = UserStore.get(user_id) || {\n            '@type': 'user',\n            type: { '@type': 'userTypeRegular' },\n            id: user_id,\n            first_name: first_name,\n            last_name: last_name\n        };\n\n        const fullName = getUserFullName(user);\n        const number = formatPhoneNumber(phone_number);\n\n        return (\n            <div className='contact'>\n                <div className='contact-tile'>\n                    <UserTileControl userId={user_id} user={user} />\n                </div>\n                <div className='contact-content'>\n                    <div className='contact-name'>\n                        {user_id > 0 ? <a onClick={openMedia}>{fullName}</a> : <span>{fullName}</span>}\n                    </div>\n                    <div className='contact-phone'>{number}</div>\n                </div>\n            </div>\n        );\n    }\n}\n\nContact.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    contact: PropTypes.object.isRequired,\n    openMedia: PropTypes.func\n};\n\nexport default Contact;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport FileProgress from '../../Viewer/FileProgress';\nimport { getSize, getFitSize } from '../../../Utils/Common';\nimport { getSrc } from '../../../Utils/File';\nimport { isBlurredThumbnail } from '../../../Utils/Media';\nimport { PHOTO_SIZE, PHOTO_DISPLAY_SIZE, PHOTO_THUMBNAIL_SIZE } from '../../../Constants';\nimport FileStore from '../../../Stores/FileStore';\nimport './Photo.css';\n\nclass Photo extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { photo, size, thumbnailSize } = props;\n        const photoSize = getSize(photo.sizes, size);\n        const thumbnail = getSize(photo.sizes, thumbnailSize);\n\n        this.state = {\n            photoSize: photoSize,\n            thumbnail: thumbnail\n        };\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdatePhotoBlob', this.onClientUpdatePhotoBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdatePhotoBlob', this.onClientUpdatePhotoBlob);\n    }\n\n    onClientUpdatePhotoBlob = update => {\n        const { photoSize } = this.state;\n        const { fileId } = update;\n\n        if (!photoSize) return;\n\n        if (photoSize.photo.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    render() {\n        const { displaySize, openMedia, showProgress, style } = this.props;\n        const { thumbnail, photoSize } = this.state;\n\n        if (!photoSize) return null;\n\n        const src = getSrc(photoSize.photo);\n        const thumbnailSrc = getSrc(thumbnail ? thumbnail.photo : null);\n        const isBlurred = isBlurredThumbnail(thumbnail);\n\n        const fitPhotoSize = getFitSize(photoSize, displaySize);\n        if (!fitPhotoSize) return null;\n\n        const photoStyle = {\n            width: fitPhotoSize.width,\n            height: fitPhotoSize.height,\n            ...style\n        };\n\n        return (\n            <div className='photo' style={photoStyle} onClick={openMedia}>\n                {src ? (\n                    <img className='photo-image' draggable={false} src={src} alt='' />\n                ) : (\n                    <img\n                        className={classNames('photo-image', { 'media-blurred': isBlurred })}\n                        draggable={false}\n                        src={thumbnailSrc}\n                        alt=''\n                    />\n                )}\n                {showProgress && <FileProgress file={photoSize.photo} download upload cancelButton />}\n            </div>\n        );\n    }\n}\n\nPhoto.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    photo: PropTypes.object.isRequired,\n    openMedia: PropTypes.func,\n    showProgress: PropTypes.bool,\n\n    size: PropTypes.number,\n    thumbnailSize: PropTypes.number,\n    displaySize: PropTypes.number,\n    style: PropTypes.object\n};\n\nPhoto.defaultProps = {\n    size: PHOTO_SIZE,\n    thumbnailSize: PHOTO_THUMBNAIL_SIZE,\n    displaySize: PHOTO_DISPLAY_SIZE,\n    showProgress: true\n};\n\nexport default Photo;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nconst borderStyle = theme => ({\n    borderColor: {\n        borderColor: theme.palette.divider\n    }\n});\n\nconst accentStyles = theme => ({\n    accentColorDark: {\n        color: theme.palette.primary.main\n    },\n    accentBackgroundLight: {\n        background: theme.palette.primary.light\n    }\n});\n\nexport { borderStyle, accentStyles };\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core';\nimport Photo from './Photo';\nimport Animation from './Animation';\nimport { accentStyles } from '../../Theme';\nimport { getFormattedText } from '../../../Utils/Message';\nimport { getFitSize, getSize } from '../../../Utils/Common';\nimport { getSrc } from '../../../Utils/File';\nimport { PHOTO_DISPLAY_SIZE, PHOTO_SIZE } from '../../../Constants';\nimport FileStore from '../../../Stores/FileStore';\nimport './Game.css';\n\nconst styles = theme => ({\n    ...accentStyles(theme)\n});\n\nclass Game extends React.Component {\n    getContent = () => {\n        const { chatId, messageId, game, size, displaySize, openMedia } = this.props;\n        if (!game) return null;\n\n        const { photo, animation } = game;\n\n        if (animation) {\n            const animationSrc = getSrc(animation.animation);\n            if (animationSrc || animation.thumbnail) {\n                return <Animation chatId={chatId} messageId={messageId} animation={animation} openMedia={openMedia} />;\n            }\n        }\n\n        if (photo) {\n            let style = {\n                width: 0,\n                height: 0\n            };\n            const photoSize = getSize(photo.sizes, size);\n            if (photoSize) {\n                const fitPhotoSize = getFitSize(photoSize, displaySize);\n                if (fitPhotoSize) {\n                    style.width = fitPhotoSize.width;\n                    style.height = fitPhotoSize.height;\n                }\n            }\n\n            return <Photo chatId={chatId} messageId={messageId} photo={photo} style={style} openMedia={openMedia} />;\n        }\n\n        return null;\n    };\n\n    render() {\n        const { classes, game } = this.props;\n        if (!game) return null;\n\n        const { title, text, description } = game;\n        const formattedText = getFormattedText(text);\n\n        return (\n            <div className='game'>\n                <div className={classNames('game-border', classes.accentBackgroundLight)} />\n                <div className='game-wrapper'>\n                    {title && <div className={classNames('game-title', classes.accentColorDark)}>{title}</div>}\n                    {formattedText && <div className='game-text'>{formattedText}</div>}\n                    {description && <div className='game-description'>{description}</div>}\n                    {this.getContent()}\n                </div>\n            </div>\n        );\n    }\n}\n\nGame.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    game: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired,\n\n    size: PropTypes.number,\n    displaySize: PropTypes.number\n};\n\nGame.defaultProps = {\n    size: PHOTO_SIZE,\n    displaySize: PHOTO_DISPLAY_SIZE\n};\n\nexport default withStyles(styles)(Game);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport RoomIcon from '@material-ui/icons/Room';\nimport { getLocationId } from '../../../Utils/Message';\nimport { getSrc } from '../../../Utils/File';\nimport FileStore from '../../../Stores/FileStore';\nimport './Location.css';\n\nclass Location extends React.Component {\n    componentDidMount() {\n        FileStore.on('clientUpdateLocationBlob', this.onClientUpdateLocationBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateLocationBlob', this.onClientUpdateLocationBlob);\n    }\n\n    onClientUpdateLocationBlob = update => {\n        const { fileId } = update;\n        const { location } = this.props;\n\n        const locationId = getLocationId(location);\n        const file = FileStore.getLocationFile(locationId);\n        if (!file) return;\n\n        if (file.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    render() {\n        const { location } = this.props;\n        if (!location) return null;\n\n        const locationId = getLocationId(location);\n        const file = FileStore.getLocationFile(locationId);\n        const src = getSrc(file);\n\n        const { longitude, latitude } = location;\n        const source = `https://maps.google.com/?q=${latitude},${longitude}`;\n\n        return (\n            <a href={source} target='_blank' rel='noopener noreferrer'>\n                <div className='location-wrapper'>\n                    <img className='location-image' draggable={false} alt={source} src={src} />\n                    <div className='location-icon'>\n                        <RoomIcon fontSize='large' color='primary' />\n                    </div>\n                </div>\n            </a>\n        );\n    }\n}\n\nLocation.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    location: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired\n};\n\nexport default Location;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core';\nimport Radio from '@material-ui/core/Radio';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport RadioButtonCheckedIcon from '@material-ui/icons/RadioButtonChecked';\nimport './PollRadio.css';\n\nconst styles = {\n    progressRoot: {\n        position: 'absolute',\n        top: 8,\n        left: 8,\n        pointerEvents: 'none'\n    },\n    radioRoot: {\n        padding: 6\n    },\n    icon: {\n        color: 'transparent'\n    }\n};\n\nclass PollRadio extends React.Component {\n    render() {\n        const { classes, chosen, beingChosen, hidden, onChange } = this.props;\n\n        return (\n            <div className={classNames('poll-radio', { 'poll-radio-hidden': hidden })}>\n                <Radio\n                    classes={{ root: classes.radioRoot }}\n                    color='primary'\n                    checked={chosen || beingChosen}\n                    onChange={onChange}\n                    checkedIcon={<RadioButtonCheckedIcon classes={{ root: beingChosen ? classes.icon : null }} />}\n                />\n                {beingChosen && <CircularProgress size={20} thickness={4.4} classes={{ root: classes.progressRoot }} />}\n            </div>\n        );\n    }\n}\n\nPollRadio.propTypes = {\n    chosen: PropTypes.bool.isRequired,\n    beingChosen: PropTypes.bool.isRequired,\n    hidden: PropTypes.bool\n};\n\nexport default withStyles(styles)(PollRadio);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { ANIMATION_DURATION_200MS } from './../../../Constants';\nimport './PollPercentage.css';\n\nclass PollPercentage extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.handle = null;\n\n        const { value } = props;\n\n        this.state = {\n            from: value,\n            to: value,\n            animated: value,\n\n            prevPropsValue: value\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        const { closed, value } = this.props;\n        const { animated } = this.state;\n\n        if (closed !== nextProps.closed) {\n            return true;\n        }\n\n        if (value !== nextProps.value) {\n            return true;\n        }\n\n        if (animated !== nextState.animated) {\n            return true;\n        }\n\n        return false;\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.value !== state.prevPropsValue) {\n            return {\n                startTime: Date.now(),\n                from: state.animated,\n                to: props.value,\n\n                prevPropsValue: props.value\n            };\n        }\n\n        return null;\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (prevProps.value !== this.props.value) {\n            this.updateAnimation();\n        }\n    }\n\n    componentWillUnmount() {\n        this.stopAnimation();\n    }\n\n    updateAnimation = () => {\n        this.stopAnimation();\n\n        this.handle = requestAnimationFrame(this.onAnimationFrame);\n    };\n\n    stopAnimation = () => {\n        if (!this.handle) return;\n\n        cancelAnimationFrame(this.handle);\n        this.handle = null;\n    };\n\n    onAnimationFrame = () => {\n        const { startTime, from, to } = this.state;\n\n        const timePassed = Date.now() - startTime;\n\n        if (timePassed >= ANIMATION_DURATION_200MS) {\n            this.setState({ animated: to });\n            this.stopAnimation();\n        } else {\n            const animated = from + Math.floor(((to - from) * timePassed) / ANIMATION_DURATION_200MS);\n            this.setState({ animated });\n            this.handle = requestAnimationFrame(this.onAnimationFrame);\n        }\n    };\n\n    render() {\n        const { chosen, closed, onClick } = this.props;\n        const { animated } = this.state;\n\n        return (\n            <div className={classNames('poll-percentage', { 'poll-percentage-subtitle': !chosen })}>\n                {!closed && chosen ? (\n                    <a className='poll-percentage-action' onClick={onClick}>\n                        {animated + '%'}\n                    </a>\n                ) : (\n                    <>{animated + '%'}</>\n                )}\n            </div>\n        );\n    }\n}\n\nPollPercentage.propTypes = {\n    value: PropTypes.number.isRequired,\n    chosen: PropTypes.bool,\n    closed: PropTypes.bool,\n    onClick: PropTypes.func\n};\n\nexport default PollPercentage;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withStyles } from '@material-ui/core';\nimport { withTranslation } from 'react-i18next';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport PollRadio from './PollRadio';\nimport PollPercentage from './PollPercentage';\nimport { borderStyle } from '../../Theme';\nimport './PollOption.css';\n\nconst styles = theme => ({\n    progressRoot: {\n        backgroundColor: 'transparent',\n        margin: '2px 0 0 38px',\n        position: 'absolute',\n        left: 0,\n        right: 0,\n        bottom: 0\n    },\n    progressBar: {\n        transition: 'transform .2s linear'\n    },\n    ...borderStyle(theme)\n});\n\nclass PollOption extends React.Component {\n    getTitleString = (count, t = key => key) => {\n        const { canBeSelected } = this.props;\n        if (canBeSelected) return null;\n\n        if (!count) return t('NoVotes').toLowerCase();\n        if (count === 1) return '1 vote';\n\n        return count + ' votes';\n    };\n\n    handleClick = event => {\n        const { canBeSelected, onVote } = this.props;\n        if (!canBeSelected) return;\n\n        event.stopPropagation();\n\n        onVote();\n    };\n\n    handleCancel = event => {\n        const { onUnvote } = this.props;\n\n        event.stopPropagation();\n\n        onUnvote();\n    };\n\n    render() {\n        const { classes, option, onChange, canBeSelected, closed, maxVoterCount, t } = this.props;\n        if (!option) return null;\n\n        const { text, voter_count, vote_percentage, is_chosen, is_being_chosen } = option;\n\n        let value = 1.5;\n        if (voter_count) {\n            value = (voter_count / maxVoterCount) * 100;\n        }\n\n        return (\n            <div className='poll-option' onClick={this.handleClick}>\n                <div\n                    className={classNames(\n                        'poll-option-wrapper',\n                        canBeSelected ? 'poll-option-unselected' : 'poll-option-selected'\n                    )}>\n                    <div className='poll-option-text-wrapper' title={this.getTitleString(voter_count, t)}>\n                        <PollPercentage\n                            value={vote_percentage}\n                            chosen={is_chosen}\n                            closed={closed}\n                            onClick={this.handleCancel}\n                        />\n                        <PollRadio\n                            hidden={!canBeSelected}\n                            chosen={is_chosen}\n                            beingChosen={is_being_chosen}\n                            onChange={onChange}\n                        />\n                        <div className='poll-option-text'>{text}</div>\n                    </div>\n                </div>\n                <div className={classNames('poll-option-bottom-border', { [classes.borderColor]: canBeSelected })} />\n                <LinearProgress\n                    classes={{ root: classes.progressRoot, bar: classes.progressBar }}\n                    color='primary'\n                    variant='determinate'\n                    value={canBeSelected ? 0 : Math.max(1.5, value)}\n                />\n            </div>\n        );\n    }\n}\n\nPollOption.propTypes = {\n    option: PropTypes.object.isRequired,\n    onVote: PropTypes.func.isRequired,\n    onUnvote: PropTypes.func.isRequired,\n    canBeSelected: PropTypes.bool,\n    closed: PropTypes.bool,\n    maxVoterCount: PropTypes.number\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(PollOption);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Popover from '@material-ui/core/Popover';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport PollOption from './PollOption';\nimport { cancelPollAnswer, setPollAnswer, stopPoll } from '../../../Actions/Poll';\nimport MessageStore from './../../../Stores/MessageStore';\nimport './Poll.css';\n\nclass Poll extends React.Component {\n    state = {\n        dialog: false,\n        contextMenu: false,\n        left: 0,\n        top: 0\n    };\n\n    getTotalVoterCountString = (count, t = key => key) => {\n        if (!count) return t('NoVotes');\n        if (count === 1) return '1 vote';\n\n        return count + ' votes';\n    };\n\n    handleVote = index => {\n        const { chatId, messageId } = this.props;\n\n        setPollAnswer(chatId, messageId, [index]);\n    };\n\n    handleUnvote = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        const { chatId, messageId, poll } = this.props;\n        const { contextMenu } = this.state;\n\n        if (contextMenu) {\n            this.handleCloseContextMenu();\n        }\n\n        const { is_closed } = poll;\n        if (is_closed) return;\n\n        cancelPollAnswer(chatId, messageId);\n    };\n\n    handleStopPoll = event => {\n        event.stopPropagation();\n\n        const { chatId, messageId } = this.props;\n        const { dialog } = this.state;\n\n        if (dialog) {\n            this.setState({ dialog: false });\n        }\n\n        stopPoll(chatId, messageId);\n    };\n\n    handleDialog = event => {\n        const { dialog } = this.state;\n        if (dialog) return;\n\n        this.setState({\n            dialog: true,\n            contextMenu: false\n        });\n    };\n\n    handleCloseDialog = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        this.setState({ dialog: false });\n    };\n\n    handleContextMenu = event => {\n        const { poll } = this.props;\n        const { is_closed } = poll;\n        if (is_closed) return;\n\n        if (event) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n\n        const { contextMenu } = this.state;\n\n        if (contextMenu) {\n            this.setState({ contextMenu: false });\n        } else {\n            this.setState({\n                contextMenu: true,\n                left: event.clientX,\n                top: event.clientY\n            });\n        }\n    };\n\n    handleCloseContextMenu = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        this.setState({ contextMenu: false });\n    };\n\n    render() {\n        const { chatId, messageId, poll, t } = this.props;\n        const { left, top, contextMenu, dialog } = this.state;\n        const { question, options, total_voter_count, is_closed } = poll;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n\n        const canUnvote = !is_closed && options.some(x => x.is_chosen || x.is_being_chosen);\n        const canStopPoll = message && message.can_be_edited;\n        const canBeSelected = !is_closed && options.every(x => !x.is_chosen);\n        const maxVoterCount = Math.max(...options.map(x => x.voter_count));\n\n        return (\n            <div className='poll' onContextMenu={this.handleContextMenu}>\n                <div className='poll-question'>\n                    <span className='poll-question-title'>{question}</span>\n                    <span className='subtitle'>{is_closed ? t('FinalResults') : t('AnonymousPoll')}</span>\n                </div>\n                <div className='poll-options'>\n                    {options.map((x, index) => (\n                        <PollOption\n                            key={index}\n                            option={x}\n                            canBeSelected={canBeSelected}\n                            closed={is_closed}\n                            maxVoterCount={maxVoterCount}\n                            onVote={() => this.handleVote(index)}\n                            onUnvote={this.handleUnvote}\n                        />\n                    ))}\n                </div>\n                <div className='poll-total-count subtitle'>{this.getTotalVoterCountString(total_voter_count, t)}</div>\n                <Popover\n                    open={contextMenu && (canUnvote || canStopPoll)}\n                    onClose={this.handleCloseContextMenu}\n                    anchorReference='anchorPosition'\n                    anchorPosition={{ top, left }}\n                    anchorOrigin={{\n                        vertical: 'bottom',\n                        horizontal: 'right'\n                    }}\n                    transformOrigin={{\n                        vertical: 'top',\n                        horizontal: 'left'\n                    }}>\n                    <MenuList onClick={e => e.stopPropagation()}>\n                        {canUnvote && <MenuItem onClick={this.handleUnvote}>{t('Unvote')}</MenuItem>}\n                        {canStopPoll && <MenuItem onClick={this.handleDialog}>{t('StopPoll')}</MenuItem>}\n                    </MenuList>\n                </Popover>\n                <Dialog\n                    transitionDuration={0}\n                    open={dialog}\n                    onClose={this.handleCloseDialog}\n                    aria-labelledby='form-dialog-title'>\n                    <DialogTitle id='form-dialog-title'>{t('StopPollAlertTitle')}</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText>{t('StopPollAlertText')}</DialogContentText>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.handleCloseDialog} color='primary'>\n                            {t('Cancel')}\n                        </Button>\n                        <Button onClick={this.handleStopPoll} color='primary'>\n                            {t('Stop')}\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            </div>\n        );\n    }\n}\n\nPoll.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    poll: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired\n};\n\nexport default withTranslation()(Poll);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport TdLibController from '../Controllers/TdLibController';\n\nexport function setPollAnswer(chatId, messageId, optionIds) {\n    TdLibController.send({\n        '@type': 'setPollAnswer',\n        chat_id: chatId,\n        message_id: messageId,\n        option_ids: optionIds\n    });\n}\n\nexport function cancelPollAnswer(chatId, messageId) {\n    TdLibController.send({\n        '@type': 'setPollAnswer',\n        chat_id: chatId,\n        message_id: messageId,\n        option_ids: []\n    });\n}\n\nexport function stopPoll(chatId, messageId) {\n    TdLibController.send({\n        '@type': 'stopPoll',\n        chat_id: chatId,\n        message_id: messageId,\n        reply_markup: null\n    });\n}\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { isBlurredThumbnail } from '../../../Utils/Media';\nimport { getFitSize } from '../../../Utils/Common';\nimport { getSrc } from '../../../Utils/File';\nimport { STICKER_DISPLAY_SIZE } from '../../../Constants';\nimport FileStore from '../../../Stores/FileStore';\nimport './Sticker.css';\n\nclass Sticker extends React.Component {\n    componentDidMount() {\n        FileStore.on('clientUpdateStickerThumbnailBlob', this.onClientUpdateStickerThumbnailBlob);\n        FileStore.on('clientUpdateStickerBlob', this.onClientUpdateStickerBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateStickerThumbnailBlob', this.onClientUpdateStickerThumbnailBlob);\n        FileStore.removeListener('clientUpdateStickerBlob', this.onClientUpdateStickerBlob);\n    }\n\n    onClientUpdateStickerBlob = update => {\n        const { sticker } = this.props.sticker;\n        const { fileId } = update;\n\n        if (!sticker) return;\n\n        if (sticker.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    onClientUpdateStickerThumbnailBlob = update => {\n        const { thumbnail } = this.props.sticker;\n        if (!thumbnail) return;\n\n        const { fileId } = update;\n\n        if (thumbnail.photo && thumbnail.photo.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    render() {\n        const { displaySize, blur, sticker: source, style, openMedia } = this.props;\n        const { thumbnail, sticker, width, height } = source;\n\n        const thumbnailSrc = getSrc(thumbnail ? thumbnail.photo : null);\n        const src = getSrc(sticker);\n        const isBlurred = isBlurredThumbnail(thumbnail);\n\n        const fitSize = getFitSize({ width: width, height: height }, displaySize);\n        if (!fitSize) return null;\n\n        const stickerStyle = {\n            width: fitSize.width,\n            height: fitSize.height,\n            ...style\n        };\n\n        return (\n            <div className='sticker' style={stickerStyle} onClick={openMedia}>\n                {src ? (\n                    <img className='sticker-image' draggable={false} src={src} alt='' />\n                ) : (\n                    <img\n                        className={classNames('sticker-image', { 'media-blurred': isBlurred && blur })}\n                        draggable={false}\n                        src={thumbnailSrc}\n                        alt=''\n                    />\n                )}\n            </div>\n        );\n    }\n}\n\nSticker.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    sticker: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired,\n    blur: PropTypes.bool,\n    displaySize: PropTypes.number\n};\n\nSticker.defaultProps = {\n    blur: true,\n    displaySize: STICKER_DISPLAY_SIZE\n};\n\nexport default Sticker;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Location from './Location';\nimport './Venue.css';\n\nclass Venue extends React.Component {\n    render() {\n        const { chatId, messageId, venue, openMedia } = this.props;\n        if (!venue) return null;\n\n        const { title, address, location } = venue;\n        if (!location) return null;\n\n        const { longitude, latitude } = location;\n        const source = `https://maps.google.com/?q=${latitude},${longitude}`;\n\n        return (\n            <div className='venue'>\n                <Location chatId={chatId} messageId={messageId} location={location} openMedia={openMedia} />\n                <div className='venue-content'>\n                    <a href={source} target='_blank' rel='noopener noreferrer'>\n                        <div className='venue-title'>{title}</div>\n                    </a>\n                    <div className='venue-subtitle'>{address}</div>\n                </div>\n            </div>\n        );\n    }\n}\n\nVenue.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    venue: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired\n};\n\nexport default Venue;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport { getFitSize, getDurationString } from '../../../Utils/Common';\nimport { getFileSize } from '../../../Utils/File';\nimport { isBlurredThumbnail } from '../../../Utils/Media';\nimport { PHOTO_DISPLAY_SIZE, PHOTO_SIZE } from '../../../Constants';\nimport FileStore from '../../../Stores/FileStore';\nimport './Video.css';\n\nclass Video extends React.Component {\n    componentDidMount() {\n        FileStore.on('clientUpdateVideoThumbnailBlob', this.onClientUpdateVideoThumbnailBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateVideoThumbnailBlob', this.onClientUpdateVideoThumbnailBlob);\n    }\n\n    onClientUpdateVideoThumbnailBlob = update => {\n        const { thumbnail } = this.props.video;\n        const { fileId } = update;\n\n        if (!thumbnail) return;\n\n        if (thumbnail.photo && thumbnail.photo.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    render() {\n        const { displaySize, openMedia } = this.props;\n        const { thumbnail, video, width, height, duration } = this.props.video;\n\n        const fitPhotoSize = getFitSize(thumbnail || { width: width, height: height }, displaySize);\n        if (!fitPhotoSize) return null;\n\n        const style = {\n            width: fitPhotoSize.width,\n            height: fitPhotoSize.height\n        };\n\n        const file = thumbnail ? thumbnail.photo : null;\n        const blob = file ? FileStore.getBlob(file.id) || file.blob : null;\n        const src = FileStore.getBlobUrl(blob);\n        const isBlurred = isBlurredThumbnail(thumbnail);\n\n        return (\n            <div className='video' style={style} onClick={openMedia}>\n                <img\n                    className={classNames('video-preview', { 'media-blurred': isBlurred })}\n                    style={style}\n                    src={src}\n                    alt=''\n                />\n                <div className='video-play'>\n                    <PlayArrowIcon />\n                </div>\n                <div className='video-meta'>{getDurationString(duration) + ' ' + getFileSize(video)}</div>\n            </div>\n        );\n    }\n}\n\nVideo.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    video: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired,\n    size: PropTypes.number,\n    displaySize: PropTypes.number\n};\n\nVideo.defaultProps = {\n    size: PHOTO_SIZE,\n    displaySize: PHOTO_DISPLAY_SIZE\n};\n\nexport default Video;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { isContentOpened } from '../../../Utils/Message';\nimport MessageStore from '../../../Stores/MessageStore';\n\nclass MediaStatus extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { chatId, messageId } = this.props;\n\n        this.state = {\n            isOpened: isContentOpened(chatId, messageId)\n        };\n    }\n\n    componentDidMount() {\n        MessageStore.on('updateMessageContentOpened', this.onUpdateMessageContentOpened);\n    }\n\n    componentWillUnmount() {\n        MessageStore.removeListener('updateMessageContentOpened', this.onUpdateMessageContentOpened);\n    }\n\n    onUpdateMessageContentOpened = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chat_id && messageId === update.message_id) {\n            this.setState({ isOpened: isContentOpened(chatId, messageId) });\n        }\n    };\n\n    render() {\n        const { icon, openedIcon } = this.props;\n        const { isOpened } = this.state;\n\n        return isOpened ? openedIcon : icon;\n    }\n}\n\nMediaStatus.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    icon: PropTypes.node,\n    openedIcon: PropTypes.node\n};\n\nMediaStatus.defaultProps = {\n    icon: null,\n    openedIcon: null\n};\n\nexport default MediaStatus;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport FileProgress from '../../Viewer/FileProgress';\nimport MediaStatus from './MediaStatus';\nimport { getFileSize, getSrc } from '../../../Utils/File';\nimport { isBlurredThumbnail } from '../../../Utils/Media';\nimport { getDurationString } from '../../../Utils/Common';\nimport { PHOTO_DISPLAY_SIZE, PHOTO_SIZE } from '../../../Constants';\nimport PlayerStore from '../../../Stores/PlayerStore';\nimport FileStore from '../../../Stores/FileStore';\nimport MessageStore from '../../../Stores/MessageStore';\nimport ApplicationStore from '../../../Stores/ApplicationStore';\nimport './VideoNote.css';\n\nconst circleStyle = {\n    circle: 'video-note-progress-circle'\n};\n\nclass VideoNote extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.videoRef = React.createRef();\n\n        const { chatId, messageId } = props;\n        const { video } = props.videoNote;\n\n        const { time, message, videoStream } = PlayerStore;\n        const active = message && message.chat_id === chatId && message.id === messageId;\n\n        this.state = {\n            active: active,\n            srcObject: active ? videoStream : null,\n            src: getSrc(video),\n            currentTime: active && time ? time.currentTime : 0.0,\n            videoDuration: active && time ? time.duration : 0.0\n        };\n\n        this.focused = window.hasFocus;\n        this.inView = false;\n        this.openMediaViewer = Boolean(ApplicationStore.mediaViewerContent);\n        this.openProfileMediaViewer = Boolean(ApplicationStore.profileMediaViewerContent);\n    }\n\n    updateVideoSrc() {\n        const { srcObject, src } = this.state;\n\n        const player = this.videoRef.current;\n        if (!player) return;\n\n        if (srcObject) {\n            //player.scr = null;\n            player.srcObject = srcObject;\n            return;\n        }\n\n        const stream = player.srcObject;\n        if (stream) {\n            //console.log('clientUpdate release srcObject');\n            const tracks = stream.getTracks();\n\n            tracks.forEach(track => {\n                //console.log('clientUpdate release track');\n                track.stop();\n            });\n        }\n\n        if (player.srcObject) {\n            //console.log('clientUpdate release video.srcObject');\n            player.srcObject = null;\n        }\n        if (player.src !== src) {\n            player.src = src;\n        }\n    }\n\n    componentDidMount() {\n        this.updateVideoSrc();\n\n        FileStore.on('clientUpdateVideoNoteThumbnailBlob', this.onClientUpdateVideoNoteThumbnailBlob);\n        FileStore.on('clientUpdateVideoNoteBlob', this.onClientUpdateVideoNoteBlob);\n\n        MessageStore.on('clientUpdateMessagesInView', this.onClientUpdateMessagesInView);\n\n        ApplicationStore.on('clientUpdateFocusWindow', this.onClientUpdateFocusWindow);\n        ApplicationStore.on('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n        ApplicationStore.on('clientUpdateProfileMediaViewerContent', this.onClientUpdateProfileMediaViewerContent);\n\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaCaptureStream', this.onClientUpdateMediaCaptureStream);\n        PlayerStore.on('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n        PlayerStore.on('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateVideoNoteThumbnailBlob', this.onClientUpdateVideoNoteThumbnailBlob);\n        FileStore.removeListener('clientUpdateVideoNoteBlob', this.onClientUpdateVideoNoteBlob);\n\n        MessageStore.removeListener('clientUpdateMessagesInView', this.onClientUpdateMessagesInView);\n\n        ApplicationStore.removeListener('clientUpdateFocusWindow', this.onClientUpdateFocusWindow);\n        ApplicationStore.removeListener('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n        ApplicationStore.removeListener(\n            'clientUpdateProfileMediaViewerContent',\n            this.onClientUpdateProfileMediaViewerContent\n        );\n\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaCaptureStream', this.onClientUpdateMediaCaptureStream);\n        PlayerStore.removeListener('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n        PlayerStore.removeListener('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    startStopPlayer = () => {\n        const player = this.videoRef.current;\n        if (player) {\n            if (this.inView && this.focused && !this.openMediaViewer && !this.openProfileMediaViewer) {\n                //console.log('clientUpdate player play message_id=' + this.props.messageId);\n                player.play();\n            } else {\n                if (this.state.active) {\n                    return;\n                }\n\n                //console.log('clientUpdate player pause message_id=' + this.props.messageId);\n                player.pause();\n            }\n        }\n    };\n\n    onClientUpdateProfileMediaViewerContent = update => {\n        this.openProfileMediaViewer = Boolean(ApplicationStore.profileMediaViewerContent);\n\n        this.startStopPlayer();\n    };\n\n    onClientUpdateMediaViewerContent = update => {\n        this.openMediaViewer = Boolean(ApplicationStore.mediaViewerContent);\n\n        this.startStopPlayer();\n    };\n\n    onClientUpdateFocusWindow = update => {\n        this.focused = update.focused;\n\n        this.startStopPlayer();\n    };\n\n    onClientUpdateMessagesInView = update => {\n        const { chatId, messageId } = this.props;\n        const key = `${chatId}_${messageId}`;\n\n        this.inView = update.messages.has(key);\n\n        this.startStopPlayer();\n    };\n\n    onClientUpdateMediaCaptureStream = update => {\n        const { chatId, messageId } = this.props;\n        if (chatId === update.chatId && messageId === update.messageId) {\n            const player = this.videoRef.current;\n            if (player) {\n                this.setState({ srcObject: update.stream }, () => {\n                    this.updateVideoSrc();\n                });\n            }\n        }\n    };\n\n    onClientUpdateMediaTime = update => {\n        const { chatId, messageId } = this.props;\n        if (chatId === update.chatId && messageId === update.messageId) {\n            const player = this.videoRef.current;\n            if (player) {\n                this.setState({\n                    currentTime: update.currentTime,\n                    videoDuration: update.duration\n                });\n            }\n        }\n    };\n\n    onClientUpdateMediaEnd = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState(\n                {\n                    active: false,\n                    srcObject: null,\n                    currentTime: 0\n                },\n                () => {\n                    const player = this.videoRef.current;\n                    if (!player) return;\n\n                    this.updateVideoSrc();\n\n                    if (!window.hasFocus) {\n                        player.pause();\n                    }\n                }\n            );\n        }\n    };\n\n    onClientUpdateMediaActive = update => {\n        const { chatId, messageId } = this.props;\n        const { video } = this.props.videoNote;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            if (this.state.active) {\n            } else {\n                this.setState({\n                    active: true,\n                    currentTime: null\n                });\n            }\n        } else if (this.state.active) {\n            this.setState(\n                {\n                    active: false,\n                    srcObject: null,\n                    currentTime: 0\n                },\n                () => {\n                    const player = this.videoRef.current;\n                    if (!player) return;\n\n                    this.updateVideoSrc();\n\n                    if (!window.hasFocus) {\n                        player.pause();\n                    }\n                }\n            );\n        }\n    };\n\n    onClientUpdateVideoNoteBlob = update => {\n        const { video } = this.props.videoNote;\n        const { fileId } = update;\n\n        if (!video) return;\n\n        if (video.id === fileId) {\n            this.setState(\n                {\n                    src: getSrc(video)\n                },\n                () => {\n                    this.updateVideoSrc();\n                }\n            );\n        }\n    };\n\n    onClientUpdateVideoNoteThumbnailBlob = update => {\n        const { thumbnail } = this.props.videoNote;\n        if (!thumbnail) return;\n\n        const { fileId } = update;\n\n        if (thumbnail.photo && thumbnail.photo.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    handleCanPlay = () => {\n        // const player = this.videoRef.current;\n        // if (player){\n        //     if (this.state.active){\n        //         player.muted = false;\n        //     }\n        //     else{\n        //         player.muted = true;\n        //     }\n        // }\n    };\n\n    render() {\n        const { displaySize, chatId, messageId, openMedia } = this.props;\n        const { active, currentTime, videoDuration } = this.state;\n        const { thumbnail, video, duration } = this.props.videoNote;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n\n        const style = { width: 200, height: 200 };\n        if (!style) return null;\n\n        const thumbnailSrc = getSrc(thumbnail ? thumbnail.photo : null);\n        const src = getSrc(video);\n        const isBlurred = isBlurredThumbnail(thumbnail);\n\n        let progress = 0;\n        if (videoDuration && currentTime) {\n            const progressTime = currentTime + 0.25;\n            progress = (progressTime / videoDuration) * 100;\n        }\n\n        return (\n            <div\n                className={classNames('video-note', { 'video-note-playing': active })}\n                style={style}\n                onClick={openMedia}>\n                {src ? (\n                    <>\n                        <video\n                            ref={this.videoRef}\n                            className={classNames('media-viewer-content-image', 'video-note-round')}\n                            poster={thumbnailSrc}\n                            muted\n                            autoPlay\n                            loop\n                            playsInline\n                            width={style.width}\n                            height={style.height}\n                            onCanPlay={this.handleCanPlay}\n                        />\n                        <div className='video-note-player'>\n                            <div className='video-note-progress'>\n                                <CircularProgress\n                                    classes={circleStyle}\n                                    variant='static'\n                                    value={progress}\n                                    size={200}\n                                    thickness={1}\n                                />\n                            </div>\n                            <div className='animation-meta'>\n                                {getDurationString(active ? Math.floor(currentTime) : duration)}\n                                <MediaStatus chatId={chatId} messageId={messageId} icon={'\\u00A0•'} />\n                            </div>\n                            <div className='video-note-muted'>\n                                <VolumeOffIcon />\n                            </div>\n                        </div>\n                    </>\n                ) : (\n                    <>\n                        <div className='video-note-round'>\n                            <img\n                                className={classNames('animation-preview', { 'media-blurred': isBlurred })}\n                                style={style}\n                                src={thumbnailSrc}\n                                alt=''\n                            />\n                        </div>\n                        <div className='animation-meta'>\n                            {getDurationString(duration) + ' ' + getFileSize(video)}\n                            <MediaStatus chatId={chatId} messageId={messageId} icon={'\\u00A0•'} />\n                        </div>\n                        <div className='video-note-muted'>\n                            <VolumeOffIcon />\n                        </div>\n                    </>\n                )}\n                <FileProgress file={video} download upload cancelButton icon={<ArrowDownwardIcon />} />\n            </div>\n        );\n    }\n}\n\nVideoNote.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    videoNote: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired,\n    size: PropTypes.number,\n    displaySize: PropTypes.number\n};\n\nVideoNote.defaultProps = {\n    size: PHOTO_SIZE,\n    displaySize: PHOTO_DISPLAY_SIZE\n};\n\nexport default VideoNote;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core';\nimport Slider from '@material-ui/lab/Slider';\nimport { PLAYER_PROGRESS_TIMEOUT_MS } from '../../../Constants';\nimport PlayerStore from '../../../Stores/PlayerStore';\nimport './VoiceNoteSlider.css';\n\nconst styles = {\n    slider: {\n        maxWidth: 216\n    },\n    track: {\n        transition: 'width 0ms linear 0ms, height 0ms linear 0ms, transform 0ms linear 0ms'\n    },\n    thumbWrapper: {\n        transition: 'transform 0ms linear 0ms'\n    },\n    thumb: {\n        transition: 'transform 0ms linear 0ms, box-shadow 0ms linear 0ms'\n    }\n};\n\nclass VoiceNoteSlider extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { message, time } = PlayerStore;\n        const { chatId, messageId, duration } = this.props;\n\n        const active = message && message.chat_id === chatId && message.id === messageId;\n        const currentTime = active && time ? time.currentTime : 0;\n        const audioDuration = active && time && time.duration ? time.duration : duration;\n\n        this.state = {\n            active: active,\n            currentTime: currentTime,\n            duration: audioDuration,\n            value: this.getValue(currentTime, audioDuration, active)\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { active, value } = this.state;\n\n        if (nextState.value !== value) {\n            return true;\n        }\n\n        if (nextState.active !== active) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n        PlayerStore.on('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n        PlayerStore.removeListener('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    reset = () => {\n        const { duration } = this.props;\n        const { value } = this.state;\n\n        if (value === 1) {\n            this.setState({\n                active: false,\n                currentTime: 0\n            });\n\n            setTimeout(() => {\n                const { currentTime } = this.state;\n                if (!currentTime) {\n                    this.setState({\n                        value: this.getValue(0, duration, false)\n                    });\n                }\n            }, PLAYER_PROGRESS_TIMEOUT_MS);\n        } else {\n            this.setState({\n                active: false,\n                currentTime: 0,\n                value: this.getValue(0, duration, false)\n            });\n        }\n    };\n\n    onClientUpdateMediaEnd = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.reset();\n        }\n    };\n\n    onClientUpdateMediaTime = update => {\n        const { chatId, messageId, duration } = this.props;\n        const { active } = this.state;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({\n                currentTime: update.currentTime,\n                duration: update.duration || duration,\n                value: this.getValue(update.currentTime, update.duration || duration, active)\n            });\n        }\n    };\n\n    onClientUpdateMediaActive = update => {\n        const { chatId, messageId, duration } = this.props;\n        const { active, currentTime } = this.state;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({\n                active: true,\n                currentTime: active ? currentTime : 0,\n                value: this.getValue(active ? currentTime : 0, duration, true)\n            });\n        } else if (active) {\n            this.reset();\n        }\n    };\n\n    getValue = (currentTime, duration, active) => {\n        return active ? currentTime / duration : 0;\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { value } = this.state;\n\n        return (\n            <div className='voice-note-slider'>\n                <Slider\n                    className={classes.slider}\n                    classes={{\n                        track: classes.track,\n                        thumbWrapper: classes.thumbWrapper,\n                        thumb: classes.thumb\n                    }}\n                    min={0}\n                    max={1}\n                    value={value}\n                />\n            </div>\n        );\n    }\n}\n\nVoiceNoteSlider.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    duration: PropTypes.number.isRequired\n};\n\nexport default withStyles(styles)(VoiceNoteSlider);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport DocumentTile from '../../Tile/DocumentTile';\nimport AudioAction from './AudioAction';\nimport MediaStatus from './MediaStatus';\nimport VoiceNoteSlider from './VoiceNoteSlider';\nimport FileProgress from '../../Viewer/FileProgress';\nimport PlayerStore from '../../../Stores/PlayerStore';\nimport './VoiceNote.css';\n\nclass VoiceNote extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { chatId, messageId } = props;\n\n        const { time, message, playing } = PlayerStore;\n        const active = message && message.chat_id === chatId && message.id === messageId;\n\n        this.state = {\n            active: active,\n            playing: active ? playing : false,\n            currentTime: active && time ? time.currentTime : 0,\n            duration: active && time ? time.duration : 0\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        const { active, playing, currentTime, duration } = this.state;\n\n        if (nextState.active !== active) {\n            return true;\n        }\n\n        if (nextState.playing !== playing) {\n            return true;\n        }\n\n        if (nextState.currentTime !== currentTime) {\n            return true;\n        }\n\n        if (nextState.duration !== duration) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaPlay', this.onClientUpdateMediaPlay);\n        PlayerStore.on('clientUpdateMediaPause', this.onClientUpdateMediaPause);\n        PlayerStore.on('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaPlay', this.onClientUpdateMediaPlay);\n        PlayerStore.removeListener('clientUpdateMediaPause', this.onClientUpdateMediaPause);\n        PlayerStore.removeListener('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    onClientUpdateMediaEnd = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({\n                active: false,\n                playing: false,\n                currentTime: 0\n            });\n        }\n    };\n\n    onClientUpdateMediaPlay = update => {\n        const { chatId, messageId, playing } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({ playing: true });\n        } else {\n            this.setState({ playing: false });\n        }\n    };\n\n    onClientUpdateMediaPause = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({ playing: false });\n        }\n    };\n\n    onClientUpdateMediaActive = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            if (!this.state.active) {\n                this.setState({\n                    active: true,\n                    currentTime: 0,\n                    playing: true\n                });\n            }\n        } else if (this.state.active) {\n            this.setState({\n                active: false,\n                currentTime: 0,\n                playing: false\n            });\n        }\n    };\n\n    render() {\n        const { chatId, messageId, voiceNote, openMedia, classes } = this.props;\n        const { playing } = this.state;\n        if (!voiceNote) return null;\n\n        const { duration, voice: file } = voiceNote;\n\n        //const title = getAudioTitle(audio);\n\n        return (\n            <div className='document'>\n                <DocumentTile\n                    thumbnail={null}\n                    file={file}\n                    openMedia={openMedia}\n                    icon={<ArrowDownwardIcon />}\n                    completeIcon={playing ? <PauseIcon /> : <PlayArrowIcon />}\n                />\n                <div className='voice-note-content'>\n                    <VoiceNoteSlider chatId={chatId} messageId={messageId} duration={duration} file={file} />\n                    <div className='voice-note-meta'>\n                        <AudioAction chatId={chatId} messageId={messageId} duration={duration} file={file} />\n                        <MediaStatus chatId={chatId} messageId={messageId} icon={'\\u00A0•'} />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nVoiceNote.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    voiceNote: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired\n};\n\nexport default VoiceNote;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport TdLibController from '../Controllers/TdLibController';\n\nexport function openUser(userId, popup = false) {\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateOpenUser',\n        userId,\n        popup\n    });\n}\n\nexport function openChat(chatId, messageId = null, popup = false) {\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateOpenChat',\n        chatId,\n        messageId,\n        popup\n    });\n}\n\nexport function highlightMessage(chatId, messageId) {\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateMessageHighlighted',\n        chatId,\n        messageId\n    });\n}\n\nexport function selectMessage(chatId, messageId, selected) {\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateMessageSelected',\n        chatId,\n        messageId,\n        selected\n    });\n}\n","\n/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nclass Currency{\n    constructor(){\n        this.list = new Map([\n            [\"AED\", \"د.إ\"],\n            [\"AFN\", \"؋\"],\n            [\"ARS\", \"$\"],\n            [\"AUD\", \"$\"],\n            [\"AZN\", \"₼\"],\n            [\"BND\", \"B$\"],\n            [\"BRL\", \"R$\"],\n            [\"CAD\", \"$\"],\n            [\"CHF\", \"Fr\"],\n            [\"CLP\", \"$\"],\n            [\"CNY\", \"¥\"],\n            [\"COP\", \"$\"],\n            [\"EGP\", \"E£\"],\n            [\"EUR\", \"€\"],\n            [\"GBP\", \"£\"],\n            [\"HKD\", \"$\"],\n            [\"IDR\", \"Rp\"],\n            [\"ILS\", \"₪\"],\n            [\"INR\", \"₹\"],\n            [\"ISK\", \"kr\"],\n            [\"JPY\", \"¥\"],\n            [\"KRW\", \"₩\"],\n            [\"KZT\", \"₸\"],\n            [\"MXN\", \"$\"],\n            [\"MYR\", \"RM\"],\n            [\"NOK\", \"kr\"],\n            [\"NZD\", \"$\"],\n            [\"PHP\", \"₱\"],\n            [\"RUB\", \"₽\"],\n            [\"SAR\", \"SR\"],\n            [\"SEK\", \"kr\"],\n            [\"SGD\", \"$\"],\n            [\"TRY\", \"₺\"],\n            [\"TTD\", \"$\"],\n            [\"TWD\", \"$\"],\n            [\"TZS\", \"TSh\"],\n            [\"UAH\", \"₴\"],\n            [\"UGX\", \"USh\"],\n            [\"USD\", \"$\"],\n            [\"UYU\", \"$\"],\n            [\"VND\", \"₫\"],\n            [\"YER\", \"﷼\"],\n            [\"ZAR\", \"R\"],\n            [\"IRR\", \"﷼\"],\n            [\"IQD\", \"ع.د\"],\n            [\"VEF\", \"Bs.F.\"]\n        ]);\n    }\n\n    get(currency){\n        return this.list.get(currency);\n    }\n\n    set(currency, symbol){\n        this.list.set(currency, symbol);\n    }\n\n    getPow(currency){\n        if (currency === 'CLF'){\n            return 4;\n        }\n        if (['BHD', 'IQD', 'JOD', 'KWD', 'LYD', 'OMR', 'TND'].includes(currency)){\n            return 3;\n        }\n        if (['BIF', 'BYR', 'CLP', 'CVE', 'DJF', 'GNF', 'ISK', 'JPY', 'KMF', 'KRW', 'MGA', 'PYG', 'RWF', 'UGX', 'UYI', 'VND', 'VUV', 'XAF', 'XOF', 'XPF'].includes(currency)){\n            return 0;\n        }\n        if (currency === 'MRO'){\n            return 1;\n        }\n\n        return 2;\n    }\n\n    getString(totalAmount, currency){\n        const amount = (totalAmount/Math.pow(10.0, this.getPow(currency))).toFixed(2);\n        return `${amount} ${this.get(currency)}`;\n    }\n}\n\nlet currency = new Currency();\nexport default currency;","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport classNames from 'classnames';\nimport { getUserFullName } from '../../Utils/User';\nimport { getChatTitle, isPrivateChat } from '../../Utils/Chat';\nimport { openUser as openUserCommand, openChat as openChatCommand } from '../../Actions/Client';\nimport UserStore from '../../Stores/UserStore';\nimport ChatStore from '../../Stores/ChatStore';\nimport './MessageAuthor.css';\n\nclass MessageAuthor extends React.Component {\n    handleSelect = event => {\n        const { chatId, userId, openUser, openChat } = this.props;\n\n        if (openUser && userId) {\n            event.stopPropagation();\n\n            openUserCommand(userId, true);\n            return;\n        }\n\n        if (openChat && chatId) {\n            event.stopPropagation();\n\n            openChatCommand(chatId, true);\n            return;\n        }\n    };\n\n    render() {\n        const { t, chatId, userId, openUser, openChat } = this.props;\n\n        const user = UserStore.get(userId);\n        if (user) {\n            const tileColor = isPrivateChat(chatId)\n                ? 'message-author-color'\n                : `user_color_${(Math.abs(userId) % 8) + 1}`;\n            const className = classNames([tileColor], 'message-author');\n\n            const fullName = getUserFullName(user);\n\n            return openUser ? (\n                <a className={className} onClick={this.handleSelect}>\n                    {fullName}\n                </a>\n            ) : (\n                <>{fullName}</>\n            );\n        }\n\n        const chat = ChatStore.get(chatId);\n        if (chat) {\n            const className = classNames('message-author-color', 'message-author');\n\n            const fullName = getChatTitle(chatId, false, t);\n\n            return openChat ? (\n                <a className={className} onClick={this.handleSelect}>\n                    {fullName}\n                </a>\n            ) : (\n                <>{fullName}</>\n            );\n        }\n\n        return null;\n    }\n}\n\nMessageAuthor.propTypes = {\n    chatId: PropTypes.number,\n    userId: PropTypes.number,\n    openUser: PropTypes.bool,\n    openChat: PropTypes.bool\n};\n\nMessageAuthor.defaultProps = {\n    openUser: false,\n    openChat: false\n};\n\nexport default withTranslation()(MessageAuthor);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport Currency from './Currency';\nimport MessageAuthor from '../Components/Message/MessageAuthor';\nimport ChatStore from '../Stores/ChatStore';\nimport UserStore from '../Stores/UserStore';\nimport SupergroupStore from '../Stores/SupergroupStore';\nimport MessageStore from '../Stores/MessageStore';\n\nlet serviceMap = new Map();\nserviceMap.set('messageBasicGroupChatCreate', 'messageBasicGroupChatCreate');\nserviceMap.set('messageChatAddMembers', 'messageChatAddMembers');\nserviceMap.set('messageChatChangePhoto', 'messageChatChangePhoto');\nserviceMap.set('messageChatChangeTitle', 'messageChatChangeTitle');\nserviceMap.set('messageChatDeleteMember', 'messageChatDeleteMember');\nserviceMap.set('messageChatDeletePhoto', 'messageChatDeletePhoto');\nserviceMap.set('messageChatJoinByLink', 'messageChatJoinByLink');\nserviceMap.set('messageChatSetTtl', 'messageChatSetTtl');\nserviceMap.set('messageChatUpgradeFrom', 'messageChatUpgradeFrom');\nserviceMap.set('messageChatUpgradeTo', 'messageChatUpgradeTo');\nserviceMap.set('messageContactRegistered', 'messageContactRegistered');\nserviceMap.set('messageCustomServiceAction', 'messageCustomServiceAction');\nserviceMap.set('messageGameScore', 'messageGameScore');\nserviceMap.set('messagePassportDataReceived', 'messagePassportDataReceived');\nserviceMap.set('messagePassportDataSent', 'messagePassportDataSent');\nserviceMap.set('messagePaymentSuccessful', 'messagePaymentSuccessful');\nserviceMap.set('messagePaymentSuccessfulBot', 'messagePaymentSuccessfulBot');\nserviceMap.set('messagePinMessage', 'messagePinMessage');\nserviceMap.set('messageScreenshotTaken', 'messageScreenshotTaken');\nserviceMap.set('messageSupergroupChatCreate', 'messageSupergroupChatCreate');\nserviceMap.set('messageUnsupported', 'messageUnsupported');\nserviceMap.set('messageWebsiteConnected', 'messageWebsiteConnected');\n\nfunction isServiceMessage(message) {\n    if (!message) return false;\n    if (!message.content) return false;\n\n    return serviceMap.has(message.content['@type']) || message.ttl > 0;\n}\n\nfunction getTTLString(ttl) {\n    if (ttl < 60) {\n        const seconds = ttl === 1 ? 'second' : 'seconds';\n        return `${ttl} ${seconds}`;\n    }\n    if (ttl < 60 * 60) {\n        const minutes = Math.floor(ttl / 60) === 1 ? 'minute' : 'minutes';\n        return `${ttl} ${minutes}`;\n    }\n    if (ttl < 24 * 60 * 60) {\n        const hours = Math.floor(ttl / 60 / 60) === 1 ? 'hour' : 'hours';\n        return `${ttl} ${hours}`;\n    }\n    if (ttl < 7 * 24 * 60 * 60) {\n        const days = Math.floor(ttl / 60 / 60 / 24) === 1 ? 'day' : 'days';\n        return `${ttl} ${days}`;\n    }\n    if (ttl === 7 * 24 * 60 * 60) {\n        return '1 week';\n    }\n\n    return `${ttl} seconds`;\n}\n\nfunction getPassportElementTypeString(type) {\n    switch (type['@type']) {\n        case 'passportElementTypeAddress': {\n            return 'Address';\n        }\n        case 'passportElementTypeBankStatement': {\n            return 'Bank Statement';\n        }\n        case 'passportElementTypeDriverLicense': {\n            return 'Driver Licence';\n        }\n        case 'passportElementTypeEmailAddress': {\n            return 'Email';\n        }\n        case 'passportElementTypeIdentityCard': {\n            return 'Identity Card';\n        }\n        case 'passportElementTypeInternalPassport': {\n            return 'Internal Passport';\n        }\n        case 'passportElementTypePassport': {\n            return 'Passport';\n        }\n        case 'passportElementTypePassportRegistration': {\n            return 'Passport Registration';\n        }\n        case 'passportElementTypePersonalDetails': {\n            return 'Personal details';\n        }\n        case 'passportElementTypePhoneNumber': {\n            return 'Phone Number';\n        }\n        case 'passportElementTypeRentalAgreement': {\n            return 'Tenancy Agreement';\n        }\n        case 'passportElementTypeTemporaryRegistration': {\n            return 'Temporary Registration';\n        }\n        case 'passportElementTypeUtilityBill': {\n            return 'Utility Bill';\n        }\n    }\n\n    return '';\n}\n\nfunction getMessageAuthor(message, openUser) {\n    if (!message) return null;\n\n    const { chat_id, sender_user_id } = message;\n\n    if (sender_user_id !== 0) {\n        return <MessageAuthor userId={sender_user_id} openUser={openUser} />;\n    }\n\n    const chat = ChatStore.get(chat_id);\n    if (!chat) return null;\n\n    return chat.title;\n}\n\nfunction getServiceMessageContent(message, openUser = false) {\n    if (!message) return null;\n    if (!message.content) return null;\n\n    const isOutgoing = message.sender_user_id === UserStore.getMyId();\n    const chat = ChatStore.get(message.chat_id);\n    const isChannel = chat.type['@type'] === 'chatTypeSupergroup' && chat.type.is_channel;\n\n    const { ttl, sender_user_id, content } = message;\n    if (ttl > 0) {\n        switch (content['@type']) {\n            case 'messagePhoto': {\n                if (isOutgoing) {\n                    return 'You sent a self-destructing photo. Please view it on your mobile';\n                }\n\n                return (\n                    <>\n                        <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                        {' sent a self-destructing photo. Please view it on your mobile'}\n                    </>\n                );\n            }\n            case 'messageVideo': {\n                if (isOutgoing) {\n                    return 'You sent a self-destructing video. Please view it on your mobile';\n                }\n\n                return (\n                    <>\n                        <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                        {' sent a self-destructing video. Please view it on your mobile'}\n                    </>\n                );\n            }\n            default: {\n                if (isOutgoing) {\n                    return 'You sent a self-destructing message. Please view it on your mobile';\n                }\n\n                return (\n                    <>\n                        <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                        {' sent a self-destructing message. Please view it on your mobile'}\n                    </>\n                );\n            }\n        }\n    }\n\n    switch (content['@type']) {\n        case 'messageBasicGroupChatCreate': {\n            const { title } = ChatStore.get(message.chat_id);\n\n            if (isOutgoing) {\n                return `You created group «${title}»`;\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {` created group «${title}»`}\n                </>\n            );\n        }\n        case 'messageChatAddMembers': {\n            const members = content.member_user_ids\n                .map(x => <MessageAuthor key={x} userId={x} openUser={openUser} />)\n                .reduce((accumulator, current, index, array) => {\n                    const separator = index === array.length - 1 ? ' and ' : ', ';\n                    return accumulator === null ? [current] : [...accumulator, separator, current];\n                }, null);\n\n            if (isOutgoing) {\n                return content.member_user_ids.length === 1 && content.member_user_ids[0] === UserStore.getMyId() ? (\n                    'You joined the group'\n                ) : (\n                    <>\n                        {'You added '}\n                        {members}\n                    </>\n                );\n            }\n\n            return content.member_user_ids.length === 1 && content.member_user_ids[0] === message.sender_user_id ? (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {' joined the group'}\n                </>\n            ) : (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {' added '}\n                    {members}\n                </>\n            );\n        }\n        case 'messageChatChangePhoto': {\n            if (isChannel) {\n                return 'Channel photo updated';\n            }\n\n            if (isOutgoing) {\n                return 'You updated group photo';\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {` updated group photo`}\n                </>\n            );\n        }\n        case 'messageChatChangeTitle': {\n            const { title } = content;\n\n            if (isChannel) {\n                return `Channel name was changed to «${title}»`;\n            }\n\n            if (isOutgoing) {\n                return `You changed group name to «${title}»`;\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {` changed group name to «${title}»`}\n                </>\n            );\n        }\n        case 'messageChatDeleteMember': {\n            if (isOutgoing) {\n                return content.user_id === UserStore.getMyId() ? (\n                    'You left the group'\n                ) : (\n                    <>\n                        {'You removed '}\n                        <MessageAuthor userId={content.user_id} openUser={openUser} />\n                    </>\n                );\n            }\n\n            return content.user_id === sender_user_id ? (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {' left the group'}\n                </>\n            ) : (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {' removed '}\n                    <MessageAuthor userId={content.user_id} openUser={openUser} />\n                </>\n            );\n        }\n        case 'messageChatDeletePhoto': {\n            if (isChannel) {\n                return 'Channel photo removed';\n            }\n\n            if (isOutgoing) {\n                return 'You removed group photo';\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {' removed group photo'}\n                </>\n            );\n        }\n        case 'messageChatJoinByLink': {\n            if (isOutgoing) {\n                return 'You joined the group via invite link';\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {' joined the group via invite link'}\n                </>\n            );\n        }\n        case 'messageChatSetTtl': {\n            const { ttl } = content;\n            const ttlString = getTTLString(ttl);\n\n            if (ttl <= 0) {\n                if (isOutgoing) {\n                    return 'You disabled the self-destruct timer';\n                }\n\n                return (\n                    <>\n                        <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                        {' disabled the self-destruct timer'}\n                    </>\n                );\n            }\n\n            if (isOutgoing) {\n                return `You set the self-destruct timer to ${ttlString}`;\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {` set the self-destruct timer to ${ttlString}`}\n                </>\n            );\n        }\n        case 'messageChatUpgradeFrom': {\n            return 'The group was upgraded to a supergroup';\n        }\n        case 'messageChatUpgradeTo': {\n            return 'Group migrated to a supergroup';\n        }\n        case 'messageContactRegistered': {\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {' just joined Telegram'}\n                </>\n            );\n        }\n        case 'messageCustomServiceAction': {\n            return content.text;\n        }\n        case 'messageGameScore': {\n            const messageGame = MessageStore.get(message.chat_id, content.game_message_id);\n            if (\n                messageGame &&\n                messageGame.content &&\n                messageGame.content['@type'] === 'messageGame' &&\n                messageGame.content.game\n            ) {\n                const { game } = messageGame.content;\n\n                if (isOutgoing) {\n                    return `You scored ${content.score} in «${game.title}»`;\n                }\n\n                return (\n                    <>\n                        <MessageAuthor userId={messageGame.sender_user_id} openUser={openUser} />\n                        {` scored ${content.score} in «${game.title}»`}\n                    </>\n                );\n            }\n\n            if (isOutgoing) {\n                return `You scored ${content.score}`;\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {` scored ${content.score}`}\n                </>\n            );\n        }\n        case 'messagePassportDataReceived': {\n            return 'Telegram Passport data received';\n        }\n        case 'messagePassportDataSent': {\n            const chat = ChatStore.get(message.chat_id);\n\n            const passportElementTypes = content.types\n                .map(x => getPassportElementTypeString(x))\n                .reduce((accumulator, current) => {\n                    return accumulator === null ? [current] : [...accumulator, ', ', current];\n                }, null);\n\n            return (\n                <>\n                    <MessageAuthor userId={chat.type.user_id} openUser={openUser} />\n                    {' received the following documents: '}\n                    {passportElementTypes}\n                </>\n            );\n        }\n        case 'messagePaymentSuccessful': {\n            const chat = ChatStore.get(message.chat_id);\n\n            const messageInvoice = MessageStore.get(message.chat_id, content.invoice_message_id);\n            if (\n                messageInvoice &&\n                messageInvoice.content &&\n                messageInvoice.content['@type'] === 'messageInvoice' &&\n                messageInvoice.content.invoice\n            ) {\n                const { invoice } = messageInvoice.content;\n\n                return (\n                    <>\n                        {`You have just successfully transferred ${Currency.getString(\n                            content.total_amount,\n                            content.currency\n                        )} to `}\n                        <MessageAuthor userId={chat.type.user_id} openUser={openUser} />\n                        {` for ${invoice.title}`}\n                    </>\n                );\n            }\n\n            return (\n                <>\n                    {`You have just successfully transferred ${Currency.getString(\n                        content.total_amount,\n                        content.currency\n                    )} to `}\n                    <MessageAuthor userId={chat.type.user_id} openUser={openUser} />\n                </>\n            );\n        }\n        case 'messagePaymentSuccessfulBot': {\n            return 'Payment successful';\n        }\n        case 'messagePinMessage': {\n            const author = getMessageAuthor(message, openUser);\n            const pinnedMessage = MessageStore.get(message.chat_id, content.message_id);\n            if (!pinnedMessage || !pinnedMessage.content) {\n                return (\n                    <>\n                        {author}\n                        {' pinned a message'}\n                    </>\n                );\n            }\n\n            let pinnedContent = ' pinned a message';\n            if (isServiceMessage(pinnedMessage)) {\n                pinnedContent = ' pinned a service message';\n            } else {\n                switch (pinnedMessage.content['@type']) {\n                    case 'messageAnimation': {\n                        pinnedContent = ' pinned a GIF';\n                        break;\n                    }\n                    case 'messageAudio': {\n                        pinnedContent = ' pinned a track';\n                        break;\n                    }\n                    case 'messageCall': {\n                        pinnedContent = ' pinned a call';\n                        break;\n                    }\n                    case 'messageContact': {\n                        pinnedContent = ' pinned a contact';\n                        break;\n                    }\n                    case 'messageDocument': {\n                        pinnedContent = ' pinned a file';\n                        break;\n                    }\n                    case 'messageExpiredPhoto': {\n                        pinnedContent = ' pinned a photo';\n                        break;\n                    }\n                    case 'messageExpiredVideo': {\n                        pinnedContent = ' pinned a video';\n                        break;\n                    }\n                    case 'messageGame': {\n                        pinnedContent = ' pinned a game';\n                        break;\n                    }\n                    case 'messageInvoice': {\n                        pinnedContent = ' pinned an invoice';\n                        break;\n                    }\n                    case 'messageLocation': {\n                        pinnedContent = ' pinned a map';\n                        break;\n                    }\n                    case 'messagePhoto': {\n                        pinnedContent = ' pinned a photo';\n                        break;\n                    }\n                    case 'messagePoll': {\n                        pinnedContent = ' pinned a poll';\n                        break;\n                    }\n                    case 'messageSticker': {\n                        pinnedContent = ' pinned a sticker';\n                        break;\n                    }\n                    case 'messageText': {\n                        const maxLength = 16;\n                        const text = pinnedMessage.content.text.text;\n                        if (text.length <= maxLength) {\n                            pinnedContent = ` pinned «${text}»`;\n                        } else {\n                            pinnedContent = ` pinned «${text.substring(0, maxLength)}...»`;\n                        }\n\n                        break;\n                    }\n                    case 'messageUnsupported': {\n                        pinnedContent = ' pinned unsupported message';\n                        break;\n                    }\n                    case 'messageVenue': {\n                        pinnedContent = ' pinned a venue';\n                        break;\n                    }\n                    case 'messageVideo': {\n                        pinnedContent = ' pinned a video';\n                        break;\n                    }\n                    case 'messageVideoNote': {\n                        pinnedContent = ' pinned a video message';\n                        break;\n                    }\n                    case 'messageVoiceNote': {\n                        pinnedContent = ' pinned a voice message';\n                        break;\n                    }\n                }\n            }\n\n            return (\n                <>\n                    {author}\n                    {pinnedContent}\n                </>\n            );\n        }\n        case 'messageScreenshotTaken': {\n            if (isOutgoing) {\n                return 'You took a screenshot!';\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {' took a screenshot!'}\n                </>\n            );\n        }\n        case 'messageSupergroupChatCreate': {\n            const { title } = content;\n\n            if (isChannel) {\n                return 'Channel created';\n            }\n\n            if (isOutgoing) {\n                return `You created group «${title}»`;\n            }\n\n            return (\n                <>\n                    <MessageAuthor userId={sender_user_id} openUser={openUser} />\n                    {` created group «${title}»`}\n                </>\n            );\n        }\n        case 'messageUnsupported': {\n            return 'Unsupported message';\n        }\n        case 'messageWebsiteConnected': {\n            return `You allowed this bot to message you when you logged in on ${content.domain_name}.`;\n        }\n    }\n\n    return `[${message.content['@type']}]`;\n}\n\nexport { isServiceMessage, getServiceMessageContent };\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport dateFormat from 'dateformat';\nimport Audio from '../Components/Message/Media/Audio';\nimport Animation from '../Components/Message/Media/Animation';\nimport Contact from '../Components/Message/Media/Contact';\nimport Document from '../Components/Message/Media/Document';\nimport Game from '../Components/Message/Media/Game';\nimport Location from '../Components/Message/Media/Location';\nimport Photo from '../Components/Message/Media/Photo';\nimport Poll from '../Components/Message/Media/Poll';\nimport Sticker from '../Components/Message/Media/Sticker';\nimport Venue from '../Components/Message/Media/Venue';\nimport Video from '../Components/Message/Media/Video';\nimport VideoNote from '../Components/Message/Media/VideoNote';\nimport VoiceNote from '../Components/Message/Media/VoiceNote';\nimport { getChatTitle } from './Chat';\nimport { openUser } from './../Actions/Client';\nimport { getPhotoSize, getSize } from './Common';\nimport { download, saveOrDownload } from './File';\nimport { getAudioTitle } from './Media';\nimport { getServiceMessageContent } from './ServiceMessage';\nimport { getUserFullName } from './User';\nimport { LOCATION_HEIGHT, LOCATION_SCALE, LOCATION_WIDTH, LOCATION_ZOOM } from '../Constants';\nimport ApplicationStore from '../Stores/ApplicationStore';\nimport ChatStore from '../Stores/ChatStore';\nimport FileStore from '../Stores/FileStore';\nimport MessageStore from '../Stores/MessageStore';\nimport UserStore from '../Stores/UserStore';\nimport TdLibController from '../Controllers/TdLibController';\n\nfunction getAuthor(message) {\n    if (!message) return null;\n\n    const { forward_info } = message;\n\n    if (forward_info) {\n        switch (forward_info['@type']) {\n            case 'messageForwardedFromUser': {\n                if (forward_info.sender_user_id > 0) {\n                    const user = UserStore.get(forward_info.sender_user_id);\n                    if (user) {\n                        return getUserFullName(user);\n                    }\n                }\n                break;\n            }\n            case 'messageForwardedPost': {\n                const chat = ChatStore.get(forward_info.chat_id);\n                if (chat) {\n                    return chat.title;\n                }\n                break;\n            }\n        }\n    }\n\n    return getTitle(message);\n}\n\nfunction getTitle(message) {\n    if (!message) return null;\n\n    const { sender_user_id, chat_id } = message;\n\n    if (sender_user_id) {\n        const user = UserStore.get(sender_user_id);\n        if (user) {\n            return getUserFullName(user);\n        }\n    }\n\n    if (chat_id) {\n        const chat = ChatStore.get(chat_id);\n        if (chat) {\n            return chat.title;\n        }\n    }\n\n    return null;\n}\n\nfunction substring(text, start, end) {\n    if (start < 0) start = 0;\n    if (start > text.length - 1) start = text.length - 1;\n    if (end < start) end = start;\n    if (end > text.length) end = text.length;\n\n    return text.substring(start, end);\n}\n\nfunction stopPropagation(event) {\n    event.stopPropagation();\n}\n\nfunction getFormattedText(text) {\n    if (text['@type'] !== 'formattedText') return null;\n    if (!text.text) return null;\n    if (!text.entities) return text.text;\n\n    let result = [];\n    let index = 0;\n    for (let i = 0; i < text.entities.length; i++) {\n        let beforeEntityText = substring(text.text, index, text.entities[i].offset);\n        if (beforeEntityText) {\n            result.push(beforeEntityText);\n        }\n\n        let entityText = substring(\n            text.text,\n            text.entities[i].offset,\n            text.entities[i].offset + text.entities[i].length\n        );\n        switch (text.entities[i].type['@type']) {\n            case 'textEntityTypeUrl': {\n                let url = entityText.startsWith('http') ? entityText : 'http://' + entityText;\n                let decodedUrl;\n                try {\n                    decodedUrl = decodeURI(entityText);\n                } catch (error) {\n                    console.error('uri: ' + entityText + '\\n' + error);\n                    decodedUrl = entityText;\n                }\n\n                result.push(\n                    <a\n                        key={text.entities[i].offset}\n                        onClick={stopPropagation}\n                        href={url}\n                        title={url}\n                        target='_blank'\n                        rel='noopener noreferrer'>\n                        {decodedUrl}\n                    </a>\n                );\n                break;\n            }\n            case 'textEntityTypeTextUrl': {\n                let url = text.entities[i].type.url.startsWith('http')\n                    ? text.entities[i].type.url\n                    : 'http://' + text.entities[i].type.url;\n                result.push(\n                    <a\n                        key={text.entities[i].offset}\n                        onClick={stopPropagation}\n                        href={url}\n                        title={url}\n                        target='_blank'\n                        rel='noopener noreferrer'>\n                        {entityText}\n                    </a>\n                );\n                break;\n            }\n            case 'textEntityTypeBold':\n                result.push(<strong key={text.entities[i].offset}>{entityText}</strong>);\n                break;\n            case 'textEntityTypeItalic':\n                result.push(<em key={text.entities[i].offset}>{entityText}</em>);\n                break;\n            case 'textEntityTypeCode':\n                result.push(<code key={text.entities[i].offset}>{entityText}</code>);\n                break;\n            case 'textEntityTypePre':\n                result.push(\n                    <pre key={text.entities[i].offset}>\n                        <code>{entityText}</code>\n                    </pre>\n                );\n                break;\n            case 'textEntityTypeMention':\n                result.push(\n                    <a key={text.entities[i].offset} onClick={stopPropagation} href={`#/im?p=${entityText}`}>\n                        {entityText}\n                    </a>\n                );\n                break;\n            case 'textEntityTypeMentionName':\n                result.push(\n                    <a\n                        key={text.entities[i].offset}\n                        onClick={stopPropagation}\n                        href={`#/im?p=u${text.entities[i].type.user_id}`}>\n                        {entityText}\n                    </a>\n                );\n                break;\n            case 'textEntityTypeHashtag':\n                let hashtag = entityText.length > 0 && entityText[0] === '#' ? substring(entityText, 1) : entityText;\n                result.push(\n                    <a\n                        key={text.entities[i].offset}\n                        onClick={stopPropagation}\n                        href={`tg://search_hashtag?hashtag=${hashtag}`}>\n                        {entityText}\n                    </a>\n                );\n                break;\n            case 'textEntityTypeEmailAddress':\n                result.push(\n                    <a\n                        key={text.entities[i].offset}\n                        onClick={stopPropagation}\n                        href={`mailto:${entityText}`}\n                        target='_blank'\n                        rel='noopener noreferrer'>\n                        {entityText}\n                    </a>\n                );\n                break;\n            case 'textEntityTypeBotCommand':\n                let command = entityText.length > 0 && entityText[0] === '/' ? substring(entityText, 1) : entityText;\n                result.push(\n                    <a\n                        key={text.entities[i].offset}\n                        onClick={stopPropagation}\n                        href={`tg://bot_command?command=${command}&bot=`}>\n                        {entityText}\n                    </a>\n                );\n                break;\n            default:\n                result.push(entityText);\n                break;\n        }\n\n        index += beforeEntityText.length + entityText.length;\n    }\n\n    if (index < text.text.length) {\n        let afterEntityText = text.text.substring(index);\n        if (afterEntityText) {\n            result.push(afterEntityText);\n        }\n    }\n\n    return result;\n}\n\nfunction getText(message) {\n    if (!message) return null;\n\n    let text = [];\n\n    const { content } = message;\n\n    if (\n        content &&\n        content['@type'] === 'messageText' &&\n        content.text &&\n        content.text['@type'] === 'formattedText' &&\n        content.text.text\n    ) {\n        text = getFormattedText(content.text);\n    } else {\n        //text.push('[' + message.content['@type'] + ']');//JSON.stringify(x);\n        if (content && content.caption && content.caption['@type'] === 'formattedText' && content.caption.text) {\n            text.push('\\n');\n            let formattedText = getFormattedText(content.caption);\n            if (formattedText) {\n                text = text.concat(formattedText);\n            }\n        }\n    }\n\n    return text;\n}\n\nfunction getWebPage(message) {\n    if (!message) return null;\n    if (!message.content) return null;\n\n    return message.content.web_page;\n}\n\nfunction getDate(message) {\n    if (!message) return null;\n    if (!message.date) return null;\n\n    let date = new Date(message.date * 1000);\n\n    return dateFormat(date, 'H:MM'); //date.toDateString();\n}\n\nfunction getDateHint(message) {\n    if (!message) return null;\n    if (!message.date) return null;\n\n    const date = new Date(message.date * 1000);\n    return dateFormat(date, 'H:MM:ss d.mm.yyyy'); //date.toDateString();\n}\n\nfunction getMedia(message, openMedia) {\n    if (!message) return null;\n\n    const { chat_id, id, content } = message;\n    if (!content) return null;\n\n    switch (content['@type']) {\n        case 'messageAnimation':\n            return <Animation chatId={chat_id} messageId={id} animation={content.animation} openMedia={openMedia} />;\n        case 'messageAudio':\n            return <Audio chatId={chat_id} messageId={id} audio={content.audio} openMedia={openMedia} />;\n        case 'messageContact':\n            return <Contact chatId={chat_id} messageId={id} contact={content.contact} openMedia={openMedia} />;\n        case 'messageDocument':\n            return <Document chatId={chat_id} messageId={id} document={content.document} openMedia={openMedia} />;\n        case 'messageGame':\n            return <Game chatId={chat_id} messageId={id} game={content.game} openMedia={openMedia} />;\n        case 'messageLocation':\n            return <Location chatId={chat_id} messageId={id} location={content.location} openMedia={openMedia} />;\n        case 'messagePhoto':\n            return <Photo chatId={chat_id} messageId={id} photo={content.photo} openMedia={openMedia} />;\n        case 'messagePoll':\n            return <Poll chatId={chat_id} messageId={id} poll={content.poll} openMedia={openMedia} />;\n        case 'messageSticker':\n            return <Sticker chatId={chat_id} messageId={id} sticker={content.sticker} openMedia={openMedia} />;\n        case 'messageText':\n            return null;\n        case 'messageVenue':\n            return <Venue chatId={chat_id} messageId={id} venue={content.venue} openMedia={openMedia} />;\n        case 'messageVideo':\n            return <Video chatId={chat_id} messageId={id} video={content.video} openMedia={openMedia} />;\n        case 'messageVideoNote':\n            return <VideoNote chatId={chat_id} messageId={id} videoNote={content.video_note} openMedia={openMedia} />;\n        case 'messageVoiceNote':\n            return <VoiceNote chatId={chat_id} messageId={id} voiceNote={content.voice_note} openMedia={openMedia} />;\n        default:\n            return '[' + content['@type'] + ']';\n    }\n}\n\nfunction isForwardOriginHidden(forwardInfo) {\n    if (!forwardInfo) return false;\n\n    const { origin } = forwardInfo;\n    if (!origin) return false;\n\n    switch (origin['@type']) {\n        case 'messageForwardOriginUser': {\n            return false;\n        }\n        case 'messageForwardOriginHiddenUser': {\n            return true;\n        }\n        case 'messageForwardOriginChannel': {\n            return false;\n        }\n    }\n\n    return false;\n}\n\nfunction getForwardTitle(forwardInfo, t = key => key) {\n    if (!forwardInfo) return '';\n\n    const { origin } = forwardInfo;\n    if (!origin) return '';\n\n    switch (origin['@type']) {\n        case 'messageForwardOriginUser': {\n            const { sender_user_id } = origin;\n\n            const user = UserStore.get(sender_user_id);\n            return getUserFullName(user);\n        }\n        case 'messageForwardOriginHiddenUser': {\n            const { sender_name } = origin;\n\n            return sender_name;\n        }\n        case 'messageForwardOriginChannel': {\n            const { chat_id, author_signature } = origin;\n\n            return getChatTitle(chat_id, false, t) + (author_signature ? ` (${author_signature})` : '');\n        }\n    }\n\n    return '';\n}\n\nfunction getUnread(message) {\n    if (!message) return false;\n    if (!message.chat_id) return false;\n    if (!message.is_outgoing) return false;\n\n    let chat = ChatStore.get(message.chat_id);\n    if (!chat) return false;\n\n    return chat.last_read_outbox_message_id < message.id;\n}\n\nfunction getSenderUserId(message) {\n    if (!message) return null;\n\n    return message.sender_user_id;\n}\n\nfunction filterMessages(result, history) {\n    if (result.messages.length === 0) return;\n    if (history.length === 0) return;\n\n    const map = history.reduce(function(accumulator, current) {\n        accumulator.set(current.id, current.id);\n        return accumulator;\n    }, new Map());\n\n    result.messages = result.messages.filter(x => !map.has(x.id));\n}\n\nfunction getContent(message, t = key => key) {\n    if (!message) return null;\n\n    const { content } = message;\n    if (!content) return null;\n\n    let caption = '';\n    if (content.caption && content.caption.text) {\n        caption = `, ${content.caption.text}`;\n    }\n\n    if (message.ttl > 0) {\n        return getServiceMessageContent(message);\n    }\n\n    switch (content['@type']) {\n        case 'messageAnimation': {\n            return t('AttachGif') + caption;\n        }\n        case 'messageAudio': {\n            return t('AttachMusic') + caption;\n        }\n        case 'messageBasicGroupChatCreate': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageCall': {\n            return t('Call') + caption;\n        }\n        case 'messageChatAddMembers': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageChatChangePhoto': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageChatChangeTitle': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageChatDeleteMember': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageChatDeletePhoto': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageChatJoinByLink': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageChatSetTtl': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageChatUpgradeFrom': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageChatUpgradeTo': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageContact': {\n            return t('AttachContact') + caption;\n        }\n        case 'messageContactRegistered': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageCustomServiceAction': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageDocument': {\n            return t('AttachDocument') + caption;\n        }\n        case 'messageExpiredPhoto': {\n            return t('AttachPhoto') + caption;\n        }\n        case 'messageExpiredVideo': {\n            return t('AttachVideo') + caption;\n        }\n        case 'messageGame': {\n            return t('AttachGame') + caption;\n        }\n        case 'messageGameScore': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageInvoice': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageLocation': {\n            return t('AttachLocation') + caption;\n        }\n        case 'messagePassportDataReceived': {\n            return getServiceMessageContent(message);\n        }\n        case 'messagePassportDataSent': {\n            return getServiceMessageContent(message);\n        }\n        case 'messagePaymentSuccessful': {\n            return getServiceMessageContent(message);\n        }\n        case 'messagePaymentSuccessfulBot': {\n            return getServiceMessageContent(message);\n        }\n        case 'messagePhoto': {\n            return t('AttachPhoto') + caption;\n        }\n        case 'messagePoll': {\n            const { poll } = content;\n\n            return '📊 ' + (poll.question || t('Poll')) + caption;\n        }\n        case 'messagePinMessage': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageScreenshotTaken': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageSticker': {\n            const { sticker } = content;\n            let emoji = '';\n            if (sticker && sticker.emoji) {\n                emoji = sticker.emoji;\n            }\n\n            return t('AttachSticker') + (emoji ? ` ${emoji}` : '') + caption;\n        }\n        case 'messageSupergroupChatCreate': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageText': {\n            return content.text.text + caption;\n        }\n        case 'messageUnsupported': {\n            return getServiceMessageContent(message);\n        }\n        case 'messageVenue': {\n            return t('AttachLocation') + caption;\n        }\n        case 'messageVideo': {\n            return t('AttachVideo') + caption;\n        }\n        case 'messageVideoNote': {\n            return t('AttachRound') + caption;\n        }\n        case 'messageVoiceNote': {\n            return t('AttachAudio') + caption;\n        }\n        case 'messageWebsiteConnected': {\n            return getServiceMessageContent(message);\n        }\n        default: {\n            return t('UnsupportedAttachment');\n        }\n    }\n}\n\nfunction isMediaContent(content) {\n    if (!content) return false;\n\n    return content['@type'] === 'messagePhoto';\n}\n\nfunction getLocationId(location) {\n    if (!location) return null;\n\n    const { longitude, latitude } = location;\n    return `loc=${latitude},${longitude}&size=${LOCATION_WIDTH},${LOCATION_HEIGHT}&scale=${LOCATION_SCALE}&zoom=${LOCATION_ZOOM}`;\n}\n\nfunction isVideoMessage(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return false;\n\n    const { content } = message;\n    if (!content) return false;\n\n    switch (content['@type']) {\n        case 'messageVideo': {\n            return true;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            return Boolean(web_page.video);\n        }\n        default: {\n            return false;\n        }\n    }\n}\n\nfunction isLottieMessage(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return false;\n\n    const { content } = message;\n    if (!content) return false;\n\n    switch (content['@type']) {\n        case 'messageDocument': {\n            const { document } = content;\n            if (!document) return false;\n\n            const { file_name } = document;\n\n            return file_name && file_name.toLowerCase().endsWith('.json');\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (!web_page) return false;\n\n            const { document } = web_page;\n            if (!document) return false;\n\n            const { file_name } = document;\n\n            return file_name && file_name.toLowerCase().endsWith('.json');\n        }\n        default: {\n            return false;\n        }\n    }\n}\n\nfunction isAnimationMessage(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return false;\n\n    const { content } = message;\n    if (!content) return false;\n\n    switch (content['@type']) {\n        case 'messageAnimation': {\n            return true;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            return Boolean(web_page.animation);\n        }\n        default: {\n            return false;\n        }\n    }\n}\n\nfunction isContentOpened(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return true;\n\n    const { content } = message;\n    if (!content) return true;\n\n    switch (content['@type']) {\n        case 'messageVoiceNote': {\n            return content.is_listened;\n        }\n        case 'messageVideoNote': {\n            return content.is_viewed;\n        }\n        default: {\n            return true;\n        }\n    }\n}\n\nfunction getMediaTitle(message) {\n    if (!message) return null;\n\n    const { content } = message;\n    if (!content) return null;\n\n    switch (content['@type']) {\n        case 'messageAudio': {\n            const { audio } = content;\n            if (audio) {\n                return getAudioTitle(audio);\n            }\n            break;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (web_page) {\n                const { audio } = web_page;\n                if (audio) {\n                    return getAudioTitle(audio);\n                }\n                break;\n            }\n        }\n    }\n\n    return getAuthor(message);\n}\n\nfunction hasAudio(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return false;\n\n    const { content } = message;\n    if (!content) return false;\n\n    switch (content['@type']) {\n        case 'messageAudio': {\n            const { audio } = content;\n            if (audio) {\n                return true;\n            }\n\n            break;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (web_page) {\n                const { audio } = web_page;\n                if (audio) {\n                    return true;\n                }\n            }\n\n            break;\n        }\n    }\n\n    return false;\n}\n\nfunction hasVideoNote(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return false;\n\n    const { content } = message;\n    if (!content) return false;\n\n    switch (content['@type']) {\n        case 'messageVideoNote': {\n            const { video_note } = content;\n            if (video_note) {\n                return true;\n            }\n\n            break;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (web_page) {\n                const { video_note } = web_page;\n                if (video_note) {\n                    return true;\n                }\n            }\n\n            break;\n        }\n    }\n\n    return false;\n}\n\nfunction getSearchMessagesFilter(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return null;\n\n    const { content } = message;\n    if (!content) return null;\n\n    switch (content['@type']) {\n        case 'messageAudio': {\n            const { audio } = content;\n            if (audio) {\n                return {\n                    '@type': 'searchMessagesFilterAudio'\n                };\n            }\n            break;\n        }\n        case 'messageVoiceNote': {\n            const { voice_note } = content;\n            if (voice_note) {\n                return {\n                    '@type': 'searchMessagesFilterVoiceNote'\n                };\n            }\n            break;\n        }\n        case 'messageVideoNote': {\n            const { video_note } = content;\n            if (video_note) {\n                return null;\n\n                return {\n                    '@type': 'searchMessagesFilterVideoNote'\n                };\n            }\n            break;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (web_page) {\n                const { audio, voice_note, video_note } = web_page;\n                if (audio) {\n                    return null;\n\n                    return {\n                        '@type': 'searchMessagesFilterAudio'\n                    };\n                }\n\n                if (voice_note) {\n                    return null;\n\n                    return {\n                        '@type': 'searchMessagesFilterVoiceNote'\n                    };\n                }\n\n                if (video_note) {\n                    return null;\n\n                    return {\n                        '@type': 'searchMessagesFilterVideoNote'\n                    };\n                }\n                break;\n            }\n        }\n    }\n\n    return null;\n}\n\nfunction openAnimation(animation, message, fileCancel) {\n    if (!animation) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    let { animation: file } = animation;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    if (fileCancel && file.local.is_downloading_active) {\n        FileStore.cancelGetRemoteFile(file.id, message);\n        return;\n    } else if (fileCancel && file.remote.is_uploading_active) {\n        FileStore.cancelUploadFile(file.id, message);\n        return;\n    }\n\n    // download file at loadMediaViewerContent instead\n    // download(file, message, FileStore.updateAnimationBlob(chat_id, id, file.id));\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateActiveAnimation',\n        chatId: chat_id,\n        messageId: id\n    });\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    ApplicationStore.setMediaViewerContent({\n        chatId: chat_id,\n        messageId: id\n    });\n}\n\nfunction openAudio(audio, message, fileCancel) {\n    if (!audio) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    let { audio: file } = audio;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    if (fileCancel && file.local.is_downloading_active) {\n        FileStore.cancelGetRemoteFile(file.id, message);\n        return;\n    } else if (fileCancel && file.remote.is_uploading_active) {\n        FileStore.cancelUploadFile(file.id, message);\n        return;\n    } else {\n        download(file, message, () => FileStore.updateAudioBlob(chat_id, id, file.id));\n    }\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateMediaActive',\n        chatId: chat_id,\n        messageId: id\n    });\n}\n\nfunction openChatPhoto(photo, message, fileCancel) {\n    if (!photo) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    const photoSize = getPhotoSize(photo.sizes);\n    if (!photoSize) return;\n\n    let { photo: file } = photoSize;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    if (fileCancel && file.local.is_downloading_active) {\n        FileStore.cancelGetRemoteFile(file.id, message);\n        return;\n    } else if (fileCancel && file.remote.is_uploading_active) {\n        FileStore.cancelUploadFile(file.id, message);\n        return;\n    }\n\n    download(file, message, () => FileStore.updatePhotoBlob(chat_id, id, file.id));\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    ApplicationStore.setMediaViewerContent({\n        chatId: chat_id,\n        messageId: id\n    });\n}\n\nfunction openContact(contact, message, fileCancel) {\n    if (!contact) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    openUser(contact.userId);\n}\n\nfunction openDocument(document, message, fileCancel) {\n    if (!document) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    let { document: file } = document;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    if (fileCancel && file.local.is_downloading_active) {\n        FileStore.cancelGetRemoteFile(file.id, message);\n        return;\n    } else if (fileCancel && file.remote.is_uploading_active) {\n        FileStore.cancelUploadFile(file.id, message);\n        return;\n    }\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    if (isLottieMessage(chat_id, id)) {\n        TdLibController.send({\n            '@type': 'openMessageContent',\n            chat_id: chat_id,\n            message_id: id\n        });\n\n        ApplicationStore.setMediaViewerContent({\n            chatId: chat_id,\n            messageId: id\n        });\n    } else {\n        saveOrDownload(file, document.file_name, message);\n    }\n}\n\nfunction openGame(game, message, fileCancel) {\n    if (!game) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    const { animation } = game;\n    if (animation) {\n        let { animation: file } = animation;\n        if (!file) return;\n\n        file = FileStore.get(file.id) || file;\n        if (fileCancel && file.local.is_downloading_active) {\n            FileStore.cancelGetRemoteFile(file.id, message);\n            return;\n        } else if (fileCancel && file.remote.is_uploading_active) {\n            FileStore.cancelUploadFile(file.id, message);\n            return;\n        }\n\n        download(file, message, () => FileStore.updateAnimationBlob(chat_id, id, file.id));\n    }\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateActiveAnimation',\n        chatId: chat_id,\n        messageId: id\n    });\n}\n\nfunction openPhoto(photo, message, fileCancel) {\n    if (!photo) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    const photoSize = getPhotoSize(photo.sizes);\n    if (!photoSize) return;\n\n    let { photo: file } = photoSize;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    if (fileCancel && file.local.is_downloading_active) {\n        FileStore.cancelGetRemoteFile(file.id, message);\n        return;\n    } else if (fileCancel && file.remote.is_uploading_active) {\n        FileStore.cancelUploadFile(file.id, message);\n        return;\n    }\n\n    download(file, message, () => FileStore.updatePhotoBlob(chat_id, id, file.id));\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    ApplicationStore.setMediaViewerContent({\n        chatId: chat_id,\n        messageId: id\n    });\n}\n\nasync function openSticker(sticker, message, fileCancel) {\n    if (!sticker) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    const { set_id } = sticker;\n    if (!set_id) return;\n\n    const stickerSet = await TdLibController.send({\n        '@type': 'getStickerSet',\n        set_id\n    });\n\n    if (!stickerSet) return;\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateStickerSet',\n        stickerSet\n    });\n}\n\nfunction openVideo(video, message, fileCancel) {\n    if (!video) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    let { video: file } = video;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    if (fileCancel && file.local.is_downloading_active) {\n        FileStore.cancelGetRemoteFile(file.id, message);\n        return;\n    } else if (fileCancel && file.remote.is_uploading_active) {\n        FileStore.cancelUploadFile(file.id, message);\n        return;\n    }\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    ApplicationStore.setMediaViewerContent({\n        chatId: chat_id,\n        messageId: id\n    });\n}\n\nfunction openVideoNote(videoNote, message, fileCancel) {\n    if (!videoNote) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    let { video: file } = videoNote;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    if (fileCancel && file.local.is_downloading_active) {\n        FileStore.cancelGetRemoteFile(file.id, message);\n        return;\n    } else if (fileCancel && file.remote.is_uploading_active) {\n        FileStore.cancelUploadFile(file.id, message);\n        return;\n    }\n\n    download(file, message, () => FileStore.updateVideoNoteBlob(chat_id, id, file.id));\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateMediaActive',\n        chatId: chat_id,\n        messageId: id\n    });\n}\n\nfunction openVoiceNote(voiceNote, message, fileCancel) {\n    if (!voiceNote) return;\n    if (!message) return;\n\n    const { chat_id, id } = message;\n\n    let { voice: file } = voiceNote;\n    if (!file) return;\n\n    file = FileStore.get(file.id) || file;\n    if (fileCancel && file.local.is_downloading_active) {\n        FileStore.cancelGetRemoteFile(file.id, message);\n        return;\n    } else if (fileCancel && file.remote.is_uploading_active) {\n        FileStore.cancelUploadFile(file.id, message);\n        return;\n    } else {\n        download(file, message, () => FileStore.updateVoiceNoteBlob(chat_id, id, file.id));\n    }\n\n    TdLibController.send({\n        '@type': 'openMessageContent',\n        chat_id: chat_id,\n        message_id: id\n    });\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateMediaActive',\n        chatId: chat_id,\n        messageId: id\n    });\n}\n\nfunction openMedia(chatId, messageId, fileCancel = true) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return;\n\n    const { content } = message;\n    if (!content) return null;\n\n    switch (content['@type']) {\n        case 'messageAnimation': {\n            const { animation } = content;\n            if (animation) {\n                openAnimation(animation, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageAudio': {\n            const { audio } = content;\n            if (audio) {\n                openAudio(audio, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageChatChangePhoto': {\n            const { photo } = content;\n            if (photo) {\n                openChatPhoto(photo, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageContact': {\n            const { contact } = content;\n            if (contact) {\n                openContact(contact, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageDocument': {\n            const { document } = content;\n            if (document) {\n                openDocument(document, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageGame': {\n            const { game } = content;\n            if (game) {\n                openGame(game, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messagePhoto': {\n            const { photo } = content;\n            if (photo) {\n                openPhoto(photo, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageSticker': {\n            const { sticker } = content;\n            if (sticker) {\n                openSticker(sticker, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (web_page) {\n                const { animation, audio, document, photo, sticker, video, video_note, voice_note } = web_page;\n\n                if (animation) {\n                    openAnimation(animation, message, fileCancel);\n                }\n\n                if (audio) {\n                    openAudio(audio, message, fileCancel);\n                }\n\n                if (document) {\n                    openDocument(document, message, fileCancel);\n                }\n\n                if (sticker) {\n                    openSticker(sticker, message, fileCancel);\n                }\n\n                if (video) {\n                    openVideo(video, message, fileCancel);\n                }\n\n                if (video_note) {\n                    openVideoNote(video_note, message, fileCancel);\n                }\n\n                if (voice_note) {\n                    openVoiceNote(voice_note, message, fileCancel);\n                }\n\n                if (photo) {\n                    openPhoto(photo, message, fileCancel);\n                }\n            }\n\n            break;\n        }\n        case 'messageVideo': {\n            const { video } = content;\n            if (video) {\n                openVideo(video, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageVideoNote': {\n            const { video_note } = content;\n            if (video_note) {\n                openVideoNote(video_note, message, fileCancel);\n            }\n\n            break;\n        }\n        case 'messageVoiceNote': {\n            const { voice_note } = content;\n            if (voice_note) {\n                openVoiceNote(voice_note, message, fileCancel);\n            }\n\n            break;\n        }\n    }\n}\n\nfunction isDeletedMessage(message) {\n    return message && message['@type'] === 'deletedMessage';\n}\n\nfunction getReplyPhotoSize(chatId, messageId) {\n    const message = MessageStore.get(chatId, messageId);\n    if (!message) return;\n\n    const { content } = message;\n    if (!content) return null;\n\n    switch (content['@type']) {\n        case 'messageAnimation': {\n            const { animation } = content;\n            if (!animation) return null;\n\n            const { thumbnail } = animation;\n            return thumbnail || null;\n        }\n        case 'messageAudio': {\n            const { audio } = content;\n            if (!audio) return null;\n\n            const { album_cover_thumbnail } = audio;\n            return album_cover_thumbnail || null;\n        }\n        case 'messageChatChangePhoto': {\n            const { photo } = content;\n            if (!photo) return null;\n\n            return getPhotoSize(photo.sizes);\n        }\n        case 'messageDocument': {\n            const { document } = content;\n            if (!document) return null;\n\n            const { thumbnail } = document;\n            return thumbnail || null;\n        }\n        case 'messageGame': {\n            const { game } = content;\n            if (!game) return null;\n\n            const { animation, photo } = game;\n            if (animation) {\n                const { thumbnail } = animation;\n                if (thumbnail) {\n                    return thumbnail;\n                }\n            }\n\n            if (photo) {\n                return getPhotoSize(photo.sizes);\n            }\n\n            return null;\n        }\n        case 'messagePhoto': {\n            const { photo } = content;\n            if (!photo) return null;\n\n            return getPhotoSize(photo.sizes);\n        }\n        case 'messageSticker': {\n            const { sticker } = content;\n            if (!sticker) return null;\n\n            const { thumbnail } = sticker;\n            return thumbnail || null;\n        }\n        case 'messageText': {\n            const { web_page } = content;\n            if (web_page) {\n                const { animation, audio, document, photo, sticker, video, video_note } = web_page;\n                if (photo) {\n                    return getPhotoSize(photo.sizes);\n                }\n                if (animation) {\n                    const { thumbnail } = animation;\n                    return thumbnail || null;\n                }\n                if (audio) {\n                    const { album_cover_thumbnail } = audio;\n                    return album_cover_thumbnail || null;\n                }\n                if (document) {\n                    const { thumbnail } = document;\n                    return thumbnail || null;\n                }\n                if (sticker) {\n                    const { thumbnail } = sticker;\n                    return thumbnail || null;\n                }\n                if (video) {\n                    const { thumbnail } = video;\n                    return thumbnail || null;\n                }\n                if (video_note) {\n                    const { thumbnail } = video_note;\n                    return thumbnail || null;\n                }\n            }\n\n            break;\n        }\n        case 'messageVideo': {\n            const { video } = content;\n            if (!video) return null;\n\n            const { thumbnail } = video;\n            return thumbnail || null;\n        }\n        case 'messageVideoNote': {\n            const { video_note } = content;\n            if (!video_note) return null;\n\n            const { thumbnail } = video_note;\n            return thumbnail || null;\n        }\n    }\n\n    return null;\n}\n\nexport {\n    getAuthor,\n    getTitle,\n    getText,\n    getFormattedText,\n    getWebPage,\n    getContent,\n    getDate,\n    getDateHint,\n    getMedia,\n    isForwardOriginHidden,\n    getForwardTitle,\n    getUnread,\n    getSenderUserId,\n    filterMessages,\n    isMediaContent,\n    isDeletedMessage,\n    isVideoMessage,\n    isAnimationMessage,\n    isLottieMessage,\n    getLocationId,\n    isContentOpened,\n    getMediaTitle,\n    hasAudio,\n    hasVideoNote,\n    getSearchMessagesFilter,\n    openMedia,\n    getReplyPhotoSize\n};\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass BasicGroupStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.items = new Map();\n        this.fullInfoItems = new Map();\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateBasicGroup': {\n                this.set(update.basic_group);\n\n                this.emit(update['@type'], update);\n                break;\n            }\n            case 'updateBasicGroupFullInfo':\n                this.setFullInfo(update.basic_group_id, update.basic_group_full_info);\n\n                this.emit(update['@type'], update);\n                break;\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {};\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    get(groupId) {\n        return this.items.get(groupId);\n    }\n\n    set(group) {\n        this.items.set(group.id, group);\n    }\n\n    getFullInfo(id) {\n        return this.fullInfoItems.get(id);\n    }\n\n    setFullInfo(id, fullInfo) {\n        this.fullInfoItems.set(id, fullInfo);\n    }\n}\n\nconst store = new BasicGroupStore();\nwindow.basicgroup = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport InsertEmoticonIcon from '@material-ui/icons/InsertEmoticon';\nimport Popover from '@material-ui/core/Popover';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withTranslation } from 'react-i18next';\nimport { compose } from 'recompose';\nimport { Picker } from 'emoji-mart';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport LocalizationStore from '../../Stores/LocalizationStore';\nimport './EmojiPickerButton.css';\n\nconst styles = {\n    iconButton: {\n        margin: '8px 0px'\n    }\n};\n\nclass EmojiPickerButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            anchorEl: null\n        };\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateThemeChange', this.onClientUpdateChange);\n        LocalizationStore.on('clientUpdateLanguageChange', this.onClientUpdateChange);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateThemeChange', this.onClientUpdateChange);\n        LocalizationStore.removeListener('clientUpdateLanguageChange', this.onClientUpdateChange);\n    }\n\n    onClientUpdateChange = update => {\n        this.picker = null;\n    };\n\n    updateAnchorEl = anchorEl => {\n        this.setState({ anchorEl: anchorEl });\n    };\n\n    switchPopover = event => {\n        this.updateAnchorEl(this.state.anchorEl ? null : event.currentTarget);\n    };\n\n    render() {\n        const { classes, theme, t } = this.props;\n        const { anchorEl } = this.state;\n\n        const open = Boolean(anchorEl);\n\n        if (!this.picker) {\n            const i18n = {\n                search: t('Search'),\n                notfound: t('NotEmojiFound'),\n                skintext: t('ChooseDefaultSkinTone'),\n                categories: {\n                    search: t('SearchResults'),\n                    recent: t('Recent'),\n                    people: t('SmileysPeople'),\n                    nature: t('AnimalsNature'),\n                    foods: t('FoodDrink'),\n                    activity: t('Activity'),\n                    places: t('TravelPlaces'),\n                    objects: t('Objects'),\n                    symbols: t('Symbols'),\n                    flags: t('Flags'),\n                    custom: t('Custom')\n                }\n            };\n\n            this.picker = (\n                <Picker\n                    set='apple'\n                    showPreview={false}\n                    showSkinTones={false}\n                    onSelect={this.props.onSelect}\n                    color={theme.palette.primary.dark}\n                    i18n={i18n}\n                />\n            );\n        }\n\n        return (\n            <>\n                <link\n                    rel='stylesheet'\n                    type='text/css'\n                    href={theme.palette.type === 'dark' ? 'emoji-mart.dark.css' : 'emoji-mart.light.css'}\n                />\n                <IconButton className={classes.iconButton} aria-label='Emoticon' onClick={this.switchPopover}>\n                    <InsertEmoticonIcon />\n                </IconButton>\n                <Popover\n                    id='render-props-popover'\n                    open={open}\n                    anchorEl={anchorEl}\n                    onClose={() => this.updateAnchorEl(null)}\n                    anchorOrigin={{\n                        vertical: 'top',\n                        horizontal: 'left'\n                    }}\n                    transformOrigin={{\n                        vertical: 'bottom',\n                        horizontal: 'left'\n                    }}>\n                    {this.picker}\n                </Popover>\n            </>\n        );\n    }\n}\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(EmojiPickerButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { getSrc } from '../../Utils/File';\nimport { isBlurredThumbnail } from '../../Utils/Media';\nimport { hasVideoNote } from '../../Utils/Message';\nimport FileStore from '../../Stores/FileStore';\nimport './ReplyTile.css';\n\nclass ReplyTile extends React.Component {\n    componentDidMount() {\n        FileStore.on('clientUpdateAnimationThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.on('clientUpdateAudioThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.on('clientUpdateDocumentThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.on('clientUpdatePhotoBlob', this.onClientUpdatePhotoBlob);\n        FileStore.on('clientUpdateStickerThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.on('clientUpdateVideoThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.on('clientUpdateVideoNoteThumbnailBlob', this.onClientUpdatePhotoBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateAnimationThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.removeListener('clientUpdateAudioThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.removeListener('clientUpdateDocumentThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.removeListener('clientUpdatePhotoBlob', this.onClientUpdatePhotoBlob);\n        FileStore.removeListener('clientUpdateStickerThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.removeListener('clientUpdateVideoThumbnailBlob', this.onClientUpdatePhotoBlob);\n        FileStore.removeListener('clientUpdateVideoNoteThumbnailBlob', this.onClientUpdatePhotoBlob);\n    }\n\n    onClientUpdatePhotoBlob = update => {\n        const { chatId, messageId, photoSize } = this.props;\n        if (!photoSize) return;\n\n        const { photo } = photoSize;\n        if (!photo) return;\n\n        if (update.chatId === chatId && update.messageId === messageId && update.fileId === photo.id) {\n            this.forceUpdate();\n        }\n    };\n\n    render() {\n        const { chatId, messageId, photoSize } = this.props;\n        if (!photoSize) return null;\n\n        const { photo } = photoSize;\n        if (!photo) return null;\n\n        const src = getSrc(photo);\n        const isBlurred = isBlurredThumbnail(photo);\n        const isVideoNote = hasVideoNote(chatId, messageId);\n\n        return (\n            <div className='reply-tile'>\n                <img\n                    className={classNames(\n                        'reply-tile-photo',\n                        { 'reply-tile-photo-round': isVideoNote },\n                        { 'reply-tile-photo-loading': !src },\n                        { 'media-blurred': isBlurred }\n                    )}\n                    draggable={false}\n                    src={src}\n                    alt=''\n                />\n            </div>\n        );\n    }\n}\n\nReplyTile.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    photoSize: PropTypes.object.isRequired\n};\n\nexport default ReplyTile;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport ReplyTile from '../Tile/ReplyTile';\nimport { getContent, getTitle, isDeletedMessage, getReplyPhotoSize } from '../../Utils/Message';\nimport { accentStyles } from '../Theme';\nimport { openChat } from '../../Actions/Client';\nimport MessageStore from '../../Stores/MessageStore';\nimport './Reply.css';\n\nconst styles = theme => ({\n    ...accentStyles(theme)\n});\n\nclass Reply extends React.Component {\n    componentDidMount() {\n        MessageStore.on('getMessageResult', this.onGetMessageResult);\n    }\n\n    componentWillUnmount() {\n        MessageStore.removeListener('getMessageResult', this.onGetMessageResult);\n    }\n\n    onGetMessageResult = result => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === result.chat_id && messageId === result.id) {\n            this.forceUpdate();\n        }\n    };\n\n    handleClick = event => {\n        event.stopPropagation();\n    };\n\n    handleOpen = event => {\n        event.stopPropagation();\n\n        const { chatId, messageId } = this.props;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n        if (isDeletedMessage(message)) return null;\n\n        openChat(chatId, messageId);\n    };\n\n    render() {\n        const { classes, t, chatId, messageId } = this.props;\n\n        const message = MessageStore.get(chatId, messageId);\n\n        let title = !message ? null : getTitle(message);\n        let content = !message ? t('Loading') : getContent(message, t);\n        const photoSize = getReplyPhotoSize(chatId, messageId);\n\n        if (isDeletedMessage(message)) {\n            title = null;\n            content = t('DeletedMessage');\n        }\n\n        return (\n            <div className='reply' onMouseDown={this.handleOpen} onClick={this.handleClick}>\n                <div className='reply-wrapper'>\n                    <div className={classNames('reply-border', classes.accentBackgroundLight)} />\n                    {photoSize && <ReplyTile chatId={chatId} messageId={messageId} photoSize={photoSize} />}\n                    <div className='reply-content'>\n                        {title && (\n                            <div className={classNames('reply-content-title', classes.accentColorDark)}>{title}</div>\n                        )}\n                        <div className='reply-content-subtitle'>{content}</div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nReply.propTypes = {\n    chatId: PropTypes.number,\n    messageId: PropTypes.number\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(Reply);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ReplyIcon from '@material-ui/icons/Reply';\nimport CloseIcon from '@material-ui/icons/Close';\nimport IconButton from '@material-ui/core/IconButton';\nimport { withStyles } from '@material-ui/core/styles';\nimport Reply from '../Message/Reply';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './InputBoxHeader.css';\n\nconst styles = theme => ({\n    replyIcon: {\n        padding: 12,\n        color: theme.palette.action.active\n    },\n    closeIconButton: {\n        margin: 0\n    }\n});\n\nclass InputBoxHeader extends React.Component {\n    handleClose = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateReply',\n            chatId: this.props.chatId,\n            messageId: 0\n        });\n    };\n\n    render() {\n        const { classes, chatId, messageId } = this.props;\n        if (!chatId) return null;\n        if (!messageId) return null;\n\n        return (\n            <div className='inputbox-header'>\n                <div className='inputbox-header-left-column'>\n                    <ReplyIcon className={classes.replyIcon} />\n                </div>\n                <div className='inputbox-header-middle-column'>\n                    <Reply chatId={chatId} messageId={messageId} />\n                </div>\n                <div className='inputbox-header-right-column'>\n                    <IconButton className={classes.closeIconButton} aria-label='Close' onClick={this.handleClose}>\n                        <CloseIcon />\n                    </IconButton>\n                </div>\n            </div>\n        );\n    }\n}\n\nInputBoxHeader.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired\n};\n\nexport default withStyles(styles)(InputBoxHeader);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\nimport IconButton from '@material-ui/core/IconButton';\nimport InsertDriveFileIcon from '@material-ui/icons/InsertDriveFile';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport PhotoIcon from '@material-ui/icons/Photo';\nimport PollIcon from '@material-ui/icons/Poll';\nimport { canSendDocuments, canSendPhotos, canSendPolls, isPrivateChat } from '../../Utils/Chat';\nimport { ANIMATION_DURATION_300MS } from '../../Constants';\n\nconst styles = {\n    iconButton: {\n        margin: '8px 0'\n    }\n};\n\nclass AttachButton extends React.Component {\n    state = {\n        anchorEl: null\n    };\n\n    handleMenuClick = event => {\n        this.setState({ anchorEl: event.currentTarget });\n    };\n\n    handleMenuClose = () => {\n        this.setState({ anchorEl: null });\n    };\n\n    handleAttachPhoto = () => {\n        this.handleMenuClose();\n\n        const { onAttachPhoto } = this.props;\n        if (!onAttachPhoto) return;\n\n        setTimeout(() => onAttachPhoto(), ANIMATION_DURATION_300MS);\n    };\n\n    handleAttachDocument = () => {\n        this.handleMenuClose();\n\n        const { onAttachDocument } = this.props;\n        if (!onAttachDocument) return;\n\n        setTimeout(() => onAttachDocument(), ANIMATION_DURATION_300MS);\n    };\n\n    handleAttachPoll = () => {\n        this.handleMenuClose();\n\n        const { onAttachPoll } = this.props;\n        if (!onAttachPoll) return;\n\n        onAttachPoll();\n    };\n\n    render() {\n        const { classes, t, chatId } = this.props;\n        const { anchorEl } = this.state;\n\n        return (\n            <>\n                <IconButton\n                    className={classes.iconButton}\n                    aria-label='Attach'\n                    open={Boolean(anchorEl)}\n                    onClick={this.handleMenuClick}>\n                    <AttachFileIcon className='inputbox-attach-icon' />\n                </IconButton>\n                <Menu\n                    id='attach-menu'\n                    anchorEl={anchorEl}\n                    open={Boolean(anchorEl)}\n                    getContentAnchorEl={null}\n                    disableAutoFocusItem\n                    disableRestoreFocus={true}\n                    anchorOrigin={{\n                        vertical: 'top',\n                        horizontal: 'right'\n                    }}\n                    transformOrigin={{\n                        vertical: 'bottom',\n                        horizontal: 'right'\n                    }}\n                    onClose={this.handleMenuClose}>\n                    <MenuItem onClick={this.handleAttachPhoto} disabled={!canSendPhotos(chatId)}>\n                        <ListItemIcon>\n                            <PhotoIcon />\n                        </ListItemIcon>\n                        <ListItemText inset primary={t('AttachPhoto')} />\n                    </MenuItem>\n                    <MenuItem onClick={this.handleAttachDocument} disabled={!canSendDocuments(chatId)}>\n                        <ListItemIcon>\n                            <InsertDriveFileIcon />\n                        </ListItemIcon>\n                        <ListItemText inset primary={t('AttachDocument')} />\n                    </MenuItem>\n                    {!isPrivateChat(chatId) && (\n                        <MenuItem onClick={this.handleAttachPoll} disabled={!canSendPolls(chatId)}>\n                            <ListItemIcon>\n                                <PollIcon />\n                            </ListItemIcon>\n                            <ListItemText inset primary={t('Poll')} />\n                        </MenuItem>\n                    )}\n                </Menu>\n            </>\n        );\n    }\n}\n\nAttachButton.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    onAttachDocument: PropTypes.func.isRequired,\n    onAttachPhoto: PropTypes.func.isRequired,\n    onAttachPoll: PropTypes.func.isRequired\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(AttachButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nexport function focusNode(node, toEnd = false) {\n    if (!node) return;\n\n    if (toEnd && node.childNodes && node.childNodes.length > 0) {\n        const lastNode = node.childNodes[node.childNodes.length - 1];\n        const range = document.createRange();\n        range.setStart(lastNode, lastNode.length);\n        range.collapse(true);\n\n        const selection = window.getSelection();\n        selection.removeAllRanges();\n        selection.addRange(range);\n\n        node.scrollTop = node.scrollHeight;\n    }\n\n    node.focus();\n}\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nconst keys = {\n    backspace: 8,\n    shift: 16,\n    ctrl: 17,\n    alt: 18,\n    delete: 46,\n    cmd: 91,\n    leftArrow: 37,\n    upArrow: 38,\n    rightArrow: 39,\n    downArrow: 40\n};\n\nexport const utils = {\n    special: {},\n    navigational: {},\n    isSpecial(e) {\n        return typeof this.special[e.keyCode] !== 'undefined';\n    },\n    isNavigational(e) {\n        return typeof this.navigational[e.keyCode] !== 'undefined';\n    }\n};\n\nutils.special[keys['backspace']] = true;\nutils.special[keys['shift']] = true;\nutils.special[keys['ctrl']] = true;\nutils.special[keys['alt']] = true;\nutils.special[keys['delete']] = true;\n\nutils.navigational[keys['upArrow']] = true;\nutils.navigational[keys['downArrow']] = true;\nutils.navigational[keys['leftArrow']] = true;\nutils.navigational[keys['rightArrow']] = true;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withStyles } from '@material-ui/core';\nimport { withTranslation } from 'react-i18next';\nimport CloseIcon from '@material-ui/icons/Close';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/es/Typography/Typography';\nimport { focusNode } from '../../Utils/Component';\nimport { withRestoreRef, withSaveRef } from '../../Utils/HOC';\nimport { utils } from '../../Utils/Key';\nimport { borderStyle } from '../Theme';\nimport { POLL_OPTION_HINT_LENGTH, POLL_OPTION_LENGTH, POLL_OPTION_MAX_LENGTH } from '../../Constants';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './CreatePollOption.css';\n\nconst styles = theme => ({\n    iconButton: {\n        padding: 4\n    },\n    counterRoot: {\n        position: 'absolute',\n        right: 24,\n        bottom: 6,\n        minWidth: 28,\n        userSelect: 'none'\n    },\n    ...borderStyle(theme)\n});\n\nclass CreatePollOption extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.optionTextRef = React.createRef();\n\n        this.state = {\n            remainLength: POLL_OPTION_MAX_LENGTH\n        };\n    }\n\n    getText = () => {\n        return this.optionTextRef.current.innerText;\n    };\n\n    focus = (toEnd = false) => {\n        const node = this.optionTextRef.current;\n\n        focusNode(node, toEnd);\n    };\n\n    handleDelete = () => {\n        const { option, onDelete } = this.props;\n        if (!option) return;\n        if (!onDelete) return;\n\n        onDelete(option.id);\n    };\n\n    handleInput = event => {\n        const { option } = this.props;\n\n        event.preventDefault();\n\n        const node = this.optionTextRef.current;\n        const length = node.dataset.length;\n        const maxLength = node.dataset.maxLength;\n        const text = this.getText();\n\n        this.setState({\n            remainLength: length - text.length\n        });\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdatePollOption',\n            id: option.id,\n            text\n        });\n    };\n\n    handleKeyDown = event => {\n        const node = this.optionTextRef.current;\n        const maxLength = node.dataset.maxLength;\n        const innerText = this.getText();\n        const length = innerText.length;\n\n        let hasSelection = false;\n        const selection = window.getSelection();\n        const isSpecial = utils.isSpecial(event);\n        const isNavigational = utils.isNavigational(event);\n\n        if (selection) {\n            hasSelection = !!selection.toString();\n        }\n\n        switch (event.key) {\n            case 'Backspace': {\n                const text = this.getText();\n                if (!text) {\n                    const { option, onDelete } = this.props;\n                    if (onDelete) {\n                        onDelete(option.id, true);\n                    }\n\n                    event.preventDefault();\n                    return false;\n                }\n\n                break;\n            }\n            case 'Enter': {\n                const { option, onFocusNext } = this.props;\n                if (option && onFocusNext) {\n                    onFocusNext(option.id);\n                }\n\n                event.preventDefault();\n                return false;\n            }\n            case 'ArrowUp': {\n                const selection = window.getSelection();\n                if (!selection) break;\n                if (!selection.isCollapsed) break;\n\n                const firstChild = node.childNodes && node.childNodes.length > 0 ? node.childNodes[0] : null;\n\n                if (!firstChild || (selection.anchorNode === firstChild && !selection.anchorOffset)) {\n                    const { option, onFocusPrev } = this.props;\n                    if (onFocusPrev) {\n                        onFocusPrev(option.id);\n                    }\n\n                    event.preventDefault();\n                    return false;\n                }\n\n                break;\n            }\n            case 'ArrowDown': {\n                const selection = window.getSelection();\n                if (!selection) break;\n                if (!selection.isCollapsed) break;\n\n                const lastChild =\n                    node.childNodes && node.childNodes.length > 0 ? node.childNodes[node.childNodes.length - 1] : null;\n\n                if (!lastChild || (selection.anchorNode === lastChild && selection.anchorOffset === lastChild.length)) {\n                    const { option, onFocusNext } = this.props;\n                    if (onFocusNext) {\n                        onFocusNext(option.id);\n                    }\n\n                    event.preventDefault();\n                    return false;\n                }\n\n                break;\n            }\n        }\n\n        if (isSpecial || isNavigational) {\n            return true;\n        }\n\n        if (length >= maxLength && !hasSelection) {\n            event.preventDefault();\n            return false;\n        }\n\n        return true;\n    };\n\n    handlePaste = event => {\n        event.preventDefault();\n\n        const node = this.optionTextRef.current;\n        const maxLength = node.dataset.maxLength;\n\n        const selection = window.getSelection();\n        const selectionString = selection ? selection.toString() : '';\n\n        const innerText = this.getText();\n        if (innerText.length - selection.length >= maxLength) return;\n\n        let pasteText = event.clipboardData.getData('text/plain');\n        if (!pasteText) return;\n\n        pasteText = pasteText.replace('\\r\\n', '\\n').replace('\\n', ' ');\n\n        if (innerText.length - selectionString.length + pasteText.length > maxLength) {\n            pasteText = pasteText.substr(0, maxLength - innerText.length + selectionString.length);\n        }\n        document.execCommand('insertHTML', false, pasteText);\n    };\n\n    render() {\n        const { classes, t } = this.props;\n        const { remainLength } = this.state;\n\n        return (\n            <div className='create-poll-option'>\n                <div\n                    ref={this.optionTextRef}\n                    id='create-poll-option-text'\n                    contentEditable\n                    suppressContentEditableWarning\n                    placeholder={t('Option')}\n                    data-length={POLL_OPTION_LENGTH}\n                    data-max-length={POLL_OPTION_MAX_LENGTH}\n                    onInput={this.handleInput}\n                    onKeyDown={this.handleKeyDown}\n                    onPaste={this.handlePaste}\n                />\n                <div className='create-poll-option-delete-button'>\n                    <IconButton className={classes.iconButton} onClick={this.handleDelete}>\n                        <CloseIcon fontSize='small' />\n                    </IconButton>\n                </div>\n                <div className={classNames('create-poll-option-bottom-border', { [classes.borderColor]: true })} />\n                {remainLength <= POLL_OPTION_LENGTH - POLL_OPTION_HINT_LENGTH && (\n                    <Typography\n                        align='center'\n                        className={classes.counterRoot}\n                        color={remainLength >= 0 ? 'textSecondary' : 'error'}\n                        variant='subtitle1'>\n                        {remainLength}\n                    </Typography>\n                )}\n            </div>\n        );\n    }\n}\n\nCreatePollOption.propTypes = {\n    option: PropTypes.object.isRequired,\n    onDelete: PropTypes.func.isRequired,\n    onFocusPrev: PropTypes.func.isRequired,\n    onFocusNext: PropTypes.func.isRequired\n};\n\nconst enhance = compose(\n    withSaveRef(),\n    withStyles(styles),\n    withTranslation(),\n    withRestoreRef()\n);\n\nexport default enhance(CreatePollOption);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { POLL_OPTION_LENGTH, POLL_QUESTION_LENGTH } from '../Constants';\n\nexport function isValidPoll(poll) {\n    if (!poll) return false;\n\n    const { question, options } = poll;\n    if (!isValidQuestion(question)) return false;\n\n    const noneEmptyOptions = options.filter(x => Boolean(x.text));\n    if (noneEmptyOptions.length <= 1) return false;\n\n    return noneEmptyOptions.every(isValidOption);\n}\n\nfunction isValidQuestion(question) {\n    if (!question) return false;\n\n    return question.length <= POLL_QUESTION_LENGTH;\n}\n\nfunction isValidOption(option) {\n    if (!option) return false;\n    if (!option.text) return false;\n\n    return option.text.length <= POLL_OPTION_LENGTH;\n}\n\nexport function hasPollData(poll) {\n    if (!poll) return false;\n\n    const { question, options } = poll;\n    if (question) return true;\n\n    return options.some(x => Boolean(x.text));\n}\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\nimport { isValidPoll } from '../Utils/Poll';\n\nclass PollStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.poll = null;\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {};\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateNewPoll': {\n                this.set({\n                    id: Date.now(),\n                    question: '',\n                    options: []\n                });\n\n                this.emit('clientUpdateNewPoll', update);\n                break;\n            }\n            case 'clientUpdatePollQuestion': {\n                const { question } = update;\n\n                this.assign(this.poll, { question });\n\n                this.emit('clientUpdatePollQuestion', update);\n                break;\n            }\n            case 'clientUpdatePollOption': {\n                const { id, text } = update;\n                const { options } = this.poll;\n\n                this.assign(this.poll, { options: options.map(x => (x.id === id ? { ...x, text } : { ...x })) });\n\n                this.emit('clientUpdatePollOption', update);\n                break;\n            }\n            case 'clientUpdateNewPollOption': {\n                const { option } = update;\n                const { options } = this.poll;\n\n                this.assign(this.poll, { options: [...options, option] });\n                this.emit('clientUpdateNewPollOption', update);\n                break;\n            }\n            case 'clientUpdateDeletePollOption': {\n                const { id } = update;\n                const { options } = this.poll;\n\n                this.assign(this.poll, { options: options.filter(x => x.id !== id) });\n                this.emit('clientUpdateDeletePollOption', update);\n                break;\n            }\n            case 'clientUpdateDeletePoll': {\n                this.set(null);\n\n                this.emit('clientUpdateDeletePoll', update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    assign(source1, source2) {\n        this.set(Object.assign({}, source1, source2));\n    }\n\n    set(poll) {\n        this.poll = poll;\n    }\n\n    getInputMessagePoll() {\n        if (!this.poll) return null;\n        if (!isValidPoll(this.poll)) return null;\n        const { question, options } = this.poll;\n\n        return {\n            '@type': 'inputMessagePoll',\n            question,\n            options: options.filter(x => Boolean(x.text)).map(x => x.text)\n        };\n    }\n}\n\nconst store = new PollStore();\nwindow.poll = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'recompose';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withTranslation } from 'react-i18next';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Divider from '@material-ui/core/Divider';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Typography from '@material-ui/core/Typography';\nimport CreatePollOption from './CreatePollOption';\nimport { focusNode } from '../../Utils/Component';\nimport { withRestoreRef, withSaveRef } from '../../Utils/HOC';\nimport { utils } from '../../Utils/Key';\nimport { hasPollData, isValidPoll } from '../../Utils/Poll';\nimport {\n    POLL_OPTIONS_MAX_COUNT,\n    POLL_QUESTION_HINT_LENGTH,\n    POLL_QUESTION_LENGTH,\n    POLL_QUESTION_MAX_LENGTH\n} from '../../Constants';\nimport PollStore from '../../Stores/PollStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './CreatePollDialog.css';\n\nconst styles = theme => ({\n    dialogRoot: {\n        color: theme.palette.text.primary\n    },\n    contentRoot: {\n        width: 300\n    },\n    dividerRoot: {\n        margin: '8px -24px'\n    },\n    listRoot: {\n        margin: '0 -24px'\n    },\n    listItem: {\n        padding: '11px 24px',\n        color: '#8e9396',\n        height: 48\n    },\n    typographyRoot: {}\n});\n\nclass CreatePollDialog extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.questionRef = React.createRef();\n        this.optionsRefMap = new Map();\n\n        this.state = {\n            poll: null,\n            confirm: false,\n            remainLength: POLL_QUESTION_MAX_LENGTH\n        };\n    }\n\n    componentDidMount() {\n        PollStore.on('clientUpdateDeletePoll', this.handleClientUpdatePoll);\n        PollStore.on('clientUpdateDeletePollOption', this.handleClientUpdatePoll);\n        PollStore.on('clientUpdateNewPoll', this.handleClientUpdateNewPoll);\n        PollStore.on('clientUpdateNewPollOption', this.handleClientUpdateNewPollOption);\n        PollStore.on('clientUpdatePollOption', this.handleClientUpdatePoll);\n        PollStore.on('clientUpdatePollQuestion', this.handleClientUpdatePollQuestion);\n    }\n\n    componentWillUnmount() {\n        PollStore.removeListener('clientUpdateDeletePoll', this.handleClientUpdatePoll);\n        PollStore.removeListener('clientUpdateDeletePollOption', this.handleClientUpdatePoll);\n        PollStore.removeListener('clientUpdateNewPoll', this.handleClientUpdateNewPoll);\n        PollStore.removeListener('clientUpdateNewPollOption', this.handleClientUpdateNewPollOption);\n        PollStore.removeListener('clientUpdatePollOption', this.handleClientUpdatePoll);\n        PollStore.removeListener('clientUpdatePollQuestion', this.handleClientUpdatePollQuestion);\n    }\n\n    handleClientUpdateNewPoll = update => {\n        const { poll } = PollStore;\n\n        this.setState({\n            confirm: false,\n            remainLength: POLL_QUESTION_MAX_LENGTH,\n            poll\n        });\n    };\n\n    handleClientUpdatePollQuestion = update => {\n        const { poll } = PollStore;\n\n        const node = this.questionRef.current;\n        const length = node.dataset.length;\n        const innerText = node.innerText;\n\n        this.setState({\n            remainLength: length - innerText.length,\n            poll\n        });\n    };\n\n    handleClientUpdatePoll = update => {\n        const { poll } = PollStore;\n\n        this.setState({ poll });\n    };\n\n    handleClientUpdateNewPollOption = update => {\n        const { poll } = PollStore;\n\n        this.setState({ poll }, () => {\n            setTimeout(() => {\n                const node = this.optionsRefMap.get(poll.options.length - 1);\n\n                node.focus(true);\n            });\n        });\n    };\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { poll } = this.state;\n\n        if (poll && !prevState.poll) {\n            setTimeout(() => {\n                focusNode(this.questionRef.current, true);\n            }, 0);\n        }\n    }\n\n    handleKeyDown = event => {\n        const node = this.questionRef.current;\n        const maxLength = node.dataset.maxLength;\n        const innerText = node.innerText;\n        const length = innerText.length;\n\n        let hasSelection = false;\n        const selection = window.getSelection();\n        const isSpecial = utils.isSpecial(event);\n        const isNavigational = utils.isNavigational(event);\n\n        if (selection) {\n            hasSelection = !!selection.toString();\n        }\n\n        switch (event.key) {\n            case 'Enter': {\n                if (!event.shiftKey) {\n                    this.handleFocusNextOption(0);\n\n                    event.preventDefault();\n                    return false;\n                }\n\n                break;\n            }\n            case 'ArrowDown': {\n                const selection = window.getSelection();\n                if (!selection) break;\n                if (!selection.isCollapsed) break;\n\n                const lastChild =\n                    node.childNodes && node.childNodes.length > 0 ? node.childNodes[node.childNodes.length - 1] : null;\n\n                if (!lastChild || (selection.anchorNode === lastChild && selection.anchorOffset === lastChild.length)) {\n                    this.handleFocusNextOption(0);\n\n                    event.preventDefault();\n                    return false;\n                }\n\n                break;\n            }\n        }\n\n        if (isSpecial || isNavigational) {\n            return true;\n        }\n\n        if (length >= maxLength && !hasSelection) {\n            event.preventDefault();\n            return false;\n        }\n\n        return true;\n    };\n\n    handlePaste = event => {\n        event.preventDefault();\n\n        const node = this.questionRef.current;\n        const maxLength = node.dataset.maxLength;\n\n        const selection = window.getSelection();\n        const selectionString = selection ? selection.toString() : '';\n\n        const innerText = node.innerText;\n        if (innerText.length - selection.length >= maxLength) return;\n\n        let pasteText = event.clipboardData.getData('text/plain');\n        if (!pasteText) return;\n\n        if (innerText.length - selectionString.length + pasteText.length > maxLength) {\n            pasteText = pasteText.substr(0, maxLength - innerText.length + selectionString.length);\n        }\n        document.execCommand('insertHTML', false, pasteText);\n    };\n\n    handleInput = event => {\n        event.preventDefault();\n\n        const node = this.questionRef.current;\n        //const length = node.dataset.length;\n\n        const innerText = node.innerText;\n        const innerHtml = node.innerHTML;\n\n        if (innerHtml === '<br>') {\n            node.innerText = '';\n        }\n\n        // this.setState({\n        //     remainLength: length - innerText.length\n        // });\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdatePollQuestion',\n            question: innerText\n        });\n    };\n\n    handleAddOption = () => {\n        const { poll } = this.state;\n        if (!poll) return;\n\n        const { options } = poll;\n        if (options.length >= POLL_OPTIONS_MAX_COUNT) return;\n\n        const option = {\n            id: Date.now(),\n            text: ''\n        };\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateNewPollOption',\n            option\n        });\n    };\n\n    handleDeleteOption = (id, backspace = false) => {\n        if (backspace) {\n            this.handleDeleteByBackspace(id);\n        } else {\n            this.handleDelete(id);\n        }\n    };\n\n    handleDelete = id => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateDeletePollOption',\n            id\n        });\n    };\n\n    handleDeleteByBackspace = id => {\n        const { poll } = this.state;\n        if (!poll) return;\n\n        const { options } = poll;\n\n        const index = options.findIndex(x => x.id === id);\n        const prevIndex = index - 1;\n        let deleteOption = true;\n        for (let i = index; i < options.length; i++) {\n            const { text } = options[i];\n            if (text) {\n                deleteOption = false;\n                break;\n            }\n        }\n\n        if (deleteOption) {\n            this.handleDeleteOption(id);\n        }\n\n        const prevNode = this.optionsRefMap.get(prevIndex);\n        if (!prevNode) {\n            const element = this.questionRef.current;\n\n            focusNode(element, true);\n            return;\n        }\n\n        prevNode.focus(true);\n    };\n\n    handleFocusPrevOption = id => {\n        const { poll } = this.state;\n        if (!poll) return;\n\n        const { options } = poll;\n\n        const index = options.findIndex(x => x.id === id);\n        const prevIndex = index - 1;\n\n        const prevNode = this.optionsRefMap.get(prevIndex);\n        if (!prevNode) {\n            const element = this.questionRef.current;\n\n            focusNode(element, false);\n            return;\n        }\n\n        prevNode.focus(false);\n    };\n\n    handleFocusNextOption = id => {\n        const { poll } = this.state;\n        if (!poll) return;\n\n        const { options } = poll;\n\n        const index = options.findIndex(x => x.id === id);\n        const nextIndex = index + 1;\n\n        const nextNode = this.optionsRefMap.get(nextIndex);\n        if (!nextNode) {\n            const text = index >= 0 && index < options.length ? options[index].text : '';\n            if (options.length && !text) {\n                return;\n            }\n\n            this.handleAddOption();\n            return;\n        }\n\n        nextNode.focus(nextNode, true);\n    };\n\n    getHint = () => {\n        const { poll } = this.state;\n        if (!poll) return;\n\n        const { options } = poll;\n\n        const addCount = POLL_OPTIONS_MAX_COUNT - options.length;\n\n        if (addCount <= 0) {\n            return 'You have added the maximum number of options.';\n        }\n        if (addCount === 1) {\n            return 'You can add 1 more option.';\n        }\n\n        return `You can add ${POLL_OPTIONS_MAX_COUNT - options.length} more options.`;\n    };\n\n    handleClose = () => {\n        const { poll } = this.state;\n\n        if (hasPollData(poll)) {\n            this.setState({ confirm: true });\n        } else {\n            this.handleConfirmationDone();\n        }\n    };\n\n    handleSend = () => {\n        const { onSend } = this.props;\n\n        const inputMessagePoll = PollStore.getInputMessagePoll();\n        if (!inputMessagePoll) return;\n\n        onSend(inputMessagePoll);\n\n        this.handleConfirmationDone();\n    };\n\n    handleConfirmationClose = () => {\n        this.setState({ confirm: false });\n    };\n\n    handleConfirmationDone = () => {\n        this.handleConfirmationClose();\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateDeletePoll'\n        });\n    };\n\n    render() {\n        const { classes, t } = this.props;\n        const { remainLength, confirm, poll } = this.state;\n        if (!poll) return null;\n\n        const options = poll ? poll.options : [];\n\n        this.optionsRefMap.clear();\n        const items = options.map((x, i) => (\n            <CreatePollOption\n                ref={el => this.optionsRefMap.set(i, el)}\n                key={x.id}\n                option={x}\n                onDelete={this.handleDeleteOption}\n                onFocusPrev={this.handleFocusPrevOption}\n                onFocusNext={this.handleFocusNextOption}\n            />\n        ));\n\n        const canAddOption = POLL_OPTIONS_MAX_COUNT - options.length > 0;\n        const hint = this.getHint();\n\n        return (\n            <>\n                <Dialog\n                    className={classes.dialogRoot}\n                    open\n                    transitionDuration={0}\n                    onClose={this.handleClose}\n                    aria-labelledby='dialog-title'>\n                    <DialogTitle id='dialog-title'>{t('NewPoll')}</DialogTitle>\n                    <DialogContent classes={{ root: classes.contentRoot }}>\n                        <div className='create-poll-dialog-question-title'>\n                            <Typography color='primary' variant='subtitle1' style={{ flexGrow: 1 }}>\n                                {t('Question')}\n                            </Typography>\n                            {remainLength <= POLL_QUESTION_LENGTH - POLL_QUESTION_HINT_LENGTH && (\n                                <Typography color={remainLength >= 0 ? 'textSecondary' : 'error'} variant='subtitle1'>\n                                    {remainLength}\n                                </Typography>\n                            )}\n                        </div>\n                        <div\n                            ref={this.questionRef}\n                            id='create-poll-dialog-question'\n                            contentEditable\n                            suppressContentEditableWarning\n                            placeholder={t('QuestionHint')}\n                            data-length={POLL_QUESTION_LENGTH}\n                            data-max-length={POLL_QUESTION_MAX_LENGTH}\n                            onPaste={this.handlePaste}\n                            onKeyDown={this.handleKeyDown}\n                            onInput={this.handleInput}\n                        />\n                        <Divider className={classes.dividerRoot} />\n                        <Typography color='primary' variant='subtitle1'>\n                            {t('PollOptions')}\n                        </Typography>\n                        <List classes={{ root: classes.listRoot }}>\n                            {items}\n                            {canAddOption && (\n                                <ListItem\n                                    selected={false}\n                                    className={classes.listItem}\n                                    button\n                                    onClick={this.handleAddOption}>\n                                    <ListItemText disableTypography primary={t('AddAnOption')} />\n                                </ListItem>\n                            )}\n                        </List>\n                        <Typography>{hint}</Typography>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button color='primary' onClick={this.handleClose}>\n                            {t('Cancel')}\n                        </Button>\n                        {isValidPoll(poll) && (\n                            <Button color='primary' onClick={this.handleSend}>\n                                {t('Send')}\n                            </Button>\n                        )}\n                    </DialogActions>\n                </Dialog>\n                <Dialog\n                    className={classes.dialogRoot}\n                    open={confirm}\n                    transitionDuration={0}\n                    onClose={this.handleConfirmationClose}\n                    aria-labelledby='dialog-title'>\n                    <DialogTitle id='dialog-title'>{t('CancelPollAlertTitle')}</DialogTitle>\n                    <DialogContent classes={{ root: classes.contentRoot }}>{t('CancelPollAlertText')}</DialogContent>\n                    <DialogActions>\n                        <Button color='primary' onClick={this.handleConfirmationClose}>\n                            {t('Cancel')}\n                        </Button>\n                        <Button color='primary' onClick={this.handleConfirmationDone}>\n                            {t('Ok')}\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            </>\n        );\n    }\n}\n\nCreatePollDialog.propTypes = {\n    onSend: PropTypes.func.isRequired\n};\n\nconst enhance = compose(\n    withSaveRef(),\n    withStyles(styles),\n    withTranslation(),\n    withRestoreRef()\n);\n\nexport default enhance(CreatePollDialog);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { TYPING_OUTPUT_INTERVAL_S } from '../Constants';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass OutputTypingManager {\n    constructor(chatId) {\n        this.chatId = chatId;\n        this.lastAction = null;\n    }\n\n    setTyping(action) {\n        if (!this.chatId) return;\n\n        if (this.lastAction && this.lastAction['@type'] === action['@type']) {\n            let now = new Date();\n            now.setSeconds(now.getSeconds() - TYPING_OUTPUT_INTERVAL_S);\n            if (this.lastTypingDate && this.lastTypingDate > now) {\n                return;\n            }\n        }\n\n        this.lastAction = action;\n        this.lastTypingDate = new Date();\n\n        TdLibController.send({\n            '@type': 'sendChatAction',\n            chat_id: this.chatId,\n            action: action\n        });\n    }\n}\n\nexport default OutputTypingManager;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport SendIcon from '@material-ui/icons/Send';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport EmojiPickerButton from './../ColumnMiddle/EmojiPickerButton';\nimport InputBoxHeader from './InputBoxHeader';\nimport AttachButton from './../ColumnMiddle/AttachButton';\nimport CreatePollDialog from '../Dialog/CreatePollDialog';\nimport OutputTypingManager from '../../Utils/OutputTypingManager';\nimport { getSize, readImageSize } from '../../Utils/Common';\nimport { getChatDraft, getChatDraftReplyToMessageId, isMeChat, isPrivateChat } from '../../Utils/Chat';\nimport { borderStyle } from '../Theme';\nimport { PHOTO_SIZE } from '../../Constants';\nimport MessageStore from '../../Stores/MessageStore';\nimport ChatStore from '../../Stores/ChatStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport FileStore from '../../Stores/FileStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './InputBoxControl.css';\n\nconst styles = theme => ({\n    iconButton: {\n        margin: '8px 0'\n    },\n    closeIconButton: {\n        margin: 0\n    },\n    ...borderStyle(theme)\n});\n\nclass InputBoxControl extends Component {\n    constructor(props) {\n        super(props);\n\n        this.attachDocumentRef = React.createRef();\n        this.attachPhotoRef = React.createRef();\n        this.newMessageRef = React.createRef();\n\n        const chatId = ApplicationStore.getChatId();\n\n        this.innerHTML = null;\n        this.state = {\n            chatId: chatId,\n            replyToMessageId: getChatDraftReplyToMessageId(chatId),\n            openPasteDialog: false\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { theme, t } = this.props;\n        const { chatId, replyToMessageId, openPasteDialog } = this.state;\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        if (nextProps.t !== t) {\n            return true;\n        }\n\n        if (nextState.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextState.replyToMessageId !== replyToMessageId) {\n            return true;\n        }\n\n        if (nextState.openPasteDialog !== openPasteDialog) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateChatId', this.onClientUpdateChatId);\n        MessageStore.on('clientUpdateReply', this.onClientUpdateReply);\n\n        this.setInputFocus();\n    }\n\n    componentWillUnmount() {\n        const newChatDraftMessage = this.getNewChatDraftMessage(this.state.chatId, this.state.replyToMessageId);\n        this.setChatDraftMessage(newChatDraftMessage);\n\n        ApplicationStore.removeListener('clientUpdateChatId', this.onClientUpdateChatId);\n        MessageStore.removeListener('clientUpdateReply', this.onClientUpdateReply);\n    }\n\n    onClientUpdateReply = update => {\n        const { chatId: currentChatId } = this.state;\n        const { chatId, messageId } = update;\n\n        if (currentChatId !== chatId) {\n            return;\n        }\n\n        this.setState({ replyToMessageId: messageId });\n\n        if (messageId) {\n            this.setInputFocus();\n        }\n    };\n\n    onClientUpdateChatId = update => {\n        const { chatId } = this.state;\n        if (chatId === update.nextChatId) return;\n\n        this.innerHTML = null;\n        this.setState({\n            chatId: update.nextChatId,\n            replyToMessageId: getChatDraftReplyToMessageId(update.nextChatId),\n            openPasteDialog: false\n        });\n    };\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        this.setChatDraftMessage(snapshot);\n\n        if (prevState.chatId !== this.state.chatId) {\n            this.setInputFocus();\n        }\n    }\n\n    getSnapshotBeforeUpdate(prevProps, prevState) {\n        if (prevState.chatId === this.state.chatId) return null;\n\n        return this.getNewChatDraftMessage(prevState.chatId, prevState.replyToMessageId);\n    }\n\n    setInputFocus = () => {\n        setTimeout(() => {\n            if (this.newMessageRef.current) {\n                const element = this.newMessageRef.current;\n\n                if (element.childNodes.length > 0) {\n                    const range = document.createRange();\n                    range.setStart(element.childNodes[0], element.childNodes[0].length);\n                    range.collapse(true);\n\n                    const selection = window.getSelection();\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                }\n                element.focus();\n            }\n        }, 100);\n    };\n\n    setChatDraftMessage = chatDraftMessage => {\n        if (!chatDraftMessage) return;\n\n        const { chatId, draftMessage } = chatDraftMessage;\n        if (!chatId) return;\n\n        TdLibController.send({\n            '@type': 'setChatDraftMessage',\n            chat_id: chatId,\n            draft_message: draftMessage\n        });\n    };\n\n    getNewChatDraftMessage = (chatId, replyToMessageId) => {\n        let chat = ChatStore.get(chatId);\n        if (!chat) return;\n        const newDraft = this.getInputText();\n\n        let previousDraft = '';\n        let previousReplyToMessageId = 0;\n        const { draft_message } = chat;\n        if (draft_message && draft_message.input_message_text && draft_message.input_message_text.text) {\n            const { reply_to_message_id, input_message_text } = draft_message;\n\n            previousReplyToMessageId = reply_to_message_id;\n            if (input_message_text && input_message_text.text) {\n                previousDraft = input_message_text.text.text;\n            }\n        }\n\n        if (newDraft !== previousDraft || replyToMessageId !== previousReplyToMessageId) {\n            const draftMessage = {\n                '@type': 'draftMessage',\n                reply_to_message_id: replyToMessageId,\n                input_message_text: {\n                    '@type': 'inputMessageText',\n                    text: {\n                        '@type': 'formattedText',\n                        text: newDraft,\n                        entities: null\n                    },\n                    disable_web_page_preview: true,\n                    clear_draft: false\n                }\n            };\n\n            return { chatId: chatId, draftMessage: draftMessage };\n        }\n\n        return null;\n    };\n\n    handleSubmit = () => {\n        let text = this.getInputText();\n\n        this.newMessageRef.current.innerText = null;\n        this.newMessageRef.current.textContent = null;\n        this.innerHTML = null;\n\n        if (!text) return;\n\n        const content = {\n            '@type': 'inputMessageText',\n            text: {\n                '@type': 'formattedText',\n                text: text,\n                entities: null\n            },\n            disable_web_page_preview: false,\n            clear_draft: true\n        };\n\n        this.onSendInternal(content, result => {});\n    };\n\n    handleAttachPoll = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateNewPoll'\n        });\n    };\n\n    handleAttachPhoto = () => {\n        if (!this.attachPhotoRef) return;\n\n        this.attachPhotoRef.current.click();\n    };\n\n    handleAttachPhotoComplete = () => {\n        let files = this.attachPhotoRef.current.files;\n        if (files.length === 0) return;\n\n        Array.from(files).forEach(file => {\n            readImageSize(file, result => {\n                this.handleSendPhoto(result);\n            });\n        });\n\n        this.attachPhotoRef.current.value = '';\n    };\n\n    handleAttachDocument = () => {\n        if (!this.attachDocumentRef) return;\n\n        this.attachDocumentRef.current.click();\n    };\n\n    handleAttachDocumentComplete = () => {\n        let files = this.attachDocumentRef.current.files;\n        if (files.length === 0) return;\n\n        Array.from(files).forEach(file => {\n            this.handleSendDocument(file);\n        });\n\n        this.attachDocumentRef.current.value = '';\n    };\n\n    getInputText() {\n        let innerText = this.newMessageRef.current.innerText;\n        let innerHTML = this.newMessageRef.current.innerHTML;\n\n        if (innerText && innerText === '\\n' && innerHTML && (innerHTML === '<br>' || innerHTML === '<div><br></div>')) {\n            this.newMessageRef.current.innerHTML = '';\n        }\n\n        return innerText;\n    }\n\n    handleInputChange = () => {\n        const { chatId } = this.state;\n\n        if (isMeChat(chatId)) return;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        const innerText = this.newMessageRef.current.innerText;\n        const innerHTML = this.newMessageRef.current.innerHTML;\n\n        if (innerText && innerText === '\\n' && innerHTML && (innerHTML === '<br>' || innerHTML === '<div><br></div>')) {\n            this.newMessageRef.current.innerHTML = '';\n        }\n\n        if (!innerText) return;\n\n        const typingManager = chat.OutputTypingManager || (chat.OutputTypingManager = new OutputTypingManager(chat.id));\n\n        typingManager.setTyping({ '@type': 'chatActionTyping' });\n    };\n\n    handleKeyDown = e => {\n        const innerText = this.newMessageRef.current.innerText;\n        const innerHTML = this.newMessageRef.current.innerHTML;\n        this.innerHTML = innerHTML;\n\n        if (e.key === 'Enter' && !e.shiftKey) {\n            e.preventDefault();\n            this.handleSubmit();\n        }\n    };\n\n    handleSendPhoto = file => {\n        if (!file) return;\n\n        const content = {\n            '@type': 'inputMessagePhoto',\n            photo: { '@type': 'inputFileBlob', name: file.name, data: file },\n            width: file.photoWidth,\n            height: file.photoHeight\n        };\n\n        this.onSendInternal(content, result => {\n            const cachedMessage = MessageStore.get(result.chat_id, result.id);\n            if (cachedMessage != null) {\n                this.handleSendingMessage(cachedMessage, file);\n            }\n\n            FileStore.uploadFile(result.content.photo.sizes[0].photo.id, result);\n        });\n    };\n\n    handleSendPoll = poll => {\n        this.onSendInternal(poll, () => {});\n    };\n\n    handleSendDocument = file => {\n        if (!file) return;\n\n        const content = {\n            '@type': 'inputMessageDocument',\n            document: { '@type': 'inputFileBlob', name: file.name, data: file }\n        };\n\n        this.onSendInternal(content, result => FileStore.uploadFile(result.content.document.document.id, result));\n    };\n\n    handlePaste = event => {\n        const items = (event.clipboardData || event.originalEvent.clipboardData).items;\n\n        const files = [];\n        for (let i = 0; i < items.length; i++) {\n            if (items[i].kind.indexOf('file') === 0) {\n                files.push(items[i].getAsFile());\n            }\n        }\n\n        if (files.length > 0) {\n            event.preventDefault();\n\n            this.files = files;\n            this.setState({ openPasteDialog: true });\n            return;\n        }\n\n        const plainText = event.clipboardData.getData('text/plain');\n        if (plainText) {\n            event.preventDefault();\n            document.execCommand('insertHTML', false, plainText);\n            this.innerHTML = plainText;\n            return;\n        }\n    };\n\n    handlePasteContinue = () => {\n        this.handleClosePaste();\n\n        const files = this.files;\n        if (!files) return;\n        if (!files.length) return;\n\n        files.forEach(file => {\n            this.handleSendDocument(file);\n        });\n\n        this.files = null;\n    };\n\n    handleClosePaste = () => {\n        this.setState({ openPasteDialog: false });\n    };\n\n    handleSendingMessage = (message, blob) => {\n        if (message && message.sending_state && message.sending_state['@type'] === 'messageSendingStatePending') {\n            if (message.content && message.content['@type'] === 'messagePhoto' && message.content.photo) {\n                let size = getSize(message.content.photo.sizes, PHOTO_SIZE);\n                if (!size) return;\n\n                let file = size.photo;\n                if (file && file.local && file.local.is_downloading_completed && !file.blob) {\n                    file.blob = blob;\n                    FileStore.updatePhotoBlob(message.chat_id, message.id, file.id);\n                }\n            }\n        }\n    };\n\n    onSendInternal = async (content, callback) => {\n        const { chatId, replyToMessageId } = this.state;\n\n        if (!chatId) return;\n        if (!content) return;\n\n        try {\n            await ApplicationStore.invokeScheduledAction(`clientUpdateClearHistory chatId=${chatId}`);\n\n            let result = await TdLibController.send({\n                '@type': 'sendMessage',\n                chat_id: chatId,\n                reply_to_message_id: replyToMessageId,\n                input_message_content: content\n            });\n\n            this.setState({ replyToMessageId: 0 });\n            //MessageStore.set(result);\n\n            TdLibController.send({\n                '@type': 'viewMessages',\n                chat_id: chatId,\n                message_ids: [result.id]\n            });\n\n            callback(result);\n        } catch (error) {\n            alert('sendMessage error ' + JSON.stringify(error));\n        }\n    };\n\n    handleEmojiSelect = emoji => {\n        if (!emoji) return;\n\n        this.newMessageRef.current.innerText += emoji.native;\n    };\n\n    render() {\n        const { classes, t } = this.props;\n        const { chatId, replyToMessageId, openPasteDialog } = this.state;\n\n        const draft = getChatDraft(chatId);\n        const content = this.innerHTML !== null ? this.innerHTML : draft ? draft.text : null;\n\n        return (\n            <>\n                <div className={classNames(classes.borderColor, 'inputbox')}>\n                    <InputBoxHeader chatId={chatId} messageId={replyToMessageId} />\n                    <div className='inputbox-wrapper'>\n                        <div className='inputbox-left-column'>\n                            <EmojiPickerButton onSelect={this.handleEmojiSelect} />\n                        </div>\n                        <div className='inputbox-middle-column'>\n                            <div\n                                id='inputbox-message'\n                                ref={this.newMessageRef}\n                                key={new Date()}\n                                placeholder={t('Message')}\n                                contentEditable\n                                suppressContentEditableWarning\n                                onKeyDown={this.handleKeyDown}\n                                onKeyUp={this.handleInputChange}\n                                onPaste={this.handlePaste}>\n                                {content}\n                            </div>\n                        </div>\n                        <div className='inputbox-right-column'>\n                            <input\n                                ref={this.attachDocumentRef}\n                                className='inputbox-attach-button'\n                                type='file'\n                                multiple='multiple'\n                                onChange={this.handleAttachDocumentComplete}\n                            />\n                            <input\n                                ref={this.attachPhotoRef}\n                                className='inputbox-attach-button'\n                                type='file'\n                                multiple='multiple'\n                                accept='image/*'\n                                onChange={this.handleAttachPhotoComplete}\n                            />\n                            <AttachButton\n                                chatId={chatId}\n                                onAttachPhoto={this.handleAttachPhoto}\n                                onAttachDocument={this.handleAttachDocument}\n                                onAttachPoll={this.handleAttachPoll}\n                            />\n\n                            {/*<IconButton>*/}\n                            {/*<KeyboardVoiceIcon />*/}\n                            {/*</IconButton>*/}\n                            <IconButton className={classes.iconButton} aria-label='Send' onClick={this.handleSubmit}>\n                                <SendIcon />\n                            </IconButton>\n                        </div>\n                    </div>\n                </div>\n                {!isPrivateChat(chatId) && <CreatePollDialog onSend={this.handleSendPoll} />}\n                <Dialog\n                    transitionDuration={0}\n                    open={openPasteDialog}\n                    onClose={this.handleClosePaste}\n                    aria-labelledby='delete-dialog-title'>\n                    <DialogTitle id='delete-dialog-title'>{t('AppName')}</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText>\n                            {this.files && this.files.length > 1\n                                ? 'Are you sure you want to send files?'\n                                : 'Are you sure you want to send file?'}\n                        </DialogContentText>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.handleClosePaste} color='primary'>\n                            {t('Cancel')}\n                        </Button>\n                        <Button onClick={this.handlePasteContinue} color='primary'>\n                            {t('Ok')}\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            </>\n        );\n    }\n}\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(InputBoxControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport Button from '@material-ui/core/Button/Button';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport { borderStyle } from '../Theme';\nimport './FooterCommand.css';\n\nconst styles = theme => ({\n    button: {\n        margin: '14px',\n        minWidth: '100px'\n    },\n    ...borderStyle(theme)\n});\n\nclass FooterCommand extends React.Component {\n    render() {\n        const { classes, command, onCommand } = this.props;\n\n        return (\n            <div className={classNames(classes.borderColor, 'footer-command-wrapper')}>\n                <div className='footer-command-actions'>\n                    <Button color='primary' className={classes.button} onClick={onCommand}>\n                        {command}\n                    </Button>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles)(FooterCommand);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { isChatMuted } from '../../Utils/Chat';\nimport { debounce } from '../../Utils/Common';\nimport {\n    MUTED_VALUE_MAX,\n    NOTIFICATIONS_DEBOUNCE_DELAY_MS,\n    MUTED_VALUE_MIN\n} from '../../Constants';\nimport ChatStore from '../../Stores/ChatStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\n\nclass NotificationsControl extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { chatId } = props;\n        const chat = ChatStore.get(chatId);\n        const isMuted = isChatMuted(chat);\n\n        this.state = {\n            prevChatId: chatId,\n            isMuted: isMuted\n        };\n\n        this.debouncedSetChatNotificationSettings = debounce(this.setChatNotificationSettings, NOTIFICATIONS_DEBOUNCE_DELAY_MS);\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.chatId !== state.prevChatId) {\n            const { chatId } = props;\n            const chat = ChatStore.get(chatId);\n            const isMuted = isChatMuted(chat);\n\n            return {\n                prevChatId: props.chatId,\n                isMuted: isMuted\n            };\n        }\n        return null;\n    }\n\n    componentDidMount() {\n        ChatStore.on('updateChatNotificationSettings', this.onUpdateChatNotificationSettings);\n        ApplicationStore.on('updateScopeNotificationSettings', this.onUpdateScopeNotificationSettings);\n    }\n\n    componentWillUnmount() {\n        ChatStore.removeListener('updateChatNotificationSettings', this.onUpdateChatNotificationSettings);\n        ApplicationStore.removeListener('updateScopeNotificationSettings', this.onUpdateScopeNotificationSettings);\n    }\n\n    onUpdateChatNotificationSettings = (update) => {\n        const { chatId } = this.props;\n        if (!update.chat_id) return;\n        if (update.chat_id !== chatId) return;\n\n        const chat = ChatStore.get(update.chat_id);\n        if (!chat) return;\n\n        this.setState({ isMuted: isChatMuted(chat) });\n    };\n\n    onUpdateScopeNotificationSettings = (update) => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        switch (update.scope['@type']) {\n            case 'notificationSettingsScopeGroupChats': {\n                if (\n                    chat.type['@type'] === 'chatTypeBasicGroup' ||\n                    chat.type['@type'] === 'chatTypeSupergroup'\n                ) {\n                    this.setState({ isMuted: isChatMuted(chat) });\n                }\n                break;\n            }\n            case 'notificationSettingsScopePrivateChats': {\n                if (\n                    chat.type['@type'] === 'chatTypePrivate' ||\n                    chat.type['@type'] === 'chatTypeSecret'\n                ) {\n                    this.setState({ isMuted: isChatMuted(chat) });\n                }\n                break;\n            }\n        }\n    };\n\n    handleSetChatNotifications = () => {\n        this.setState({ isMuted: !this.state.isMuted });\n        this.debouncedSetChatNotificationSettings();\n    };\n\n    setChatNotificationSettings = () => {\n        const { chatId } = this.props;\n        const { isMuted } = this.state;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n        if (!chat.notification_settings) return;\n\n        const isMutedPrev = isChatMuted(chat);\n        if (isMutedPrev === isMuted) {\n            return;\n        }\n\n        const muteFor = isMuted ? MUTED_VALUE_MAX : MUTED_VALUE_MIN;\n        const newNotificationSettings = {\n            ...chat.notification_settings,\n            use_default_mute_for: false,\n            mute_for: muteFor\n        };\n\n        TdLibController.send({\n            '@type': 'setChatNotificationSettings',\n            chat_id: chatId,\n            notification_settings: newNotificationSettings\n        });\n    };\n}\n\nexport default NotificationsControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport FooterCommand from './FooterCommand';\nimport NotificationsControl from './NotificationsControl';\n\nclass NotificationsCommandControl extends NotificationsControl {\n    constructor(props){\n        super(props);\n    }\n\n    render() {\n        const { isMuted } = this.state;\n        const command = isMuted ? 'unmute' : 'mute';\n\n        return (\n            <FooterCommand\n                command={command}\n                onCommand={this.handleSetChatNotifications}/>\n        );\n    }\n\n}\n\nexport default NotificationsCommandControl;","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport InputBoxControl from './InputBoxControl';\nimport FooterCommand from './FooterCommand';\nimport NotificationsCommandControl from './NotificationsCommandControl';\nimport { hasBasicGroupId, hasSupergroupId } from '../../Utils/Chat';\nimport ChatStore from '../../Stores/ChatStore';\nimport BasicGroupStore from '../../Stores/BasicGroupStore';\nimport SupergroupStore from '../../Stores/SupergroupStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './Footer.css';\n\nclass Footer extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextProps.chatId !== this.props.chatId) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        BasicGroupStore.on('updateBasicGroup', this.onUpdateBasicGroup);\n        SupergroupStore.on('updateSupergroup', this.onUpdateSupergroup);\n    }\n\n    componentWillUnmount() {\n        BasicGroupStore.removeListener('updateBasicGroup', this.onUpdateBasicGroup);\n        SupergroupStore.removeListener('updateSupergroup', this.onUpdateSupergroup);\n    }\n\n    onUpdateBasicGroup = update => {\n        const { chatId } = this.props;\n\n        if (hasBasicGroupId(chatId, update.basic_group.id)) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateSupergroup = update => {\n        const { chatId } = this.props;\n\n        if (hasSupergroupId(chatId, update.supergroup.id)) {\n            this.forceUpdate();\n        }\n    };\n\n    handleJoin = () => {\n        const { chatId } = this.props;\n        if (!chatId) return;\n\n        TdLibController.send({\n            '@type': 'joinChat',\n            chat_id: chatId\n        });\n    };\n\n    handleDeleteAndExit = () => {\n        const { chatId } = this.props;\n        if (!chatId) return;\n\n        TdLibController.send({\n            '@type': 'deleteChatHistory',\n            chat_id: chatId,\n            remove_from_chat_list: true\n        });\n\n        // TdLibController\n        //     .send({\n        //         '@type': 'leaveChat',\n        //         chat_id: this.props.chatId\n        //     });\n    };\n\n    render() {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return null;\n        if (!chat.type) return null;\n\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup': {\n                const basicGroup = BasicGroupStore.get(chat.type.basic_group_id);\n                if (basicGroup && basicGroup.status) {\n                    switch (basicGroup.status['@type']) {\n                        case 'chatMemberStatusAdministrator': {\n                            return <InputBoxControl />;\n                        }\n                        case 'chatMemberStatusBanned': {\n                            return <FooterCommand command='delete and exit' onCommand={this.handleDeleteAndExit} />;\n                        }\n                        case 'chatMemberStatusCreator': {\n                            return <InputBoxControl />;\n                        }\n                        case 'chatMemberStatusLeft': {\n                            return null;\n                        }\n                        case 'chatMemberStatusMember': {\n                            return <InputBoxControl />;\n                        }\n                        case 'chatMemberStatusRestricted': {\n                            if (basicGroup.status.is_member) {\n                                if (!basicGroup.status.can_send_messages) {\n                                    return null;\n                                }\n\n                                return <InputBoxControl />;\n                            } else {\n                                return <FooterCommand command='join' onCommand={this.handleJoin} />;\n                            }\n                        }\n                    }\n                }\n\n                break;\n            }\n            case 'chatTypePrivate': {\n                return <InputBoxControl />;\n            }\n            case 'chatTypeSecret': {\n                return <InputBoxControl />;\n            }\n            case 'chatTypeSupergroup': {\n                const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n                if (supergroup && supergroup.status) {\n                    switch (supergroup.status['@type']) {\n                        case 'chatMemberStatusAdministrator': {\n                            return <InputBoxControl />;\n                        }\n                        case 'chatMemberStatusBanned': {\n                            return <FooterCommand command='delete and exit' onCommand={this.handleDeleteAndExit} />;\n                        }\n                        case 'chatMemberStatusCreator': {\n                            return <InputBoxControl />;\n                        }\n                        case 'chatMemberStatusLeft': {\n                            return <FooterCommand command='join' onCommand={this.handleJoin} />;\n                        }\n                        case 'chatMemberStatusMember': {\n                            if (supergroup.is_channel) {\n                                return <NotificationsCommandControl chatId={chatId} />;\n                            } else {\n                                return <InputBoxControl />;\n                            }\n                        }\n                        case 'chatMemberStatusRestricted': {\n                            if (supergroup.status.is_member) {\n                                if (!supergroup.status.can_send_messages) {\n                                    return null;\n                                }\n\n                                return <InputBoxControl />;\n                            } else {\n                                return <FooterCommand command='join' onCommand={this.handleJoin} />;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        return null;\n    }\n}\n\nexport default Footer;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport dateFormat from 'dateformat';\nimport { getUserFullName, getUserShortName, getUserStatus, isUserOnline } from './User';\nimport { getSupergroupStatus } from './Supergroup';\nimport { getBasicGroupStatus } from './BasicGroup';\nimport { getLetters } from './Common';\nimport { getContent } from './Message';\nimport { isServiceMessage } from './ServiceMessage';\nimport UserStore from '../Stores/UserStore';\nimport ChatStore from '../Stores/ChatStore';\nimport BasicGroupStore from '../Stores/BasicGroupStore';\nimport SupergroupStore from '../Stores/SupergroupStore';\nimport ApplicationStore from '../Stores/ApplicationStore';\nimport TdLibController from '../Controllers/TdLibController';\nimport InputBoxControl from '../Components/ColumnMiddle/Footer';\n\nfunction getGroupChatTypingString(inputTypingManager) {\n    if (!inputTypingManager) return null;\n\n    let size = inputTypingManager.actions.size;\n    if (size > 2) {\n        return `${size} people are typing`;\n    } else if (size > 1) {\n        let firstUser;\n        let secondUser;\n        for (let userId of inputTypingManager.actions.keys()) {\n            if (!firstUser) {\n                firstUser = UserStore.get(userId);\n            } else if (!secondUser) {\n                secondUser = UserStore.get(userId);\n                break;\n            }\n        }\n\n        if (!firstUser || !secondUser) {\n            return `${size} people are typing`;\n        }\n\n        firstUser = firstUser.first_name ? firstUser.first_name : firstUser.second_name;\n        secondUser = secondUser.first_name ? secondUser.first_name : secondUser.second_name;\n\n        if (!firstUser || !secondUser) {\n            return `${size} people are typing`;\n        }\n\n        return `${firstUser} and ${secondUser} are typing`;\n    } else {\n        let firstUser;\n        if (inputTypingManager.actions.size >= 1) {\n            for (let userId of inputTypingManager.actions.keys()) {\n                if (!firstUser) {\n                    firstUser = UserStore.get(userId);\n                    break;\n                }\n            }\n\n            if (!firstUser) {\n                return `1 person is typing`;\n            }\n\n            firstUser = firstUser.first_name ? firstUser.first_name : firstUser.second_name;\n\n            if (!firstUser) {\n                return `1 person is typing`;\n            }\n\n            let action = inputTypingManager.actions.values().next().value.action;\n            switch (action['@type']) {\n                case 'chatActionRecordingVideo':\n                    return `${firstUser} is recording a video`;\n                case 'chatActionRecordingVideoNote':\n                    return `${firstUser} is recording a video message`;\n                case 'chatActionRecordingVoiceNote':\n                    return `${firstUser} is recording a voice message`;\n                case 'chatActionStartPlayingGame':\n                    return `${firstUser} is playing a game`;\n                case 'chatActionUploadingDocument':\n                    return `${firstUser} is sending a file`;\n                case 'chatActionUploadingPhoto':\n                    return `${firstUser} is sending a photo`;\n                case 'chatActionUploadingVideo':\n                    return `${firstUser} is sending a video`;\n                case 'chatActionUploadingVideoNote':\n                    return `${firstUser} is sending a video message`;\n                case 'chatActionUploadingVoiceNote':\n                    return `${firstUser} is sending a voice message`;\n                case 'chatActionChoosingContact':\n                case 'chatActionChoosingLocation':\n                case 'chatActionTyping':\n                default:\n                    return `${firstUser} is typing`;\n            }\n        }\n    }\n\n    return null;\n}\n\nfunction getPrivateChatTypingString(inputTypingManager) {\n    if (!inputTypingManager) return null;\n\n    if (inputTypingManager.actions.size >= 1) {\n        let action = inputTypingManager.actions.values().next().value.action;\n        switch (action['@type']) {\n            case 'chatActionRecordingVideo':\n                return 'recording a video';\n            case 'chatActionRecordingVideoNote':\n                return 'recording a video message';\n            case 'chatActionRecordingVoiceNote':\n                return 'recording a voice message';\n            case 'chatActionStartPlayingGame':\n                return 'playing a game';\n            case 'chatActionUploadingDocument':\n                return 'sending a file';\n            case 'chatActionUploadingPhoto':\n                return 'sending a photo';\n            case 'chatActionUploadingVideo':\n                return 'sending a video';\n            case 'chatActionUploadingVideoNote':\n                return 'sending a video message';\n            case 'chatActionUploadingVoiceNote':\n                return 'sending a voice message';\n            case 'chatActionChoosingContact':\n            case 'chatActionChoosingLocation':\n            case 'chatActionTyping':\n            default:\n                return 'typing';\n        }\n    }\n\n    return null;\n}\n\nfunction getChatTypingString(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n    if (!chat.type) return null;\n\n    let typingManager = ChatStore.getTypingManager(chat.id);\n    if (!typingManager) return null;\n\n    switch (chat.type['@type']) {\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            const typingString = getPrivateChatTypingString(typingManager);\n            return typingString ? typingString + '...' : null;\n        }\n        case 'chatTypeBasicGroup':\n        case 'chatTypeSupergroup': {\n            const typingString = getGroupChatTypingString(typingManager);\n            return typingString ? typingString + '...' : null;\n        }\n    }\n\n    return null;\n}\n\nfunction getMessageSenderFullName(message) {\n    if (!message) return null;\n    if (isServiceMessage(message)) return null;\n    if (!message.sender_user_id) return null;\n\n    const user = UserStore.get(message.sender_user_id);\n    if (!user) return null;\n\n    return getUserFullName(user);\n}\n\nfunction getMessageSenderName(message) {\n    if (!message) return null;\n    if (isServiceMessage(message)) return null;\n\n    const chat = ChatStore.get(message.chat_id);\n    if (chat && chat.type['@type'] !== 'chatTypeBasicGroup' && chat.type['@type'] !== 'chatTypeSupergroup') {\n        return null;\n    }\n\n    return getUserShortName(message.sender_user_id);\n}\n\nfunction getLastMessageSenderName(chat) {\n    if (!chat) return null;\n\n    return getMessageSenderName(chat.last_message);\n}\n\nfunction getLastMessageContent(chat, t = key => key) {\n    if (!chat) return null;\n\n    const { last_message } = chat;\n    if (!last_message) return null;\n\n    return getContent(last_message, t);\n}\n\nfunction getChatUnreadMessageIcon(chat) {\n    if (!chat) return false;\n    if (!chat.last_message) return false;\n\n    return chat.last_message.is_outgoing && chat.last_message.id > chat.last_read_outbox_message_id;\n}\n\nfunction getChatUnreadCount(chat) {\n    if (!chat) return null;\n    if (!chat.unread_count) return null;\n\n    return chat.unread_count;\n}\n\nfunction getChatUnreadMentionCount(chat) {\n    if (!chat) return null;\n    if (!chat.unread_mention_count) return null;\n\n    return chat.unread_mention_count;\n}\n\nfunction isChatMuted(chat) {\n    return getChatMuteFor(chat) > 0;\n}\n\nfunction getChatMuteFor(chat) {\n    if (!chat) return 0;\n\n    if (chat.use_default_mute_for) {\n        switch (chat.type) {\n            case 'chatTypePrivate':\n            case 'chatTypeSecret': {\n                const notificationSettings = ApplicationStore.getNotificationSettings(\n                    'notificationSettingsScopePrivateChats'\n                );\n                if (notificationSettings) {\n                    return notificationSettings.mute_for;\n                }\n\n                return 0;\n            }\n            case 'chatTypeBasicGroup':\n            case 'chatTypeSupergroup': {\n                const notificationSettings = ApplicationStore.getNotificationSettings(\n                    'notificationSettingsScopeGroupChats'\n                );\n                if (notificationSettings) {\n                    return notificationSettings.mute_for;\n                }\n\n                return 0;\n            }\n        }\n    } else {\n        if (!chat.notification_settings) return 0;\n\n        return chat.notification_settings.mute_for;\n    }\n}\n\nfunction getMessageDate(message) {\n    const date = new Date(message.date * 1000);\n\n    const dayStart = new Date();\n    dayStart.setHours(0, 0, 0, 0);\n    if (date > dayStart) {\n        return dateFormat(date, 'H:MM');\n    }\n\n    const now = new Date();\n    const day = now.getDay();\n    const weekStart = now.getDate() - day + (day === 0 ? -6 : 1);\n    const monday = new Date(now.setDate(weekStart));\n    if (date > monday) {\n        return dateFormat(date, 'ddd');\n    }\n\n    return dateFormat(date, 'd.mm.yyyy');\n}\n\nfunction getLastMessageDate(chat) {\n    if (!chat) return null;\n    if (!chat.last_message) return null;\n    if (!chat.last_message.date) return null;\n    if (showChatDraft(chat.id)) return null;\n\n    return getMessageDate(chat.last_message);\n}\n\nfunction getChatSubtitleWithoutTyping(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n\n    const { type } = chat;\n    if (!type) return null;\n\n    switch (type['@type']) {\n        case 'chatTypeBasicGroup': {\n            const basicGroup = BasicGroupStore.get(type.basic_group_id);\n            if (basicGroup) {\n                return getBasicGroupStatus(basicGroup, chatId);\n            }\n\n            break;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            const user = UserStore.get(type.user_id);\n            if (user) {\n                return getUserStatus(user);\n            }\n\n            break;\n        }\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(type.supergroup_id);\n            if (supergroup) {\n                return getSupergroupStatus(supergroup, chatId);\n            }\n\n            break;\n        }\n    }\n\n    return null;\n}\n\nfunction getChatSubtitle(chatId, showSavedMessages = false) {\n    if (isMeChat(chatId) && showSavedMessages) {\n        return null;\n    }\n\n    const chatTypingString = getChatTypingString(chatId);\n    if (chatTypingString) {\n        return chatTypingString;\n    }\n\n    return getChatSubtitleWithoutTyping(chatId);\n}\n\nfunction getChatLetters(chat) {\n    if (!chat) return null;\n\n    let title = chat.title || 'Deleted account';\n    if (title.length === 0) return null;\n\n    let letters = getLetters(title);\n    if (letters && letters.length > 0) {\n        return letters;\n    }\n\n    return chat.title.charAt(0);\n}\n\nfunction isAccentChatSubtitleWithoutTyping(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n    if (!chat.type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            return false;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            const user = UserStore.get(chat.type.user_id);\n            if (user) {\n                return isUserOnline(user);\n            }\n\n            break;\n        }\n        case 'chatTypeSupergroup': {\n            return false;\n        }\n    }\n\n    return false;\n}\n\nfunction isAccentChatSubtitle(chatId) {\n    const typingString = getChatTypingString(chatId);\n    if (typingString) return false;\n\n    return isAccentChatSubtitleWithoutTyping(chatId);\n}\n\nfunction getChatUsername(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n    if (!chat.type) return null;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            return null;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            const user = UserStore.get(chat.type.user_id);\n            if (user) {\n                return user.username;\n            }\n\n            break;\n        }\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n            if (supergroup) {\n                return supergroup.username;\n            }\n            break;\n        }\n    }\n\n    return null;\n}\n\nfunction getChatPhoneNumber(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n    if (!chat.type) return null;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            return null;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            const user = UserStore.get(chat.type.user_id);\n            if (user) {\n                return user.phone_number;\n            }\n\n            break;\n        }\n        case 'chatTypeSupergroup': {\n            return null;\n        }\n    }\n\n    return null;\n}\n\nfunction getChatBio(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n    if (!chat.type) return null;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            return null;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            const fullInfo = UserStore.getFullInfo(chat.type.user_id);\n            if (fullInfo) {\n                return fullInfo.bio;\n            }\n\n            break;\n        }\n        case 'chatTypeSupergroup': {\n            const fullInfo = SupergroupStore.getFullInfo(chat.type.supergroup_id);\n            if (fullInfo) {\n                return fullInfo.description;\n            }\n\n            break;\n        }\n    }\n\n    return null;\n}\n\nfunction isPrivateChat(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n    if (!chat.type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup':\n        case 'chatTypeSupergroup': {\n            return false;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction isGroupChat(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n    if (!chat.type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup':\n        case 'chatTypeSupergroup': {\n            return true;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            return false;\n        }\n    }\n\n    return false;\n}\n\nfunction isChannelChat(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n    if (!chat.type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n\n            return supergroup && supergroup.is_channel;\n        }\n        case 'chatTypeBasicGroup':\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            return false;\n        }\n    }\n\n    return false;\n}\n\nfunction isChatMember(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n    if (!chat.type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n            if (supergroup && supergroup.status) {\n                switch (supergroup.status['@type']) {\n                    case 'chatMemberStatusAdministrator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusBanned': {\n                        return false;\n                    }\n                    case 'chatMemberStatusCreator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusLeft': {\n                        return false;\n                    }\n                    case 'chatMemberStatusMember': {\n                        return true;\n                    }\n                    case 'chatMemberStatusRestricted': {\n                        return supergroup.status.is_member;\n                    }\n                }\n            }\n        }\n        case 'chatTypeBasicGroup': {\n            const basicGroup = BasicGroupStore.get(chat.type.basic_group_id);\n            if (basicGroup && basicGroup.status) {\n                switch (basicGroup.status['@type']) {\n                    case 'chatMemberStatusAdministrator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusBanned': {\n                        return false;\n                    }\n                    case 'chatMemberStatusCreator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusLeft': {\n                        return false;\n                    }\n                    case 'chatMemberStatusMember': {\n                        return true;\n                    }\n                    case 'chatMemberStatusRestricted': {\n                        return basicGroup.status.is_member;\n                    }\n                }\n            }\n            break;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction getChatTitle(chatId, showSavedMessages = false, t = key => key) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n\n    if (isMeChat(chatId) && showSavedMessages) {\n        return t('SavedMessages');\n    }\n\n    return chat.title || t('HiddenName');\n}\n\nfunction isMeChat(chatId) {\n    const fallbackValue = false;\n\n    const chat = ChatStore.get(chatId);\n    if (!chat) return fallbackValue;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup':\n        case 'chatTypeSupergroup': {\n            return false;\n        }\n        case 'chatTypeSecret':\n        case 'chatTypePrivate': {\n            return UserStore.getMyId() === chat.type.user_id;\n        }\n    }\n\n    return fallbackValue;\n}\n\nfunction getGroupChatMembers(chatId) {\n    const fallbackValue = [];\n\n    const chat = ChatStore.get(chatId);\n    if (!chat) return fallbackValue;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            const fullInfo = BasicGroupStore.getFullInfo(chat.type.basic_group_id);\n            if (fullInfo) {\n                return fullInfo.members || fallbackValue;\n            }\n\n            break;\n        }\n        case 'chatTypeSupergroup': {\n            break;\n        }\n        case 'chatTypeSecret':\n        case 'chatTypePrivate': {\n            break;\n        }\n    }\n\n    return fallbackValue;\n}\n\nfunction getChatFullInfo(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return;\n    if (!chat.type) return;\n\n    switch (chat.type['@type']) {\n        case 'chatTypePrivate': {\n            TdLibController.send({\n                '@type': 'getUserFullInfo',\n                user_id: chat.type.user_id\n            });\n            break;\n        }\n        case 'chatTypeSecret': {\n            TdLibController.send({\n                '@type': 'getUserFullInfo',\n                user_id: chat.type.user_id\n            });\n            break;\n        }\n        case 'chatTypeBasicGroup': {\n            TdLibController.send({\n                '@type': 'getBasicGroupFullInfo',\n                basic_group_id: chat.type.basic_group_id\n            });\n            break;\n        }\n        case 'chatTypeSupergroup': {\n            TdLibController.send({\n                '@type': 'getSupergroupFullInfo',\n                supergroup_id: chat.type.supergroup_id\n            });\n            break;\n        }\n    }\n}\n\nfunction hasBasicGroupId(chatId, basicGroupId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n\n    const { type } = chat;\n\n    return type && type['@type'] === 'chatTypeBasicGroup' && type.basic_group_id === basicGroupId;\n}\n\nfunction isSupergroup(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n\n    const { type } = chat;\n\n    return type && type['@type'] === 'chatTypeSupergroup';\n}\n\nfunction getSupergroupId(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n\n    const { type } = chat;\n\n    if (type && type['@type'] === 'chatTypeSupergroup') {\n        return type.supergroup_id;\n    }\n\n    return 0;\n}\n\nfunction hasSupergroupId(chatId, supergroupId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n\n    const { type } = chat;\n\n    return isSupergroup(chatId) && type.supergroup_id === supergroupId;\n}\n\nfunction hasUserId(chatId, userId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n\n    const { type } = chat;\n\n    return (\n        type && (type['@type'] === 'chatTypePrivate' || type['@type'] === 'chatTypeSecret') && type.user_id === userId\n    );\n}\n\nfunction getChatUserId(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return 0;\n\n    const { type } = chat;\n\n    return type && (type['@type'] === 'chatTypePrivate' || type['@type'] === 'chatTypeSecret') ? type.user_id : 0;\n}\n\nfunction getPhotoFromChat(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n\n    if (isPrivateChat(chatId)) {\n        const user = UserStore.get(getChatUserId(chatId));\n        if (user) {\n            return user.profile_photo;\n        }\n    }\n\n    return chat.photo;\n}\n\nfunction canSendFiles(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n    if (!chat.type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            const basicGroup = BasicGroupStore.get(chat.type.basic_group_id);\n            if (basicGroup && basicGroup.status) {\n                switch (basicGroup.status['@type']) {\n                    case 'chatMemberStatusAdministrator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusBanned': {\n                        return false;\n                    }\n                    case 'chatMemberStatusCreator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusLeft': {\n                        return false;\n                    }\n                    case 'chatMemberStatusMember': {\n                        return true;\n                    }\n                    case 'chatMemberStatusRestricted': {\n                        if (basicGroup.status.can_send_media_messages) {\n                            return true;\n                        } else {\n                            return false;\n                        }\n                    }\n                }\n            }\n\n            break;\n        }\n        case 'chatTypePrivate': {\n            return true;\n        }\n        case 'chatTypeSecret': {\n            return true;\n        }\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n            if (supergroup && supergroup.status) {\n                switch (supergroup.status['@type']) {\n                    case 'chatMemberStatusAdministrator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusBanned': {\n                        return false;\n                    }\n                    case 'chatMemberStatusCreator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusLeft': {\n                        return false;\n                    }\n                    case 'chatMemberStatusMember': {\n                        if (supergroup.is_channel) {\n                            return false;\n                        } else {\n                            return true;\n                        }\n                    }\n                    case 'chatMemberStatusRestricted': {\n                        if (supergroup.status.can_send_media_messages) {\n                            return true;\n                        } else {\n                            return false;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    return false;\n}\n\nfunction getChatShortTitle(chatId, showSavedMessages = false) {\n    if (isMeChat(chatId) && showSavedMessages) {\n        return 'Saved Messages';\n    }\n\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n    if (!chat.type) return null;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            return chat.title;\n        }\n        case 'chatTypeSupergroup': {\n            return chat.title;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            return getUserShortName(chat.type.user_id);\n        }\n    }\n\n    return null;\n}\n\nfunction getGroupChatMembersCount(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return null;\n    if (!chat.type) return null;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            const basicGroup = BasicGroupStore.get(chat.type.basic_group_id);\n            if (basicGroup) {\n                return basicGroup.member_count;\n            }\n\n            return 0;\n        }\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n            if (supergroup) {\n                return supergroup.member_count;\n            }\n\n            return 0;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            return 0;\n        }\n    }\n\n    return 0;\n}\n\nfunction canClearHistory(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n    if (!chat.type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            return true;\n        }\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n            if (supergroup) {\n                return !Boolean(supergroup.username);\n            }\n\n            return true;\n        }\n        case 'chatTypePrivate':\n        case 'chatTypeSecret': {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction canDeleteChat(chatId) {\n    return !isMeChat(chatId);\n}\n\nfunction canSendPhotos(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n\n    const { type } = chat;\n    if (!type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            return true;\n        }\n        case 'chatTypePrivate': {\n            return true;\n        }\n        case 'chatTypeSecret': {\n            return true;\n        }\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(type.supergroup_id);\n            if (supergroup) {\n                const { status } = supergroup;\n                if (status) {\n                    switch (supergroup.status['@type']) {\n                        case 'chatMemberStatusAdministrator': {\n                            return true;\n                        }\n                        case 'chatMemberStatusBanned': {\n                            return false;\n                        }\n                        case 'chatMemberStatusCreator': {\n                            return true;\n                        }\n                        case 'chatMemberStatusLeft': {\n                            return false;\n                        }\n                        case 'chatMemberStatusMember': {\n                            return !supergroup.is_channel;\n                        }\n                        case 'chatMemberStatusRestricted': {\n                            return status.can_send_media_messages;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    return false;\n}\n\nfunction canSendDocuments(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n\n    const { type } = chat;\n    if (!type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            return true;\n        }\n        case 'chatTypePrivate': {\n            return true;\n        }\n        case 'chatTypeSecret': {\n            return true;\n        }\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(type.supergroup_id);\n            if (supergroup) {\n                const { status } = supergroup;\n                if (status) {\n                    switch (supergroup.status['@type']) {\n                        case 'chatMemberStatusAdministrator': {\n                            return true;\n                        }\n                        case 'chatMemberStatusBanned': {\n                            return false;\n                        }\n                        case 'chatMemberStatusCreator': {\n                            return true;\n                        }\n                        case 'chatMemberStatusLeft': {\n                            return false;\n                        }\n                        case 'chatMemberStatusMember': {\n                            return !supergroup.is_channel;\n                        }\n                        case 'chatMemberStatusRestricted': {\n                            return status.can_send_media_messages;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    return false;\n}\n\nfunction canSendPolls(chatId) {\n    return true;\n}\n\nfunction canSendMessages(chatId) {\n    const chat = ChatStore.get(chatId);\n    if (!chat) return false;\n\n    const { type } = chat;\n    if (!type) return false;\n\n    switch (chat.type['@type']) {\n        case 'chatTypeBasicGroup': {\n            const basicGroup = BasicGroupStore.get(type.basic_group_id);\n            if (basicGroup && basicGroup.status) {\n                switch (basicGroup.status['@type']) {\n                    case 'chatMemberStatusAdministrator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusBanned': {\n                        return false;\n                    }\n                    case 'chatMemberStatusCreator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusLeft': {\n                        return false;\n                    }\n                    case 'chatMemberStatusMember': {\n                        return true;\n                    }\n                    case 'chatMemberStatusRestricted': {\n                        if (basicGroup.status.can_send_messages) {\n                            return true;\n                        } else {\n                            return false;\n                        }\n                    }\n                }\n            }\n\n            break;\n        }\n        case 'chatTypePrivate': {\n            return true;\n        }\n        case 'chatTypeSecret': {\n            return true;\n        }\n        case 'chatTypeSupergroup': {\n            const supergroup = SupergroupStore.get(type.supergroup_id);\n            if (supergroup && supergroup.status) {\n                switch (supergroup.status['@type']) {\n                    case 'chatMemberStatusAdministrator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusBanned': {\n                        return false;\n                    }\n                    case 'chatMemberStatusCreator': {\n                        return true;\n                    }\n                    case 'chatMemberStatusLeft': {\n                        return false;\n                    }\n                    case 'chatMemberStatusMember': {\n                        if (supergroup.is_channel) {\n                            return false;\n                        } else {\n                            return true;\n                        }\n                    }\n                    case 'chatMemberStatusRestricted': {\n                        if (supergroup.status.can_send_messages) {\n                            return true;\n                        } else {\n                            return false;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    return false;\n}\n\nfunction showChatDraft(chatId) {\n    const chat = ChatStore.get(chatId);\n    const draft = getChatDraft(chatId);\n\n    return draft && chat.unread_count === 0 && chat.unread_mention_count === 0;\n}\n\nfunction getChatDraft(chatId) {\n    const chat = ChatStore.get(chatId);\n\n    if (chat) {\n        const { draft_message } = chat;\n        if (draft_message) {\n            const { input_message_text } = draft_message;\n            if (input_message_text) {\n                return input_message_text.text;\n            }\n        }\n    }\n\n    return null;\n}\n\nfunction getChatDraftReplyToMessageId(chatId) {\n    let replyToMessageId = 0;\n    const chat = ChatStore.get(chatId);\n    if (chat) {\n        const { draft_message } = chat;\n        if (draft_message) {\n            replyToMessageId = draft_message.reply_to_message_id;\n        }\n    }\n\n    console.log('getChatDraft', replyToMessageId);\n    return replyToMessageId;\n}\n\nexport {\n    showChatDraft,\n    getChatDraft,\n    getChatDraftReplyToMessageId,\n    getChatTypingString,\n    getChatUnreadMessageIcon,\n    getChatUnreadCount,\n    getChatUnreadMentionCount,\n    getChatMuteFor,\n    getChatSubtitle,\n    getChatSubtitleWithoutTyping,\n    getLastMessageSenderName,\n    getMessageSenderName,\n    getMessageSenderFullName,\n    getLastMessageContent,\n    getLastMessageDate,\n    getMessageDate,\n    getChatLetters,\n    isAccentChatSubtitle,\n    isAccentChatSubtitleWithoutTyping,\n    isChatMuted,\n    getChatUsername,\n    getChatPhoneNumber,\n    getChatBio,\n    isPrivateChat,\n    isGroupChat,\n    isChannelChat,\n    isChatMember,\n    getChatTitle,\n    getGroupChatMembers,\n    getChatFullInfo,\n    hasBasicGroupId,\n    hasSupergroupId,\n    isSupergroup,\n    getSupergroupId,\n    hasUserId,\n    getChatUserId,\n    getPhotoFromChat,\n    getChatShortTitle,\n    getGroupChatMembersCount,\n    isMeChat,\n    canClearHistory,\n    canDeleteChat,\n    canSendFiles,\n    canSendMessages,\n    canSendPhotos,\n    canSendDocuments,\n    canSendPolls\n};\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport ChatStore from '../Stores/ChatStore';\n\nfunction getBasicGroupStatus(basicGroup, chatId) {\n    if (!basicGroup) return null;\n\n    const { status, member_count: count } = basicGroup;\n\n    if (status && (status['@type'] === 'chatMemberStatusBanned' || status['@type'] === 'chatMemberStatusLeft')) {\n        return 'group is inaccessible';\n    }\n\n    if (!count) return '0 members';\n    if (count === 1) return '1 member';\n\n    const onlineCount = ChatStore.getOnlineMemberCount(chatId);\n    if (onlineCount > 1) {\n        return `${count} members, ${onlineCount} online`;\n    }\n\n    return `${count} members`;\n}\n\nexport { getBasicGroupStatus };\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport SupergroupStore from '../Stores/SupergroupStore';\nimport ChatStore from '../Stores/ChatStore';\n\nfunction getSupergroupStatus(supergroup, chatId) {\n    if (!supergroup) return null;\n\n    let { status, is_channel, member_count: count } = supergroup;\n\n    if (status && status['@type'] === 'chatMemberStatusBanned') {\n        return is_channel ? 'channel is inaccessible' : 'group is inaccessible';\n    }\n\n    if (!count) {\n        const fullInfo = SupergroupStore.getFullInfo(supergroup.id);\n        if (fullInfo) {\n            count = fullInfo.member_count;\n        }\n    }\n\n    if (!count) return '0 members';\n    if (count === 1) return '1 member';\n\n    const onlineCount = ChatStore.getOnlineMemberCount(chatId);\n    if (onlineCount > 1) {\n        return `${count} members, ${onlineCount} online`;\n    }\n\n    return `${count} members`;\n}\n\nexport { getSupergroupStatus };\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport { isUserOnline } from '../../Utils/User';\nimport { getChatUserId } from '../../Utils/Chat';\nimport UserStore from './../../Stores/UserStore';\nimport './ChatStatus.css';\n\nconst styles = theme => ({\n    root: {\n        background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF',\n        borderRadius: '50%',\n        overflow: 'hidden'\n    },\n    icon: {\n        background: 'transparent',\n        width: '100%',\n        height: '100%',\n        boxSizing: 'border-box'\n    },\n    iconIndicator: {\n        width: '100%',\n        height: '100%',\n        borderRadius: '50%',\n        background: '#80d066'\n    }\n});\n\nclass ChatStatus extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const userId = getChatUserId(props.chatId);\n        const user = UserStore.get(userId);\n\n        this.state = {\n            userId: userId,\n            online: isUserOnline(user)\n        };\n    }\n\n    componentDidMount() {\n        UserStore.on('updateUserStatus', this.onUpdateUserStatus);\n    }\n\n    componentWillUnmount() {\n        UserStore.removeListener('updateUserStatus', this.onUpdateUserStatus);\n    }\n\n    onUpdateUserStatus = update => {\n        const { userId } = this.state;\n        const { user_id } = update;\n        if (user_id !== userId) return;\n\n        const user = UserStore.get(userId);\n        if (!user) return;\n\n        this.setState({\n            online: isUserOnline(user)\n        });\n    };\n\n    render() {\n        const { classes, size, borderSize, className } = this.props;\n        const { online } = this.state;\n        if (!online) return null;\n\n        return (\n            <div className={classNames(className, classes.root)} style={{ width: size, height: size }}>\n                <div className={classes.icon} style={{ padding: borderSize }}>\n                    <div className={classes.iconIndicator} />\n                </div>\n            </div>\n        );\n    }\n}\n\nChatStatus.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    size: PropTypes.number,\n    borderSize: PropTypes.number\n};\n\nChatStatus.defaultProps = {\n    size: 12,\n    borderSize: 2\n};\n\nexport default withStyles(styles)(ChatStatus);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport BookmarkBorderIcon from '@material-ui/icons/BookmarkBorder';\nimport ChatStatus from './ChatStatus';\nimport { getChatLetters, getChatUserId, isMeChat, isPrivateChat } from '../../Utils/Chat';\nimport { loadChatContent } from '../../Utils/File';\nimport ChatStore from '../../Stores/ChatStore';\nimport FileStore from '../../Stores/FileStore';\nimport './ChatTileControl.css';\n\nconst styles = {\n    statusRoot: {\n        position: 'absolute',\n        right: 1,\n        bottom: 1,\n        zIndex: 1\n    },\n    statusIcon: {}\n};\n\nclass ChatTileControl extends Component {\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextProps.chatId !== this.props.chatId) {\n            return true;\n        }\n\n        if (nextProps.theme !== this.props.theme) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ChatStore.on('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        FileStore.on('clientUpdateChatBlob', this.onClientUpdateChatBlob);\n        ChatStore.on('updateChatPhoto', this.onUpdateChatPhoto);\n        ChatStore.on('updateChatTitle', this.onUpdateChatTitle);\n    }\n\n    componentWillUnmount() {\n        ChatStore.removeListener('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        FileStore.removeListener('clientUpdateChatBlob', this.onClientUpdateChatBlob);\n        ChatStore.removeListener('updateChatPhoto', this.onUpdateChatPhoto);\n        ChatStore.removeListener('updateChatTitle', this.onUpdateChatTitle);\n    }\n\n    onFastUpdatingComplete = update => {\n        this.forceUpdate();\n    };\n\n    onClientUpdateChatBlob = update => {\n        const { chatId } = this.props;\n\n        if (chatId === update.chatId) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateChatPhoto = update => {\n        const { chatId } = this.props;\n        const { chat_id } = update;\n\n        if (chat_id !== chatId) return;\n\n        const chat = ChatStore.get(chatId);\n        if (!update.photo) {\n            this.forceUpdate();\n        } else {\n            const store = FileStore.getStore();\n            loadChatContent(store, chat);\n        }\n    };\n\n    onUpdateChatTitle = update => {\n        const { chatId } = this.props;\n\n        if (!update.chat_id) return;\n        if (update.chat_id !== chatId) return;\n\n        const chat = ChatStore.get(chatId);\n        if (!update.photo) {\n            this.forceUpdate();\n        } else {\n            const store = FileStore.getStore();\n            loadChatContent(store, chat);\n        }\n    };\n\n    handleSelect = event => {\n        const { chatId, onSelect } = this.props;\n        if (!onSelect) return;\n\n        event.stopPropagation();\n        onSelect(chatId);\n    };\n\n    render() {\n        const { classes, chatId, showOnline, showSavedMessages, onSelect } = this.props;\n\n        if (isMeChat(chatId) && showSavedMessages) {\n            const className = classNames('tile-photo', 'tile_color_4', { pointer: onSelect });\n            return (\n                <div className={className} onClick={this.handleSelect}>\n                    <div className='tile-saved-messages'>\n                        <BookmarkBorderIcon />\n                    </div>\n                </div>\n            );\n        }\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return null;\n\n        const { photo } = chat;\n\n        const letters = getChatLetters(chat);\n        const blob = photo && photo.small ? FileStore.getBlob(photo.small.id) : null;\n        const src = FileStore.getBlobUrl(blob);\n\n        const tileColor = `tile_color_${(Math.abs(chatId) % 8) + 1}`;\n        const className = classNames('tile-photo', { [tileColor]: !blob }, { pointer: onSelect });\n\n        return (\n            <div className='chat-tile' onClick={this.handleSelect}>\n                {src ? (\n                    <img className={className} src={src} draggable={false} alt='' />\n                ) : (\n                    <div className={className}>\n                        <span className='tile-text'>{letters}</span>\n                    </div>\n                )}\n                {showOnline && isPrivateChat(chatId) && (\n                    <ChatStatus classes={{ root: classes.statusRoot, icon: classes.statusIcon }} chatId={chatId} />\n                )}\n            </div>\n        );\n    }\n}\n\nChatTileControl.propTypes = {\n    classes: PropTypes.object,\n    chatId: PropTypes.number.isRequired,\n    onSelect: PropTypes.func,\n    showSavedMessages: PropTypes.bool,\n    showOnline: PropTypes.bool\n};\n\nChatTileControl.defaultProps = {\n    showSavedMessages: true,\n    showOnline: false\n};\n\nexport default withStyles(styles, { withTheme: true })(ChatTileControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core';\nimport ChatTileControl from './ChatTileControl';\nimport { getChatShortTitle } from '../../Utils/Chat';\nimport './ForwardTargetChat.css';\n\nconst styles = theme => ({\n    border: {\n        borderColor: theme.palette.primary.main\n    },\n    markSelected: {\n        boxShadow: 'inset 0 0 0 10px ' + theme.palette.primary.main,\n        border: '2px solid ' + theme.palette.background.paper\n    },\n    markUnselected: {\n        boxShadow: 'inset 0 0 0 0 ' + theme.palette.primary.main,\n        border: '2px solid transparent'\n    }\n});\n\nclass ForwardTargetChat extends React.Component {\n    render() {\n        const { classes, chatId, selected, onSelect } = this.props;\n\n        const shortTitle = getChatShortTitle(chatId, true);\n\n        return (\n            <div\n                className={classNames('forward-target-chat', { 'forward-target-chat-selected': selected })}\n                onClick={onSelect}>\n                <div className='forward-target-chat-tile'>\n                    <div className='forward-target-chat-tile-wrapper'>\n                        <ChatTileControl chatId={chatId} showSavedMessages />\n                    </div>\n                    {selected && <div className={classNames('forward-target-chat-selection', classes.border)} />}\n                    <div\n                        className={classNames(\n                            'forward-target-chat-mark',\n                            selected ? classes.markSelected : classes.markUnselected\n                        )}\n                    />\n                    <div className='forward-target-chat-mark-icon' />\n                </div>\n                <div className='forward-target-chat-title'>{shortTitle}</div>\n            </div>\n        );\n    }\n}\n\nForwardTargetChat.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    selected: PropTypes.bool,\n    onSelect: PropTypes.func.isRequired\n};\n\nexport default withStyles(styles, { withTheme: true })(ForwardTargetChat);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nlet cyrillicInput = null;\n\nfunction getCyrillicInputMap() {\n    return new Map([\n        ['q', 'й'],\n        ['w', 'ц'],\n        ['e', 'у'],\n        ['r', 'к'],\n        ['t', 'е'],\n        ['y', 'н'],\n        ['u', 'г'],\n        ['i', 'ш'],\n        ['o', 'щ'],\n        ['p', 'з'],\n        ['[', 'х'],\n        [']', 'ъ'],\n        ['a', 'ф'],\n        ['s', 'ы'],\n        ['d', 'в'],\n        ['f', 'а'],\n        ['g', 'п'],\n        ['h', 'р'],\n        ['j', 'о'],\n        ['k', 'л'],\n        ['l', 'д'],\n        [';', 'ж'],\n        [\"'\", 'э'],\n        ['\\\\', 'ё'],\n        ['z', 'я'],\n        ['x', 'ч'],\n        ['c', 'с'],\n        ['v', 'м'],\n        ['b', 'и'],\n        ['n', 'т'],\n        ['m', 'ь'],\n        [',', 'б'],\n        ['.', 'ю']\n    ]);\n}\n\nfunction getCyrillicInput(input) {\n    if (!input) return null;\n    if (!input.length) return null;\n\n    cyrillicInput = cyrillicInput || getCyrillicInputMap();\n\n    let output = '';\n    for (let i = 0; i < input.length; i++) {\n        if (cyrillicInput.has(input[i])) {\n            output += cyrillicInput.get(input[i]);\n        } else {\n            return null;\n        }\n    }\n\n    return output === '' ? null : output;\n}\n\nlet latinInput = null;\n\nfunction getLatinInputMap() {\n    return new Map([\n        ['й', 'q'],\n        ['ц', 'w'],\n        ['у', 'e'],\n        ['к', 'r'],\n        ['е', 't'],\n        ['н', 'y'],\n        ['г', 'u'],\n        ['ш', 'i'],\n        ['щ', 'o'],\n        ['з', 'p'],\n        ['х', '['],\n        ['ъ', ']'],\n        ['ф', 'a'],\n        ['ы', 's'],\n        ['в', 'd'],\n        ['а', 'f'],\n        ['п', 'g'],\n        ['р', 'h'],\n        ['о', 'j'],\n        ['л', 'k'],\n        ['д', 'l'],\n        ['ж', ';'],\n        ['э', \"'\"],\n        ['ё', '\\\\'],\n        ['я', 'z'],\n        ['ч', 'x'],\n        ['с', 'c'],\n        ['м', 'v'],\n        ['и', 'b'],\n        ['т', 'n'],\n        ['ь', 'm'],\n        ['б', ','],\n        ['ю', '.']\n    ]);\n}\n\nfunction getLatinInput(input) {\n    if (!input) return null;\n    if (!input.length) return null;\n\n    latinInput = latinInput || getLatinInputMap();\n\n    let output = '';\n    for (let i = 0; i < input.length; i++) {\n        if (latinInput.has(input[i])) {\n            output += latinInput.get(input[i]);\n        } else {\n            return null;\n        }\n    }\n\n    return output === '' ? null : output;\n}\n\nexport { getCyrillicInput, getLatinInput };\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport copy from 'copy-to-clipboard';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withStyles } from '@material-ui/core';\nimport { withTranslation } from 'react-i18next';\nimport { withSnackbar } from 'notistack';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport SearchIcon from '@material-ui/icons/Search';\nimport CloseIcon from '@material-ui/icons/Close';\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\nimport ForwardTargetChat from '../Tile/ForwardTargetChat';\nimport { canSendMessages, getChatTitle, getChatUsername, isSupergroup } from '../../Utils/Chat';\nimport { loadChatsContent } from '../../Utils/File';\nimport { getCyrillicInput, getLatinInput } from '../../Utils/Language';\nimport { borderStyle } from '../Theme';\nimport { NOTIFICATION_AUTO_HIDE_DURATION_MS } from '../../Constants';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport FileStore from '../../Stores/FileStore';\nimport MessageStore from '../../Stores/MessageStore';\nimport UserStore from '../../Stores/UserStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './ForwardDialog.css';\n\nconst styles = theme => ({\n    close: {\n        padding: theme.spacing.unit / 2\n    },\n    dialog: {\n        color: theme.palette.text.primary\n    },\n    dialogContent: {\n        padding: 0,\n        display: 'flex',\n        position: 'relative'\n    },\n    searchList: {\n        background: theme.palette.background.paper\n    },\n    ...borderStyle(theme)\n});\n\nclass ForwardDialog extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            chatIds: [],\n            savedMessages: null\n        };\n\n        this.searchRef = React.createRef();\n        this.messageRef = React.createRef();\n\n        this.targetChats = new Map();\n    }\n\n    componentDidMount() {\n        this.loadContent();\n\n        this.setSearchFocus();\n    }\n\n    loadContent = async () => {\n        this.getPublicMessageLink();\n\n        const promises = [];\n        const getChatsPromise = TdLibController.send({\n            '@type': 'getChats',\n            offset_order: '9223372036854775807',\n            offset_chat_id: 0,\n            limit: 100\n        });\n        promises.push(getChatsPromise);\n\n        const savedMessagesPromise = TdLibController.send({\n            '@type': 'createPrivateChat',\n            user_id: UserStore.getMyId(),\n            force: true\n        });\n        promises.push(savedMessagesPromise);\n\n        const [chats, savedMessages] = await Promise.all(promises.map(x => x.catch(e => null)));\n\n        this.setState({\n            chatIds: chats.chat_ids,\n            savedMessages: savedMessages\n        });\n\n        const store = FileStore.getStore();\n        loadChatsContent(store, chats.chat_ids);\n    };\n\n    getPublicMessageLink = async () => {\n        const { chatId, messageIds } = this.props;\n        if (!chatId) return;\n        if (!messageIds) return;\n        if (messageIds.length > 1) return;\n        if (!isSupergroup(chatId)) return;\n        if (!getChatUsername(chatId)) return;\n\n        const result = await TdLibController.send({\n            '@type': 'getPublicMessageLink',\n            chat_id: chatId,\n            message_id: messageIds[0],\n            for_album: false\n        });\n\n        this.setState({\n            publicMessageLink: result\n        });\n    };\n\n    handleClose = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateForward',\n            info: null\n        });\n    };\n\n    handleCopyLink = () => {\n        const { t } = this.props;\n        const { publicMessageLink } = this.state;\n\n        if (!publicMessageLink) return;\n        if (!publicMessageLink.link) return;\n\n        const key = `copy_link_${publicMessageLink.link}`;\n        const message = t('LinkCopied');\n        const action = null;\n\n        copy(publicMessageLink.link);\n\n        this.handleScheduledAction(key, message, action);\n    };\n\n    handleScheduledAction = (key, message, action) => {\n        if (!key) return;\n\n        const { enqueueSnackbar, classes } = this.props;\n        if (!enqueueSnackbar) return;\n\n        const TRANSITION_DELAY = 150;\n        if (\n            ApplicationStore.addScheduledAction(key, NOTIFICATION_AUTO_HIDE_DURATION_MS + 2 * TRANSITION_DELAY, action)\n        ) {\n            enqueueSnackbar(message, {\n                autoHideDuration: NOTIFICATION_AUTO_HIDE_DURATION_MS,\n                action: [\n                    <IconButton\n                        key='close'\n                        aria-label='Close'\n                        color='inherit'\n                        className={classes.close}\n                        onClick={() => ApplicationStore.removeScheduledAction(key)}>\n                        <CloseIcon />\n                    </IconButton>\n                ]\n            });\n        }\n    };\n\n    getForwardPhotoSize = (chatId, messageIds) => {\n        if (messageIds.length !== 1) return null;\n\n        const message = MessageStore.get(chatId, messageIds[0]);\n        if (!message) return null;\n\n        const { can_be_forwarded, content } = message;\n        if (!can_be_forwarded && content['@type'] === 'messageChatChangePhoto') {\n            const { photo } = content;\n            if (!photo) return null;\n\n            const { sizes } = photo;\n            if (sizes && sizes.length) {\n                return sizes[sizes.length - 1];\n            }\n        }\n\n        return null;\n    };\n\n    handleSend = () => {\n        this.handleClose();\n\n        const { chatId, messageIds, photoSize, link } = this.props;\n        if (!chatId && !messageIds && !messageIds && !photoSize && !link) return;\n\n        const text = this.getInnerText(this.messageRef.current);\n\n        this.targetChats.forEach(targetChatId => {\n            if (link) {\n                if (text) {\n                    TdLibController.send({\n                        '@type': 'sendMessage',\n                        chat_id: targetChatId,\n                        reply_to_message_id: 0,\n                        disable_notifications: false,\n                        from_background: false,\n                        reply_markup: null,\n                        input_message_content: {\n                            '@type': 'inputMessageText',\n                            text: {\n                                '@type': 'formattedText',\n                                text: text,\n                                entities: null\n                            },\n                            disable_web_page_preview: true,\n                            clear_draft: false\n                        }\n                    });\n                }\n\n                TdLibController.send({\n                    '@type': 'sendMessage',\n                    chat_id: targetChatId,\n                    reply_to_message_id: 0,\n                    disable_notifications: false,\n                    from_background: false,\n                    reply_markup: null,\n                    input_message_content: {\n                        '@type': 'inputMessageText',\n                        text: {\n                            '@type': 'formattedText',\n                            text: link,\n                            entities: null\n                        },\n                        disable_web_page_preview: true,\n                        clear_draft: false\n                    }\n                });\n\n                return;\n            }\n\n            const size = photoSize || this.getForwardPhotoSize(chatId, messageIds);\n            if (size) {\n                const { width, height, photo } = size;\n\n                TdLibController.send({\n                    '@type': 'sendMessage',\n                    chat_id: targetChatId,\n                    reply_to_message_id: 0,\n                    disable_notifications: false,\n                    from_background: false,\n                    reply_markup: null,\n                    input_message_content: {\n                        '@type': 'inputMessagePhoto',\n                        photo: {\n                            '@type': 'inputFileId',\n                            id: photo.id\n                        },\n                        thumbnail: null,\n                        added_sticker_file_ids: [],\n                        width: width,\n                        height: height,\n                        caption: {\n                            '@type': 'formattedText',\n                            text: text,\n                            entities: null\n                        },\n                        ttl: 0\n                    }\n                });\n\n                return;\n            }\n\n            if (text) {\n                TdLibController.send({\n                    '@type': 'sendMessage',\n                    chat_id: targetChatId,\n                    reply_to_message_id: 0,\n                    disable_notifications: false,\n                    from_background: false,\n                    reply_markup: null,\n                    input_message_content: {\n                        '@type': 'inputMessageText',\n                        text: {\n                            '@type': 'formattedText',\n                            text: text,\n                            entities: null\n                        },\n                        disable_web_page_preview: true,\n                        clear_draft: false\n                    }\n                });\n            }\n\n            TdLibController.send({\n                '@type': 'forwardMessages',\n                chat_id: targetChatId,\n                from_chat_id: chatId,\n                message_ids: messageIds,\n                disable_notifications: false,\n                from_background: false,\n                as_album: false\n            });\n        });\n    };\n\n    handleChangeSelection = chatId => {\n        if (this.targetChats.has(chatId)) {\n            this.targetChats.delete(chatId);\n        } else {\n            this.targetChats.set(chatId, chatId);\n        }\n\n        console.log(this.targetChats);\n\n        this.forceUpdate();\n    };\n\n    getInnerText = div => {\n        const innerText = div.innerText;\n        const innerHTML = div.innerHTML;\n\n        if (innerText && innerText === '\\n' && innerHTML && (innerHTML === '<br>' || innerHTML === '<div><br></div>')) {\n            div.innerHTML = '';\n        }\n\n        return innerText;\n    };\n\n    handleSearchKeyDown = event => {\n        if (event.keyCode === 13) {\n            event.preventDefault();\n        }\n    };\n\n    handleSearchKeyUp = () => {\n        const { chatIds, savedMessages } = this.state;\n\n        const innerHTML = this.searchRef.current.innerHTML;\n        if (innerHTML && (innerHTML === '<br>' || innerHTML === '<div><br></div>')) {\n            this.searchRef.current.innerHTML = '';\n        }\n\n        const innerText = this.getInnerText(this.searchRef.current).trim();\n        if (!innerText) {\n            this.setState({ searchText: null, searchResults: [] });\n            return;\n        }\n\n        const latinText = getLatinInput(innerText);\n        const cyrillicText = getCyrillicInput(innerText);\n\n        const chatsSource = savedMessages\n            ? [savedMessages.id].concat(chatIds.filter(x => x !== savedMessages.id)).filter(x => canSendMessages(x))\n            : chatIds;\n\n        const searchResults = chatsSource.filter(\n            x =>\n                this.hasSearchText(x, innerText) ||\n                (latinText && this.hasSearchText(x, latinText)) ||\n                (cyrillicText && this.hasSearchText(x, cyrillicText))\n        );\n\n        this.setState({ searchText: innerText, searchResults: searchResults });\n    };\n\n    handleSearchPaste = event => {\n        const plainText = event.clipboardData.getData('text/plain');\n        if (plainText) {\n            event.preventDefault();\n            document.execCommand('insertHTML', false, plainText);\n        }\n    };\n\n    handleMessageKeyUp = () => {\n        const innerHTML = this.messageRef.current.innerHTML;\n        if (innerHTML && (innerHTML === '<br>' || innerHTML === '<div><br></div>')) {\n            this.messageRef.current.innerHTML = '';\n        }\n    };\n\n    handleMessagePaste = event => {\n        const plainText = event.clipboardData.getData('text/plain');\n        if (plainText) {\n            event.preventDefault();\n            document.execCommand('insertHTML', false, plainText);\n        }\n    };\n\n    hasSearchText = (chatId, searchText) => {\n        const { t } = this.props;\n        const { savedMessages } = this.state;\n\n        if (savedMessages && chatId === savedMessages.id) {\n            const title = getChatTitle(chatId, true, t) || '';\n            if (title.toLocaleLowerCase().indexOf(searchText.toLowerCase()) !== -1) {\n                return true;\n            }\n        }\n\n        const title1 = getChatTitle(chatId, false, t) || '';\n        if (title1.toLocaleLowerCase().indexOf(searchText.toLowerCase()) !== -1) {\n            return true;\n        }\n\n        const username = getChatUsername(chatId) || '';\n        if (username.toLocaleLowerCase().indexOf(searchText.toLowerCase()) !== -1) {\n            return true;\n        }\n\n        return false;\n    };\n\n    setSearchFocus = () => {\n        setTimeout(() => {\n            if (this.searchRef.current) {\n                const element = this.searchRef.current;\n\n                element.focus();\n            }\n        }, 100);\n    };\n\n    render() {\n        const { classes, t } = this.props;\n        const { chatIds, searchText, searchResults, savedMessages, publicMessageLink } = this.state;\n\n        const chatsSource = savedMessages\n            ? [savedMessages.id].concat(chatIds.filter(x => x !== savedMessages.id)).filter(x => canSendMessages(x))\n            : chatIds;\n\n        const chats = chatsSource.map(x => (\n            <ForwardTargetChat\n                key={x}\n                chatId={x}\n                selected={this.targetChats.has(x)}\n                onSelect={() => this.handleChangeSelection(x)}\n            />\n        ));\n\n        const foundChats = (searchResults || []).map(x => (\n            <ForwardTargetChat\n                key={x}\n                chatId={x}\n                selected={this.targetChats.has(x)}\n                onSelect={() => this.handleChangeSelection(x)}\n            />\n        ));\n\n        return (\n            <Dialog\n                open\n                onClose={this.handleClose}\n                aria-labelledby='forward-dialog-title'\n                aria-describedby='forward-dialog-description'\n                className={classes.dialog}>\n                <DialogTitle id='forward-dialog-title'>{t('ShareSendTo')}</DialogTitle>\n                <div\n                    ref={this.searchRef}\n                    id='forward-dialog-search'\n                    contentEditable\n                    suppressContentEditableWarning\n                    placeholder={t('Search')}\n                    onKeyDown={this.handleSearchKeyDown}\n                    onKeyUp={this.handleSearchKeyUp}\n                    onPaste={this.handleSearchPaste}\n                />\n                <div className={classNames(classes.borderColor, 'forward-dialog-content')}>\n                    <div className='forward-dialog-list'>{chats}</div>\n                    {searchText && (\n                        <div className={classNames(classes.searchList, 'forward-dialog-search-list')}>{foundChats}</div>\n                    )}\n                </div>\n                {this.targetChats.size > 0 && (\n                    <div\n                        ref={this.messageRef}\n                        id='forward-dialog-message'\n                        contentEditable\n                        suppressContentEditableWarning\n                        placeholder={t('ShareComment')}\n                        onKeyUp={this.handleMessageKeyUp}\n                        onPaste={this.handleMessagePaste}\n                    />\n                )}\n                <DialogActions>\n                    <Button onClick={this.handleClose} color='primary'>\n                        {t('Cancel')}\n                    </Button>\n                    {this.targetChats.size > 0 && (\n                        <Button onClick={this.handleSend} color='primary' autoFocus>\n                            {t('Send')}\n                        </Button>\n                    )}\n                    {!this.targetChats.size && publicMessageLink && (\n                        <Button onClick={this.handleCopyLink} color='primary'>\n                            {t('CopyLink')}\n                        </Button>\n                    )}\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nForwardDialog.propTypes = {\n    chatId: PropTypes.number,\n    messageIds: PropTypes.array,\n    photoSize: PropTypes.object\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation(),\n    withSnackbar\n);\n\nexport default enhance(ForwardDialog);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/es/Typography/Typography';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport './NotificationTimer.css';\n\nclass NotificationTimer extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            seconds: this.props.timeout / 1000,\n            value: 0\n        };\n    }\n\n    componentDidMount() {\n        this.startTime = new Date();\n        this.expire = this.startTime;\n        this.expire.setMilliseconds(this.expire.getMilliseconds() + this.props.timeout);\n        this.timerId = setInterval(this.handleTimer, 100);\n    }\n\n    handleTimer = () => {\n        const now = new Date();\n        const seconds = this.expire - now;\n        const value = 100 - (seconds / this.props.timeout) * 100;\n        // console.log(`NotificationTimer ms=${seconds} value=${value}`);\n        this.setState({\n            seconds: seconds > 0 ? seconds : 0,\n            value: value > 100 ? 100 : value\n        });\n\n        if (now >= this.expire) {\n            if (this.timerId) {\n                clearInterval(this.timerId);\n                this.timerId = null;\n            }\n        }\n    };\n\n    componentWillUnmount() {\n        if (this.timerId) {\n            clearInterval(this.timerId);\n            this.timerId = null;\n        }\n    }\n\n    render() {\n        const { value, seconds } = this.state;\n\n        return (\n            <div className='notification-timer'>\n                <div className='notification-timer-text'>\n                    <Typography color='inherit'>{(seconds / 1000).toFixed()}</Typography>\n                </div>\n                <div className='notification-timer-progress'>\n                    <CircularProgress size={32} value={100 - value} variant='static' />\n                </div>\n            </div>\n        );\n    }\n}\n\nNotificationTimer.propTypes = {\n    timeout: PropTypes.number.isRequired\n};\n\nexport default NotificationTimer;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withSnackbar } from 'notistack';\nimport { compose } from 'recompose';\nimport ChatTileControl from '../Tile/ChatTileControl';\nimport NotificationTimer from '../Additional/NotificationTimer';\nimport { canClearHistory, canDeleteChat, getChatShortTitle, isPrivateChat } from '../../Utils/Chat';\nimport { NOTIFICATION_AUTO_HIDE_DURATION_MS } from '../../Constants';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport ChatStore from '../../Stores/ChatStore';\nimport SupergroupStore from '../../Stores/SupergroupStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './MainMenuButton.css';\n\nconst styles = theme => ({\n    menuIconButton: {\n        margin: '8px 12px 8px 0'\n    }\n});\n\nconst menuAnchorOrigin = {\n    vertical: 'bottom',\n    horizontal: 'right'\n};\n\nconst menuTransformOrigin = {\n    vertical: 'top',\n    horizontal: 'right'\n};\n\nclass LeaveChatDialog extends React.Component {\n    getDeleteDialogText = chatId => {\n        const chat = ChatStore.get(chatId);\n        if (!chat) return null;\n        if (!chat.type) return null;\n\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup': {\n                return `Are you sure you want to leave group ${chat.title}?`;\n            }\n            case 'chatTypeSupergroup': {\n                const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n                if (supergroup) {\n                    return supergroup.is_channel\n                        ? `Are you sure you want to leave channel ${chat.title}?`\n                        : `Are you sure you want to leave group ${chat.title}?`;\n                }\n\n                return null;\n            }\n            case 'chatTypePrivate':\n            case 'chatTypeSecret': {\n                return `Are you sure you want to delete chat with ${getChatShortTitle(chatId)}?`;\n            }\n        }\n\n        return null;\n    };\n\n    render() {\n        const { onClose, chatId, ...other } = this.props;\n\n        return (\n            <Dialog\n                transitionDuration={0}\n                onClose={() => onClose(false)}\n                aria-labelledby='delete-dialog-title'\n                {...other}>\n                <DialogTitle id='delete-dialog-title'>{getChatShortTitle(chatId)}</DialogTitle>\n                <DialogContent>\n                    <div className='delete-dialog-content'>\n                        <ChatTileControl chatId={chatId} />\n                        <DialogContentText id='delete-dialog-description'>\n                            {this.getDeleteDialogText(chatId)}\n                        </DialogContentText>\n                    </div>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => onClose(false)} color='primary'>\n                        Cancel\n                    </Button>\n                    <Button onClick={() => onClose(true)} color='primary' autoFocus>\n                        Ok\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nclass ClearHistoryDialog extends React.Component {\n    render() {\n        const { onClose, chatId, ...other } = this.props;\n\n        return (\n            <Dialog\n                transitionDuration={0}\n                onClose={() => onClose(false)}\n                aria-labelledby='delete-dialog-title'\n                {...other}>\n                <DialogTitle id='delete-dialog-title'>{getChatShortTitle(chatId)}</DialogTitle>\n                <DialogContent>\n                    <div className='delete-dialog-content'>\n                        <ChatTileControl chatId={chatId} />\n                        <DialogContentText id='delete-dialog-description'>\n                            Are you sure you want clear history?\n                        </DialogContentText>\n                    </div>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => onClose(false)} color='primary'>\n                        Cancel\n                    </Button>\n                    <Button onClick={() => onClose(true)} color='primary' autoFocus>\n                        Ok\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nclass MainMenuButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            anchorEl: null,\n            openDelete: false,\n            openClearHistory: false\n        };\n    }\n\n    handleButtonClick = event => {\n        this.setState({ anchorEl: event.currentTarget });\n    };\n\n    handleMenuClose = () => {\n        this.setState({ anchorEl: null });\n    };\n\n    handleChatInfo = () => {\n        this.handleMenuClose();\n        setTimeout(() => this.props.openChatDetails(), 150);\n    };\n\n    handleClearHistory = () => {\n        this.handleMenuClose();\n\n        this.setState({ openClearHistory: true });\n    };\n\n    handleClearHistoryContinue = result => {\n        this.setState({ openClearHistory: false });\n\n        if (!result) return;\n\n        const chatId = ApplicationStore.getChatId();\n        const message = 'Messages deleted';\n        const request = {\n            '@type': 'deleteChatHistory',\n            chat_id: chatId,\n            remove_from_chat_list: false\n        };\n\n        this.handleScheduledAction(chatId, 'clientUpdateClearHistory', message, request);\n    };\n\n    handleLeave = () => {\n        this.handleMenuClose();\n\n        this.setState({ openDelete: true });\n    };\n\n    handleLeaveContinue = result => {\n        this.setState({ openDelete: false });\n\n        if (!result) return;\n\n        const chatId = ApplicationStore.getChatId();\n        const message = this.getLeaveChatNotification(chatId);\n        const request = isPrivateChat(chatId)\n            ? { '@type': 'deleteChatHistory', chat_id: chatId, remove_from_chat_list: true }\n            : { '@type': 'leaveChat', chat_id: chatId };\n\n        this.handleScheduledAction(chatId, 'clientUpdateLeaveChat', message, request);\n    };\n\n    handleScheduledAction = (chatId, clientUpdateType, message, request) => {\n        if (!clientUpdateType) return;\n\n        const key = `${clientUpdateType} chatId=${chatId}`;\n        const action = async () => {\n            try {\n                await TdLibController.send(request);\n            } finally {\n                TdLibController.clientUpdate({ '@type': clientUpdateType, chatId: chatId, inProgress: false });\n            }\n        };\n        const cancel = () => {\n            TdLibController.clientUpdate({ '@type': clientUpdateType, chatId: chatId, inProgress: false });\n        };\n\n        const { enqueueSnackbar, classes } = this.props;\n        if (!enqueueSnackbar) return;\n\n        const TRANSITION_DELAY = 150;\n        if (ApplicationStore.addScheduledAction(key, NOTIFICATION_AUTO_HIDE_DURATION_MS, action, cancel)) {\n            TdLibController.clientUpdate({ '@type': clientUpdateType, chatId: chatId, inProgress: true });\n            enqueueSnackbar(message, {\n                autoHideDuration: NOTIFICATION_AUTO_HIDE_DURATION_MS - 2 * TRANSITION_DELAY,\n                action: [\n                    <IconButton key='progress' color='inherit' className='progress-button'>\n                        <NotificationTimer timeout={NOTIFICATION_AUTO_HIDE_DURATION_MS} />\n                    </IconButton>,\n                    <Button\n                        key='undo'\n                        color='primary'\n                        size='small'\n                        onClick={() => ApplicationStore.removeScheduledAction(key)}>\n                        UNDO\n                    </Button>\n                ]\n            });\n        }\n    };\n\n    getLeaveChatTitle = chatId => {\n        const chat = ChatStore.get(chatId);\n        if (!chat) return null;\n        if (!chat.type) return null;\n\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup': {\n                return 'Delete and exit';\n            }\n            case 'chatTypeSupergroup': {\n                const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n                if (supergroup) {\n                    return supergroup.is_channel ? 'Leave channel' : 'Leave group';\n                }\n\n                return null;\n            }\n            case 'chatTypePrivate':\n            case 'chatTypeSecret': {\n                return 'Delete conversation';\n            }\n        }\n\n        return null;\n    };\n\n    getLeaveChatNotification = chatId => {\n        const chat = ChatStore.get(chatId);\n        if (!chat) return 'Chat deleted';\n        if (!chat.type) return 'Chat deleted';\n\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup': {\n                return 'Chat deleted';\n            }\n            case 'chatTypeSupergroup': {\n                const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n                if (supergroup) {\n                    return supergroup.is_channel ? 'Left channel' : 'Left group';\n                }\n\n                return 'Chat deleted';\n            }\n            case 'chatTypePrivate':\n            case 'chatTypeSecret': {\n                return 'Chat deleted';\n            }\n        }\n\n        return 'Chat deleted';\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { anchorEl, openDelete, openClearHistory } = this.state;\n\n        const chatId = ApplicationStore.getChatId();\n        const clearHistory = canClearHistory(chatId);\n        const deleteChat = canDeleteChat(chatId);\n        const leaveChatTitle = this.getLeaveChatTitle(chatId);\n\n        return (\n            <>\n                <IconButton\n                    aria-owns={anchorEl ? 'simple-menu' : null}\n                    aria-haspopup='true'\n                    className={classes.menuIconButton}\n                    aria-label='Menu'\n                    onClick={this.handleButtonClick}>\n                    <MoreVertIcon />\n                </IconButton>\n                <Menu\n                    id='main-menu'\n                    anchorEl={anchorEl}\n                    open={Boolean(anchorEl)}\n                    onClose={this.handleMenuClose}\n                    getContentAnchorEl={null}\n                    disableAutoFocusItem\n                    disableRestoreFocus={true}\n                    anchorOrigin={menuAnchorOrigin}\n                    transformOrigin={menuTransformOrigin}>\n                    <MenuItem onClick={this.handleChatInfo}>Chat info</MenuItem>\n                    {clearHistory && <MenuItem onClick={this.handleClearHistory}>Clear history</MenuItem>}\n                    {deleteChat && leaveChatTitle && <MenuItem onClick={this.handleLeave}>{leaveChatTitle}</MenuItem>}\n                </Menu>\n                <LeaveChatDialog chatId={chatId} open={openDelete} onClose={this.handleLeaveContinue} />\n                <ClearHistoryDialog chatId={chatId} open={openClearHistory} onClose={this.handleClearHistoryContinue} />\n            </>\n        );\n    }\n}\n\nconst enhance = compose(\n    withStyles(styles),\n    withSnackbar\n);\n\nexport default enhance(MainMenuButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core';\nimport { getUserStatus, isUserOnline } from '../../Utils/User';\nimport UserStore from '../../Stores/UserStore';\nimport './UserStatusControl.css';\n\nconst styles = theme => ({\n    userStatusSubtitle: {\n        color: theme.palette.type === 'dark' ? theme.palette.text.secondary : '#70777b'\n    },\n    userStatusAccentSubtitle: {\n        color: theme.palette.primary.dark + '!important'\n    }\n});\n\nclass UserStatusControl extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { userId } = this.props;\n        const user = UserStore.get(userId);\n\n        this.state = {\n            prevUserId: userId,\n            status: getUserStatus(user),\n            isAccent: isUserOnline(user)\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.userId !== state.prevUserId) {\n            const { userId } = props;\n            const user = UserStore.get(userId);\n\n            return {\n                prevUserId: userId,\n                status: getUserStatus(user),\n                isAccent: isUserOnline(user)\n            };\n        }\n\n        return null;\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { userId, theme } = this.props;\n        const { status, isAccent } = this.state;\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        if (nextProps.userId !== userId) {\n            return true;\n        }\n\n        if (nextState.status !== status) {\n            return true;\n        }\n\n        if (nextState.isAccent !== isAccent) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        UserStore.on('updateUserStatus', this.onUpdateUserStatus);\n    }\n\n    componentWillUnmount() {\n        UserStore.removeListener('updateUserStatus', this.onUpdateUserStatus);\n    }\n\n    onUpdateUserStatus = update => {\n        const { userId } = this.props;\n        const user = UserStore.get(userId);\n\n        if (userId === update.user_id) {\n            this.setState({ status: getUserStatus(user), isAccent: isUserOnline(user) });\n        }\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { status, isAccent } = this.state;\n\n        return (\n            <div\n                className={classNames('dialog-content', classes.userStatusSubtitle, {\n                    'accent-color': isAccent,\n                    [classes.userStatusAccentSubtitle]: isAccent\n                })}>\n                {status}\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles, { withTheme: true })(UserStatusControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport UserTileControl from './UserTileControl';\nimport UserStatusControl from './UserStatusControl';\nimport { getUserFullName } from '../../Utils/User';\nimport UserStore from '../../Stores/UserStore';\nimport './UserControl.css';\n\nclass UserControl extends React.Component {\n\n    shouldComponentUpdate(nextProps, nextState){\n        return nextProps.userId !== this.props.userId;\n    }\n\n    handleClick = () => {\n        const { userId, onSelect} = this.props;\n\n        const user = UserStore.get(userId);\n        if (!user) return;\n        if (!onSelect) return;\n\n        onSelect(user);\n    };\n\n    render() {\n        const { userId } = this.props;\n        const user = UserStore.get(userId);\n\n        const fullName = getUserFullName(user);\n\n        return (\n            <div className='user' onClick={this.handleClick}>\n                <div className='user-wrapper'>\n                    <UserTileControl userId={userId}/>\n                    <div className='dialog-inner-wrapper'>\n                        <div className='tile-first-row'>\n                            <div className='dialog-title'>\n                                {fullName}\n                            </div>\n                        </div>\n                        <div className='tile-second-row'>\n                            <UserStatusControl userId={userId}/>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nUserControl.propTypes = {\n    userId: PropTypes.number.isRequired,\n    onSelect: PropTypes.func\n};\n\nexport default UserControl;","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport { getChatTitle } from '../../Utils/Chat';\nimport ChatStore from '../../Stores/ChatStore';\nimport './DialogTitleControl.css';\n\nclass DialogTitleControl extends React.Component {\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextProps.chatId !== this.props.chatId) {\n            return true;\n        }\n\n        if (nextProps.t !== this.props.t) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ChatStore.on('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.on('updateChatTitle', this.onUpdateChatTitle);\n    }\n\n    componentWillUnmount() {\n        ChatStore.removeListener('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.removeListener('updateChatTitle', this.onUpdateChatTitle);\n    }\n\n    onFastUpdatingComplete = update => {\n        this.forceUpdate();\n    };\n\n    onUpdateChatTitle = update => {\n        const { chatId } = this.props;\n\n        if (update.chat_id !== chatId) return;\n\n        this.forceUpdate();\n    };\n\n    render() {\n        const { t, chatId, showSavedMessages } = this.props;\n\n        const title = getChatTitle(chatId, showSavedMessages, t);\n\n        return <div className='dialog-title'>{title}</div>;\n    }\n}\n\nDialogTitleControl.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    showSavedMessages: PropTypes.bool\n};\n\nDialogTitleControl.defaultProps = {\n    showSavedMessages: true\n};\n\nexport default withTranslation()(DialogTitleControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n    getChatSubtitleWithoutTyping,\n    isAccentChatSubtitleWithoutTyping\n} from '../../Utils/Chat';\nimport ChatStore from '../../Stores/ChatStore';\nimport UserStore from '../../Stores/UserStore';\nimport BasicGroupStore from '../../Stores/BasicGroupStore';\nimport SupergroupStore from '../../Stores/SupergroupStore';\nimport './DialogStatusControl.css';\n\nconst styles = theme => ({\n    statusSubtitle: {\n        color: theme.palette.type === 'dark' ? theme.palette.text.secondary : '#70777b'\n    },\n    statusAccentSubtitle: {\n        color: theme.palette.primary.dark + '!important'\n    }\n});\n\nclass DialogStatusControl extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { chatId } = this.props;\n\n        this.state = {\n            prevChatId: chatId,\n            subtitle: getChatSubtitleWithoutTyping(chatId),\n            isAccent: isAccentChatSubtitleWithoutTyping(chatId)\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.chatId !== state.prevChatId) {\n            const { chatId } = props;\n\n            return {\n                prevChatId: chatId,\n                subtitle: getChatSubtitleWithoutTyping(chatId),\n                isAccent: isAccentChatSubtitleWithoutTyping(chatId)\n            };\n        }\n\n        return null;\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId } = this.props;\n        const { subtitle, isAccent } = this.state;\n\n        if (nextProps.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextState.subtitle !== subtitle) {\n            return true;\n        }\n\n        if (nextState.isAccent !== isAccent) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        UserStore.on('updateUserStatus', this.onUpdateUserStatus);\n        BasicGroupStore.on('updateBasicGroup', this.onUpdateBasicGroup);\n        SupergroupStore.on('updateSupergroup', this.onUpdateSupergroup);\n        UserStore.on('updateUserFullInfo', this.onUpdateUserFullInfo);\n        BasicGroupStore.on('updateBasicGroupFullInfo', this.onUpdateBasicGroupFullInfo);\n        SupergroupStore.on('updateSupergroupFullInfo', this.onUpdateSupergroupFullInfo);\n    }\n\n    componentWillUnmount() {\n        UserStore.removeListener('updateUserStatus', this.onUpdateUserStatus);\n        BasicGroupStore.removeListener('updateBasicGroup', this.onUpdateBasicGroup);\n        SupergroupStore.removeListener('updateSupergroup', this.onUpdateSupergroup);\n        UserStore.removeListener('updateUserFullInfo', this.onUpdateUserFullInfo);\n        BasicGroupStore.removeListener('updateBasicGroupFullInfo', this.onUpdateBasicGroupFullInfo);\n        SupergroupStore.removeListener('updateSupergroupFullInfo', this.onUpdateSupergroupFullInfo);\n    }\n\n    onUpdateUserStatus = update => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n        if (!chat.type) return;\n\n        let updateSubtitle = false;\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup': {\n                const fullInfo = BasicGroupStore.getFullInfo(chat.type.basic_group_id);\n                if (fullInfo && fullInfo.members) {\n                    const member = fullInfo.members.find(\n                        x => x.user_id === update.user_id\n                    );\n                    if (member) {\n                        updateSubtitle = true;\n                    }\n                }\n                break;\n            }\n            case 'chatTypePrivate': {\n                if (chat.type.user_id === update.user_id) {\n                    updateSubtitle = true;\n                }\n                break;\n            }\n            case 'chatTypeSecret': {\n                if (chat.type.user_id === update.user_id) {\n                    updateSubtitle = true;\n                }\n                break;\n            }\n            case 'chatTypeSupergroup': {\n                break;\n            }\n        }\n\n        if (updateSubtitle) {\n            this.updateSubtitle(chat);\n        }\n    };\n\n    updateSubtitle = chat => {\n        this.setState({\n            subtitle: getChatSubtitleWithoutTyping(chat.id),\n            isAccent: isAccentChatSubtitleWithoutTyping(chat.id)\n        });\n    };\n\n    onUpdateUserFullInfo = update => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            (chat.type['@type'] === 'chatTypePrivate' ||\n                chat.type['@type'] === 'chatTypeSecret') &&\n            chat.type.user_id === update.user_id\n        ) {\n            this.updateSubtitle(chat);\n        }\n    };\n\n    onUpdateBasicGroupFullInfo = update => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeBasicGroup' &&\n            chat.type.basic_group_id === update.basic_group_id\n        ) {\n            this.updateSubtitle(chat);\n        }\n    };\n\n    onUpdateSupergroupFullInfo = update => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeSupergroup' &&\n            chat.type.supergroup_id === update.supergroup_id\n        ) {\n            this.updateSubtitle(chat);\n        }\n    };\n\n    onUpdateBasicGroup = update => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeBasicGroup' &&\n            chat.type.basic_group_id === update.basic_group.id\n        ) {\n            this.updateSubtitle(chat);\n        }\n    };\n\n    onUpdateSupergroup = update => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeSupergroup' &&\n            chat.type.supergroup_id === update.supergroup.id\n        ) {\n            this.updateSubtitle(chat);\n        }\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { subtitle, isAccent } = this.state;\n\n        return (\n            <div className={classNames('dialog-status', isAccent ? classes.statusAccentSubtitle : classes.statusSubtitle)}>\n                {subtitle}\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles, { withTheme: true })(DialogStatusControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ChatTileControl from './ChatTileControl';\nimport DialogTitleControl from './DialogTitleControl';\nimport DialogStatusControl from './DialogStatusControl';\nimport ChatStore from '../../Stores/ChatStore';\nimport './ChatControl.css';\n\nclass ChatControl extends React.Component {\n    constructor(props) {\n        super(props);\n        if (process.env.NODE_ENV !== 'production') {\n            const { chatId } = this.props;\n            this.state = {\n                chat: ChatStore.get(chatId)\n            };\n        }\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        return nextProps.chatId !== this.props.chatId;\n    }\n\n    handleClick = () => {\n        const { chatId, onSelect } = this.props;\n        if (!onSelect) return;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        onSelect(chat);\n    };\n\n    render() {\n        const { chatId, onTileSelect, showStatus, showSavedMessages } = this.props;\n\n        return (\n            <div className='chat' onClick={this.handleClick}>\n                <div className='chat-wrapper'>\n                    <ChatTileControl chatId={chatId} onSelect={onTileSelect} showSavedMessages={showSavedMessages} />\n                    <div className='dialog-inner-wrapper'>\n                        <div className='tile-first-row'>\n                            <DialogTitleControl chatId={chatId} showSavedMessages={showSavedMessages}/>\n                        </div>\n                        {showStatus && !showSavedMessages && (\n                            <div className='tile-second-row'>\n                                <DialogStatusControl chatId={chatId} />\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nChatControl.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    showSavedMessages: PropTypes.bool,\n    showStatus: PropTypes.bool,\n    onSelect: PropTypes.func,\n    onTileSelect: PropTypes.func\n};\n\nChatControl.defaultProps = {\n    showSavedMessages: true,\n    showStatus: true\n};\n\nexport default ChatControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { compose } from 'recompose';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withTranslation } from 'react-i18next';\nimport { IconButton } from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport './ChatDetailsHeader.css';\nimport { isChannelChat, isPrivateChat } from '../../Utils/Chat';\n\nconst styles = {\n    leftIconButton: {\n        margin: '8px -2px 8px 12px'\n    },\n    rightIconButton: {\n        margin: '8px 12px 8px -2px'\n    }\n};\n\nclass ChatDetailsHeader extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        const { classes, chatId, t, backButton, onClick, onClose } = this.props;\n\n        let info = t('ChatInfo');\n        if (isPrivateChat(chatId)){\n            info = t('Info');\n        } else if (isChannelChat(chatId)) {\n            info = t('ChannelInfo');\n        }\n\n        return (\n            <div className='header-master'>\n                { backButton && (\n                    <IconButton className={classes.leftIconButton} onClick={onClose}>\n                        <ArrowBackIcon />\n                    </IconButton>\n                )}\n                <div className='header-status grow cursor-pointer' onClick={onClick}>\n                    <span className='header-status-content'>{info}</span>\n                </div>\n                { !backButton && (\n                    <IconButton className={classes.rightIconButton} onClick={onClose}>\n                        <CloseIcon />\n                    </IconButton>\n                )}\n            </div>\n        );\n    }\n}\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(ChatDetailsHeader);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { compose } from 'recompose';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withTranslation } from 'react-i18next';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport NotificationsActiveIcon from '@material-ui/icons/NotificationsActive';\nimport Switch from '@material-ui/core/Switch';\nimport Typography from '@material-ui/core/Typography';\nimport NotificationsControl from '../ColumnMiddle/NotificationsControl';\n\nconst styles = {\n    listItem: {\n        padding: '11px 22px'\n    }\n};\n\nclass NotificationsListItem extends NotificationsControl {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        const { classes, t } = this.props;\n        const { isMuted } = this.state;\n\n        return (\n            <ListItem button className={classes.listItem} onClick={this.handleSetChatNotifications}>\n                <ListItemIcon>{!isMuted ? <NotificationsActiveIcon /> : <NotificationsIcon />}</ListItemIcon>\n                <ListItemText\n                    primary={\n                        <Typography variant='inherit' noWrap>\n                            {t('Notifications')}\n                        </Typography>\n                    }\n                />\n                <ListItemSecondaryAction>\n                    <Switch color='primary' onChange={this.handleSetChatNotifications} checked={!isMuted} />\n                </ListItemSecondaryAction>\n            </ListItem>\n        );\n    }\n}\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(NotificationsListItem);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport Collapse from '@material-ui/core/Collapse';\nimport Typography from '@material-ui/core/Typography';\nimport { withStyles } from '@material-ui/core/styles';\nimport { isUserBlocked } from '../../Utils/User';\nimport { isChannelChat, isChatMember, isGroupChat } from '../../Utils/Chat';\nimport ChatStore from '../../Stores/ChatStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport ApplicationStore from '../../Stores/ApplicationStore';\n\nconst styles = {\n    listItem: {\n        padding: '11px 22px'\n    }\n};\n\nclass MoreListItem extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { chatId } = this.props;\n        this.state = {\n            prevChatId: chatId,\n            openMore: false\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.chatId !== state.prevChatId) {\n            return {\n                prevChatId: props.chatId,\n                openMore: false\n            };\n        }\n\n        return null;\n    }\n\n    handleMoreClick = () => {\n        this.setState({ openMore: !this.state.openMore });\n    };\n\n    handleSendMessage = () => {\n        const currentChatId = ApplicationStore.getChatId();\n        const { chatId } = this.props;\n        if (currentChatId === chatId) {\n            //this.dialogDetails.current.scrollToBottom();\n        } else {\n            TdLibController.setChatId(chatId);\n        }\n    };\n\n    handleBlock = () => {\n        const { chatId } = this.state;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n        if (!chat.type) return;\n\n        const { user_id } = chat.type;\n        if (!user_id) return;\n\n        TdLibController.send({\n            '@type': isUserBlocked(user_id) ? 'unblockUser' : 'blockUser',\n            user_id: user_id\n        });\n    };\n\n    render() {\n        const { t, chatId, classes } = this.props;\n        const { openMore } = this.state;\n\n        const chat = ChatStore.get(chatId);\n\n        const isGroup = isGroupChat(chatId);\n        let isBlocked = false;\n        if (!isGroup && chat.type) {\n            isBlocked = isUserBlocked(chat.type.user_id);\n        }\n        const isMember = isChatMember(chatId);\n        const isChannel = isChannelChat(chatId);\n\n        return (\n            <>\n                <ListItem button className={classes.listItem} onClick={this.handleMoreClick}>\n                    <ListItemIcon>\n                        <MoreHorizIcon />\n                    </ListItemIcon>\n                    <ListItemText\n                        primary={\n                            <Typography variant='inherit' noWrap>\n                                {t('More')}\n                            </Typography>\n                        }\n                    />\n                    {openMore ? <ExpandLess /> : <ExpandMore />}\n                </ListItem>\n                <Collapse in={openMore} timeout='auto' unmountOnExit>\n                    <List component='div' disablePadding>\n                        {!isGroup && (\n                            <>\n                                <ListItem button className={classes.listItem} onClick={this.handleSendMessage}>\n                                    <ListItemText\n                                        inset\n                                        primary={\n                                            <Typography variant='inherit' noWrap>\n                                                {t('SendMessage')}\n                                            </Typography>\n                                        }\n                                    />\n                                </ListItem>\n                                <ListItem button className={classes.listItem} onClick={this.handleBlock}>\n                                    <ListItemText\n                                        inset\n                                        primary={\n                                            <Typography color='secondary' variant='inherit' noWrap>\n                                                {isBlocked ? t('Unblock') : t('BlockContact')}\n                                            </Typography>\n                                        }\n                                    />\n                                </ListItem>\n                            </>\n                        )}\n                        {isGroup && isMember && (\n                            <ListItem button className={classes.listItem}>\n                                <ListItemText\n                                    inset\n                                    primary={\n                                        <Typography color='secondary' variant='inherit' noWrap>\n                                            {isChannel ? t('LeaveChannel') : t('DeleteChat')}\n                                        </Typography>\n                                    }\n                                />\n                            </ListItem>\n                        )}\n                        {isGroup && !isMember && (\n                            <ListItem button className={classes.listItem}>\n                                <ListItemText\n                                    inset\n                                    primary={\n                                        <Typography color='secondary' variant='inherit' noWrap>\n                                            {t('ReportChat')}\n                                        </Typography>\n                                    }\n                                />\n                            </ListItem>\n                        )}\n                    </List>\n                </Collapse>\n            </>\n        );\n    }\n}\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(MoreListItem);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport copy from 'copy-to-clipboard';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withSnackbar } from 'notistack';\nimport { withTranslation } from 'react-i18next';\nimport PhotoIcon from '@material-ui/icons/Photo';\nimport AlternateEmailIcon from '@material-ui/icons/AlternateEmail';\nimport CallIcon from '@material-ui/icons/Call';\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItem from '@material-ui/core/ListItem';\nimport Button from '@material-ui/core/Button';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Divider from '@material-ui/core/Divider';\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport CircularProgress from '../ColumnMiddle/MainMenuButton';\nimport NotificationTimer from '../Additional/NotificationTimer';\nimport UserControl from '../Tile/UserControl';\nimport ChatControl from '../Tile/ChatControl';\nimport ChatDetailsHeader from './ChatDetailsHeader';\nimport NotificationsListItem from './NotificationsListItem';\nimport MoreListItem from './MoreListItem';\nimport {\n    getChatUsername,\n    getChatPhoneNumber,\n    getChatBio,\n    isGroupChat,\n    getGroupChatMembers,\n    getChatFullInfo,\n    isPrivateChat,\n    getChatUserId,\n    isMeChat\n} from '../../Utils/Chat';\nimport { getUserStatusOrder } from '../../Utils/User';\nimport { loadUsersContent, loadChatsContent } from '../../Utils/File';\nimport { formatPhoneNumber } from '../../Utils/Common';\nimport { openChat } from '../../Actions/Client';\nimport { NOTIFICATION_AUTO_HIDE_DURATION_MS } from '../../Constants';\nimport ChatStore from '../../Stores/ChatStore';\nimport UserStore from '../../Stores/UserStore';\nimport BasicGroupStore from '../../Stores/BasicGroupStore';\nimport SupergroupStore from '../../Stores/SupergroupStore';\nimport OptionStore from '../../Stores/OptionStore';\nimport FileStore from '../../Stores/FileStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './ChatDetails.css';\n\nconst styles = theme => ({\n    closeIconButton: {\n        margin: '8px -2px 8px 12px'\n    },\n    nested: {\n        // paddingLeft: theme.spacing.unit * 4,\n    },\n    close: {\n        padding: theme.spacing.unit / 2\n    },\n    listItem: {\n        padding: '11px 22px'\n    }\n});\n\nclass ChatDetails extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.chatDetailsListRef = React.createRef();\n\n        const { chatId } = this.props;\n\n        this.members = new Map();\n        this.state = {\n            prevChatId: chatId,\n            hasGroupsInCommon: false\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.chatId !== state.prevChatId) {\n            return {\n                prevChatId: props.chatId,\n                hasGroupsInCommon: false\n            };\n        }\n\n        return null;\n    }\n\n    getSnapshotBeforeUpdate(prevProps, prevState) {\n        const { chatId } = this.props;\n\n        const list = this.chatDetailsListRef.current;\n        const { scrollTop, scrollHeight, offsetHeight } = list;\n        const snapshot = {\n            scrollTop: scrollTop,\n            scrollHeight: scrollHeight,\n            offsetHeight: offsetHeight\n        };\n\n        console.log(\n            `[ChatDetails] getSnapshotBeforeUpdate chatId=${chatId} scrollTop=${scrollTop} scrollHeight=${scrollHeight} offsetHeight=${offsetHeight}`\n        );\n\n        return snapshot;\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId, theme } = this.props;\n        const { hasGroupsInCommon } = this.state;\n\n        if (nextProps.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        if (nextState.hasGroupsInCommon !== hasGroupsInCommon) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { chatId } = this.props;\n        if (prevProps.chatId !== chatId) {\n            this.handleSelectChat();\n        }\n\n        console.log('chatDetailsListRef', this.chatDetailsListRef);\n        const list = this.chatDetailsListRef.current;\n        const { scrollTop, scrollHeight, offsetHeight } = snapshot;\n        console.log(\n            `[ChatDetails] componentDidUpdate before chatId=${chatId} list.scrollTop=${\n                list.scrollTop\n            } list.offsetHeight=${list.offsetHeight} list.scrollHeight=${list.scrollHeight}`\n        );\n        list.scrollTop = scrollTop + (list.scrollHeight - scrollHeight);\n        console.log(\n            `[ChatDetails] componentDidUpdate after chatId=${chatId} list.scrollTop=${\n                list.scrollTop\n            } list.offsetHeight=${list.offsetHeight} list.scrollHeight=${list.scrollHeight}`\n        );\n    }\n\n    componentDidMount() {\n        this.handleSelectChat();\n\n        UserStore.on('updateUserStatus', this.onUpdateUserStatus);\n        UserStore.on('updateUserFullInfo', this.onUpdateUserFullInfo);\n        BasicGroupStore.on('updateBasicGroupFullInfo', this.onUpdateBasicGroupFullInfo);\n        SupergroupStore.on('updateSupergroupFullInfo', this.onUpdateSupergroupFullInfo);\n    }\n\n    componentWillUnmount() {\n        UserStore.removeListener('updateUserStatus', this.onUpdateUserStatus);\n        UserStore.removeListener('updateUserFullInfo', this.onUpdateUserFullInfo);\n        BasicGroupStore.removeListener('updateBasicGroupFullInfo', this.onUpdateBasicGroupFullInfo);\n        SupergroupStore.removeListener('updateSupergroupFullInfo', this.onUpdateSupergroupFullInfo);\n    }\n\n    onUpdateBasicGroupFullInfo = update => {\n        const chat = ChatStore.get(this.props.chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeBasicGroup' &&\n            chat.type.basic_group_id === update.basic_group_id\n        ) {\n            this.handleSelectChat();\n\n            this.forceUpdate(); // update bio\n        }\n    };\n\n    onUpdateSupergroupFullInfo = update => {\n        const chat = ChatStore.get(this.props.chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeSupergroup' &&\n            chat.type.supergroup_id === update.supergroup_id\n        ) {\n            this.forceUpdate(); // update bio\n        }\n    };\n\n    onUpdateUserFullInfo = update => {\n        const chat = ChatStore.get(this.props.chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            (chat.type['@type'] === 'chatTypePrivate' || chat.type['@type'] === 'chatTypeSecret') &&\n            chat.type.user_id === update.user_id\n        ) {\n            this.forceUpdate(); // update bio\n        }\n    };\n\n    onUpdateUserStatus = update => {\n        if (this.members.has(update.user_id)) {\n            this.forceUpdate();\n        }\n    };\n\n    handleSelectChat = () => {\n        this.getFullInfo();\n\n        this.getGroupsInCommon();\n\n        this.loadChatContents();\n    };\n\n    loadChatContents = () => {\n        const { chatId } = this.props;\n\n        const store = FileStore.getStore();\n\n        loadChatsContent(store, [chatId]);\n        const members = getGroupChatMembers(chatId).map(x => x.user_id);\n        loadUsersContent(store, members);\n    };\n\n    getFullInfo = () => {\n        const { chatId } = this.props;\n\n        getChatFullInfo(chatId);\n    };\n\n    getGroupsInCommon = async () => {\n        const { chatId } = this.props;\n\n        const isGroup = isGroupChat(chatId);\n        if (isGroup) return;\n\n        const isMe = isMeChat(chatId);\n        if (isMe) return;\n\n        const result = await TdLibController.send({\n            '@type': 'getGroupsInCommon',\n            user_id: getChatUserId(chatId),\n            offset_chat_id: 0,\n            limit: 1\n        });\n\n        this.setState({ hasGroupsInCommon: result.chat_ids.length > 0 });\n    };\n\n    handleUsernameHint = () => {\n        const { t, chatId } = this.props;\n        const username = getChatUsername(chatId);\n        if (!username) return;\n\n        const telegramUrlOption = OptionStore.get('t_me_url');\n        const usernameLink = telegramUrlOption ? telegramUrlOption.value : 'https://telegram.org/';\n\n        copy(usernameLink + username);\n\n        const key = `${chatId}_copy_username`;\n        const message = t('TextCopied');\n        const action = null;\n\n        this.handleScheduledAction(key, message, action);\n    };\n\n    handleScheduledAction = (key, message, action) => {\n        if (!key) return;\n\n        const { enqueueSnackbar, classes } = this.props;\n        if (!enqueueSnackbar) return;\n\n        const TRANSITION_DELAY = 150;\n        if (\n            ApplicationStore.addScheduledAction(key, NOTIFICATION_AUTO_HIDE_DURATION_MS + 2 * TRANSITION_DELAY, action)\n        ) {\n            enqueueSnackbar(message, {\n                autoHideDuration: NOTIFICATION_AUTO_HIDE_DURATION_MS,\n                action: [\n                    <IconButton\n                        key='close'\n                        aria-label='Close'\n                        color='inherit'\n                        className={classes.close}\n                        onClick={() => ApplicationStore.removeScheduledAction(key)}>\n                        <CloseIcon />\n                    </IconButton>\n                ]\n            });\n        }\n    };\n\n    handlePhoneHint = () => {\n        const { t, chatId } = this.props;\n        const phoneNumber = getChatPhoneNumber(chatId);\n        if (!phoneNumber) return;\n\n        copy(formatPhoneNumber(phoneNumber));\n\n        const key = `${chatId}_copy_phone`;\n        const message = t('PhoneCopied');\n        const action = null;\n\n        this.handleScheduledAction(key, message, action);\n    };\n\n    handleHeaderClick = () => {\n        this.chatDetailsListRef.current.scrollTop = 0;\n    };\n\n    handleOpenViewer = () => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n        if (!chat.photo) return;\n\n        ApplicationStore.setProfileMediaViewerContent({ chatId: chatId });\n    };\n\n    handleOpenChat = () => {\n        const { chatId, popup } = this.props;\n\n        openChat(chatId, null, false);\n\n        if (popup) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateDialogChatId',\n                chatId: 0\n            });\n        }\n    };\n\n    render() {\n        const { t, className, chatId, classes, onOpenSharedMedia, onOpenGroupsInCommon, popup, backButton, onClose } = this.props;\n        const { hasGroupsInCommon } = this.state;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) {\n            return (\n                <div className='chat-details'>\n                    <ChatDetailsHeader onClose={onClose} />\n                    <div ref={this.chatDetailsListRef} className='chat-details-list' />\n                </div>\n            );\n        }\n\n        const username = getChatUsername(chatId);\n        const phoneNumber = getChatPhoneNumber(chatId);\n        const bio = getChatBio(chatId);\n        const isGroup = isGroupChat(chatId);\n        const isMe = isMeChat(chatId);\n\n        const members = getGroupChatMembers(chatId);\n        const users = [];\n        this.members = new Map();\n        members.forEach(member => {\n            const user = UserStore.get(member.user_id);\n            if (user) {\n                this.members.set(user.id, user.id);\n                users.push(user);\n            }\n        });\n\n        const sortedUsers = users.sort((x, y) => {\n            return getUserStatusOrder(y) - getUserStatusOrder(x);\n        });\n        const items = sortedUsers.map(user => (\n            <ListItem button className={classes.listItem} key={user.id}>\n                <UserControl userId={user.id} onSelect={this.handleSelectUser} />\n            </ListItem>\n        ));\n\n        const { photo } = chat;\n\n        return (\n            <div className={classNames('chat-details', className)}>\n                <ChatDetailsHeader chatId={chatId} backButton={backButton} onClose={onClose} onClick={this.handleHeaderClick} />\n                <div ref={this.chatDetailsListRef} className='chat-details-list'>\n                    <div className='chat-details-info'>\n                        <ChatControl chatId={chatId} showStatus={popup} showSavedMessages={!popup} onTileSelect={photo ? this.handleOpenViewer : null} />\n                    </div>\n                    {(username || phoneNumber || bio) && (\n                        <List>\n                            {username && (\n                                <ListItem button className={classes.listItem} onClick={this.handleUsernameHint}>\n                                    <ListItemIcon>\n                                        <AlternateEmailIcon />\n                                    </ListItemIcon>\n                                    <ListItemText\n                                        primary={\n                                            <Typography variant='inherit' noWrap>\n                                                {username}\n                                            </Typography>\n                                        }\n                                    />\n                                </ListItem>\n                            )}\n                            {phoneNumber && (\n                                <>\n                                    <ListItem button className={classes.listItem} onClick={this.handlePhoneHint}>\n                                        <ListItemIcon>\n                                            <CallIcon />\n                                        </ListItemIcon>\n                                        <ListItemText\n                                            primary={\n                                                <Typography variant='inherit' noWrap>\n                                                    {formatPhoneNumber(phoneNumber)}\n                                                </Typography>\n                                            }\n                                        />\n                                    </ListItem>\n                                </>\n                            )}\n                            {bio && (\n                                <ListItem className={classes.listItem}>\n                                    <ListItemIcon>\n                                        <ErrorOutlineIcon className='chat-details-info-icon' />\n                                    </ListItemIcon>\n                                    <ListItemText\n                                        primary={bio}\n                                        style={{ whiteSpace: 'pre-wrap', wordWrap: 'break-word' }}\n                                    />\n                                </ListItem>\n                            )}\n                        </List>\n                    )}\n                    <Divider />\n                    <List>\n                        { !isMe && <NotificationsListItem chatId={chatId} /> }\n                        { isGroup && <MoreListItem chatId={chatId}/> }\n                        { !isGroup && (\n                            <ListItem button className={classes.listItem} onClick={this.handleOpenChat}>\n                                <ListItemText\n                                    inset\n                                    primary={\n                                        <Typography color='primary' variant='inherit' noWrap>\n                                            {t('SendMessage').toUpperCase()}\n                                        </Typography>\n                                    }\n                                />\n                            </ListItem>\n                        )}\n                    </List>\n                    <Divider />\n                    <List>\n                        <ListItem button disabled className={classes.listItem} onClick={onOpenSharedMedia}>\n                            <ListItemIcon>\n                                <PhotoIcon />\n                            </ListItemIcon>\n                            <ListItemText\n                                primary={\n                                    <Typography variant='inherit' noWrap>\n                                        {t('SharedMedia')}\n                                    </Typography>\n                                }\n                            />\n                        </ListItem>\n                        {hasGroupsInCommon && (\n                            <ListItem button className={classes.listItem} onClick={onOpenGroupsInCommon}>\n                                <ListItemText\n                                    inset\n                                    primary={\n                                        <Typography variant='inherit' noWrap>\n                                            {t('GroupsInCommon')}\n                                        </Typography>\n                                    }\n                                />\n                            </ListItem>\n                        )}\n                    </List>\n                    { items.length > 0 && (\n                        <>\n                            <Divider />\n                            <List>{items}</List>\n                        </>\n                    )}\n                </div>\n            </div>\n        );\n    }\n}\n\nChatDetails.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    popup: PropTypes.bool,\n    onClose: PropTypes.func,\n    onOpenSharedMedia: PropTypes.func,\n    onOpenGroupsInCommon: PropTypes.func\n};\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true }),\n    withSnackbar\n);\n\nexport default enhance(ChatDetails);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {IconButton} from '@material-ui/core';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport {withStyles} from '@material-ui/core/styles';\nimport './GroupsInCommonHeader.css'\n\nconst styles = {\n    backIconButton : {\n        margin: '8px -2px 8px 12px',\n    }\n};\n\nclass GroupsInCommonHeader extends React.Component {\n    constructor(props){\n        super(props);\n    }\n\n    render() {\n        const { classes, onClose } = this.props;\n\n        return (\n            <div className='header-master'>\n                <IconButton\n                    className={classes.backIconButton}\n                    onClick={onClose}>\n                    <ArrowBackIcon />\n                </IconButton>\n                <div className='header-status grow cursor-pointer'>\n                    <span className='header-status-content'>Groups in common</span>\n                </div>\n            </div>);\n    }\n}\n\nGroupsInCommonHeader.propTypes = {\n    onClose: PropTypes.func.isRequired\n};\n\nexport default withStyles(styles)(GroupsInCommonHeader);","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from '@material-ui/core/ListItem';\nimport ChatControl from '../Tile/ChatControl';\nimport GroupsInCommonHeader from './GroupsInCommonHeader';\nimport { getChatUserId } from '../../Utils/Chat';\nimport { loadChatsContent } from '../../Utils/File';\nimport { openChat } from '../../Actions/Client';\nimport FileStore from '../../Stores/FileStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './GroupsInCommon.css';\n\nclass GroupsInCommon extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            chatIds: []\n        };\n    }\n\n    componentDidMount() {\n        const { chatId } = this.props;\n\n        const userId = getChatUserId(chatId);\n        if (!userId) return;\n\n        TdLibController.send({\n            '@type': 'getGroupsInCommon',\n            user_id: userId,\n            offset_chat_id: 0,\n            limit: 100\n        }).then(result => {\n            const store = FileStore.getStore();\n            loadChatsContent(store, result.chat_ids);\n\n            this.setState({ chatIds: result.chat_ids });\n        });\n    }\n\n    handleSelect = chat => {\n        const { popup } = this.props;\n\n        openChat(chat.id);\n\n        if (popup) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateDialogChatId',\n                chatId: 0\n            });\n        }\n    };\n\n    render() {\n        const { onClose } = this.props;\n        const { chatIds } = this.state;\n\n        const chats = chatIds.map(x => (\n            <ListItem button key={x}>\n                <ChatControl chatId={x} onSelect={this.handleSelect} />\n            </ListItem>\n        ));\n\n        return (\n            <div className='groups-in-common'>\n                <GroupsInCommonHeader onClose={onClose} />\n                <div className='groups-in-common-list'>{chats}</div>\n            </div>\n        );\n    }\n}\n\nGroupsInCommon.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    onClose: PropTypes.func.isRequired,\n    popup: PropTypes.bool\n};\n\nGroupsInCommon.defaultProps = {\n    popup: false\n};\n\nexport default GroupsInCommon;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport {IconButton} from '@material-ui/core';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport './SharedMediaHeaderControl.css'\n\nconst styles = {\n    backIconButton : {\n        margin: '8px -2px 8px 12px',\n    }\n};\n\nclass SharedMediaHeaderControl extends React.Component {\n\n    constructor(props){\n        super(props);\n    }\n\n    render() {\n        const { classes, close } = this.props;\n\n        return (\n            <div className='header-master'>\n                <IconButton\n                    className={classes.backIconButton}\n                    onClick={close}>\n                    <ArrowBackIcon />\n                </IconButton>\n                <div className='header-status grow cursor-pointer'>\n                    <span className='header-status-content'>Shared Media</span>\n                </div>\n            </div>);\n    }\n}\n\nexport default withStyles(styles)(SharedMediaHeaderControl);","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport SharedMediaHeaderControl from './SharedMediaHeaderControl';\nimport './SharedMedia.css'\n\nclass SharedMedia extends React.Component {\n    state = {\n        value: 0\n    };\n\n    handleChange = (event, value) => {\n        this.setState({ value });\n    };\n\n    render() {\n        const { onClose } = this.props;\n        const { value } = this.state;\n\n        return (\n            <div className='shared-media'>\n                <SharedMediaHeaderControl close={onClose}/>\n                <Tabs\n                    value={value}\n                    onChange={this.handleChange}\n                    indicatorColor='primary'\n                    textColor='primary'\n                    scrollable\n                    scrollButtons='off'\n                    fullWidth>\n                    <Tab label='Media' style={{minWidth: '40px'}}/>\n                    <Tab label='Docs'  style={{minWidth: '40px'}}/>\n                    <Tab label='Links'  style={{minWidth: '40px'}}/>\n                    <Tab label='Audio'  style={{minWidth: '40px'}}/>\n                </Tabs>\n            </div>\n        );\n    }\n}\n\nexport default SharedMedia;","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport ChatDetails from './ChatDetails';\nimport GroupsInCommon from './GroupsInCommon';\nimport SharedMedia from './SharedMedia';\nimport { borderStyle } from '../Theme';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport ChatStore from '../../Stores/ChatStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './ChatInfo.css';\n\n// const styles = (theme) => ({\n//     borderColor: {\n//         borderColor: theme.palette.divider\n//     }\n// });\n\nclass ChatInfo extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { popup } = props;\n\n        this.state = {\n            chatId: popup? ApplicationStore.dialogChatId : ApplicationStore.chatId\n        };\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    onClientUpdateChatId = update => {\n        const { popup } = this.props;\n        if (popup) return;\n\n        this.setState({\n            chatId: update.nextChatId,\n            userChatId: null,\n            openSharedMedia: false,\n            openGroupsInCommon: false\n        });\n    };\n\n    handelOpenSharedMedia = () => {\n        this.setState({ openSharedMedia: true });\n    };\n\n    handleCloseSharedMedia = () => {\n        this.setState({ openSharedMedia: false });\n    };\n\n    handleOpenGroupsInCommon = () => {\n        this.setState({ openGroupsInCommon: true });\n    };\n\n    handleCloseGroupsInCommon = () => {\n        this.setState({ openGroupsInCommon: false });\n    };\n\n    handleCloseChatDetails = () => {\n        const { popup } = this.props;\n        const { userChatId } = this.state;\n        if (userChatId) {\n            this.setState({ userChatId: null });\n        } else if (popup) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateDialogChatId',\n                chatId: 0\n            });\n        } else {\n            ApplicationStore.changeChatDetailsVisibility(false);\n        }\n    };\n\n    handleSelectUser = async user => {\n        if (!user) return;\n\n        let chat = await TdLibController.send({\n            '@type': 'createPrivateChat',\n            user_id: user.id,\n            force: true\n        });\n\n        chat = ChatStore.get(chat.id) || chat;\n        if (!chat) return;\n\n        this.setState({ userChatId: chat.id });\n    };\n\n    render() {\n        const { classes, className, popup } = this.props;\n        const { chatId, userChatId, openSharedMedia, openGroupsInCommon } = this.state;\n        const currentChatId = chatId || userChatId;\n\n        let content = null;\n        if (openSharedMedia) {\n            content = <SharedMedia chatId={currentChatId} popup={popup} onClose={this.handleCloseSharedMedia}/>;\n        } else if (openGroupsInCommon) {\n            content = <GroupsInCommon chatId={currentChatId} popup={popup} onClose={this.handleCloseGroupsInCommon}/>;\n        } else {\n            content = (\n                <ChatDetails\n                    chatId={currentChatId}\n                    popup={popup}\n                    backButton={userChatId === chatId}\n                    onOpenSharedMedia={this.handelOpenSharedMedia}\n                    onOpenGroupsInCommon={this.handleOpenGroupsInCommon}\n                    onClose={this.handleCloseChatDetails}\n                />\n            );\n        }\n\n        return <div className={classNames(classes.borderColor, {'right-column': !popup}, className)}>{content}</div>;\n    }\n}\n\nChatInfo.propTypes = {\n    className: PropTypes.string,\n    classes: PropTypes.object,\n    popup: PropTypes.bool\n};\n\nChatInfo.defaultProps = {\n    className: null,\n    classes: null,\n    popup: false\n};\n\nexport default withStyles(borderStyle)(ChatInfo);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport ChatTileControl from './ChatTileControl';\nimport { getChatShortTitle } from '../../Utils/Chat';\nimport './TopChat.css';\n\nconst styles = {\n    userStatusRoot: {\n        position: 'absolute',\n        right: 1,\n        bottom: 1,\n        zIndex: 1\n    }\n};\n\nclass TopChat extends React.PureComponent {\n    render() {\n        const { classes, chatId, onSelect, showSavedMessages } = this.props;\n\n        const shortTitle = getChatShortTitle(chatId, showSavedMessages);\n\n        return (\n            <div className='top-chat'>\n                <ChatTileControl chatId={chatId} onSelect={onSelect} showSavedMessages={showSavedMessages} showOnline />\n                <div className='top-chat-title'>{shortTitle}</div>\n            </div>\n        );\n    }\n}\n\nTopChat.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    onSelect: PropTypes.func,\n    showSavedMessages: PropTypes.bool\n};\n\nTopChat.defaultProps = {\n    showSavedMessages: true\n};\n\nexport default withStyles(styles)(TopChat);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from '@material-ui/core/ListItem';\nimport { withStyles } from '@material-ui/core/styles';\nimport ChatTileControl from './ChatTileControl';\nimport DialogTitleControl from './DialogTitleControl';\nimport './RecentlyFoundChat.css';\n\nconst styles = {\n    listItem: {\n        padding: '0px'\n    }\n};\n\nclass RecentlyFoundChat extends React.PureComponent {\n    render() {\n        const { chatId, onClick, classes } = this.props;\n\n        return (\n            <ListItem button className={classes.listItem} onClick={onClick}>\n                <div className='recently-found-chat'>\n                    <div className='chat-wrapper'>\n                        <ChatTileControl chatId={chatId} showSavedMessages />\n                        <div className='dialog-inner-wrapper'>\n                            <div className='tile-first-row'>\n                                <DialogTitleControl chatId={chatId} />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </ListItem>\n        );\n    }\n}\n\nRecentlyFoundChat.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    onSelect: PropTypes.func\n};\n\nexport default withStyles(styles)(RecentlyFoundChat);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from '@material-ui/core/ListItem';\nimport { withStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nimport ChatTileControl from './ChatTileControl';\nimport DialogTitleControl from './DialogTitleControl';\nimport { getChatUsername, getGroupChatMembersCount } from '../../Utils/Chat';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport './FoundPublicChat.css';\n\nconst styles = theme => ({\n    listItem: {\n        padding: 0\n    },\n    listItemSelected: {\n        backgroundColor: theme.palette.primary.main + '!important'\n    },\n    foundPublicChatSubtitle: {\n        color: theme.palette.type === 'dark' ? theme.palette.text.secondary : '#70777b'\n    }\n});\n\nclass FoundPublicChat extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            nextChatId: ApplicationStore.getChatId(),\n            previousChatId: null\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId, theme } = this.props;\n\n        if (nextState.nextChatId === chatId) {\n            return true;\n        }\n\n        if (nextState.previousChatId === chatId) {\n            return true;\n        }\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    onClientUpdateChatId = update => {\n        const { nextChatId, previousChatId } = update;\n\n        this.setState({\n            nextChatId: nextChatId,\n            previousChatId: previousChatId\n        });\n    };\n\n    handleClick = () => {\n        const { chatId, onSelect } = this.props;\n        if (!onSelect) return;\n\n        onSelect(chatId);\n    };\n\n    render() {\n        const { chatId, onClick, classes } = this.props;\n        const selectedChatId = this.state.nextChatId;\n\n        const username = getChatUsername(chatId);\n        const membersCount = getGroupChatMembersCount(chatId);\n        let subscribersString = '';\n        if (membersCount > 0) {\n            subscribersString = membersCount === 1 ? ', 1 subscriber' : `, ${membersCount} subscribers`;\n        }\n\n        return (\n            <ListItem button classes={{ root: classes.listItem }} onClick={onClick}>\n                <div\n                    className={classNames('found-public-chat', {\n                        [classes.listItemSelected]: chatId === selectedChatId,\n                        'accent-background': chatId === selectedChatId\n                    })}\n                    onClick={this.handleClick}>\n                    <ChatTileControl chatId={chatId} />\n                    <div className='dialog-inner-wrapper'>\n                        <div className='tile-first-row'>\n                            <DialogTitleControl chatId={chatId} />\n                        </div>\n                        <div className='tile-second-row'>\n                            <div className={classNames('dialog-content', classes.foundPublicChatSubtitle)}>\n                                @{username}\n                                {subscribersString}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </ListItem>\n        );\n    }\n}\n\nFoundPublicChat.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    onClick: PropTypes.func\n};\n\nexport default withStyles(styles, { withTheme: true })(FoundPublicChat);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withTranslation } from 'react-i18next';\nimport { compose } from 'recompose';\nimport ListItem from '@material-ui/core/ListItem';\nimport ChatTileControl from './ChatTileControl';\nimport UserTileControl from './UserTileControl';\nimport DialogTitleControl from './DialogTitleControl';\nimport { getMessageDate, getMessageSenderFullName, getMessageSenderName } from '../../Utils/Chat';\nimport { getContent } from '../../Utils/Message';\nimport MessageStore from '../../Stores/MessageStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport './FoundMessage.css';\n\nconst styles = theme => ({\n    listItem: {\n        padding: 0\n    },\n    accentBackground: {\n        background: theme.palette.primary.main + '!important'\n    },\n    foundMessageSubtitle: {\n        color: theme.palette.type === 'dark' ? theme.palette.text.secondary : '#70777b'\n    }\n});\n\nclass FoundMessage extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            nextChatId: ApplicationStore.getChatId(),\n            nextMessageId: ApplicationStore.getMessageId()\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId, messageId, theme } = this.props;\n\n        if (nextState.nextChatId === chatId && nextState.nextMessageId === messageId) {\n            return true;\n        }\n\n        if (nextState.previousChatId === chatId && nextState.previousMessageId === messageId) {\n            return true;\n        }\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    onClientUpdateChatId = update => {\n        this.setState({\n            ...update\n        });\n    };\n\n    render() {\n        const { chatId, messageId, chatSearch, onClick, classes, t } = this.props;\n        const selectedChatId = this.state.nextChatId;\n        const selectedMessageId = this.state.nextMessageId;\n        const message = MessageStore.get(chatId, messageId);\n\n        const { sender_user_id } = message;\n\n        const date = getMessageDate(message);\n        const senderName = getMessageSenderName(message);\n        const senderFullName = getMessageSenderFullName(message);\n        const content = getContent(message, t) || '\\u00A0';\n\n        const tile =\n            sender_user_id && chatSearch ? (\n                <UserTileControl userId={sender_user_id} />\n            ) : (\n                <ChatTileControl chatId={chatId} />\n            );\n\n        return (\n            <ListItem button className={classes.listItem} onClick={onClick}>\n                <div\n                    className={classNames(\n                        'found-message',\n                        { [classes.accentBackground]: chatId === selectedChatId && messageId === selectedMessageId },\n                        { 'accent-background': chatId === selectedChatId && messageId === selectedMessageId }\n                    )}>\n                    {tile}\n                    <div className='dialog-inner-wrapper'>\n                        <div className='tile-first-row'>\n                            {chatSearch && senderFullName ? (\n                                <div className='dialog-title'>{senderFullName}</div>\n                            ) : (\n                                <DialogTitleControl chatId={chatId} />\n                            )}\n                            <div className={classNames('dialog-meta-date', classes.foundMessageSubtitle)}>{date}</div>\n                        </div>\n                        <div className='tile-second-row'>\n                            <div className={classNames('dialog-content', classes.foundMessageSubtitle)}>\n                                {\n                                    <>\n                                        {!chatSearch && senderName && (\n                                            <span className='dialog-content-accent'>{senderName}: </span>\n                                        )}\n                                        {content}\n                                    </>\n                                }\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </ListItem>\n        );\n    }\n}\n\nFoundMessage.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    chatSearch: PropTypes.bool,\n    onClick: PropTypes.func\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(FoundMessage);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport './SearchCaption.css';\n\nconst styles = theme => ({\n    searchCaption: {\n        background: theme.palette.type === 'dark' ? theme.palette.grey[800] + '!important' : '#f0f4f7',\n        color: theme.palette.type === 'dark' ? theme.palette.text.primary + '!important' : '#8096a8'\n    },\n    searchCaptionCommand: {\n        color: theme.palette.type === 'dark' ? theme.palette.text.primary + '!important' : '#8096a8'\n    }\n});\n\nfunction SearchCaption(props) {\n    const { caption, command, onClick, classes } = props;\n\n    return (\n        <div className={classNames('search-caption', classes.searchCaption)}>\n            <div className='search-caption-title'>{caption}</div>\n            {Boolean(command) && (\n                <a className={classes.searchCaptionCommand} onClick={onClick}>\n                    {command}\n                </a>\n            )}\n        </div>\n    );\n}\n\nSearchCaption.propTypes = {\n    caption: PropTypes.string.isRequired,\n    command: PropTypes.string,\n    onClick: PropTypes.func\n};\n\nexport default withStyles(styles, { withTheme: true })(SearchCaption);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport CloseIcon from '@material-ui/icons/Close';\nimport IconButton from '@material-ui/core/IconButton';\nimport ChatControl from '../../Tile/ChatControl';\nimport TopChat from '../../Tile/TopChat';\nimport RecentlyFoundChat from '../../Tile/RecentlyFoundChat';\nimport FoundPublicChat from '../../Tile/FoundPublicChat';\nimport FoundMessage from '../../Tile/FoundMessage';\nimport SearchCaption from './SearchCaption';\nimport { loadChatsContent, loadUsersContent } from '../../../Utils/File';\nimport { filterMessages } from '../../../Utils/Message';\nimport { getCyrillicInput, getLatinInput } from '../../../Utils/Language';\nimport { orderCompare } from '../../../Utils/Common';\nimport { USERNAME_LENGTH_MIN } from '../../../Constants';\nimport MessageStore from '../../../Stores/MessageStore';\nimport FileStore from '../../../Stores/FileStore';\nimport ChatStore from '../../../Stores/ChatStore';\nimport UserStore from '../../../Stores/UserStore';\nimport ApplicationStore from '../../../Stores/ApplicationStore';\nimport TdLibController from '../../../Controllers/TdLibController';\nimport './Search.css';\n\nconst styles = theme => ({\n    closeSearchIconButton: {\n        margin: '8px 12px 8px 0'\n    },\n    listItem: {\n        padding: '0px'\n    },\n    search: {\n        background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF'\n    }\n});\n\nclass Search extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.listRef = React.createRef();\n\n        const { chatId, text } = this.props;\n\n        this.state = {\n            prevPropsChatId: chatId,\n            prevPropsText: text,\n\n            top: null,\n            recentlyFound: null,\n            local: null,\n            global: null,\n            messages: null\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.chatId !== state.prevPropsChatId || props.text !== state.prevPropsText) {\n            return {\n                prevPropsChatId: props.chatId,\n                prevPropsText: props.text,\n\n                top: null,\n                recentlyFound: null,\n                local: null,\n                global: null,\n                messages: null\n            };\n        }\n\n        return null;\n    }\n\n    componentDidMount() {\n        this.loadContent();\n\n        ApplicationStore.on('clientUpdateSearchText', this.onClientUpdateSearchText);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateSearchText', this.onClientUpdateSearchText);\n    }\n\n    onClientUpdateSearchText = update => {\n        const { text } = update;\n\n        const trimmedText = text.trim();\n\n        if (!trimmedText) {\n            this.loadContent();\n        } else {\n            this.searchText(trimmedText);\n        }\n    };\n\n    concatSearchResults = results => {\n        const arr = [];\n        const map = new Map();\n\n        for (let i = 0; i < results.length; i++) {\n            let result = results[i].chat_ids;\n            if (result) {\n                for (let j = 0; j < result.length; j++) {\n                    if (!map.has(result[j])) {\n                        map.set(result[j], result[j]);\n                        arr.push(result[j]);\n                    }\n                }\n            }\n        }\n\n        arr.sort((a, b) => {\n            return orderCompare(ChatStore.get(b).order, ChatStore.get(a).order);\n        });\n\n        return arr;\n    };\n\n    searchText = async text => {\n        this.sessionId = new Date();\n        this.text = text;\n        const sessionId = this.sessionId;\n        let store = null;\n\n        const { chatId } = this.props;\n        const { savedMessages } = this.state;\n\n        if (!chatId) {\n            const promises = [];\n            const localPromise = TdLibController.send({\n                '@type': 'searchChats',\n                query: text,\n                limit: 100\n            });\n            promises.push(localPromise);\n\n            const latinText = getLatinInput(text);\n            if (latinText) {\n                const latinLocalPromise = TdLibController.send({\n                    '@type': 'searchChats',\n                    query: latinText,\n                    limit: 100\n                });\n                promises.push(latinLocalPromise);\n            }\n\n            const cyrillicText = getCyrillicInput(text);\n            if (cyrillicText) {\n                const cyrillicLocalPromise = TdLibController.send({\n                    '@type': 'searchChats',\n                    query: cyrillicText,\n                    limit: 100\n                });\n                promises.push(cyrillicLocalPromise);\n            }\n\n            const results = await Promise.all(promises.map(x => x.catch(e => null)));\n            const local = this.concatSearchResults(results);\n\n            if (sessionId !== this.sessionId) {\n                return;\n            }\n\n            if (savedMessages) {\n                const { t } = this.props;\n\n                const searchText = text.toUpperCase();\n                const savedMessagesStrings = ['SAVED MESSAGES', t('SavedMessages').toUpperCase()];\n\n                if (\n                    savedMessagesStrings.some(el => el.includes(searchText)) ||\n                    (latinText && savedMessagesStrings.some(el => el.includes(latinText.toUpperCase())))\n                ) {\n                    local.splice(0, 0, savedMessages.id);\n                }\n            }\n\n            this.setState({\n                top: null,\n                recentlyFound: null,\n                local: local,\n                global: null,\n                messages: null\n            });\n\n            store = FileStore.getStore();\n            loadChatsContent(store, local);\n\n            if (text.length >= USERNAME_LENGTH_MIN) {\n                const globalPromises = [];\n\n                const globalPromise = TdLibController.send({\n                    '@type': 'searchPublicChats',\n                    query: text\n                });\n                globalPromises.push(globalPromise);\n\n                if (latinText) {\n                    const globalLatinPromise = TdLibController.send({\n                        '@type': 'searchPublicChats',\n                        query: latinText\n                    });\n                    globalPromises.push(globalLatinPromise);\n                }\n\n                const globalResults = await Promise.all(globalPromises.map(x => x.catch(e => null)));\n                const global = this.concatSearchResults(globalResults);\n\n                if (sessionId !== this.sessionId) {\n                    return;\n                }\n\n                this.setState({\n                    global: global\n                });\n\n                store = FileStore.getStore();\n                loadChatsContent(store, global);\n            }\n        }\n\n        let messages = [];\n        if (chatId) {\n            messages = await TdLibController.send({\n                '@type': 'searchChatMessages',\n                chat_id: chatId,\n                query: text,\n                sender_user_id: 0,\n                from_message_id: 0,\n                offset: 0,\n                limit: 50,\n                filter: null\n            });\n        } else {\n            messages = await TdLibController.send({\n                '@type': 'searchMessages',\n                query: text,\n                offset_date: 0,\n                offset_chat_id: 0,\n                offset_message_id: 0,\n                limit: 50\n            });\n        }\n\n        MessageStore.setItems(messages.messages);\n\n        if (sessionId !== this.sessionId) {\n            return;\n        }\n\n        this.setState({\n            messages: messages\n        });\n\n        const chats = new Map();\n        const users = new Map();\n        for (let i = 0; i < messages.messages.length; i++) {\n            chats.set(messages.messages[i].chat_id, messages.messages[i].chat_id);\n            if (messages.messages[i].sender_user_id) {\n                users.set(messages.messages[i].sender_user_id, messages.messages[i].sender_user_id);\n            }\n        }\n\n        store = FileStore.getStore();\n        loadChatsContent(store, [...chats.keys()]);\n        loadUsersContent(store, [...users.keys()]);\n    };\n\n    loadContent = async () => {\n        const { chatId } = this.props;\n        if (chatId) {\n            this.setState({\n                top: null,\n                recentlyFound: null,\n                local: null,\n                global: null,\n                messages: null\n            });\n\n            return;\n        }\n\n        const topPromise = TdLibController.send({\n            '@type': 'getTopChats',\n            category: { '@type': 'topChatCategoryUsers' },\n            limit: 30\n        }).catch(() => {\n            return { '@type': 'chats', chat_ids: [] };\n        });\n\n        const recentlyFoundPromise = TdLibController.send({\n            '@type': 'searchChats',\n            query: '',\n            limit: 100\n        }).catch(() => {\n            return { '@type': 'chats', chat_ids: [] };\n        });\n\n        const savedMessagesPromise = TdLibController.send({\n            '@type': 'createPrivateChat',\n            user_id: UserStore.getMyId(),\n            force: true\n        }).catch(error => {});\n\n        const [top, recentlyFound, savedMessages] = await Promise.all([\n            topPromise,\n            recentlyFoundPromise,\n            savedMessagesPromise\n        ]);\n\n        this.setState({\n            top: top,\n            recentlyFound: recentlyFound,\n            savedMessages: savedMessages,\n            local: null,\n            global: null,\n            messages: null\n        });\n\n        const store = FileStore.getStore();\n        loadChatsContent(store, top.chat_ids);\n        loadChatsContent(store, recentlyFound.chat_ids);\n    };\n\n    handleRecentlyFound = async () => {\n        const chats = await TdLibController.send({\n            '@type': 'getChats',\n            offset_order: '9223372036854775807',\n            offset_chat_id: 0,\n            limit: 20\n        });\n\n        for (let i = chats.chat_ids.length - 1; i >= 0; i--) {\n            TdLibController.send({\n                '@type': 'addRecentlyFoundChat',\n                chat_id: chats.chat_ids[i]\n            });\n        }\n    };\n\n    handleClearRecentlyFound = event => {\n        event.stopPropagation();\n\n        TdLibController.send({\n            '@type': 'clearRecentlyFoundChats'\n        });\n\n        this.setState({ recentlyFound: null });\n    };\n\n    handleSelectMessage = (chatId, messageId, addToRecent, keepOpen) => {\n        const { onSelectMessage } = this.props;\n\n        if (addToRecent) {\n            TdLibController.send({\n                '@type': 'addRecentlyFoundChat',\n                chat_id: chatId\n            });\n        }\n\n        onSelectMessage(chatId, messageId, keepOpen);\n    };\n\n    handleScroll = () => {\n        const list = this.listRef.current;\n\n        if (list.scrollTop + list.offsetHeight === list.scrollHeight) {\n            this.onLoadPrevious();\n        }\n    };\n\n    getOffset = messages => {\n        const length = messages ? messages.messages.length : 0;\n\n        const offsetDate = length > 0 ? messages.messages[length - 1].date : 0;\n        const offsetChatId = length > 0 ? messages.messages[length - 1].chat_id : 0;\n        const offsetMessageId = length > 0 ? messages.messages[length - 1].id : 0;\n\n        return {\n            offset_date: offsetDate,\n            offset_chat_id: offsetChatId,\n            offset_message_id: offsetMessageId\n        };\n    };\n\n    concatMessages = (messages, result) => {\n        if (!result) return messages;\n        if (!result.messages.length) return messages;\n\n        if (!messages) return result;\n        if (!messages.messages.length) return result;\n\n        return {\n            total_count: result.total_count,\n            messages: messages.messages.concat(result.messages)\n        };\n    };\n\n    onLoadPrevious = async () => {\n        if (this.loading) return;\n\n        const { chatId } = this.props;\n\n        const sessionId = this.sessionId;\n\n        const { messages } = this.state;\n\n        const offset = this.getOffset(messages);\n\n        this.loading = true;\n        let result = [];\n        if (chatId) {\n            result = await TdLibController.send({\n                '@type': 'searchChatMessages',\n                chat_id: chatId,\n                query: this.text,\n                sender_user_id: 0,\n                from_message_id: offset.offset_message_id,\n                limit: 50,\n                filter: null\n            });\n        } else {\n            result = await TdLibController.send({\n                '@type': 'searchMessages',\n                query: this.text,\n                ...offset,\n                limit: 50\n            });\n        }\n        this.loading = false;\n\n        filterMessages(result, messages ? messages.messages : []);\n\n        MessageStore.setItems(result.messages);\n\n        if (sessionId !== this.sessionId) {\n            return;\n        }\n\n        this.setState({\n            messages: this.concatMessages(messages, result)\n        });\n\n        const chats = new Map();\n        const users = new Map();\n        for (let i = 0; i < result.messages.length; i++) {\n            chats.set(result.messages[i].chat_id, result.messages[i].chat_id);\n            if (result.messages[i].sender_user_id) {\n                users.set(result.messages[i].sender_user_id, result.messages[i].sender_user_id);\n            }\n        }\n\n        const store = FileStore.getStore();\n        loadChatsContent(store, [...chats.keys()]);\n        loadUsersContent(store, [...users.keys()]);\n    };\n\n    handleTopChatsScroll = event => {\n        event.stopPropagation();\n    };\n\n    handleClose = () => {\n        const { onClose } = this.props;\n\n        onClose();\n    };\n\n    render() {\n        const { classes, chatId } = this.props;\n        const { top, recentlyFound, local, global, messages } = this.state;\n\n        const chat = ChatStore.get(chatId);\n\n        const topChats =\n            top && top.chat_ids\n                ? top.chat_ids.map(x => (\n                      <TopChat key={x} chatId={x} onSelect={() => this.handleSelectMessage(x, null, false, false)} />\n                  ))\n                : [];\n\n        const recentlyFoundChats =\n            recentlyFound && recentlyFound.chat_ids\n                ? recentlyFound.chat_ids.map(x => (\n                      <RecentlyFoundChat\n                          key={x}\n                          chatId={x}\n                          onClick={() => this.handleSelectMessage(x, null, true, false)}\n                      />\n                  ))\n                : [];\n\n        const localChats = local\n            ? local.map(x => (\n                  <RecentlyFoundChat\n                      key={x}\n                      chatId={x}\n                      onClick={() => this.handleSelectMessage(x, null, true, false)}\n                  />\n              ))\n            : [];\n\n        const globalChats = global\n            ? global.map(x => (\n                  <FoundPublicChat key={x} chatId={x} onClick={() => this.handleSelectMessage(x, null, true, true)} />\n              ))\n            : [];\n\n        const globalMessages =\n            messages && messages.messages\n                ? messages.messages.map(x => (\n                      <FoundMessage\n                          key={`${x.chat_id}_${x.id}`}\n                          chatId={x.chat_id}\n                          messageId={x.id}\n                          chatSearch={Boolean(chatId)}\n                          onClick={() => this.handleSelectMessage(x.chat_id, x.id, false, true)}\n                      />\n                  ))\n                : [];\n\n        let messagesCaption = 'No messages found';\n        if (messages && messages.total_count) {\n            messagesCaption = messages.total_count === 1 ? 'Found 1 message' : `Found ${messages.total_count} messages`;\n        }\n\n        return (\n            <div ref={this.listRef} className={classNames(classes.search, 'search')} onScroll={this.handleScroll}>\n                {chat && (\n                    <div className='search-chat'>\n                        <SearchCaption caption='Search messages in' />\n                        <div className='search-chat-wrapper'>\n                            <div className='search-chat-control'>\n                                <ChatControl chatId={chatId} showStatus={false} />\n                            </div>\n                            <IconButton\n                                className={classes.closeSearchIconButton}\n                                aria-label='Search'\n                                onMouseDown={this.handleClose}>\n                                <CloseIcon />\n                            </IconButton>\n                        </div>\n                    </div>\n                )}\n                {topChats.length > 0 && (\n                    <div className='search-top-chats'>\n                        <SearchCaption caption='People' />\n                        <div className='search-top-chats-list' onScroll={this.handleTopChatsScroll}>\n                            <div className='search-top-chats-placeholder' />\n                            {topChats}\n                            <div className='search-top-chats-placeholder' />\n                        </div>\n                    </div>\n                )}\n                {recentlyFoundChats.length > 0 && (\n                    <div className='search-recently-found-chats'>\n                        <SearchCaption caption='Recent' command='Clear' onClick={this.handleClearRecentlyFound} />\n                        {recentlyFoundChats}\n                    </div>\n                )}\n                {localChats.length > 0 && (\n                    <div className='search-local-chats'>\n                        <SearchCaption caption='Chats and contacts' />\n                        {localChats}\n                    </div>\n                )}\n                {globalChats.length > 0 && (\n                    <div className='search-global-chats'>\n                        <SearchCaption caption='Global search' />\n                        {globalChats}\n                    </div>\n                )}\n                {messages && (\n                    <div className='search-global-chats'>\n                        <SearchCaption caption={messagesCaption} />\n                        {globalMessages}\n                    </div>\n                )}\n            </div>\n        );\n    }\n}\n\nSearch.propTypes = {\n    chatId: PropTypes.number,\n    text: PropTypes.string,\n    onSelectMessage: PropTypes.func.isRequired,\n    onClose: PropTypes.func.isRequired\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(Search);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport { withStyles } from '@material-ui/core/styles';\nimport red from '@material-ui/core/colors/red';\nimport orange from '@material-ui/core/colors/orange';\nimport amber from '@material-ui/core/colors/amber';\nimport green from '@material-ui/core/colors/green';\nimport blue from '@material-ui/core/colors/blue';\nimport indigo from '@material-ui/core/colors/indigo';\nimport deepPurple from '@material-ui/core/colors/deepPurple';\nimport ApplicationStore from '../../Stores/ApplicationStore';\n\nconst styles = theme => ({\n    formControl: {\n        margin: theme.spacing.unit * 3\n    },\n    group: {\n        margin: `${theme.spacing.unit}px 0`\n    },\n    redRoot: {\n        color: red[600],\n        '&$checked': {\n            color: red[500]\n        }\n    },\n    orangeRoot: {\n        color: orange[600],\n        '&$checked': {\n            color: orange[500]\n        }\n    },\n    amberRoot: {\n        color: amber[600],\n        '&$checked': {\n            color: amber[500]\n        }\n    },\n    greenRoot: {\n        color: green[600],\n        '&$checked': {\n            color: green[500]\n        }\n    },\n    blueRoot: {\n        color: blue[600],\n        '&$checked': {\n            color: blue[500]\n        }\n    },\n    indigoRoot: {\n        color: indigo[600],\n        '&$checked': {\n            color: indigo[500]\n        }\n    },\n    deepPurpleRoot: {\n        color: deepPurple[600],\n        '&$checked': {\n            color: deepPurple[500]\n        }\n    },\n    checked: {}\n});\n\nclass ThemePicker extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            open: false,\n            type: this.props.theme.palette.type,\n            color: this.getColorString(this.props.theme.palette.primary.main)\n        };\n    }\n\n    handleChange = event => {\n        this.setState({ type: event.target.value });\n\n        ApplicationStore.emit('clientUpdateThemeChanging', {\n            type: event.target.value,\n            primary: this.getColor(this.state.color)\n        });\n    };\n\n    handleAccentChange = event => {\n        this.setState({ color: event.target.value });\n\n        ApplicationStore.emit('clientUpdateThemeChanging', {\n            type: this.state.type,\n            primary: this.getColor(event.target.value)\n        });\n    };\n\n    getColorString = value => {\n        switch (value) {\n            case red['500']:\n                return 'red';\n            case orange['500']:\n                return 'orange';\n            case amber['500']:\n                return 'amber';\n            case green['500']:\n                return 'green';\n            case blue['500']:\n                return 'blue';\n            case indigo['500']:\n                return 'indigo';\n            case deepPurple['500']:\n                return 'deepPurple';\n        }\n\n        return null;\n    };\n\n    getColor = value => {\n        switch (value) {\n            case 'red':\n                return red;\n            case 'orange':\n                return orange;\n            case 'amber':\n                return amber;\n            case 'green':\n                return green;\n            case 'blue':\n                return blue;\n            case 'indigo':\n                return indigo;\n            case 'deepPurple':\n                return deepPurple;\n        }\n\n        return null;\n    };\n\n    handleClose = () => {\n        this.setState({ open: false });\n    };\n\n    open = () => {\n        this.setState({ open: true });\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { type, color } = this.state;\n\n        return (\n            <Dialog\n                transitionDuration={0}\n                open={this.state.open}\n                onClose={this.handleClose}\n                aria-labelledby='alert-dialog-title'\n                aria-describedby='alert-dialog-description'>\n                <DialogTitle id='alert-dialog-title'>Appearance</DialogTitle>\n                <DialogContent>\n                    <FormControl component='fieldset' className={classes.formControl}>\n                        <FormLabel focused component='legend'>\n                            Theme\n                        </FormLabel>\n                        <RadioGroup\n                            aria-label='theme'\n                            name='theme1'\n                            className={classes.group}\n                            value={type}\n                            onChange={this.handleChange}>\n                            <FormControlLabel value='light' control={<Radio color='primary' />} label='Light' />\n                            <FormControlLabel value='dark' control={<Radio color='primary' />} label='Dark' />\n                        </RadioGroup>\n                    </FormControl>\n                    <FormControl component='fieldset' className={classes.formControl}>\n                        <FormLabel focused component='legend'>\n                            Accent\n                        </FormLabel>\n                        <RadioGroup\n                            aria-label='accent'\n                            name='accent1'\n                            className={classes.group}\n                            value={color}\n                            onChange={this.handleAccentChange}>\n                            <FormControlLabel\n                                value='red'\n                                control={\n                                    <Radio\n                                        classes={{\n                                            root: classes.redRoot,\n                                            checked: classes.checked\n                                        }}\n                                    />\n                                }\n                                label='Red'\n                            />\n                            <FormControlLabel\n                                value='orange'\n                                control={\n                                    <Radio\n                                        classes={{\n                                            root: classes.orangeRoot,\n                                            checked: classes.checked\n                                        }}\n                                    />\n                                }\n                                label='Orange'\n                            />\n                            <FormControlLabel\n                                value='amber'\n                                control={\n                                    <Radio\n                                        classes={{\n                                            root: classes.amberRoot,\n                                            checked: classes.checked\n                                        }}\n                                    />\n                                }\n                                label='Amber'\n                            />\n                            <FormControlLabel\n                                value='green'\n                                control={\n                                    <Radio\n                                        classes={{\n                                            root: classes.greenRoot,\n                                            checked: classes.checked\n                                        }}\n                                    />\n                                }\n                                label='Green'\n                            />\n                            <FormControlLabel\n                                value='blue'\n                                control={\n                                    <Radio\n                                        classes={{\n                                            root: classes.blueRoot,\n                                            checked: classes.checked\n                                        }}\n                                    />\n                                }\n                                label='Blue'\n                            />\n                            <FormControlLabel\n                                value='indigo'\n                                control={\n                                    <Radio\n                                        classes={{\n                                            root: classes.indigoRoot,\n                                            checked: classes.checked\n                                        }}\n                                    />\n                                }\n                                label='Indigo'\n                            />\n                            <FormControlLabel\n                                value='deepPurple'\n                                control={\n                                    <Radio\n                                        classes={{\n                                            root: classes.deepPurpleRoot,\n                                            checked: classes.checked\n                                        }}\n                                    />\n                                }\n                                label='Deep Purple'\n                            />\n                        </RadioGroup>\n                    </FormControl>\n                </DialogContent>\n            </Dialog>\n        );\n    }\n}\n\nThemePicker.propTypes = {};\n\nexport default withStyles(styles, { withTheme: true })(ThemePicker);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'recompose';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withTranslation } from 'react-i18next';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport { withRestoreRef, withSaveRef } from '../../Utils/HOC';\nimport TdLibController from '../../Controllers/TdLibController';\nimport LocalizationStore from '../../Stores/LocalizationStore';\n\nconst styles = theme => ({\n    formControl: {\n        margin: theme.spacing.unit * 3\n    },\n    group: {\n        margin: `${theme.spacing.unit}px 0`\n    }\n});\n\nclass LanguagePicker extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { i18n } = props;\n        const language = i18n ? i18n.language : null;\n\n        this.state = {\n            open: false,\n            language: language || 'en'\n        };\n    }\n\n    handleChange = event => {\n        this.setState({ language: event.target.value });\n\n        TdLibController.clientUpdate({ '@type': 'clientUpdateLanguageChange', language: event.target.value });\n    };\n\n    handleClose = () => {\n        this.setState({ open: false });\n    };\n\n    open = () => {\n        this.setState({ open: true });\n    };\n\n    render() {\n        const { classes, t } = this.props;\n        const { open, language } = this.state;\n        const info = LocalizationStore.info || { language_packs: [] };\n\n        const languages = info.language_packs.map(x => (\n            <FormControlLabel\n                key={x.id}\n                value={x.id}\n                control={<Radio color='primary' />}\n                label={`${x.name}\\xa0(${x.native_name})`}\n            />\n        ));\n\n        return (\n            <Dialog\n                transitionDuration={0}\n                open={open}\n                onClose={this.handleClose}\n                aria-labelledby='language-dialog-title'\n                aria-describedby='language-dialog-description'>\n                <DialogTitle id='language-dialog-title'>{t('Language')}</DialogTitle>\n                <DialogContent>\n                    <FormControl component='fieldset'>\n                        <RadioGroup\n                            aria-label='language'\n                            name='language1'\n                            value={language}\n                            onChange={this.handleChange}>\n                            {languages}\n                        </RadioGroup>\n                    </FormControl>\n                </DialogContent>\n            </Dialog>\n        );\n    }\n}\n\nLanguagePicker.propTypes = {};\n\nconst enhance = compose(\n    withSaveRef(),\n    withTranslation(),\n    withStyles(styles, { withTheme: true }),\n    withRestoreRef()\n);\n\nexport default enhance(LanguagePicker);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { arrayBufferToBase64 } from './Utils/Common';\nimport Cookies from 'universal-cookie';\nimport { FIRST_START_OPTIMIZATIONS } from './Constants';\nimport ApplicationStore from './Stores/ApplicationStore';\nimport TdLibController from './Controllers/TdLibController';\n\n// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n        // [::1] is the IPv6 localhost address.\n        window.location.hostname === '[::1]' ||\n        // 127.0.0.1/8 is considered localhost for IPv4.\n        window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport default async function register() {\n    console.log('[SW] Register');\n\n    if (FIRST_START_OPTIMIZATIONS) {\n        const cookies = new Cookies();\n        cookies.set('register', true);\n    }\n\n    if ('serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n            return;\n        }\n\n        const serviceWorkerName =\n            process.env.NODE_ENV === 'production' ? 'service-worker.js' : 'custom-service-worker.js';\n        const swUrl = `${process.env.PUBLIC_URL}/${serviceWorkerName}`;\n        console.log(`[SW] Service worker url: ${swUrl}`);\n\n        if (!isLocalhost) {\n            // Is not local host. Just register service worker\n            await registerValidSW(swUrl);\n        } else {\n            // This is running on localhost. Lets check if a service worker still exists or not.\n            await checkValidServiceWorker(swUrl);\n        }\n    }\n}\n\nasync function registerValidSW(swUrl) {\n    console.log('[SW] RegisterValidSW');\n    try {\n        const registration = await navigator.serviceWorker.register(swUrl);\n        registration.onupdatefound = () => {\n            const installingWorker = registration.installing;\n            installingWorker.onstatechange = () => {\n                if (installingWorker.state === 'installed') {\n                    if (navigator.serviceWorker.controller) {\n                        // At this point, the old content will have been purged and\n                        // the fresh content will have been added to the cache.\n                        // It's the perfect time to display a \"New content is\n                        // available; please refresh.\" message in your web app.\n                        console.log('[SW] New content is available; please refresh.');\n\n                        ApplicationStore.emit('clientUpdateNewContentAvailable');\n                    } else {\n                        // At this point, everything has been precached.\n                        // It's the perfect time to display a\n                        // \"Content is cached for offline use.\" message.\n                        console.log('[SW] Content is cached for offline use.');\n                    }\n                }\n            };\n        };\n\n        await subscribeNotifications(registration);\n    } catch (error) {\n        console.error('[SW] Error during service worker registration: ', error);\n    }\n}\n\nasync function subscribeNotifications(registration) {\n    try {\n        let pushSubscription = await registration.pushManager.getSubscription();\n        if (pushSubscription) await pushSubscription.unsubscribe();\n\n        pushSubscription = await registration.pushManager.subscribe({ userVisibleOnly: true });\n        console.log('[SW] Received PushSubscription: ', JSON.stringify(pushSubscription));\n\n        const { endpoint } = pushSubscription;\n        const p256dh_base64url = arrayBufferToBase64(pushSubscription.getKey('p256dh'));\n        const auth_base64url = arrayBufferToBase64(pushSubscription.getKey('auth'));\n\n        if (endpoint && p256dh_base64url && auth_base64url) {\n            const { authorizationState } = ApplicationStore;\n            if (authorizationState && authorizationState['@type'] === 'authorizationStateReady') {\n                await TdLibController.send({\n                    '@type': 'registerDevice',\n                    device_token: {\n                        '@type': 'deviceTokenWebPush',\n                        endpoint: endpoint,\n                        p256dh_base64url: p256dh_base64url,\n                        auth_base64url: auth_base64url\n                    },\n                    other_user_ids: []\n                });\n            }\n        }\n    } catch (error) {\n        console.error('[SW] Error during service worker push subscription: ', error);\n    }\n}\n\nasync function checkValidServiceWorker(swUrl) {\n    console.log('[SW] CheckValidServiceWorker');\n    // Check if the service worker can be found. If it can't reload the page.\n    try {\n        const response = await fetch(swUrl);\n\n        // Ensure service worker exists, and that we really are getting a JS file.\n        if (response.status === 404 || response.headers.get('content-type').indexOf('javascript') === -1) {\n            // No service worker found. Probably a different app. Reload the page.\n            const registration = await navigator.serviceWorker.ready;\n            await registration.unregister();\n\n            window.location.reload();\n        } else {\n            // Service worker found. Proceed as normal.\n            await registerValidSW(swUrl);\n        }\n    } catch (error) {\n        console.log('[SW] No internet connection found. App is running in offline mode.');\n    }\n}\n\nexport async function unregister() {\n    if ('serviceWorker' in navigator) {\n        let registration = await navigator.serviceWorker.ready;\n\n        await registration.unregister();\n    }\n}\n\nexport async function update() {\n    if ('serviceWorker' in navigator) {\n        let registration = await navigator.serviceWorker.ready;\n\n        await registration.update();\n    }\n}\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withTranslation } from 'react-i18next';\nimport { compose } from 'recompose';\nimport ThemePicker from './ThemePicker';\nimport LanguagePicker from './LanguagePicker';\nimport { update } from '../../registerServiceWorker';\nimport { isAuthorizationReady } from '../../Utils/Common';\nimport ApplicationStore from '../../Stores/ApplicationStore';\n\nconst styles = {\n    menuIconButton: {\n        margin: '8px -2px 8px 12px'\n    },\n    searchIconButton: {\n        margin: '8px 12px 8px 0'\n    }\n};\n\nconst menuAnchorOrigin = {\n    vertical: 'bottom',\n    horizontal: 'left'\n};\n\nclass MainMenuButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            authorizationState: ApplicationStore.getAuthorizationState(),\n            anchorEl: null\n        };\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('updateAuthorizationState', this.onUpdateAuthorizationState);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('updateAuthorizationState', this.onUpdateAuthorizationState);\n    }\n\n    onUpdateAuthorizationState = update => {\n        this.setState({ authorizationState: update.authorization_state });\n    };\n\n    handleMenuOpen = event => {\n        const { authorizationState } = this.state;\n        if (!isAuthorizationReady(authorizationState)) return;\n\n        this.setState({ anchorEl: event.currentTarget });\n    };\n\n    handleMenuClose = () => {\n        this.setState({ anchorEl: null });\n    };\n\n    handleLogOut = () => {\n        this.handleMenuClose();\n\n        this.props.onLogOut();\n    };\n\n    handleCheckUpdates = async () => {\n        this.handleMenuClose();\n\n        await update();\n    };\n\n    handleAppearance = event => {\n        this.handleMenuClose();\n\n        this.themePicker.open();\n    };\n\n    handleLanguage = event => {\n        this.handleMenuClose();\n\n        this.languagePicker.open();\n    };\n\n    setRef = ref => {\n        console.log(this);\n        this.languagePicker = ref;\n    };\n\n    render() {\n        const { classes, t } = this.props;\n        const { anchorEl, authorizationState } = this.state;\n\n        const mainMenuControl = isAuthorizationReady(authorizationState) ? (\n            <>\n                <Menu\n                    id='main-menu'\n                    anchorEl={anchorEl}\n                    open={Boolean(anchorEl)}\n                    onClose={this.handleMenuClose}\n                    getContentAnchorEl={null}\n                    disableAutoFocusItem\n                    disableRestoreFocus={true}\n                    anchorOrigin={menuAnchorOrigin}>\n                    <MenuItem onClick={this.handleCheckUpdates}>{t('UpdateTelegram')}</MenuItem>\n                    <MenuItem onClick={this.handleAppearance}>{t('Appearance')}</MenuItem>\n                    <MenuItem onClick={this.handleLanguage}>{t('Language')}</MenuItem>\n                    <MenuItem onClick={this.handleLogOut}>{t('LogOut')}</MenuItem>\n                </Menu>\n            </>\n        ) : null;\n\n        return (\n            <>\n                <IconButton\n                    aria-owns={anchorEl ? 'simple-menu' : null}\n                    aria-haspopup='true'\n                    className={classes.menuIconButton}\n                    aria-label='Menu'\n                    onClick={this.handleMenuOpen}>\n                    <MenuIcon />\n                </IconButton>\n                {mainMenuControl}\n                <ThemePicker innerRef={ref => (this.themePicker = ref)} />\n                <LanguagePicker ref={ref => (this.languagePicker = ref)} />\n            </>\n        );\n    }\n}\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(MainMenuButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withTranslation } from 'react-i18next';\nimport { compose } from 'recompose';\nimport {\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogContentText,\n    DialogTitle,\n    Button,\n    IconButton\n} from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\nimport CloseIcon from '@material-ui/icons/Close';\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\nimport MainMenuButton from './MainMenuButton';\nimport { debounce, isAuthorizationReady, throttle } from '../../Utils/Common';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport '../ColumnMiddle/Header.css';\n\nconst styles = {\n    headerIconButton: {\n        margin: '8px 12px 8px 0'\n    },\n    dialogText: {\n        whiteSpace: 'pre-wrap'\n    }\n};\n\nclass DialogsHeader extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.searchInput = React.createRef();\n\n        this.state = {\n            authorizationState: ApplicationStore.getAuthorizationState(),\n            open: false\n        };\n\n        this.handleInput = debounce(this.handleInput, 250);\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (this.props.openSearch && this.props.openSearch !== prevProps.openSearch) {\n            setTimeout(() => {\n                if (this.searchInput.current) {\n                    this.searchInput.current.focus();\n                }\n            }, 250);\n        }\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('updateAuthorizationState', this.onUpdateAuthorizationState);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('updateAuthorizationState', this.onUpdateAuthorizationState);\n    }\n\n    onUpdateAuthorizationState = update => {\n        this.setState({ authorizationState: update.authorization_state });\n    };\n\n    handleLogOut = () => {\n        this.setState({ open: true });\n    };\n\n    handleDone = () => {\n        this.handleClose();\n        TdLibController.logOut();\n    };\n\n    handleClose = () => {\n        this.setState({ open: false });\n    };\n\n    handleSearch = () => {\n        const { onSearch, openSearch } = this.props;\n        const { authorizationState } = this.state;\n        if (!isAuthorizationReady(authorizationState)) return;\n\n        onSearch(!openSearch);\n    };\n\n    handleKeyDown = event => {\n        if (event.keyCode === 13) {\n            event.preventDefault();\n        }\n    };\n\n    handleKeyUp = () => {\n        const innerText = this.searchInput.current.innerText;\n        const innerHTML = this.searchInput.current.innerHTML;\n\n        if (innerHTML && (innerHTML === '<br>' || innerHTML === '<div><br></div>')) {\n            this.searchInput.current.innerHTML = '';\n        }\n\n        ApplicationStore.emit('clientUpdateSearchText', { text: innerText });\n    };\n\n    handlePaste = event => {\n        const plainText = event.clipboardData.getData('text/plain');\n        if (plainText) {\n            event.preventDefault();\n            document.execCommand('insertHTML', false, plainText);\n        }\n    };\n\n    render() {\n        const { classes, onClick, openSearch, t } = this.props;\n        const { open } = this.state;\n\n        const confirmLogoutDialog = open ? (\n            <Dialog transitionDuration={0} open={open} onClose={this.handleClose} aria-labelledby='form-dialog-title'>\n                <DialogTitle id='form-dialog-title'>{t('AppName')}</DialogTitle>\n                <DialogContent>\n                    <DialogContentText className={classes.dialogText}>{t('AreYouSureLogout')}</DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={this.handleClose} color='primary'>\n                        {t('Cancel')}\n                    </Button>\n                    <Button onClick={this.handleDone} color='primary'>\n                        {t('Ok')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        ) : null;\n\n        return (\n            <div className='header-master'>\n                {!openSearch ? (\n                    <>\n                        <MainMenuButton onLogOut={this.handleLogOut} />\n                        {confirmLogoutDialog}\n                        <div className='header-status grow cursor-pointer' onClick={onClick}>\n                            <span className='header-status-content'>{t('AppName')}</span>\n                        </div>\n                    </>\n                ) : (\n                    <>\n                        <div className='header-search-input grow'>\n                            <div\n                                id='header-search-inputbox'\n                                ref={this.searchInput}\n                                placeholder={t('Search')}\n                                key={Date()}\n                                contentEditable\n                                suppressContentEditableWarning\n                                onKeyDown={this.handleKeyDown}\n                                onKeyUp={this.handleKeyUp}\n                                onPaste={this.handlePaste}\n                            />\n                        </div>\n                    </>\n                )}\n                <IconButton\n                    className={classes.headerIconButton}\n                    aria-label={t('Search')}\n                    onMouseDown={this.handleSearch}>\n                    <SpeedDialIcon open={openSearch} icon={<SearchIcon />} openIcon={<CloseIcon />} />\n                </IconButton>\n            </div>\n        );\n    }\n}\n\nDialogsHeader.propTypes = {\n    openSearch: PropTypes.bool.isRequired,\n    onClick: PropTypes.func.isRequired,\n    onSearch: PropTypes.func.isRequired,\n    onSearchTextChange: PropTypes.func.isRequired\n};\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles)\n);\n\nexport default enhance(DialogsHeader);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport {\n    getChatTypingString,\n    getChatDraft,\n    getLastMessageSenderName,\n    getLastMessageContent,\n    showChatDraft\n} from '../../Utils/Chat';\nimport ChatStore from '../../Stores/ChatStore';\nimport './DialogContentControl.css';\n\nclass DialogContentControl extends React.Component {\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextProps.chatId !== this.props.chatId) {\n            return true;\n        }\n\n        if (nextProps.t !== this.props.t) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ChatStore.on('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.on('clientUpdateClearHistory', this.onClientUpdateClearHistory);\n        ChatStore.on('updateChatDraftMessage', this.onUpdate);\n        ChatStore.on('updateChatLastMessage', this.onUpdate);\n        ChatStore.on('updateChatReadInbox', this.onUpdate);\n        ChatStore.on('updateUserChatAction', this.onUpdate);\n    }\n\n    componentWillUnmount() {\n        ChatStore.removeListener('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.removeListener('clientUpdateClearHistory', this.onClientUpdateClearHistory);\n        ChatStore.removeListener('updateChatDraftMessage', this.onUpdate);\n        ChatStore.removeListener('updateChatLastMessage', this.onUpdate);\n        ChatStore.removeListener('updateChatReadInbox', this.onUpdate);\n        ChatStore.removeListener('updateUserChatAction', this.onUpdate);\n    }\n\n    onClientUpdateClearHistory = update => {\n        const { chatId } = this.props;\n\n        if (chatId === update.chatId) {\n            this.clearHistory = update.inProgress;\n            this.forceUpdate();\n        }\n    };\n\n    onFastUpdatingComplete = update => {\n        this.forceUpdate();\n    };\n\n    onUpdate = update => {\n        const { chatId } = this.props;\n\n        if (chatId !== update.chat_id) return;\n\n        this.forceUpdate();\n    };\n\n    render() {\n        const { chatId, t } = this.props;\n\n        if (this.clearHistory) return <div className='dialog-content'>{'\\u00A0'}</div>;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return <div className='dialog-content'>{'\\u00A0'}</div>;\n\n        let contentControl = null;\n        const typingString = getChatTypingString(chatId);\n        if (typingString) {\n            contentControl = <span className='dialog-content-accent'>{typingString}</span>;\n        }\n\n        if (!contentControl) {\n            const draft = getChatDraft(chatId);\n            if (showChatDraft(chatId)) {\n                const text = draft.text || '\\u00A0';\n\n                contentControl = (\n                    <>\n                        <span className='dialog-content-draft'>{t('Draft') + ': '}</span>\n                        {text}\n                    </>\n                );\n            }\n        }\n\n        if (!contentControl) {\n            const content = getLastMessageContent(chat, t) || '\\u00A0';\n            const senderName = getLastMessageSenderName(chat);\n            contentControl = (\n                <>\n                    {senderName && <span className='dialog-content-accent'>{senderName}: </span>}\n                    {content}\n                </>\n            );\n        }\n\n        return <div className='dialog-content'>{contentControl}</div>;\n    }\n}\n\nexport default withTranslation()(DialogContentControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n    getChatMuteFor,\n    getChatUnreadCount,\n    getChatUnreadMentionCount,\n    getChatUnreadMessageIcon,\n    isChatMuted,\n    showChatDraft\n} from '../../Utils/Chat';\nimport ChatStore from '../../Stores/ChatStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport './DialogBadgeControl.css';\n\nconst styles = theme => ({\n    dialogBadge: {\n        background: theme.palette.primary.main\n    }\n});\n\nclass DialogBadgeControl extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextProps.chatId !== this.props.chatId) {\n            return true;\n        }\n        if (nextProps.theme !== this.props.theme) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ChatStore.on('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.on('clientUpdateClearHistory', this.onClientUpdateClearHistory);\n        ChatStore.on('updateChatDraftMessage', this.onUpdate);\n        ChatStore.on('updateChatIsMarkedAsUnread', this.onUpdate);\n        ChatStore.on('updateChatIsPinned', this.onUpdate);\n        ChatStore.on('updateChatNotificationSettings', this.onUpdate);\n        ChatStore.on('updateChatReadInbox', this.onUpdate);\n        ChatStore.on('updateChatReadOutbox', this.onUpdate);\n        ChatStore.on('updateChatUnreadMentionCount', this.onUpdate);\n        ApplicationStore.on('updateScopeNotificationSettings', this.onUpdateScopeNotificationSettings);\n    }\n\n    componentWillUnmount() {\n        ChatStore.removeListener('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.removeListener('clientUpdateClearHistory', this.onClientUpdateClearHistory);\n        ChatStore.removeListener('updateChatDraftMessage', this.onUpdate);\n        ChatStore.removeListener('updateChatIsMarkedAsUnread', this.onUpdate);\n        ChatStore.removeListener('updateChatIsPinned', this.onUpdate);\n        ChatStore.removeListener('updateChatNotificationSettings', this.onUpdate);\n        ChatStore.removeListener('updateChatReadInbox', this.onUpdate);\n        ChatStore.removeListener('updateChatReadOutbox', this.onUpdate);\n        ChatStore.removeListener('updateChatUnreadMentionCount', this.onUpdate);\n        ApplicationStore.removeListener('updateScopeNotificationSettings', this.onUpdateScopeNotificationSettings);\n    }\n\n    onClientUpdateClearHistory = update => {\n        const { chatId } = this.props;\n\n        if (chatId === update.chatId) {\n            this.clearHistory = update.inProgress;\n            this.forceUpdate();\n        }\n    };\n\n    onFastUpdatingComplete = update => {\n        this.forceUpdate();\n    };\n\n    onUpdate = update => {\n        const { chatId } = this.props;\n\n        if (update.chat_id !== chatId) return;\n\n        this.forceUpdate();\n    };\n\n    onUpdateScopeNotificationSettings = update => {\n        const { chatId } = this.props;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        switch (update.scope['@type']) {\n            case 'notificationSettingsScopeGroupChats': {\n                if (chat.type['@type'] === 'chatTypeBasicGroup' || chat.type['@type'] === 'chatTypeSupergroup') {\n                    this.forceUpdate();\n                }\n                break;\n            }\n            case 'notificationSettingsScopePrivateChats': {\n                if (chat.type['@type'] === 'chatTypePrivate' || chat.type['@type'] === 'chatTypeSecret') {\n                    this.forceUpdate();\n                }\n                break;\n            }\n        }\n    };\n\n    render() {\n        if (this.clearHistory) return null;\n\n        const { classes, chatId } = this.props;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return null;\n\n        const { draft_message } = chat;\n\n        const unreadMessageIcon = getChatUnreadMessageIcon(chat);\n        const unreadCount = getChatUnreadCount(chat);\n        const unreadMentionCount = getChatUnreadMentionCount(chat);\n        const showUnreadCount = unreadCount > 1 || (unreadCount === 1 && unreadMentionCount < 1);\n        const showDraftChat = showChatDraft(chat.id);\n        const muteClassName = isChatMuted(chat) ? 'dialog-badge-muted' : '';\n\n        return (\n            <>\n                {unreadMessageIcon && !showDraftChat && <i className='dialog-badge-unread' />}\n                {unreadMentionCount && (\n                    <div className={classNames('dialog-badge', classes.dialogBadge)}>\n                        <div className='dialog-badge-mention'>@</div>\n                    </div>\n                )}\n                {showUnreadCount ? (\n                    <div className={classNames(muteClassName, 'dialog-badge', classes.dialogBadge)}>\n                        <span className='dialog-badge-text'>{unreadCount}</span>\n                    </div>\n                ) : chat.is_pinned && !unreadMessageIcon ? (\n                    <i className='dialog-badge-pinned' />\n                ) : null}\n            </>\n        );\n    }\n}\n\nexport default withStyles(styles, { withTheme: true })(DialogBadgeControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { getLastMessageDate } from '../../Utils/Chat';\nimport ChatStore from '../../Stores/ChatStore';\nimport './DialogMetaControl.css';\n\nclass DialogMetaControl extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextProps.chatId !== this.props.chatId) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ChatStore.on('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.on('clientUpdateClearHistory', this.onClientUpdateClearHistory);\n        ChatStore.on('updateChatDraftMessage', this.onUpdate);\n        ChatStore.on('updateChatLastMessage', this.onUpdate);\n        ChatStore.on('updateChatReadInbox', this.onUpdate);\n        ChatStore.on('updateChatUnreadMentionCount', this.onUpdate);\n        ChatStore.on('updateMessageMentionRead', this.onUpdate);\n    }\n\n    componentWillUnmount() {\n        ChatStore.removeListener('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.removeListener('clientUpdateClearHistory', this.onClientUpdateClearHistory);\n        ChatStore.removeListener('updateChatDraftMessage', this.onUpdate);\n        ChatStore.removeListener('updateChatLastMessage', this.onUpdate);\n        ChatStore.removeListener('updateChatReadInbox', this.onUpdate);\n        ChatStore.removeListener('updateChatUnreadMentionCount', this.onUpdate);\n        ChatStore.removeListener('updateMessageMentionRead', this.onUpdate);\n    }\n\n    onClientUpdateClearHistory = update => {\n        const { chatId } = this.props;\n\n        if (chatId === update.chatId) {\n            this.clearHistory = update.inProgress;\n            this.forceUpdate();\n        }\n    };\n\n    onFastUpdatingComplete = update => {\n        this.forceUpdate();\n    };\n\n    onUpdate = update => {\n        const { chatId } = this.props;\n\n        if (chatId !== update.chat_id) return;\n\n        this.forceUpdate();\n    };\n\n    render() {\n        if (this.clearHistory) return null;\n\n        const { chatId } = this.props;\n\n        const chat = ChatStore.get(chatId);\n        const date = getLastMessageDate(chat);\n\n        return <>{date && <div className='dialog-meta-date'>{date}</div>}</>;\n    }\n}\nexport default DialogMetaControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport ChatTileControl from './ChatTileControl';\nimport DialogContentControl from './DialogContentControl';\nimport DialogBadgeControl from './DialogBadgeControl';\nimport DialogTitleControl from './DialogTitleControl';\nimport DialogMetaControl from './DialogMetaControl';\nimport { openChat } from '../../Actions/Client';\nimport ChatStore from '../../Stores/ChatStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport './DialogControl.css';\n\nconst styles = theme => ({\n    statusRoot: {\n        position: 'absolute',\n        right: 1,\n        bottom: 1,\n        zIndex: 1\n    },\n    statusIcon: {},\n    dialogActive: {\n        color: '#fff', //theme.palette.primary.contrastText,\n        backgroundColor: theme.palette.primary.main,\n        borderRadius: 8,\n        cursor: 'pointer',\n        margin: '0 12px',\n        '& $statusRoot': {\n            background: theme.palette.primary.main\n        }\n    },\n    dialog: {\n        borderRadius: 8,\n        cursor: 'pointer',\n        margin: '0 12px',\n        '&:hover': {\n            backgroundColor: theme.palette.primary.main + '22',\n            '& $statusRoot': {\n                background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF'\n            },\n            '& $statusIcon': {\n                background: theme.palette.primary.main + '22'\n            }\n        }\n    }\n});\n\nclass DialogControl extends Component {\n    constructor(props) {\n        super(props);\n\n        this.dialog = React.createRef();\n\n        const chat = ChatStore.get(this.props.chatId);\n        this.state = {\n            chat: chat\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextProps.chatId !== this.props.chatId) {\n            return true;\n        }\n\n        if (nextProps.theme !== this.props.theme) {\n            return true;\n        }\n\n        if (nextProps.hidden !== this.props.hidden) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    onClientUpdateChatId = update => {\n        const { chatId } = this.props;\n\n        if (chatId === update.previousChatId || chatId === update.nextChatId) {\n            this.forceUpdate();\n        }\n    };\n\n    handleSelect = () => {\n        openChat(this.props.chatId);\n    };\n\n    render() {\n        const { classes, chatId, showSavedMessages, hidden } = this.props;\n\n        if (hidden) return null;\n\n        const currentChatId = ApplicationStore.getChatId();\n        const isSelected = currentChatId === chatId;\n\n        return (\n            <div\n                ref={this.dialog}\n                className={classNames(\n                    isSelected ? classes.dialogActive : classes.dialog,\n                    isSelected ? 'dialog-active' : 'dialog'\n                )}\n                onMouseDown={this.handleSelect}>\n                <div className='dialog-wrapper'>\n                    <ChatTileControl\n                        chatId={chatId}\n                        showSavedMessages={showSavedMessages}\n                        showOnline\n                        classes={{ statusRoot: classes.statusRoot, statusIcon: classes.statusIcon }}\n                    />\n                    <div className='dialog-inner-wrapper'>\n                        <div className='tile-first-row'>\n                            <DialogTitleControl chatId={chatId} />\n                            <DialogMetaControl chatId={chatId} />\n                        </div>\n                        <div className='tile-second-row'>\n                            <DialogContentControl chatId={chatId} />\n                            <DialogBadgeControl chatId={chatId} />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nDialogControl.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    hidden: PropTypes.bool,\n    showSavedMessages: PropTypes.bool\n};\n\nDialogControl.defaultProps = {\n    hidden: false,\n    showSavedMessages: true\n};\n\nexport default withStyles(styles, { withTheme: true })(DialogControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { Scrollbars } from 'react-custom-scrollbars';\nimport DialogControl from '../Tile/DialogControl';\nimport { CHAT_SLICE_LIMIT } from '../../Constants';\nimport { loadChatsContent } from '../../Utils/File';\nimport { itemsInView, orderCompare, throttle } from '../../Utils/Common';\nimport ChatStore from '../../Stores/ChatStore';\nimport BasicGroupStore from '../../Stores/BasicGroupStore';\nimport SupergroupStore from '../../Stores/SupergroupStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport FileStore from '../../Stores/FileStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './DialogsList.css';\n\nclass DialogsList extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.hiddenChats = new Map();\n\n        this.listRef = React.createRef();\n\n        this.state = {\n            chats: [],\n            authorizationState: ApplicationStore.getAuthorizationState(),\n            connectionState: ApplicationStore.getConnectionState()\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextState.chats !== this.state.chats) {\n            return true;\n        }\n\n        return false;\n    }\n\n    getSnapshotBeforeUpdate(prevProps, prevState) {\n        const { current: list } = this.listRef;\n\n        return { scrollTop: list.scrollTop };\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { current: list } = this.listRef;\n        const { scrollTop } = snapshot;\n\n        list.scrollTop = scrollTop;\n    }\n\n    componentDidMount() {\n        this.loadFirstSlice();\n\n        ApplicationStore.on('updateAuthorizationState', this.onUpdateAuthorizationState);\n        // ApplicationStore.on('updateConnectionState', this.onUpdateConnectionState);\n        ChatStore.on('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.on('updateChatDraftMessage', this.onUpdate);\n        ChatStore.on('updateChatIsPinned', this.onUpdate);\n        ChatStore.on('updateChatLastMessage', this.onUpdate);\n        ChatStore.on('updateChatOrder', this.onUpdateChatOrder);\n        ChatStore.on('clientUpdateLeaveChat', this.onClientUpdateLeaveChat);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('updateAuthorizationState', this.onUpdateAuthorizationState);\n        // ApplicationStore.removeListener('updateConnectionState', this.onUpdateConnectionState);\n        ChatStore.removeListener('clientUpdateFastUpdatingComplete', this.onFastUpdatingComplete);\n        ChatStore.removeListener('updateChatDraftMessage', this.onUpdate);\n        ChatStore.removeListener('updateChatIsPinned', this.onUpdate);\n        ChatStore.removeListener('updateChatLastMessage', this.onUpdate);\n        ChatStore.removeListener('updateChatOrder', this.onUpdateChatOrder);\n        ChatStore.removeListener('clientUpdateLeaveChat', this.onClientUpdateLeaveChat);\n    }\n\n    onClientUpdateLeaveChat = update => {\n        if (update.inProgress) {\n            this.hiddenChats.set(update.chatId, update.chatId);\n        } else {\n            this.hiddenChats.delete(update.chatId);\n        }\n\n        this.forceUpdate();\n    };\n\n    onUpdateAuthorizationState = update => {\n        const { authorization_state } = update;\n\n        this.setState({ authorizationState: authorization_state }, () => this.loadFirstSlice());\n    };\n\n    onFastUpdatingComplete = update => {\n        this.onLoadNext(true);\n        // this.setState({ chats: [] }, () => this.onLoadNext(true));\n    };\n\n    onUpdateConnectionState = update => {\n        console.log(this);\n        const newConnectionState = update.state;\n        const { connectionState } = this.state;\n\n        this.setState({ connectionState: newConnectionState });\n\n        const updatingCompleted =\n            connectionState &&\n            connectionState['@type'] === 'connectionStateUpdating' &&\n            newConnectionState['@type'] !== 'connectionStateUpdating';\n        if (!updatingCompleted) return;\n\n        const hasSkippedUpdates = ChatStore.skippedUpdates.length > 0;\n        if (!hasSkippedUpdates) return;\n\n        ChatStore.skippedUpdates = [];\n        this.setState({ chats: [] }, () => this.onLoadNext(true));\n    };\n\n    loadFirstSlice = async () => {\n        const { authorizationState } = this.state;\n        if (authorizationState && authorizationState['@type'] === 'authorizationStateReady') {\n            await FileStore.initDB(() => this.onLoadNext());\n        }\n    };\n\n    onUpdateChatOrder = update => {\n        // NOTE: updateChatOrder is primary used to delete chats with order=0\n        // In all other cases use updateChatLastMessage\n\n        if (update.order !== '0') return;\n        const chat = ChatStore.get(update.chat_id);\n        if (!chat) {\n            return;\n        }\n\n        // unselect deleted chat\n        if (update.chat_id === ApplicationStore.getChatId()) {\n            TdLibController.setChatId(0);\n            ApplicationStore.changeChatDetailsVisibility(false);\n        }\n\n        let chatIds = [];\n        for (let i = 0; i < this.state.chats.length; i++) {\n            let chat = ChatStore.get(this.state.chats[i]);\n            if (chat && chat.order !== '0') {\n                switch (chat.type['@type']) {\n                    case 'chatTypeBasicGroup': {\n                        const basicGroup = BasicGroupStore.get(chat.type.basic_group_id);\n                        if (basicGroup.status['@type'] !== 'chatMemberStatusLeft') {\n                            chatIds.push(chat.id);\n                        }\n                        break;\n                    }\n                    case 'chatTypePrivate': {\n                        chatIds.push(chat.id);\n                        break;\n                    }\n                    case 'chatTypeSecret': {\n                        chatIds.push(chat.id);\n                        break;\n                    }\n                    case 'chatTypeSupergroup': {\n                        const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n                        if (supergroup.status['@type'] !== 'chatMemberStatusLeft') {\n                            chatIds.push(chat.id);\n                        }\n                        break;\n                    }\n                }\n            }\n        }\n\n        this.reorderChats(chatIds);\n    };\n\n    onUpdate = update => {\n        const { chat_id, order } = update;\n        if (order === '0') return;\n        const chat = ChatStore.get(chat_id);\n        if (!chat || chat.order === '0') {\n            return;\n        }\n\n        const { chats } = this.state;\n\n        let newChatIds = [];\n        if (chats.length > 0) {\n            const existingChat = chats.find(x => x === chat_id);\n            if (!existingChat) {\n                const minChatOrder = ChatStore.get(chats[chats.length - 1]).order;\n                if (orderCompare(minChatOrder, chat.order) === 1) {\n                    return;\n                }\n                newChatIds.push(chat.id);\n            }\n        }\n\n        // get last chat.order values\n        let chatIds = [];\n        for (let i = 0; i < chats.length; i++) {\n            let chat = ChatStore.get(chats[i]);\n            if (chat && chat.order !== '0') {\n                switch (chat.type['@type']) {\n                    case 'chatTypeBasicGroup': {\n                        const basicGroup = BasicGroupStore.get(chat.type.basic_group_id);\n                        if (basicGroup.status['@type'] !== 'chatMemberStatusLeft') {\n                            chatIds.push(chat.id);\n                        }\n                        break;\n                    }\n                    case 'chatTypePrivate': {\n                        chatIds.push(chat.id);\n                        break;\n                    }\n                    case 'chatTypeSecret': {\n                        chatIds.push(chat.id);\n                        break;\n                    }\n                    case 'chatTypeSupergroup': {\n                        const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n                        if (supergroup.status['@type'] !== 'chatMemberStatusLeft') {\n                            chatIds.push(chat.id);\n                        }\n                        break;\n                    }\n                }\n            }\n        }\n\n        this.reorderChats(chatIds, newChatIds, () => {\n            this.loadChatContents(newChatIds);\n        });\n    };\n\n    reorderChats(chatIds, newChatIds = [], callback) {\n        const orderedChatIds = chatIds.concat(newChatIds).sort((a, b) => {\n            return orderCompare(ChatStore.get(b).order, ChatStore.get(a).order);\n        });\n\n        if (!DialogsList.isDifferentOrder(this.state.chats, orderedChatIds)) {\n            return;\n        }\n\n        this.setState({ chats: orderedChatIds }, callback);\n    }\n\n    static isDifferentOrder(oldChatIds, newChatIds) {\n        if (oldChatIds.length === newChatIds.length) {\n            for (let i = 0; i < oldChatIds.length; i++) {\n                if (oldChatIds[i] !== newChatIds[i]) return true;\n            }\n\n            return false;\n        }\n\n        return true;\n    }\n\n    handleScroll = () => {\n        const list = this.listRef.current;\n\n        if (list && list.scrollTop + list.offsetHeight >= list.scrollHeight) {\n            this.onLoadNext();\n        }\n    };\n\n    onLoadNext = async (replace = false) => {\n        const { chats } = this.state;\n\n        if (this.loading) return;\n\n        let offsetOrder = '9223372036854775807'; // 2^63\n        let offsetChatId = 0;\n        if (!replace && chats && chats.length > 0) {\n            const chat = ChatStore.get(chats[chats.length - 1]);\n            if (chat) {\n                offsetOrder = chat.order;\n                offsetChatId = chat.id;\n            }\n        }\n\n        this.loading = true;\n        const result = await TdLibController.send({\n            '@type': 'getChats',\n            offset_chat_id: offsetChatId,\n            offset_order: offsetOrder,\n            limit: CHAT_SLICE_LIMIT\n        }).finally(() => {\n            this.loading = false;\n        });\n\n        //TODO: replace result with one-way data flow\n\n        if (result.chat_ids.length > 0 && result.chat_ids[0] === offsetChatId) {\n            result.chat_ids.shift();\n        }\n\n        if (replace) {\n            this.replaceChats(result.chat_ids, () => this.loadChatContents(result.chat_ids));\n        } else {\n            this.appendChats(result.chat_ids, () => this.loadChatContents(result.chat_ids));\n        }\n    };\n\n    loadChatContents(chats) {\n        const store = FileStore.getStore();\n        loadChatsContent(store, chats);\n    }\n\n    appendChats(chats, callback) {\n        if (chats.length === 0) return;\n\n        this.setState({ chats: this.state.chats.concat(chats) }, callback);\n    }\n\n    replaceChats(chats, callback) {\n        this.setState({ chats: chats }, callback);\n    }\n\n    scrollToTop() {\n        const list = this.listRef.current;\n        list.scrollTop = 0;\n    }\n\n    render() {\n        const { chats } = this.state;\n\n        const dialogs = chats.map(x => <DialogControl key={x} chatId={x} hidden={this.hiddenChats.has(x)} />);\n\n        /*<Scrollbars*/\n        /*ref={this.listRef}*/\n        /*onScroll={this.handleScroll}*/\n        /*autoHide*/\n        /*autoHideTimeout={500}*/\n        /*autoHideDuration={300}>*/\n        /*{chats}*/\n        /*</Scrollbars>*/\n\n        return (\n            <div ref={this.listRef} className='dialogs-list' onScroll={this.handleScroll}>\n                {dialogs}\n            </div>\n        );\n    }\n}\n\nexport default DialogsList;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport ApplicationStore from '../../Stores/ApplicationStore';\n\nconst styles = {\n    root: {\n        margin: 0,\n        padding: '24px',\n        width: '100%',\n        borderRadius: 0,\n        color: 'white',\n        maxHeight: '65px'\n    }\n};\n\nclass UpdatePanel extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            newContentAvailable: false\n        };\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateNewContentAvailable', this.onClientUpdateNewContentAvailable);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateNewContentAvailable', this.onClientUpdateNewContentAvailable);\n    }\n\n    onClientUpdateNewContentAvailable = () => {\n        this.setState({ newContentAvailable: true });\n    };\n\n    handleUpdate = () => {\n        if (this.handled) return;\n\n        this.handled = true;\n        setTimeout(() => {\n            window.location.reload();\n        }, 250);\n    };\n\n    render() {\n        const { newContentAvailable } = this.state;\n        const { classes } = this.props;\n\n        const content = newContentAvailable ? (\n            <Button variant='contained' color='primary' className={classes.root} onClick={this.handleUpdate}>\n                Update\n            </Button>\n        ) : null;\n\n        return <>{content}</>;\n    }\n}\n\nexport default withStyles(styles)(UpdatePanel);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport Search from './Search/Search';\nimport DialogsHeader from './DialogsHeader';\nimport DialogsList from './DialogsList';\nimport UpdatePanel from './UpdatePanel';\nimport { borderStyle } from '../Theme';\nimport { openChat } from '../../Actions/Client';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport './Dialogs.css';\n\nclass Dialogs extends Component {\n    constructor(props) {\n        super(props);\n\n        this.dialogsList = React.createRef();\n\n        this.state = {\n            isChatDetailsVisible: ApplicationStore.isChatDetailsVisible,\n            openSearch: false,\n            searchChatId: 0,\n            searchText: null\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextState.isChatDetailsVisible !== this.state.isChatDetailsVisible) {\n            return true;\n        }\n\n        if (nextState.openSearch !== this.state.openSearch) {\n            return true;\n        }\n\n        if (nextState.searchChatId !== this.state.searchChatId) {\n            return true;\n        }\n\n        if (nextState.searchText !== this.state.searchText) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateChatDetailsVisibility', this.onClientUpdateChatDetailsVisibility);\n        ApplicationStore.on('clientUpdateSearchChat', this.onClientUpdateSearchChat);\n        ApplicationStore.on('clientUpdateThemeChange', this.onClientUpdateThemeChange);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateChatDetailsVisibility', this.onClientUpdateChatDetailsVisibility);\n        ApplicationStore.removeListener('clientUpdateSearchChat', this.onClientUpdateSearchChat);\n        ApplicationStore.removeListener('clientUpdateThemeChange', this.onClientUpdateThemeChange);\n    }\n\n    onClientUpdateThemeChange = update => {\n        this.forceUpdate();\n    };\n\n    onClientUpdateChatDetailsVisibility = update => {\n        this.setState({\n            isChatDetailsVisible: ApplicationStore.isChatDetailsVisible\n        });\n    };\n\n    onClientUpdateSearchChat = update => {\n        this.setState({\n            openSearch: true,\n            searchChatId: update.chatId,\n            searchText: null\n        });\n    };\n\n    handleHeaderClick = () => {\n        this.dialogsList.current.scrollToTop();\n    };\n\n    handleSearch = visible => {\n        this.setState({\n            openSearch: visible,\n            searchChatId: 0,\n            searchText: null\n        });\n    };\n\n    handleSelectMessage = (chatId, messageId, openSearch) => {\n        const { onSelectChat } = this.props;\n\n        openChat(chatId, messageId);\n\n        onSelectChat(chatId, messageId);\n\n        const searchChatId = openSearch ? this.state.searchChatId : 0;\n        const searchText = openSearch ? this.state.searchText : null;\n\n        this.setState({\n            openSearch: openSearch,\n            searchChatId: searchChatId,\n            searchText: searchText\n        });\n    };\n\n    handleClose = () => {\n        this.setState({\n            openSearch: false,\n            searchChatId: 0,\n            searchText: null\n        });\n    };\n\n    handleSearchTextChange = text => {\n        this.setState({\n            searchText: text\n        });\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { isChatDetailsVisible, openSearch, searchChatId, searchText } = this.state;\n\n        return (\n            <div\n                className={classNames(classes.borderColor, 'dialogs', {\n                    'dialogs-third-column': isChatDetailsVisible\n                })}>\n                <DialogsHeader\n                    openSearch={openSearch}\n                    onClick={this.handleHeaderClick}\n                    onSearch={this.handleSearch}\n                    onSearchTextChange={this.handleSearchTextChange}\n                />\n                <div className='dialogs-content'>\n                    <DialogsList ref={this.dialogsList} />\n                    {openSearch && (\n                        <Search\n                            chatId={searchChatId}\n                            text={searchText}\n                            onSelectMessage={this.handleSelectMessage}\n                            onClose={this.handleClose}\n                        />\n                    )}\n                </div>\n                <UpdatePanel />\n            </div>\n        );\n    }\n}\n\nDialogs.propTypes = {\n    onSelectChat: PropTypes.func.isRequired\n};\n\nexport default withStyles(borderStyle)(Dialogs);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox/';\nimport { withStyles } from '@material-ui/core';\nimport { borderStyle } from '../Theme';\nimport { canSendMessages, getChatShortTitle, isPrivateChat } from '../../Utils/Chat';\nimport MessageStore from '../../Stores/MessageStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './HeaderCommand.css';\n\nconst styles = theme => ({\n    buttonLeft: {\n        margin: '14px 0 14px 14px',\n        minWidth: '100px'\n    },\n    buttonRight: {\n        margin: '14px 14px 14px 0',\n        minWidth: '100px'\n    },\n    ...borderStyle(theme)\n});\n\nclass HeaderCommand extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            openDeleteDialog: false\n        };\n    }\n\n    handleCancel = () => {\n        TdLibController.clientUpdate({ '@type': 'clientUpdateClearSelection' });\n    };\n\n    handleDelete = () => {\n        let canBeDeletedForAllUsers = true;\n        for (let { chatId, messageId } of MessageStore.selectedItems.values()) {\n            const message = MessageStore.get(chatId, messageId);\n            if (!message) {\n                canBeDeletedForAllUsers = false;\n                break;\n            }\n            if (!message.can_be_deleted_for_all_users) {\n                canBeDeletedForAllUsers = false;\n                break;\n            }\n        }\n\n        this.setState({\n            openDeleteDialog: true,\n            canBeDeletedForAllUsers: canBeDeletedForAllUsers,\n            revoke: canBeDeletedForAllUsers\n        });\n    };\n\n    handleDeleteContinue = () => {\n        const { revoke } = this.state;\n\n        let id;\n        const messageIds = [];\n        for (let { chatId, messageId } of MessageStore.selectedItems.values()) {\n            id = chatId;\n            messageIds.push(messageId);\n        }\n\n        this.handleCancel();\n\n        TdLibController.send({\n            '@type': 'deleteMessages',\n            chat_id: id,\n            message_ids: messageIds,\n            revoke: revoke\n        });\n    };\n\n    handleRevokeChange = () => {\n        this.setState({ revoke: !this.state.revoke });\n    };\n\n    handleCloseDelete = () => {\n        this.setState({ openDeleteDialog: false });\n    };\n\n    handleForward = () => {\n        let id;\n        const messageIds = [];\n        for (let { chatId, messageId } of MessageStore.selectedItems.values()) {\n            id = chatId;\n            messageIds.push(messageId);\n        }\n\n        this.handleCancel();\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateForward',\n            info: {\n                chatId: id,\n                messageIds: messageIds\n            }\n        });\n    };\n\n    handleReply = () => {\n        if (MessageStore.selectedItems.size !== 1) return;\n\n        const { chatId, messageId } = MessageStore.selectedItems.values().next().value;\n\n        this.handleCancel();\n\n        TdLibController.clientUpdate({ '@type': 'clientUpdateReply', chatId: chatId, messageId: messageId });\n    };\n\n    render() {\n        const { classes, t, count } = this.props;\n        const { openDeleteDialog, canBeDeletedForAllUsers, revoke } = this.state;\n\n        const chatId = ApplicationStore.getChatId();\n\n        let canBeDeleted = true;\n        for (let { chatId, messageId } of MessageStore.selectedItems.values()) {\n            const message = MessageStore.get(chatId, messageId);\n            if (!message) {\n                canBeDeleted = false;\n                break;\n            }\n            if (!message.can_be_deleted_only_for_self && !message.can_be_deleted_for_all_users) {\n                canBeDeleted = false;\n                break;\n            }\n        }\n\n        let canBeForwarded = true;\n        for (let { chatId, messageId } of MessageStore.selectedItems.values()) {\n            const message = MessageStore.get(chatId, messageId);\n            if (!message) {\n                canBeForwarded = false;\n                break;\n            }\n            if (!message.can_be_forwarded) {\n                canBeDeleted = false;\n                break;\n            }\n        }\n\n        const canBeReplied = count === 1 && canSendMessages(chatId);\n\n        return (\n            <>\n                <div className={classNames(classes.borderColor, 'header-command')}>\n                    {canBeForwarded && (\n                        <Button color='primary' className={classes.buttonLeft} onClick={this.handleForward}>\n                            {count <= 1 ? t('Forward') : `${t('Forward')} ${count}`}\n                        </Button>\n                    )}\n                    {canBeDeleted && (\n                        <Button color='primary' className={classes.buttonLeft} onClick={this.handleDelete}>\n                            {count <= 1 ? t('Delete') : `${t('Delete')} ${count}`}\n                        </Button>\n                    )}\n                    {canBeReplied && (\n                        <Button color='primary' className={classes.buttonLeft} onClick={this.handleReply}>\n                            {t('Reply')}\n                        </Button>\n                    )}\n                    <div className='header-command-space' />\n                    <Button color='primary' className={classes.buttonRight} onClick={this.handleCancel}>\n                        {t('Cancel')}\n                    </Button>\n                </div>\n                <Dialog\n                    transitionDuration={0}\n                    open={openDeleteDialog}\n                    onClose={this.handleCloseDelete}\n                    aria-labelledby='delete-dialog-title'>\n                    <DialogTitle id='delete-dialog-title'>Confirm</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText>\n                            {count === 1\n                                ? 'Are you sure you want to delete 1 message?'\n                                : `Are you sure you want to delete ${count} messages?`}\n                        </DialogContentText>\n                        {canBeDeletedForAllUsers && (\n                            <FormControlLabel\n                                control={\n                                    <Checkbox checked={revoke} onChange={this.handleRevokeChange} color='primary' />\n                                }\n                                label={\n                                    isPrivateChat(chatId) ? `Delete for ${getChatShortTitle(chatId)}` : 'Delete for all'\n                                }\n                            />\n                        )}\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.handleCloseDelete} color='primary'>\n                            Cancel\n                        </Button>\n                        <Button onClick={this.handleDeleteContinue} color='primary'>\n                            Ok\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            </>\n        );\n    }\n}\n\nHeaderCommand.propTypes = {\n    count: PropTypes.number\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(HeaderCommand);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport IconButton from '@material-ui/core/IconButton';\nimport SearchIcon from '@material-ui/icons/Search';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withTranslation } from 'react-i18next';\nimport { compose } from 'recompose';\nimport MainMenuButton from './MainMenuButton';\nimport HeaderCommand from './HeaderCommand';\nimport { getChatSubtitle, getChatTitle, isAccentChatSubtitle, isMeChat } from '../../Utils/Chat';\nimport { borderStyle } from '../Theme';\nimport ChatStore from '../../Stores/ChatStore';\nimport UserStore from '../../Stores/UserStore';\nimport BasicGroupStore from '../../Stores/BasicGroupStore';\nimport SupergroupStore from '../../Stores/SupergroupStore';\nimport MessageStore from '../../Stores/MessageStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport './Header.css';\n\nconst styles = theme => ({\n    button: {\n        margin: '14px'\n    },\n    menuIconButton: {\n        margin: '8px -2px 8px 12px'\n    },\n    searchIconButton: {\n        margin: '8px 12px 8px 0'\n    },\n    messageSearchIconButton: {\n        margin: '8px 0 8px 12px'\n    },\n    moreIconButton: {\n        margin: '8px 12px 8px 0'\n    },\n    headerStatusAccentTitle: {\n        color: theme.palette.primary.dark + '!important'\n    },\n    ...borderStyle(theme)\n});\n\nclass Header extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            authorizationState: ApplicationStore.getAuthorizationState(),\n            connectionState: ApplicationStore.getConnectionState()\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextState !== this.state) {\n            return true;\n        }\n\n        if (nextProps.theme !== this.props.theme) {\n            return true;\n        }\n\n        if (nextProps.t !== this.props.t) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('updateConnectionState', this.onUpdateConnectionState);\n        ApplicationStore.on('updateAuthorizationState', this.onUpdateAuthorizationState);\n        ApplicationStore.on('clientUpdateChatId', this.onClientUpdateChatId);\n\n        MessageStore.on('clientUpdateMessageSelected', this.onClientUpdateMessageSelected);\n        MessageStore.on('clientUpdateClearSelection', this.onClientUpdateMessageSelected);\n\n        ChatStore.on('updateChatOnlineMemberCount', this.onUpdateChatOnlineMemberCount);\n        ChatStore.on('updateChatTitle', this.onUpdateChatTitle);\n        UserStore.on('updateUserStatus', this.onUpdateUserStatus);\n        ChatStore.on('updateUserChatAction', this.onUpdateUserChatAction);\n        UserStore.on('updateUserFullInfo', this.onUpdateUserFullInfo);\n        BasicGroupStore.on('updateBasicGroupFullInfo', this.onUpdateBasicGroupFullInfo);\n        SupergroupStore.on('updateSupergroupFullInfo', this.onUpdateSupergroupFullInfo);\n        BasicGroupStore.on('updateBasicGroup', this.onUpdateBasicGroup);\n        SupergroupStore.on('updateSupergroup', this.onUpdateSupergroup);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('updateConnectionState', this.onUpdateConnectionState);\n        ApplicationStore.removeListener('updateAuthorizationState', this.onUpdateAuthorizationState);\n        ApplicationStore.removeListener('clientUpdateChatId', this.onClientUpdateChatId);\n\n        MessageStore.removeListener('clientUpdateMessageSelected', this.onClientUpdateMessageSelected);\n        MessageStore.removeListener('clientUpdateClearSelection', this.onClientUpdateMessageSelected);\n\n        ChatStore.removeListener('updateChatOnlineMemberCount', this.onUpdateChatOnlineMemberCount);\n        ChatStore.removeListener('updateChatTitle', this.onUpdateChatTitle);\n        UserStore.removeListener('updateUserStatus', this.onUpdateUserStatus);\n        ChatStore.removeListener('updateUserChatAction', this.onUpdateUserChatAction);\n        UserStore.removeListener('updateUserFullInfo', this.onUpdateUserFullInfo);\n        BasicGroupStore.removeListener('updateBasicGroupFullInfo', this.onUpdateBasicGroupFullInfo);\n        SupergroupStore.removeListener('updateSupergroupFullInfo', this.onUpdateSupergroupFullInfo);\n        BasicGroupStore.removeListener('updateBasicGroup', this.onUpdateBasicGroup);\n        SupergroupStore.removeListener('updateSupergroup', this.onUpdateSupergroup);\n    }\n\n    onUpdateChatOnlineMemberCount = update => {\n        const chat = ChatStore.get(ApplicationStore.getChatId());\n        if (!chat) return;\n        if (chat.id !== update.chat_id) return;\n\n        this.forceUpdate();\n    };\n\n    onClientUpdateMessageSelected = update => {\n        this.setState({ selectionCount: MessageStore.selectedItems.size });\n    };\n\n    onClientUpdateChatId = update => {\n        this.forceUpdate();\n    };\n\n    onUpdateConnectionState = update => {\n        this.setState({ connectionState: update.state });\n    };\n\n    onUpdateAuthorizationState = update => {\n        this.setState({ authorizationState: update.authorization_state });\n    };\n\n    onUpdateChatTitle = update => {\n        const chat = ChatStore.get(ApplicationStore.getChatId());\n        if (!chat) return;\n        if (chat.id !== update.chat_id) return;\n\n        this.forceUpdate();\n    };\n\n    onUpdateUserStatus = update => {\n        const chat = ChatStore.get(ApplicationStore.getChatId());\n        if (!chat) return;\n        if (!chat.type) return;\n\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup': {\n                const fullInfo = BasicGroupStore.getFullInfo(chat.type.basic_group_id);\n                if (fullInfo && fullInfo.members) {\n                    const member = fullInfo.members.find(x => x.user_id === update.user_id);\n                    if (member) {\n                        this.forceUpdate();\n                    }\n                }\n                break;\n            }\n            case 'chatTypePrivate': {\n                if (chat.type.user_id === update.user_id) {\n                    this.forceUpdate();\n                }\n                break;\n            }\n            case 'chatTypeSecret': {\n                if (chat.type.user_id === update.user_id) {\n                    this.forceUpdate();\n                }\n                break;\n            }\n            case 'chatTypeSupergroup': {\n                break;\n            }\n        }\n    };\n\n    onUpdateUserChatAction = update => {\n        const currentChatId = ApplicationStore.getChatId();\n\n        if (currentChatId === update.chat_id) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateBasicGroup = update => {\n        const chat = ChatStore.get(ApplicationStore.getChatId());\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeBasicGroup' &&\n            chat.type.basic_group_id === update.basic_group.id\n        ) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateSupergroup = update => {\n        const chat = ChatStore.get(ApplicationStore.getChatId());\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeSupergroup' &&\n            chat.type.supergroup_id === update.supergroup.id\n        ) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateBasicGroupFullInfo = update => {\n        const chat = ChatStore.get(ApplicationStore.getChatId());\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeBasicGroup' &&\n            chat.type.basic_group_id === update.basic_group_id\n        ) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateSupergroupFullInfo = update => {\n        const chat = ChatStore.get(ApplicationStore.getChatId());\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeSupergroup' &&\n            chat.type.supergroup_id === update.supergroup_id\n        ) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateUserFullInfo = update => {\n        const chat = ChatStore.get(ApplicationStore.getChatId());\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            (chat.type['@type'] === 'chatTypePrivate' || chat.type['@type'] === 'chatTypeSecret') &&\n            chat.type.user_id === update.user_id\n        ) {\n            this.forceUpdate();\n        }\n    };\n\n    openChatDetails = () => {\n        const chatId = ApplicationStore.getChatId();\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        ApplicationStore.changeChatDetailsVisibility(true);\n    };\n\n    handleSearchChat = () => {\n        const chatId = ApplicationStore.getChatId();\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        ApplicationStore.searchChat(chatId);\n    };\n\n    localize = str => {\n        const { t } = this.props;\n\n        return t(str)\n            .replace('...', '')\n            .replace('…', '');\n    };\n\n    render() {\n        const { classes, t } = this.props;\n        const { authorizationState, connectionState, selectionCount } = this.state;\n\n        if (selectionCount) {\n            return <HeaderCommand count={selectionCount} />;\n        }\n\n        const chatId = ApplicationStore.getChatId();\n        const chat = ChatStore.get(chatId);\n\n        const isAccentSubtitle = isAccentChatSubtitle(chatId);\n        let title = getChatTitle(chatId, true, t);\n        let subtitle = getChatSubtitle(chatId, true);\n        let showProgressAnimation = false;\n\n        if (connectionState) {\n            switch (connectionState['@type']) {\n                case 'connectionStateConnecting':\n                    title = this.localize('Connecting');\n                    subtitle = '';\n                    showProgressAnimation = true;\n                    break;\n                case 'connectionStateConnectingToProxy':\n                    title = this.localize('Connecting to proxy');\n                    subtitle = '';\n                    showProgressAnimation = true;\n                    break;\n                case 'connectionStateReady':\n                    break;\n                case 'connectionStateUpdating':\n                    title = this.localize('Updating');\n                    subtitle = '';\n                    showProgressAnimation = true;\n                    break;\n                case 'connectionStateWaitingForNetwork':\n                    title = this.localize('Waiting for network');\n                    subtitle = '';\n                    showProgressAnimation = true;\n                    break;\n            }\n        } else if (authorizationState) {\n            switch (authorizationState['@type']) {\n                case 'authorizationStateClosed':\n                    break;\n                case ' authorizationStateClosing':\n                    break;\n                case 'authorizationStateLoggingOut':\n                    title = this.localize('Logging out');\n                    subtitle = '';\n                    showProgressAnimation = true;\n                    break;\n                case 'authorizationStateReady':\n                    break;\n                case 'authorizationStateWaitCode':\n                    break;\n                case 'authorizationStateWaitEncryptionKey':\n                    title = this.localize('Loading');\n                    subtitle = '';\n                    showProgressAnimation = true;\n                    break;\n                case 'authorizationStateWaitPassword':\n                    break;\n                case 'authorizationStateWaitPhoneNumber':\n                    break;\n                case 'authorizationStateWaitTdlibParameters':\n                    title = this.localize('Loading');\n                    subtitle = '';\n                    showProgressAnimation = true;\n                    break;\n            }\n        } else {\n            title = this.localize('Loading');\n            subtitle = '';\n            showProgressAnimation = true;\n        }\n\n        return (\n            <div className={classNames(classes.borderColor, 'header-details')}>\n                <div\n                    className={classNames('header-status', 'grow', chat ? 'cursor-pointer' : 'cursor-default')}\n                    onClick={this.openChatDetails}>\n                    <span className='header-status-content'>{title}</span>\n                    {showProgressAnimation && (\n                        <>\n                            <span className='header-progress'>.</span>\n                            <span className='header-progress'>.</span>\n                            <span className='header-progress'>.</span>\n                        </>\n                    )}\n                    <span\n                        className={classNames('header-status-title', {\n                            [classes.headerStatusAccentTitle]: isAccentSubtitle\n                        })}>\n                        {subtitle}\n                    </span>\n                    <span className='header-status-tail' />\n                </div>\n                {chat && (\n                    <>\n                        <IconButton\n                            className={classes.messageSearchIconButton}\n                            aria-label='Search'\n                            onClick={this.handleSearchChat}>\n                            <SearchIcon />\n                        </IconButton>\n                        <MainMenuButton openChatDetails={this.openChatDetails} />\n                    </>\n                )}\n            </div>\n        );\n    }\n}\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(Header);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core';\nimport VolumeMuteIcon from '@material-ui/icons/VolumeMute';\nimport VolumeDownIcon from '@material-ui/icons/VolumeDown';\nimport VolumeUpIcon from '@material-ui/icons/VolumeUp';\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff';\nimport IconButton from '@material-ui/core/IconButton';\nimport Slider from '@material-ui/lab/Slider';\nimport { borderStyle } from '../Theme';\nimport { PLAYER_VOLUME_NORMAL } from '../../Constants';\nimport PlayerStore from '../../Stores/PlayerStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './VolumeButton.css';\n\nconst styles = theme => ({\n    iconButton: {\n        padding: 4\n    },\n    root: {\n        display: 'flex',\n        height: 100,\n        padding: '13px 0',\n        background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF'\n    },\n    slider: {\n        padding: '0 13px'\n    },\n    ...borderStyle(theme)\n});\n\nclass VolumeButton extends React.Component {\n    state = {\n        anchorEl: null,\n        value: PlayerStore.volume,\n        prevValue: PlayerStore.volume,\n        dragging: false,\n        buttonOver: false,\n        popupOver: false\n    };\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaVolume', this.onClientUpdateMediaVolume);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaVolume', this.onClientUpdateMediaVolume);\n    }\n\n    onClientUpdateMediaVolume = update => {\n        const { volume, prevVolume } = update;\n\n        if (prevVolume === undefined) {\n            this.setState({ value: volume });\n        } else {\n            this.setState({ value: volume, prevValue: prevVolume });\n        }\n    };\n\n    handlePopoverOpen = anchorEl => {\n        this.setState({ anchorEl: anchorEl });\n    };\n\n    handlePopoverClose = () => {\n        const { dragging, buttonOver, popupOver } = this.state;\n\n        if (dragging) return;\n        if (buttonOver) return;\n        if (popupOver) return;\n\n        this.setState({ anchorEl: null });\n    };\n\n    handleMouseEnter = (event, openPopover) => {\n        this.setState({ buttonOver: true });\n\n        if (openPopover) {\n            this.handlePopoverOpen(event.currentTarget);\n        }\n    };\n\n    handleMouseLeave = () => {\n        this.setState({ buttonOver: false }, () => {\n            this.handlePopoverClose();\n        });\n    };\n\n    handlePopupMouseLeave = () => {\n        this.setState({ popupOver: false }, () => {\n            this.handlePopoverClose();\n        });\n    };\n\n    handleVoiceClick = () => {\n        const { value, prevValue } = this.state;\n        const nextValue = value > 0 ? 0 : prevValue || PLAYER_VOLUME_NORMAL;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaVolume',\n            volume: nextValue\n        });\n    };\n\n    handleChange = (event, value) => {\n        const { dragging, prevValue } = this.state;\n\n        if (dragging) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateMediaVolume',\n                volume: value\n            });\n        } else {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateMediaVolume',\n                prevVolume: value > 0 ? value : prevValue,\n                volume: value\n            });\n        }\n    };\n\n    handleDragStart = () => {\n        const { value } = this.state;\n\n        this.setState({\n            dragging: true,\n            prevValue: value\n        });\n    };\n\n    handleDragEnd = () => {\n        const { value, prevValue } = this.state;\n\n        this.setState(\n            {\n                dragging: false,\n                prevValue: value > 0 ? value : prevValue\n            },\n            () => {\n                this.handlePopoverClose();\n            }\n        );\n    };\n\n    getVolumeIcon = value => {\n        if (value === 0) {\n            return <VolumeOffIcon fontSize='small' />;\n        }\n\n        if (value < 0.25) {\n            return <VolumeMuteIcon fontSize='small' />;\n        }\n\n        if (value < 0.5) {\n            return <VolumeDownIcon fontSize='small' />;\n        }\n\n        return <VolumeUpIcon fontSize='small' />;\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { anchorEl, value } = this.state;\n        const open = Boolean(anchorEl);\n\n        return (\n            <div\n                onMouseEnter={e => this.handleMouseEnter(e, true)}\n                onMouseLeave={this.handleMouseLeave}\n                style={{\n                    position: 'relative',\n                    background: 'transparent'\n                }}>\n                <IconButton className={classes.iconButton} color='primary' onClick={this.handleVoiceClick}>\n                    {this.getVolumeIcon(value)}\n                </IconButton>\n                <div\n                    style={{\n                        position: 'absolute',\n                        background: 'transparent',\n                        visibility: open ? 'visible' : 'hidden',\n                        zIndex: 1\n                    }}\n                    onMouseEnter={e => this.handleMouseEnter(e, false)}\n                    onMouseLeave={this.handlePopupMouseLeave}>\n                    <div\n                        className={classNames(classes.borderColor, classes.root)}\n                        style={{\n                            marginTop: 8,\n                            borderWidth: 1,\n                            borderStyle: 'solid'\n                        }}>\n                        <Slider\n                            classes={{ container: classes.slider }}\n                            min={0}\n                            max={1}\n                            value={value}\n                            onChange={this.handleChange}\n                            onDragStart={this.handleDragStart}\n                            onDragEnd={this.handleDragEnd}\n                            vertical\n                        />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles, { withTheme: true })(VolumeButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { withStyles } from '@material-ui/core';\nimport IconButton from '@material-ui/core/IconButton';\nimport RepeatIcon from '@material-ui/icons/Repeat';\nimport RepeatOneIcon from '@material-ui/icons/RepeatOne';\nimport PlayerStore, { RepeatEnum } from '../../Stores/PlayerStore';\nimport TdLibController from '../../Controllers/TdLibController';\n\nconst styles = {\n    iconButton: {\n        padding: 4\n    }\n};\n\nclass RepeatButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { repeat } = PlayerStore;\n\n        this.state = {\n            repeat\n        };\n    }\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaRepeat', this.onClientUpdateMediaRepeat);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaRepeat', this.onClientUpdateMediaRepeat);\n    }\n\n    onClientUpdateMediaRepeat = update => {\n        const { repeat } = update;\n\n        this.setState({ repeat });\n    };\n\n    handleRepeat = () => {\n        const { repeat } = this.state;\n\n        let nextRepeat = repeat;\n        switch (repeat) {\n            case RepeatEnum.NONE: {\n                nextRepeat = RepeatEnum.REPEAT;\n                break;\n            }\n            case RepeatEnum.REPEAT: {\n                nextRepeat = RepeatEnum.REPEAT_ONE;\n                break;\n            }\n            case RepeatEnum.REPEAT_ONE: {\n                nextRepeat = RepeatEnum.NONE;\n                break;\n            }\n        }\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaRepeat',\n            repeat: nextRepeat\n        });\n    };\n\n    getIcon = repeat => {\n        switch (repeat) {\n            case RepeatEnum.NONE: {\n                return <RepeatIcon fontSize='small' />;\n            }\n            case RepeatEnum.REPEAT: {\n                return <RepeatIcon fontSize='small' />;\n            }\n            case RepeatEnum.REPEAT_ONE: {\n                return <RepeatOneIcon fontSize='small' />;\n            }\n            default: {\n                return <RepeatIcon fontSize='small' />;\n            }\n        }\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { repeat } = this.state;\n\n        return (\n            <IconButton\n                className={classes.iconButton}\n                color={repeat === RepeatEnum.NONE ? 'default' : 'primary'}\n                onClick={this.handleRepeat}>\n                {this.getIcon(repeat)}\n            </IconButton>\n        );\n    }\n}\n\nexport default withStyles(styles)(RepeatButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { withStyles } from '@material-ui/core';\nimport IconButton from '@material-ui/core/IconButton';\nimport ShuffleIcon from '@material-ui/icons/Shuffle';\nimport PlayerStore from '../../Stores/PlayerStore';\nimport TdLibController from '../../Controllers/TdLibController';\n\nconst styles = {\n    iconButton: {\n        padding: 4\n    }\n};\n\nclass ShuffleButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { shuffle } = PlayerStore;\n\n        this.state = {\n            shuffle\n        };\n    }\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaShuffle', this.onClientUpdateMediaShuffle);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaShuffle', this.onClientUpdateMediaShuffle);\n    }\n\n    onClientUpdateMediaShuffle = update => {\n        const { shuffle } = update;\n\n        this.setState({ shuffle });\n    };\n\n    handleShuffle = () => {\n        const { shuffle } = this.state;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaShuffle',\n            shuffle: !shuffle\n        });\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { shuffle } = this.state;\n\n        return (\n            <IconButton\n                className={classes.iconButton}\n                color={!shuffle ? 'default' : 'primary'}\n                onClick={this.handleShuffle}>\n                <ShuffleIcon fontSize='small' />\n            </IconButton>\n        );\n    }\n}\n\nexport default withStyles(styles)(ShuffleButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { withStyles } from '@material-ui/core';\nimport IconButton from '@material-ui/core/IconButton';\nimport PlayerStore from '../../Stores/PlayerStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport { PLAYER_PLAYBACKRATE_FAST, PLAYER_PLAYBACKRATE_NORMAL } from '../../Constants';\n\nconst styles = {\n    iconButton: {\n        padding: 4\n    }\n};\nclass PlaybackRateButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { playbackRate } = PlayerStore;\n\n        this.state = {\n            playbackRate\n        };\n    }\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaPlaybackRate', this.onClientUpdateMediaPlaybackRate);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaPlaybackRate', this.onClientUpdateMediaPlaybackRate);\n    }\n\n    onClientUpdateMediaPlaybackRate = update => {\n        const { playbackRate } = update;\n\n        this.setState({ playbackRate });\n    };\n\n    handlePlaybackRate = () => {\n        const { playbackRate } = this.state;\n\n        const nextPlaybackRate =\n            playbackRate === PLAYER_PLAYBACKRATE_NORMAL ? PLAYER_PLAYBACKRATE_FAST : PLAYER_PLAYBACKRATE_NORMAL;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaPlaybackRate',\n            playbackRate: nextPlaybackRate\n        });\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { playbackRate } = this.state;\n\n        return (\n            <IconButton\n                className={classes.iconButton}\n                color={playbackRate > PLAYER_PLAYBACKRATE_NORMAL ? 'primary' : 'default'}\n                onClick={this.handlePlaybackRate}>\n                <div className='header-player-playback-icon'>2X</div>\n            </IconButton>\n        );\n    }\n}\n\nexport default withStyles(styles)(PlaybackRateButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { getDurationString } from '../../Utils/Common';\nimport PlayerStore from '../../Stores/PlayerStore';\n\nclass Time extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            currentTime: 0,\n            duration: 0,\n            timeString: this.getTimeString(0, 0)\n        };\n    }\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n    }\n\n    onClientUpdateMediaTime = update => {\n        const { currentTime } = update;\n\n        this.setState({\n            currentTime: currentTime,\n            currentTimeString: getDurationString(Math.floor(currentTime || 0))\n        });\n    };\n\n    getTimeString = (currentTime, duration) => {\n        const type = 0;\n\n        const durationString = getDurationString(Math.floor(duration || 0));\n        const currentTimeString = getDurationString(Math.floor(currentTime || 0));\n\n        //return type === 0 ? `${currentTimeString}/${durationString}` : `${durationString}`;\n\n        return currentTimeString;\n    };\n\n    render() {\n        const { currentTimeString } = this.state;\n\n        return <>{currentTimeString}</>;\n    }\n}\n\nexport default Time;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport classNames from 'classnames';\nimport { getMedia, openMedia } from '../../Utils/Message';\nimport { borderStyle } from '../Theme';\nimport { withStyles } from '@material-ui/core';\nimport PlayerStore from '../../Stores/PlayerStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './Playlist.css';\n\nconst styles = theme => ({\n    root: {\n        background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF'\n    },\n    ...borderStyle(theme)\n});\n\nclass Playlist extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.listRef = React.createRef();\n        this.itemRefMap = new Map();\n\n        const { message, playlist } = PlayerStore;\n\n        this.chatId = message ? message.chat_id : 0;\n        this.messageId = message ? message.id : 0;\n\n        this.state = {\n            open: false,\n            titleMouseOver: false,\n            playlistMouseOver: false,\n            playlist: playlist\n        };\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { open } = this.state;\n\n        if (!prevState.open && open) {\n            this.scrollToActive();\n        }\n    }\n\n    scrollToActive = () => {\n        const list = this.listRef.current;\n        if (!list) return;\n\n        const { messageId } = this;\n        if (!messageId) return;\n\n        const item = this.itemRefMap.get(messageId);\n        if (!item) return;\n\n        const node = ReactDOM.findDOMNode(item);\n        if (!node) return;\n\n        list.scrollTop = node.offsetTop - 15;\n    };\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaPlaylist', this.onClientUpdateMediaPlaylist);\n        PlayerStore.on('clientUpdateMediaPlaylistLoading', this.onClientUpdateMediaPlaylistLoading);\n        PlayerStore.on('clientUpdateMediaTitleMouseOver', this.onClientUpdateMediaTitleMouseOver);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaPlaylist', this.onClientUpdateMediaPlaylist);\n        PlayerStore.removeListener('clientUpdateMediaPlaylistLoading', this.onClientUpdateMediaPlaylistLoading);\n        PlayerStore.removeListener('clientUpdateMediaTitleMouseOver', this.onClientUpdateMediaTitleMouseOver);\n    }\n\n    onClientUpdateMediaTitleMouseOver = update => {\n        const { over } = update;\n\n        if (over) {\n            this.setState(\n                {\n                    playlistMouseOver: over\n                },\n                () => {\n                    this.tryOpen();\n                }\n            );\n        } else {\n            this.setState(\n                {\n                    playlistMouseOver: over\n                },\n                () => {\n                    this.tryClose();\n                }\n            );\n        }\n    };\n\n    onClientUpdateMediaActive = update => {\n        const { chatId, messageId } = update;\n\n        this.chatId = chatId;\n        this.messageId = messageId;\n    };\n\n    onClientUpdateMediaPlaylistLoading = update => {\n        const { chatId, messageId } = this;\n\n        if (update.chatId === chatId && update.messageId === messageId) {\n            this.setState({\n                playlist: null\n            });\n        }\n    };\n\n    onClientUpdateMediaPlaylist = update => {\n        const { chatId, messageId } = this;\n        const { playlist } = update;\n\n        if (chatId === playlist.chatId && messageId === playlist.messageId) {\n            this.setState({\n                playlist: playlist\n            });\n        }\n    };\n\n    tryOpen = () => {\n        clearTimeout(this.openTimeout);\n\n        this.openTimeout = setTimeout(() => {\n            const { titleMouseOver, playlistMouseOver } = this.state;\n            this.setState({\n                open: titleMouseOver || playlistMouseOver\n            });\n        }, 250);\n    };\n\n    tryClose = () => {\n        clearTimeout(this.timeout);\n\n        this.timeout = setTimeout(() => {\n            const { titleMouseOver, playlistMouseOver } = this.state;\n            this.setState({\n                open: titleMouseOver || playlistMouseOver\n            });\n        }, 250);\n    };\n\n    handleMouseEnter = () => {\n        this.setState({\n            playlistMouseOver: true,\n            open: true\n        });\n    };\n\n    handleMouseLeave = () => {\n        this.setState(\n            {\n                playlistMouseOver: false\n            },\n            () => {\n                this.tryClose();\n            }\n        );\n    };\n\n    handleScroll = () => {\n        const list = this.listRef.current;\n        if (!list) return;\n\n        if (list.scrollTop === 0) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateMediaPlaylistNext'\n            });\n        } else if (list.scrollHeight === list.scrollTop + list.offsetHeight) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateMediaPlaylistPrev'\n            });\n        }\n    };\n\n    render() {\n        const { classes } = this.props;\n\n        const { open, playlist } = this.state;\n        if (!open) return null;\n        if (!playlist) return null;\n\n        const { messages } = playlist;\n        if (!messages) return null;\n        if (messages.length <= 1) return null;\n\n        this.itemRefMap.clear();\n\n        return (\n            <div className='playlist'>\n                <div className={classNames('playlist-wrapper', classes.root, classes.borderColor)}>\n                    <div\n                        ref={this.listRef}\n                        className='playlist-items'\n                        onMouseEnter={this.handleMouseEnter}\n                        onMouseLeave={this.handleMouseLeave}\n                        onScroll={this.handleScroll}>\n                        {playlist.messages\n                            .slice(0)\n                            .reverse()\n                            .map(x => (\n                                <div key={x.id} ref={el => this.itemRefMap.set(x.id, el)} className='playlist-item'>\n                                    {getMedia(x, () => openMedia(x.chat_id, x.id))}\n                                </div>\n                            ))}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles)(Playlist);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious';\nimport CloseIcon from '@material-ui/icons/Close';\nimport IconButton from '@material-ui/core/IconButton';\nimport VolumeButton from '../Player/VolumeButton';\nimport RepeatButton from '../Player/RepeatButton';\nimport ShuffleButton from '../Player/ShuffleButton';\nimport PlaybackRateButton from './PlaybackRateButton';\nimport Time from '../Player/Time';\nimport Playlist from '../Player/Playlist';\nimport { borderStyle } from '../Theme';\nimport { getSrc } from '../../Utils/File';\nimport { openChat } from '../../Actions/Client';\nimport { getDurationString } from '../../Utils/Common';\nimport { getDate, getDateHint, getMediaTitle, hasAudio } from '../../Utils/Message';\nimport { PLAYER_PLAYBACKRATE_FAST, PLAYER_PLAYBACKRATE_NORMAL, PLAYER_STARTTIME } from '../../Constants';\nimport PlayerStore from '../../Stores/PlayerStore';\nimport FileStore from '../../Stores/FileStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './HeaderPlayer.css';\n\nconst styles = theme => ({\n    iconButton: {\n        padding: 4\n    },\n    ...borderStyle(theme)\n});\n\nclass HeaderPlayer extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.videoRef = React.createRef();\n\n        const { message, playlist } = PlayerStore;\n\n        this.startTime = PLAYER_STARTTIME;\n\n        this.state = {\n            currentTime: 0,\n            currentTimeString: getDurationString(0),\n            message: message,\n            playlist: playlist,\n            playing: false,\n            src: this.getMediaSrc(message)\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        const { theme } = this.props;\n        const { message, playlist, src, playing } = this.state;\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        if (nextState.message !== message) {\n            return true;\n        }\n\n        if (nextState.playlist !== playlist) {\n            return true;\n        }\n\n        if (nextState.src !== src) {\n            return true;\n        }\n\n        if (nextState.playing !== playing) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdateVoiceNoteBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateVideoNoteBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateAudioBlob', this.onClientUpdateMediaBlob);\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaClose', this.onClientUpdateMediaClose);\n        PlayerStore.on('clientUpdateMediaPlaylist', this.onClientUpdateMediaPlaylist);\n        PlayerStore.on('clientUpdateMediaViewerPlay', this.onClientUpdateMediaViewerPlay);\n        PlayerStore.on('clientUpdateMediaViewerPause', this.onClientUpdateMediaViewerPause);\n        PlayerStore.on('clientUpdateMediaViewerEnded', this.onClientUpdateMediaViewerEnded);\n        PlayerStore.on('clientUpdateMediaVolume', this.onClientUpdateMediaVolume);\n        PlayerStore.on('clientUpdateMediaPlaybackRate', this.onClientUpdateMediaPlaybackRate);\n\n        ApplicationStore.on('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateVoiceNoteBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateVideoNoteBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateAudioBlob', this.onClientUpdateMediaBlob);\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaClose', this.onClientUpdateMediaClose);\n        PlayerStore.removeListener('clientUpdateMediaPlaylist', this.onClientUpdateMediaPlaylist);\n        PlayerStore.removeListener('clientUpdateMediaViewerPlay', this.onClientUpdateMediaViewerPlay);\n        PlayerStore.removeListener('clientUpdateMediaViewerPause', this.onClientUpdateMediaViewerPause);\n        PlayerStore.removeListener('clientUpdateMediaViewerEnded', this.onClientUpdateMediaViewerEnded);\n        PlayerStore.removeListener('clientUpdateMediaVolume', this.onClientUpdateMediaVolume);\n        PlayerStore.removeListener('clientUpdateMediaPlaybackRate', this.onClientUpdateMediaPlaybackRate);\n\n        ApplicationStore.removeListener('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n    }\n\n    onClientUpdateMediaPlaybackRate = update => {\n        const { playbackRate } = update;\n\n        const player = this.videoRef.current;\n        if (!player) return;\n\n        player.playbackRate = playbackRate;\n    };\n\n    onClientUpdateMediaVolume = update => {\n        const { volume } = update;\n\n        const player = this.videoRef.current;\n        if (!player) return;\n\n        player.volume = volume;\n    };\n\n    onClientUpdateMediaViewerContent = update => {\n        this.playingMediaViewer = Boolean(ApplicationStore.mediaViewerContent);\n    };\n\n    onClientUpdateMediaViewerEnded = update => {\n        this.playingMediaViewer = false;\n    };\n\n    onClientUpdateMediaViewerPause = update => {\n        this.playingMediaViewer = false;\n    };\n\n    onClientUpdateMediaViewerPlay = update => {\n        this.playingMediaViewer = true;\n\n        const player = this.videoRef.current;\n        if (!player) return;\n\n        player.pause();\n    };\n\n    startPlayingFile = (file, message) => {\n        const { chat_id, id } = message;\n\n        this.setState(\n            {\n                src: this.getMediaSrc(message)\n            },\n            () => {\n                const player = this.videoRef.current;\n                if (player) {\n                    if (this.playingMediaViewer) {\n                        player.pause();\n\n                        TdLibController.clientUpdate({\n                            '@type': 'clientUpdateMediaPause',\n                            chatId: chat_id,\n                            messageId: id\n                        });\n                    }\n                }\n            }\n        );\n    };\n\n    onClientUpdateMediaBlob = update => {\n        const { chatId, messageId } = update;\n        const { message } = this.state;\n\n        if (!message) return;\n\n        const { chat_id, id, content } = message;\n        if (!content) return;\n        if (chatId !== chat_id || messageId !== id) return;\n\n        switch (content['@type']) {\n            case 'messageText': {\n                const { web_page } = content;\n                if (web_page) {\n                    const { audio, voice_note, video_note } = web_page;\n\n                    if (audio) {\n                        const file = audio.audio;\n                        if (file) {\n                            this.startPlayingFile(file, message);\n                        }\n                    }\n\n                    if (voice_note) {\n                        const { voice } = voice_note;\n                        if (voice) {\n                            this.startPlayingFile(voice, message);\n                        }\n                    }\n\n                    if (video_note) {\n                        const { video } = video_note;\n                        if (video) {\n                            this.startPlayingFile(video, message);\n                        }\n                    }\n                }\n\n                break;\n            }\n            case 'messageAudio': {\n                const { audio } = content;\n                if (audio) {\n                    const file = audio.audio;\n                    if (file) {\n                        this.startPlayingFile(file, message);\n                    }\n                }\n\n                break;\n            }\n            case 'messageVoiceNote': {\n                const { voice_note } = content;\n                if (voice_note) {\n                    const { voice } = voice_note;\n                    if (voice) {\n                        this.startPlayingFile(voice, message);\n                    }\n                }\n\n                break;\n            }\n            case 'messageVideoNote': {\n                const { video_note } = content;\n                if (video_note) {\n                    const { video } = video_note;\n                    if (video) {\n                        this.startPlayingFile(video, message);\n                    }\n                }\n\n                break;\n            }\n        }\n    };\n\n    onClientUpdateMediaPlaylist = update => {\n        const { playlist } = update;\n        const { chatId, messageId } = playlist;\n        const { message } = this.state;\n\n        if (message && message.chat_id === chatId && message.id === messageId) {\n            this.setState({ playlist: playlist });\n        }\n    };\n\n    onClientUpdateMediaClose = update => {\n        this.setState({\n            message: null,\n            playlist: null,\n            playing: false,\n            src: null\n        });\n    };\n\n    onClientUpdateMediaActive = update => {\n        const { chatId, messageId } = update;\n        const { message, src } = this.state;\n\n        if (message && message.chat_id === chatId && message.id === messageId) {\n            if (src) {\n                const player = this.videoRef.current;\n                if (player) {\n                    if (player.paused) {\n                        player.play();\n                    } else {\n                        player.pause();\n                    }\n                }\n            }\n        } else {\n            const src = this.getMediaSrc(PlayerStore.message);\n            const playing = Boolean(src);\n            const playlist = PlayerStore.playlist;\n            this.setState(\n                {\n                    message: PlayerStore.message,\n                    playlist: PlayerStore.playlist,\n                    playing: playing,\n                    src: src\n                },\n                () => {\n                    const player = this.videoRef.current;\n                    if (player) {\n                        player.currentTime = this.startTime;\n                        if (this.playingMediaViewer) {\n                            player.pause();\n\n                            //this.handleVideoPause();\n                        }\n                    }\n                }\n            );\n        }\n    };\n\n    handlePrev = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaPrev'\n        });\n    };\n\n    handlePlay = () => {\n        const { message } = this.state;\n        if (!message) return;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaActive',\n            chatId: message.chat_id,\n            messageId: message.id\n        });\n    };\n\n    handleNext = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaNext'\n        });\n    };\n\n    getMediaSrc = message => {\n        if (message) {\n            const { content } = message;\n            if (content) {\n                const { audio, voice_note, video_note, web_page } = content;\n\n                if (audio) {\n                    const file = audio.audio;\n                    if (file) {\n                        return getSrc(file);\n                    }\n                }\n\n                if (voice_note) {\n                    const { voice } = voice_note;\n                    if (voice) {\n                        return getSrc(voice);\n                    }\n                }\n\n                if (video_note) {\n                    const { video } = video_note;\n                    if (video) {\n                        return getSrc(video);\n                    }\n                }\n\n                if (web_page) {\n                    if (web_page.audio) {\n                        const file = web_page.audio.audio;\n                        if (file) {\n                            return getSrc(file);\n                        }\n                    }\n\n                    if (web_page.voice_note) {\n                        const { voice } = web_page.voice_note;\n                        if (voice) {\n                            return getSrc(voice);\n                        }\n                    }\n\n                    if (web_page.video_note) {\n                        const { video } = web_page.video_note;\n                        if (video) {\n                            return getSrc(video);\n                        }\n                    }\n                }\n            }\n        }\n\n        return '';\n    };\n\n    handleEnded = (moveNext = true) => {\n        const { message } = this.state;\n        if (!message) return;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaEnding',\n            chatId: message.chat_id,\n            messageId: message.id,\n            moveNext: moveNext\n        });\n\n        this.setState(\n            {\n                //playing: false,\n                //message: null,\n                //src: null\n            },\n            () => {\n                TdLibController.clientUpdate({\n                    '@type': 'clientUpdateMediaEnd',\n                    chatId: message.chat_id,\n                    messageId: message.id,\n                    moveNext: moveNext\n                });\n            }\n        );\n    };\n\n    handleVideoEnded = () => {\n        this.handleEnded(true);\n    };\n\n    handleClose = () => {\n        const player = this.videoRef.current;\n        if (player) {\n            player.pause();\n        }\n\n        this.handleEnded(false);\n    };\n\n    handleTimeUpdate = () => {\n        const { message } = this.state;\n        if (!message) return;\n\n        const player = this.videoRef.current;\n        if (!player) return;\n\n        this.setState({\n            currentTime: player.currentTime,\n            currentTimeString: getDurationString(Math.floor(player.currentTime || 0))\n        });\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaTime',\n            chatId: message.chat_id,\n            messageId: message.id,\n            duration: player.duration,\n            currentTime: player.currentTime,\n            timestamp: Date.now()\n        });\n    };\n\n    handleCanPlay = () => {\n        const { message } = this.state;\n        if (!message) return;\n\n        const player = this.videoRef.current;\n        if (!player) return;\n\n        const { playbackRate, volume } = PlayerStore;\n\n        const { chat_id, id } = message;\n        const audio = hasAudio(chat_id, id);\n\n        player.playbackRate = audio ? PLAYER_PLAYBACKRATE_NORMAL : playbackRate;\n        player.volume = volume;\n        player.muted = false;\n\n        if (audio) {\n            return;\n        }\n\n        let stream = null;\n        if ('captureStream' in player) {\n            stream = player.captureStream();\n        } else if ('mozCaptureStream' in player) {\n            stream = player.mozCaptureStream();\n        }\n\n        if (!stream) {\n            return;\n        }\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaCaptureStream',\n            chatId: message.chat_id,\n            messageId: message.id,\n            stream: stream\n        });\n    };\n\n    handleVideoPlay = () => {\n        const { message } = this.state;\n        if (!message) return;\n\n        this.setState({\n            playing: true\n        });\n\n        const player = this.videoRef.current;\n        if (!player) return;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaPlay',\n            chatId: message.chat_id,\n            messageId: message.id,\n            currentTime: player.currentTime,\n            duration: player.duration,\n            timestamp: Date.now()\n        });\n    };\n\n    handleVideoPause = () => {\n        const { message } = this.state;\n        if (!message) return;\n\n        this.setState({\n            playing: false\n        });\n\n        const player = this.videoRef.current;\n        if (!player) return;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaPause',\n            chatId: message.chat_id,\n            messageId: message.id\n        });\n    };\n\n    handlePlaybackRate = () => {\n        const { playbackRate } = this.state;\n\n        const nextPlaybackRate =\n            playbackRate === PLAYER_PLAYBACKRATE_NORMAL ? PLAYER_PLAYBACKRATE_FAST : PLAYER_PLAYBACKRATE_NORMAL;\n\n        this.setState(\n            {\n                playbackRate: nextPlaybackRate\n            },\n            () => {\n                const player = this.videoRef.current;\n                if (!player) return;\n\n                player.playbackRate = nextPlaybackRate;\n            }\n        );\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaPlaybackRate',\n            playbackRate: nextPlaybackRate\n        });\n    };\n\n    hasPrev = (message, playlist) => {\n        if (!message) return false;\n        if (!playlist || !playlist.messages.length) return false;\n\n        const { chat_id, id } = message;\n\n        const index = playlist.messages.findIndex(x => x.chat_id === chat_id && x.id === id);\n        if (index === -1) return false;\n\n        return index + 1 < playlist.messages.length;\n    };\n\n    hasNext = (message, playlist) => {\n        if (!message) return false;\n        if (!playlist || !playlist.messages.length) return false;\n\n        const { chat_id, id } = message;\n\n        const index = playlist.messages.findIndex(x => x.chat_id === chat_id && x.id === id);\n        if (index === -1) return false;\n\n        return index - 1 >= 0;\n    };\n\n    handleTitleMouseEnter = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaTitleMouseOver',\n            over: true\n        });\n    };\n\n    handleTitleMouseLeave = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMediaTitleMouseOver',\n            over: false\n        });\n    };\n\n    handleTitleClick = () => {\n        const { message } = this.state;\n        if (!message) return;\n\n        openChat(message.chat_id, message.id);\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { playing, message, playlist, src } = this.state;\n\n        let audio = false;\n        if (message) {\n            const { chat_id, id } = message;\n            audio = hasAudio(chat_id, id);\n        }\n\n        const title = getMediaTitle(message);\n        const dateHint = getDateHint(message);\n        const date = getDate(message);\n        const showDate = !audio;\n        const showPlaybackRate = !audio;\n        const showRepeat = audio;\n        const showShuffle = audio;\n        const hasPrev = this.hasPrev(message, playlist);\n        const hasNext = this.hasNext(message, playlist);\n\n        return (\n            <>\n                <video\n                    className='header-player-video'\n                    ref={this.videoRef}\n                    src={src}\n                    autoPlay={true}\n                    controls={false}\n                    width={44}\n                    height={44}\n                    onCanPlay={this.handleCanPlay}\n                    onPlay={this.handleVideoPlay}\n                    onPause={this.handleVideoPause}\n                    onTimeUpdate={this.handleTimeUpdate}\n                    onEnded={this.handleVideoEnded}\n                />\n                {message && (\n                    <div className={classNames(classes.borderColor, 'header-player')}>\n                        <IconButton\n                            disabled={!hasPrev}\n                            className={classes.iconButton}\n                            color='primary'\n                            onClick={this.handlePrev}>\n                            <SkipPreviousIcon fontSize='small' />\n                        </IconButton>\n                        <IconButton\n                            className={classes.iconButton}\n                            color='primary'\n                            disabled={!src}\n                            onClick={this.handlePlay}>\n                            {playing ? <PauseIcon /> : <PlayArrowIcon />}\n                        </IconButton>\n                        <IconButton\n                            disabled={!hasNext}\n                            className={classes.iconButton}\n                            color='primary'\n                            onClick={this.handleNext}>\n                            <SkipNextIcon fontSize='small' />\n                        </IconButton>\n                        <Playlist />\n                        <div\n                            className='header-player-content'\n                            onMouseEnter={this.handleTitleMouseEnter}\n                            onMouseLeave={this.handleTitleMouseLeave}\n                            onClick={this.handleTitleClick}>\n                            <div className='header-player-title'>\n                                {title}\n                                {showDate && (\n                                    <span title={dateHint}>\n                                        &nbsp;\n                                        {date}\n                                    </span>\n                                )}\n                            </div>\n                            &nbsp;\n                            <Time />\n                        </div>\n                        <VolumeButton />\n                        {showPlaybackRate && <PlaybackRateButton />}\n                        {showRepeat && <RepeatButton />}\n                        {showShuffle && <ShuffleButton />}\n                        <IconButton className={classes.iconButton} onClick={this.handleClose}>\n                            <CloseIcon fontSize='small' />\n                        </IconButton>\n                    </div>\n                )}\n            </>\n        );\n    }\n}\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(HeaderPlayer);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport './UnreadSeparator.css';\n\nconst styles = theme => ({\n    unreadSeparator: {\n        background: theme.palette.type === 'dark' ? theme.palette.grey[800] : '#f0f4f7',\n        color: theme.palette.type === 'dark' ? theme.palette.text.primary : '#8096a8'\n    }\n});\n\nfunction UnreadSeparator(props) {\n    const { classes } = props;\n\n    return <div className={classNames('unread-separator', classes.unreadSeparator)}>Unread messages</div>;\n}\n\nexport default withStyles(styles)(UnreadSeparator);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport UnreadSeparator from './UnreadSeparator';\nimport Photo from './Media/Photo';\nimport { openMedia } from '../../Utils/Message';\nimport { getServiceMessageContent } from '../../Utils/ServiceMessage';\nimport MessageStore from '../../Stores/MessageStore';\nimport './ServiceMessage.css';\n\nconst chatPhotoStyle = {\n    width: 64,\n    height: 64,\n    borderRadius: '50%',\n    margin: '-8px auto 16px auto'\n};\n\nconst styles = theme => ({\n    '@keyframes highlighted': {\n        from: { backgroundColor: theme.palette.primary.main + '22' },\n        to: { backgroundColor: 'transparent' }\n    },\n    messageHighlighted: {\n        animation: 'highlighted 4s ease-out'\n    }\n});\n\nclass ServiceMessage extends React.Component {\n    constructor(props) {\n        super(props);\n\n        if (process.env.NODE_ENV !== 'production') {\n            const { chatId, messageId } = this.props;\n            this.state = {\n                message: MessageStore.get(chatId, messageId),\n                highlighted: false\n            };\n        } else {\n            this.state = {\n                highlighted: false\n            };\n        }\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId, messageId, sendingState, showUnreadSeparator } = this.props;\n        const { highlighted } = this.state;\n\n        if (nextProps.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextProps.messageId !== messageId) {\n            return true;\n        }\n\n        if (nextProps.sendingState !== sendingState) {\n            return true;\n        }\n\n        if (nextProps.showUnreadSeparator !== showUnreadSeparator) {\n            return true;\n        }\n\n        if (nextState.highlighted !== highlighted) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        MessageStore.on('clientUpdateMessageHighlighted', this.onClientUpdateMessageHighlighted);\n    }\n\n    componentWillUnmount() {\n        MessageStore.removeListener('clientUpdateMessageHighlighted', this.onClientUpdateMessageHighlighted);\n    }\n\n    onClientUpdateMessageHighlighted = update => {\n        const { chatId, messageId } = this.props;\n        const { selected, highlighted } = this.state;\n\n        if (selected) return;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            if (highlighted) {\n                this.setState({ highlighted: false }, () => {\n                    setTimeout(() => {\n                        this.setState({ highlighted: true });\n                    }, 0);\n                });\n            } else {\n                this.setState({ highlighted: true });\n            }\n        } else if (highlighted) {\n            this.setState({ highlighted: false });\n        }\n    };\n\n    handleAnimationEnd = () => {\n        this.setState({ highlighted: false });\n    };\n\n    openMedia = event => {\n        if (event) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n\n        const { chatId, messageId } = this.props;\n\n        openMedia(chatId, messageId);\n    };\n\n    render() {\n        const { classes, chatId, messageId, showUnreadSeparator } = this.props;\n        const { highlighted } = this.state;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return <div>[empty service message]</div>;\n\n        const { content } = message;\n        if (!content) return <div>[empty service message]</div>;\n\n        const { photo } = content;\n\n        const text = getServiceMessageContent(message, true);\n\n        const messageClassName = classNames('service-message', { [classes.messageHighlighted]: highlighted });\n\n        return (\n            <div className={messageClassName} onAnimationEnd={this.handleAnimationEnd}>\n                {showUnreadSeparator && <UnreadSeparator />}\n                <div className='service-message-wrapper'>\n                    <div className='service-message-content'>{text}</div>\n                </div>\n                {photo && (\n                    <Photo\n                        chatId={chatId}\n                        messageId={messageId}\n                        photo={photo}\n                        style={chatPhotoStyle}\n                        openMedia={this.openMedia}\n                    />\n                )}\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles, { withTheme: true })(ServiceMessage);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withStyles } from '@material-ui/core';\nimport { withTranslation } from 'react-i18next';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { getForwardTitle, isForwardOriginHidden } from '../../Utils/Message';\nimport { openUser, openChat } from '../../Actions/Client';\nimport './Forward.css';\n\nfunction arrowGenerator(color) {\n    return {\n        '&[x-placement*=\"bottom\"] $arrow': {\n            top: 0,\n            left: 0,\n            marginTop: '-0.95em',\n            width: '3em',\n            height: '1em',\n            '&::before': {\n                borderWidth: '0 1em 1em 1em',\n                borderColor: `transparent transparent ${color} transparent`\n            }\n        },\n        '&[x-placement*=\"top\"] $arrow': {\n            bottom: 0,\n            left: 0,\n            marginBottom: '-0.95em',\n            width: '3em',\n            height: '1em',\n            '&::before': {\n                borderWidth: '1em 1em 0 1em',\n                borderColor: `${color} transparent transparent transparent`\n            }\n        },\n        '&[x-placement*=\"right\"] $arrow': {\n            left: 0,\n            marginLeft: '-0.95em',\n            height: '3em',\n            width: '1em',\n            '&::before': {\n                borderWidth: '1em 1em 1em 0',\n                borderColor: `transparent ${color} transparent transparent`\n            }\n        },\n        '&[x-placement*=\"left\"] $arrow': {\n            right: 0,\n            marginRight: '-0.95em',\n            height: '3em',\n            width: '1em',\n            '&::before': {\n                borderWidth: '1em 0 1em 1em',\n                borderColor: `transparent transparent transparent ${color}`\n            }\n        }\n    };\n}\n\nconst styles = theme => ({\n    forwardColor: {\n        color: theme.palette.primary.main\n    },\n    arrowPopper: arrowGenerator(theme.palette.grey[700]),\n    arrow: {\n        position: 'absolute',\n        fontSize: 6,\n        width: '3em',\n        height: '3em',\n        '&::before': {\n            content: '\"\"',\n            margin: 'auto',\n            display: 'block',\n            width: 0,\n            height: 0,\n            borderStyle: 'solid'\n        }\n    },\n    tooltip: {\n        margin: '6px 0 26px 0'\n    }\n});\n\nclass Forward extends React.Component {\n    state = {\n        arrowRef: null\n    };\n\n    handleArrowRef = node => {\n        this.setState({\n            arrowRef: node\n        });\n    };\n\n    openForward = event => {\n        event.stopPropagation();\n\n        const { forwardInfo } = this.props;\n        if (!forwardInfo) return null;\n\n        const { origin } = forwardInfo;\n\n        switch (origin['@type']) {\n            case 'messageForwardOriginUser': {\n                const { sender_user_id } = origin;\n\n                openUser(sender_user_id, true);\n                break;\n            }\n            case 'messageForwardOriginHiddenUser': {\n                break;\n            }\n            case 'messageForwardOriginChannel': {\n                const { chat_id, message_id } = origin;\n\n                openChat(chat_id, message_id, true);\n                break;\n            }\n        }\n    };\n\n    render() {\n        const { t, classes, forwardInfo } = this.props;\n        const { arrowRef } = this.state;\n\n        const title = getForwardTitle(forwardInfo, t);\n        const tooltip = isForwardOriginHidden(forwardInfo) ? (\n            <>\n                {t('HidAccount')}\n                <span className={classes.arrow} ref={this.handleArrowRef} />\n            </>\n        ) : (\n            ''\n        );\n\n        return (\n            <div className={classNames('message-author', classes.forwardColor, 'forward')}>\n                {`${t('ForwardedMessage')}\\n${t('From')} `}\n                <Tooltip\n                    title={tooltip}\n                    classes={{ popper: classes.arrowPopper, tooltip: classes.tooltip }}\n                    PopperProps={{\n                        popperOptions: {\n                            modifiers: {\n                                arrow: {\n                                    enabled: Boolean(arrowRef),\n                                    element: arrowRef\n                                }\n                            }\n                        }\n                    }}\n                    placement='top'>\n                    <a onClick={this.openForward}>{title}</a>\n                </Tooltip>\n            </div>\n        );\n    }\n}\n\nForward.propTypes = {\n    forwardInfo: PropTypes.object.isRequired\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(Forward);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport MessageStore from '../../Stores/MessageStore';\nimport ChatStore from '../../Stores/ChatStore';\nimport './MessageStatus.css';\n\nclass MessageStatus extends React.Component {\n    constructor(props) {\n        super(props);\n        this.handleUpdateMessageSend = this.handleUpdateMessageSend.bind(this);\n        this.handleUpdateChatReadOutbox = this.handleUpdateChatReadOutbox.bind(this);\n\n        this.state = {\n            sendingState: props.sendingState,\n            unread: true\n        };\n    }\n\n    componentDidMount() {\n        MessageStore.on('updateMessageSendFailed', this.handleUpdateMessageSend);\n        MessageStore.on('updateMessageSendSucceeded', this.handleUpdateMessageSend);\n\n        ChatStore.on('updateChatReadOutbox', this.handleUpdateChatReadOutbox);\n    }\n\n    handleUpdateMessageSend(payload) {\n        if (this.props.messageId === payload.old_message_id && payload.message) {\n            this.newMessageId = payload.message.id;\n            this.setState({ sendingState: payload.message.sending_state });\n        }\n    }\n\n    handleUpdateChatReadOutbox(payload) {\n        if (\n            this.props.chatId === payload.chat_id &&\n            ((this.props.newMessageId && this.props.newMessageId <= payload.last_read_outbox_message_id) ||\n                this.props.messageId <= payload.last_read_outbox_message_id)\n        ) {\n            this.setState({ sendingState: null, unread: false });\n        }\n    }\n\n    componentWillUnmount() {\n        MessageStore.removeListener('updateMessageSendFailed', this.handleUpdateMessageSend);\n        MessageStore.removeListener('updateMessageSendSucceeded', this.handleUpdateMessageSend);\n\n        ChatStore.removeListener('updateChatReadOutbox', this.handleUpdateChatReadOutbox);\n    }\n\n    render() {\n        let stateClassName = 'messagestatus-succeded';\n        if (this.state.sendingState) {\n            stateClassName =\n                this.state.sendingState['@type'] === 'messageSendingStateFailed'\n                    ? 'messagestatus-failed'\n                    : 'messagestatus-pending';\n        }\n\n        return this.state.unread && <i className={classNames('messagestatus-icon', stateClassName)} />;\n    }\n}\n\nexport default MessageStatus;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport Animation from './Animation';\nimport Photo from './Photo';\nimport Video from './Video';\nimport Audio from './Audio';\nimport Document from './Document';\nimport VoiceNote from './VoiceNote';\nimport VideoNote from './VideoNote';\nimport Sticker from './Sticker';\nimport { getSize } from '../../../Utils/Common';\nimport { accentStyles } from '../../Theme';\nimport { getSrc } from '../../../Utils/File';\nimport { PHOTO_DISPLAY_SIZE, PHOTO_DISPLAY_SMALL_SIZE, PHOTO_SIZE } from '../../../Constants';\nimport MessageStore from '../../../Stores/MessageStore';\nimport './WebPage.css';\n\nconst styles = theme => ({\n    ...accentStyles(theme)\n});\n\nclass WebPage extends React.Component {\n    getContent = () => {\n        const { classes, chatId, messageId, size, displaySize, displaySmallSize, openMedia } = this.props;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n\n        const { content } = message;\n        if (!content) return null;\n\n        const { web_page } = content;\n        if (!web_page) return null;\n\n        const {\n            site_name,\n            title,\n            description,\n            url,\n            photo,\n            animation,\n            video,\n            audio,\n            document,\n            voice_note,\n            video_note,\n            sticker,\n            type\n        } = web_page;\n\n        if (sticker) {\n            return (\n                <>\n                    {site_name && (\n                        <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                    )}\n                    {title && <div className='web-page-title'>{title}</div>}\n                    {description && <div className='web-page-description'>{description}</div>}\n                    <Sticker chatId={chatId} messageId={messageId} sticker={sticker} openMedia={openMedia} />\n                </>\n            );\n        }\n\n        if (voice_note) {\n            return (\n                <>\n                    {site_name && (\n                        <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                    )}\n                    {title && <div className='web-page-title'>{title}</div>}\n                    {description && <div className='web-page-description'>{description}</div>}\n                    <VoiceNote chatId={chatId} messageId={messageId} voiceNote={voice_note} openMedia={openMedia} />\n                </>\n            );\n        }\n\n        if (video_note) {\n            return (\n                <>\n                    {site_name && (\n                        <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                    )}\n                    {title && <div className='web-page-title'>{title}</div>}\n                    {description && <div className='web-page-description'>{description}</div>}\n                    <VideoNote chatId={chatId} messageId={messageId} videoNote={video_note} openMedia={openMedia} />\n                </>\n            );\n        }\n\n        if (audio) {\n            return (\n                <>\n                    {site_name && (\n                        <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                    )}\n                    {title && <div className='web-page-title'>{title}</div>}\n                    {description && <div className='web-page-description'>{description}</div>}\n                    <Audio chatId={chatId} messageId={messageId} audio={audio} openMedia={openMedia} />\n                </>\n            );\n        }\n\n        if (document) {\n            return (\n                <>\n                    {site_name && (\n                        <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                    )}\n                    {title && <div className='web-page-title'>{title}</div>}\n                    {description && <div className='web-page-description'>{description}</div>}\n                    <Document chatId={chatId} messageId={messageId} document={document} openMedia={openMedia} />\n                </>\n            );\n        }\n\n        if (animation) {\n            const animationSrc = getSrc(animation.animation);\n            if (animationSrc || animation.thumbnail) {\n                return (\n                    <>\n                        {site_name && (\n                            <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                        )}\n                        {title && <div className='web-page-title'>{title}</div>}\n                        {description && <div className='web-page-description'>{description}</div>}\n                        <Animation chatId={chatId} messageId={messageId} animation={animation} openMedia={openMedia} />\n                    </>\n                );\n            }\n        }\n\n        if (video) {\n            if (video.thumbnail) {\n                return (\n                    <>\n                        {site_name && (\n                            <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                        )}\n                        {title && <div className='web-page-title'>{title}</div>}\n                        {description && <div className='web-page-description'>{description}</div>}\n                        <Video chatId={chatId} messageId={messageId} video={video} openMedia={openMedia} />\n                    </>\n                );\n            }\n        }\n\n        if (photo) {\n            const photoSize = getSize(photo.sizes, size);\n            const smallPhoto =\n                (type === 'article' || type === 'photo') &&\n                (site_name || title || description) &&\n                photoSize &&\n                photoSize.width === photoSize.height;\n\n            const style = smallPhoto\n                ? {\n                      float: 'right',\n                      marginLeft: 6,\n                      marginBottom: 6\n                  }\n                : {};\n            return (\n                <>\n                    {smallPhoto && (\n                        <Photo\n                            displaySize={displaySmallSize}\n                            style={style}\n                            chatId={chatId}\n                            messageId={messageId}\n                            photo={photo}\n                            openMedia={openMedia}\n                        />\n                    )}\n                    {site_name && (\n                        <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                    )}\n                    {title && <div className='web-page-title'>{title}</div>}\n                    {description && <div className='web-page-description'>{description}</div>}\n                    {!smallPhoto && <Photo chatId={chatId} messageId={messageId} photo={photo} openMedia={openMedia} />}\n                </>\n            );\n        }\n\n        return (\n            <>\n                {site_name && (\n                    <div className={classNames('web-page-site-name', classes.accentColorDark)}>{site_name}</div>\n                )}\n                {title && <div className='web-page-title'>{title}</div>}\n                {description && <div className='web-page-description'>{description}</div>}\n            </>\n        );\n    };\n\n    render() {\n        const { classes } = this.props;\n\n        return (\n            <div className='web-page'>\n                <div className={classNames('web-page-border', classes.accentBackgroundLight)} />\n                <div className='web-page-wrapper'>{this.getContent()}</div>\n            </div>\n        );\n    }\n}\n\nWebPage.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    size: PropTypes.number,\n    displaySize: PropTypes.number,\n    displaySmallSize: PropTypes.number,\n    openMedia: PropTypes.func\n};\n\nWebPage.defaultProps = {\n    size: PHOTO_SIZE,\n    displaySize: PHOTO_DISPLAY_SIZE,\n    displaySmallSize: PHOTO_DISPLAY_SMALL_SIZE\n};\n\nexport default withStyles(styles)(WebPage);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport Reply from './Reply';\nimport Forward from './Forward';\nimport MessageStatus from './MessageStatus';\nimport MessageAuthor from './MessageAuthor';\nimport UserTileControl from '../Tile/UserTileControl';\nimport ChatTileControl from '../Tile/ChatTileControl';\nimport UnreadSeparator from './UnreadSeparator';\nimport WebPage from './Media/WebPage';\nimport {\n    getDate,\n    getDateHint,\n    getText,\n    getMedia,\n    getUnread,\n    getSenderUserId,\n    getWebPage,\n    openMedia\n} from '../../Utils/Message';\nimport { canSendMessages } from '../../Utils/Chat';\nimport { openUser, openChat, selectMessage } from '../../Actions/Client';\nimport MessageStore from '../../Stores/MessageStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './Message.css';\n\nconst styles = theme => ({\n    messageAuthorColor: {\n        color: theme.palette.primary.main\n    },\n    messageSelected: {\n        backgroundColor: theme.palette.primary.main + '22'\n    },\n    '@keyframes highlighted': {\n        from: { backgroundColor: theme.palette.primary.main + '22' },\n        to: { backgroundColor: 'transparent' }\n    },\n    messageHighlighted: {\n        animation: 'highlighted 4s ease-out'\n    }\n});\n\nclass Message extends Component {\n    constructor(props) {\n        super(props);\n\n        if (process.env.NODE_ENV !== 'production') {\n            const { chatId, messageId } = this.props;\n            this.state = {\n                message: MessageStore.get(chatId, messageId),\n                selected: false,\n                highlighted: false\n            };\n        } else {\n            this.state = {\n                selected: false,\n                highlighted: false\n            };\n        }\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { theme, chatId, messageId, sendingState, showUnreadSeparator } = this.props;\n        const { contextMenu, selected, highlighted } = this.state;\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        if (nextProps.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextProps.messageId !== messageId) {\n            return true;\n        }\n\n        if (nextProps.sendingState !== sendingState) {\n            return true;\n        }\n\n        if (nextProps.showUnreadSeparator !== showUnreadSeparator) {\n            return true;\n        }\n\n        if (nextState.contextMenu !== contextMenu) {\n            return true;\n        }\n\n        if (nextState.selected !== selected) {\n            return true;\n        }\n\n        if (nextState.highlighted !== highlighted) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        MessageStore.on('clientUpdateMessageHighlighted', this.onClientUpdateMessageHighlighted);\n        MessageStore.on('clientUpdateMessageSelected', this.onClientUpdateMessageSelected);\n        MessageStore.on('clientUpdateClearSelection', this.onClientUpdateClearSelection);\n        MessageStore.on('updateMessageContent', this.onUpdateMessageContent);\n        MessageStore.on('updateMessageEdited', this.onUpdateMessageEdited);\n        MessageStore.on('updateMessageViews', this.onUpdateMessageViews);\n    }\n\n    componentWillUnmount() {\n        MessageStore.removeListener('clientUpdateMessageHighlighted', this.onClientUpdateMessageHighlighted);\n        MessageStore.removeListener('clientUpdateMessageSelected', this.onClientUpdateMessageSelected);\n        MessageStore.removeListener('clientUpdateClearSelection', this.onClientUpdateClearSelection);\n        MessageStore.removeListener('updateMessageContent', this.onUpdateMessageContent);\n        MessageStore.removeListener('updateMessageEdited', this.onUpdateMessageEdited);\n        MessageStore.removeListener('updateMessageViews', this.onUpdateMessageViews);\n    }\n\n    onClientUpdateClearSelection = update => {\n        if (!this.state.selected) return;\n\n        this.setState({ selected: false });\n    };\n\n    onClientUpdateMessageHighlighted = update => {\n        const { chatId, messageId } = this.props;\n        const { selected, highlighted } = this.state;\n\n        if (selected) return;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            if (highlighted) {\n                this.setState({ highlighted: false }, () => {\n                    setTimeout(() => {\n                        this.setState({ highlighted: true });\n                    }, 0);\n                });\n            } else {\n                this.setState({ highlighted: true });\n            }\n        } else if (highlighted) {\n            this.setState({ highlighted: false });\n        }\n    };\n\n    onClientUpdateMessageSelected = update => {\n        const { chatId, messageId } = this.props;\n        const { selected } = update;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({ selected, highlighted: false });\n        }\n    };\n\n    onUpdateMessageEdited = update => {\n        const { chat_id, message_id } = update;\n        const { chatId, messageId } = this.props;\n\n        if (chatId === chat_id && messageId === message_id) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateMessageViews = update => {\n        const { chat_id, message_id } = update;\n        const { chatId, messageId } = this.props;\n\n        if (chatId === chat_id && messageId === message_id) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateMessageContent = update => {\n        const { chat_id, message_id } = update;\n        const { chatId, messageId } = this.props;\n\n        if (chatId !== chat_id) return;\n        if (messageId !== message_id) return;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return;\n\n        const { content } = message;\n        if (!content) return;\n\n        switch (content['@type']) {\n            case 'messagePoll': {\n                this.forceUpdate();\n                break;\n            }\n        }\n    };\n\n    handleSelectUser = userId => {\n        openUser(userId, true);\n    };\n\n    handleSelectChat = chatId => {\n        openChat(chatId, true);\n    };\n\n    handleSelection = () => {\n        if (!this.mouseDown) return;\n\n        const selection = window.getSelection().toString();\n        if (selection) return;\n\n        const { chatId, messageId } = this.props;\n\n        const selected = !MessageStore.selectedItems.has(`chatId=${chatId}_messageId=${messageId}`);\n        selectMessage(chatId, messageId, selected);\n    };\n\n    handleDateClick = e => {\n        e.preventDefault();\n        e.stopPropagation();\n\n        const { chatId, messageId } = this.props;\n\n        const message = MessageStore.get(chatId, messageId);\n\n        const canBeReplied = canSendMessages(chatId);\n        if (canBeReplied) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateReply',\n                chatId: chatId,\n                messageId: messageId\n            });\n            return;\n        }\n\n        const canBeForwarded = message && message.can_be_forwarded;\n        if (canBeForwarded) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateForward',\n                info: {\n                    chatId: chatId,\n                    messageIds: [messageId]\n                }\n            });\n        }\n    };\n\n    openMedia = event => {\n        if (event) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n\n        const { chatId, messageId } = this.props;\n\n        openMedia(chatId, messageId);\n    };\n\n    handleAnimationEnd = () => {\n        this.setState({ highlighted: false });\n    };\n\n    handleMouseDown = () => {\n        this.mouseDown = true;\n    };\n\n    handleMouseOver = () => {\n        this.mouseDown = false;\n    };\n\n    handleMouseOut = () => {\n        this.mouseOut = false;\n    };\n\n    render() {\n        const { t, classes, chatId, messageId, showUnreadSeparator } = this.props;\n        const { contextMenu, left, top, selected, highlighted } = this.state;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return <div>[empty message]</div>;\n\n        const { sending_state, views, edit_date, reply_to_message_id, forward_info } = message;\n\n        const text = getText(message);\n        const webPage = getWebPage(message);\n        const date = getDate(message);\n        const dateHint = getDateHint(message);\n        const media = getMedia(message, this.openMedia);\n        this.unread = getUnread(message);\n        const senderUserId = getSenderUserId(message);\n\n        const tile = senderUserId ? (\n            <UserTileControl userId={senderUserId} onSelect={this.handleSelectUser} />\n        ) : (\n            <ChatTileControl chatId={chatId} onSelect={this.handleSelectChat} />\n        );\n\n        const messageClassName = classNames(\n            'message',\n            { 'message-selected': selected },\n            { [classes.messageSelected]: selected },\n            // { 'message-highlighted': highlighted && !selected },\n            { [classes.messageHighlighted]: highlighted && !selected }\n        );\n\n        return (\n            <div\n                className={messageClassName}\n                onMouseOver={this.handleMouseOver}\n                onMouseOut={this.handleMouseOut}\n                onMouseDown={this.handleMouseDown}\n                onClick={this.handleSelection}\n                onAnimationEnd={this.handleAnimationEnd}>\n                {showUnreadSeparator && <UnreadSeparator />}\n                <div className='message-wrapper'>\n                    <i className='message-select-tick' />\n                    {this.unread && (\n                        <MessageStatus chatId={chatId} messageId={messageId} sendingState={sending_state} />\n                    )}\n                    {tile}\n                    <div className='message-content'>\n                        <div className='message-title'>\n                            {!forward_info && <MessageAuthor chatId={chatId} openChat userId={senderUserId} openUser />}\n                            {forward_info && <Forward forwardInfo={forward_info} />}\n                            <div className='message-meta'>\n                                <span>&nbsp;</span>\n                                {views > 0 && (\n                                    <>\n                                        <i className='message-views-icon' />\n                                        <span className='message-views'>\n                                            &nbsp;\n                                            {views}\n                                            &nbsp; &nbsp;\n                                        </span>\n                                    </>\n                                )}\n                                {edit_date > 0 && <span>{t('EditedMessage')}&nbsp;</span>}\n                                <a className='message-date' onClick={this.handleDateClick}>\n                                    <span title={dateHint}>{date}</span>\n                                </a>\n                            </div>\n                        </div>\n                        {Boolean(reply_to_message_id) && <Reply chatId={chatId} messageId={reply_to_message_id} />}\n                        {media}\n                        <div className='message-text'>{text}</div>\n                        {webPage && <WebPage chatId={chatId} messageId={messageId} openMedia={this.openMedia} />}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(Message);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport FileStore from '../../Stores/FileStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './FilesDropTarget.css';\n\nclass FilesDropTarget extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            dragging: ApplicationStore.getDragging()\n        };\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateDragging', this.onClientUpdateDragging);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateDragging', this.onClientUpdateDragging);\n    }\n\n    onClientUpdateDragging = update => {\n        this.setState({ dragging: ApplicationStore.getDragging() });\n    };\n\n    handleDragEnter = event => {\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    handleDrop = event => {\n        event.preventDefault();\n        event.stopPropagation();\n        ApplicationStore.setDragging(false);\n\n        this.handleAttachDocumentComplete(event.dataTransfer.files);\n    };\n\n    handleDragLeave = event => {\n        event.preventDefault();\n        event.stopPropagation();\n        ApplicationStore.setDragging(false);\n    };\n\n    handleAttachDocumentComplete = files => {\n        if (files.length === 0) return;\n\n        for (let i = 0; i < files.length; i++) {\n            let file = files[i];\n            const content = {\n                '@type': 'inputMessageDocument',\n                document: { '@type': 'inputFileBlob', name: file.name, data: file }\n            };\n\n            this.onSendInternal(content, result => FileStore.uploadFile(result.content.document.document.id, result));\n        }\n    };\n\n    onSendInternal = async (content, callback) => {\n        const currentChatId = ApplicationStore.getChatId();\n\n        if (!currentChatId) return;\n        if (!content) return;\n\n        try {\n            ApplicationStore.invokeScheduledAction(`clientUpdateClearHistory chatId=${currentChatId}`);\n\n            let result = await TdLibController.send({\n                '@type': 'sendMessage',\n                chat_id: currentChatId,\n                reply_to_message_id: 0,\n                input_message_content: content\n            });\n\n            //MessageStore.set(result);\n\n            TdLibController.send({\n                '@type': 'viewMessages',\n                chat_id: currentChatId,\n                message_ids: [result.id]\n            });\n\n            callback(result);\n        } catch (error) {\n            alert('sendMessage error ' + JSON.stringify(error));\n        }\n    };\n\n    render() {\n        const { dragging } = this.state;\n\n        return (\n            <>\n                {dragging && (\n                    <div\n                        className='files-drop-target'\n                        onDragEnter={this.handleDragEnter}\n                        onDragLeave={this.handleDragLeave}\n                        onDrop={this.handleDrop}>\n                        <div className='files-drop-target-wrapper'>\n                            <div className='files-drop-target-text'>\n                                <div className='files-drop-target-title'>Drop files here</div>\n                                <div className='files-drop-target-subtitle'>to send them without compression</div>\n                            </div>\n                        </div>\n                    </div>\n                )}\n            </>\n        );\n    }\n}\n\nFilesDropTarget.propTypes = {};\n\nexport default FilesDropTarget;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { withStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nimport ServiceMessage from '../Message/ServiceMessage';\nimport Message from '../Message/Message';\nimport FilesDropTarget from './FilesDropTarget';\nimport { debounce, throttle, getPhotoSize, itemsInView } from '../../Utils/Common';\nimport { loadChatsContent, loadDraftContent, loadMessageContents } from '../../Utils/File';\nimport { filterMessages } from '../../Utils/Message';\nimport { isServiceMessage } from '../../Utils/ServiceMessage';\nimport { canSendFiles, getChatFullInfo, getSupergroupId, isSupergroup } from '../../Utils/Chat';\nimport { highlightMessage } from '../../Actions/Client';\nimport { MESSAGE_SLICE_LIMIT } from '../../Constants';\nimport ChatStore from '../../Stores/ChatStore';\nimport SupergroupStore from '../../Stores/SupergroupStore';\nimport MessageStore from '../../Stores/MessageStore';\nimport FileStore from '../../Stores/FileStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport PlayerStore from '../../Stores/PlayerStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './MessagesList.css';\n\nconst ScrollBehaviorEnum = Object.freeze({\n    NONE: 'NONE',\n    SCROLL_TO_BOTTOM: 'SCROLL_TO_BOTTOM',\n    SCROLL_TO_UNREAD: 'SCROLL_TO_UNREAD',\n    SCROLL_TO_MESSAGE: 'SCROLL_TO_MESSAGE',\n    KEEP_SCROLL_POSITION: 'KEEP_SCROLL_POSITION'\n});\n\nconst styles = theme => ({\n    background: {\n        background: theme.palette.type === 'dark' ? theme.palette.grey[900] : 'transparent'\n    }\n});\n\nclass MessagesList extends React.Component {\n    constructor(props) {\n        super(props);\n\n        console.log(`MessagesList.ctor chat_id=${props.chatId} message_id=${props.messageId}`);\n\n        this.sessionId = Date.now();\n        this.state = {\n            prevChatId: 0,\n            prevMessageId: null,\n            playerOpened: false,\n            history: [],\n            clearHistory: false,\n            selectionActive: false,\n            scrollBehavior: ScrollBehaviorEnum.NONE,\n            separatorMessageId: 0\n        };\n\n        this.listRef = React.createRef();\n        this.itemsRef = React.createRef();\n\n        this.itemsMap = new Map();\n\n        this.updateItemsInView = throttle(this.updateItemsInView, 500);\n        //debounce(this.updateItemsInView, 250);\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.chatId !== state.prevChatId || props.messageId !== state.prevMessageId) {\n            return {\n                prevChatId: props.chatId,\n                prevMessageId: props.messageId,\n                clearHistory: false,\n                selectionActive: false,\n                scrollBehavior: ScrollBehaviorEnum.SCROLL_TO_BOTTOM,\n                separatorMessageId: 0\n            };\n        }\n\n        return null;\n    }\n\n    getSnapshotBeforeUpdate(prevProps, prevState) {\n        const { chatId } = this.props;\n\n        const list = this.listRef.current;\n        const snapshot = {\n            scrollTop: list.scrollTop,\n            scrollHeight: list.scrollHeight,\n            offsetHeight: list.offsetHeight\n        };\n\n        console.log(\n            `SCROLL GETSNAPSHOTBEFOREUPDATE \\\\\n            list.scrollTop=${list.scrollTop} \\\\\n            list.scrollHeight=${list.scrollHeight} \\\\\n            list.offsetHeight=${list.offsetHeight} \\\\\n            chatId=${chatId}`\n        );\n\n        return snapshot;\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { chatId, messageId } = this.props;\n\n        const list = this.listRef.current;\n        console.log(\n            `MessagesList.componentDidUpdate chat_id=${chatId} message_id=${messageId} \\\\\n            prev_chat_id=${prevProps.chatId} prev_message_id=${prevProps.messageId} \\\\\n            list.scrollTop=${list.scrollTop} \\\\\n            list.scrollHeight=${list.scrollHeight} \\\\\n            list.offsetHeight=${list.offsetHeight}`\n        );\n\n        if (prevProps.chatId !== chatId || prevProps.messageId !== messageId) {\n            this.handleSelectChat(chatId, prevProps.chatId, messageId, prevProps.messageId);\n        } else {\n            this.handleScrollBehavior(snapshot);\n        }\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId, messageId, theme } = this.props;\n        const { playerOpened, history, dragging, clearHistory, selectionActive } = this.state;\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        if (nextProps.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextProps.messageId !== messageId) {\n            return true;\n        }\n\n        if (nextState.playerOpened !== playerOpened) {\n            return true;\n        }\n\n        if (nextState.history !== history) {\n            return true;\n        }\n\n        if (nextState.dragging !== dragging) {\n            return true;\n        }\n\n        if (nextState.clearHistory !== clearHistory) {\n            return true;\n        }\n\n        if (nextState.selectionActive !== selectionActive) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        const { chatId } = this.props;\n        this.handleSelectChat(chatId, 0);\n\n        MessageStore.on('updateNewMessage', this.onUpdateNewMessage);\n        MessageStore.on('updateDeleteMessages', this.onUpdateDeleteMessages);\n        MessageStore.on('updateMessageContent', this.onUpdateMessageContent);\n        MessageStore.on('updateMessageSendSucceeded', this.onUpdateMessageSendSucceeded);\n        MessageStore.on('clientUpdateMessageSelected', this.onClientUpdateSelection);\n        MessageStore.on('clientUpdateClearSelection', this.onClientUpdateSelection);\n        ChatStore.on('updateChatLastMessage', this.onUpdateChatLastMessage);\n        ChatStore.on('clientUpdateClearHistory', this.onClientUpdateClearHistory);\n\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaEnding', this.onClientUpdateMediaEnding);\n        PlayerStore.on('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    componentWillUnmount() {\n        MessageStore.removeListener('updateNewMessage', this.onUpdateNewMessage);\n        MessageStore.removeListener('updateDeleteMessages', this.onUpdateDeleteMessages);\n        MessageStore.removeListener('updateMessageContent', this.onUpdateMessageContent);\n        MessageStore.removeListener('updateMessageSendSucceeded', this.onUpdateMessageSendSucceeded);\n        MessageStore.removeListener('clientUpdateMessageSelected', this.onClientUpdateSelection);\n        MessageStore.removeListener('clientUpdateClearSelection', this.onClientUpdateSelection);\n        ChatStore.removeListener('updateChatLastMessage', this.onUpdateChatLastMessage);\n        ChatStore.removeListener('clientUpdateClearHistory', this.onClientUpdateClearHistory);\n\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaEnding', this.onClientUpdateMediaEnding);\n        PlayerStore.removeListener('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    onClientUpdateMediaActive = update => {\n        const list = this.listRef.current;\n\n        const prevOffsetHeight = list.offsetHeight;\n        const prevScrollTop = list.scrollTop;\n        this.setState({ playerOpened: true }, () => {\n            if (list.scrollTop === prevScrollTop) {\n                list.scrollTop += Math.abs(prevOffsetHeight - list.offsetHeight);\n            }\n        });\n    };\n\n    onClientUpdateMediaEnding = udpate => {\n        const list = this.listRef.current;\n\n        this.prevOffsetHeight = list.offsetHeight;\n        this.prevScrollTop = list.scrollTop;\n    };\n\n    onClientUpdateMediaEnd = udpate => {\n        const list = this.listRef.current;\n\n        //const prevOffsetHeight = list.offsetHeight;\n        //const prevScrollTop = list.scrollTop;\n\n        this.setState({ playerOpened: false }, () => {\n            if (list.scrollTop === this.prevScrollTop) {\n                list.scrollTop -= Math.abs(this.prevOffsetHeight - list.offsetHeight);\n            }\n        });\n    };\n\n    onClientUpdateSelection = update => {\n        this.setState({\n            selectionActive: MessageStore.selectedItems.size > 0,\n            scrollBehavior: ScrollBehaviorEnum.KEEP_SCROLL_POSITION\n        });\n    };\n\n    onClientUpdateClearHistory = update => {\n        const { chatId } = this.props;\n\n        if (chatId === update.chatId) {\n            this.setState({ clearHistory: update.inProgress });\n        }\n    };\n\n    onUpdateMessageContent = update => {\n        const { chatId } = this.props;\n        const { history } = this.state;\n        const { chat_id, message_id } = update;\n\n        if (chatId !== chat_id) return;\n\n        if (history.findIndex(x => x.id === message_id) !== -1) {\n            const message = MessageStore.get(chat_id, message_id);\n            if (!message) return;\n\n            const store = FileStore.getStore();\n            loadMessageContents(store, [message]);\n        }\n    };\n\n    onUpdateChatLastMessage = update => {\n        const { chatId } = this.props;\n        if (chatId !== update.chat_id) return;\n    };\n\n    onUpdateMessageSendSucceeded = update => {\n        const { message, old_message_id } = update;\n        const { chatId } = this.props;\n        if (chatId !== message.chat_id) return;\n\n        let handleSendSucceeded = false;\n        const { content } = message;\n        switch (content['@type']) {\n            case 'messagePoll': {\n                handleSendSucceeded = true;\n                break;\n            }\n        }\n\n        if (!handleSendSucceeded) return;\n\n        let scrollBehavior = ScrollBehaviorEnum.NONE;\n        const list = this.listRef.current;\n        // at the end of list\n        if (list.scrollTop === list.scrollHeight - list.offsetHeight) {\n            scrollBehavior = ScrollBehaviorEnum.SCROLL_TO_BOTTOM;\n        }\n        // sent message\n        else if (message.is_outgoing) {\n            scrollBehavior = ScrollBehaviorEnum.SCROLL_TO_BOTTOM;\n        }\n\n        console.log('SCROLL MessagesList.onUpdateMessageSendSucceeded scrollBehavior=' + scrollBehavior);\n        this.replaceMessage(old_message_id, message, scrollBehavior);\n        const store = FileStore.getStore();\n        loadMessageContents(store, [message]);\n        MessagesList.viewMessages([message]);\n    };\n\n    onUpdateNewMessage = update => {\n        if (!this.completed) return;\n\n        const { message } = update;\n        const { chatId } = this.props;\n        if (chatId !== message.chat_id) return;\n\n        let scrollBehavior = ScrollBehaviorEnum.NONE;\n        const list = this.listRef.current;\n        // at the end of list\n        if (list.scrollTop === list.scrollHeight - list.offsetHeight) {\n            scrollBehavior = ScrollBehaviorEnum.SCROLL_TO_BOTTOM;\n        }\n        // sent message\n        else if (message.is_outgoing) {\n            scrollBehavior = ScrollBehaviorEnum.SCROLL_TO_BOTTOM;\n        }\n\n        const history = [message];\n\n        console.log('SCROLL MessagesList.onUpdateNewMessage scrollBehavior=' + scrollBehavior);\n        this.insertAfter(this.filterMessages(history), scrollBehavior);\n        const store = FileStore.getStore();\n        loadMessageContents(store, history);\n        MessagesList.viewMessages(history);\n    };\n\n    onUpdateDeleteMessages = update => {\n        const { chatId } = this.props;\n        if (chatId !== update.chat_id) return;\n\n        if (!update.is_permanent) return;\n\n        this.deleteHistory(update.message_ids);\n    };\n\n    updateItemsInView = () => {\n        if (!this.messages) return;\n\n        const messages = new Map();\n        const items = itemsInView(this.listRef, this.itemsRef);\n        for (let i = 0; i < items.length; i++) {\n            const message = this.messages[items[i]];\n            if (message) {\n                const { chatId, messageId } = message.props;\n                const key = `${chatId}_${messageId}`;\n                messages.set(key, key);\n            }\n        }\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateMessagesInView',\n            messages: messages\n        });\n        return;\n\n        if (!messages.length) return;\n\n        /*let ids = messages.map(x => x.id);\n        console.log('[perf] load_messages_contents ids=[' + ids + ']');\n\n                let messagesMap = new Map(messages.map((i) => [i.id, i]));\n\n                if (this.previousMessages){\n                    let cancelMessages = [];\n                    for (let i = 0; i < this.previousMessages.length; i++){\n                        if (!messagesMap.has(this.previousMessages[i].id)){\n                            cancelMessages.push(this.previousMessages[i]);\n                        }\n                    }\n                    if (cancelMessages.length > 0) {\n                        this.cancelLoadMessageContents(cancelMessages);\n                    }\n                }\n                this.previousMessages = messages;*/\n\n        const store = FileStore.getStore();\n        loadMessageContents(store, messages);\n    };\n\n    async handleSelectChat(chatId, previousChatId, messageId, previousMessageId) {\n        const chat = ChatStore.get(chatId);\n        const previousChat = ChatStore.get(previousChatId);\n\n        this.sessionId = Date.now();\n        this.loading = false;\n        this.completed = false;\n        this.loadMigratedHistory = false;\n\n        this.suppressHandleScrollOnSelectChat = true;\n        if (chat) {\n            TdLibController.send({\n                '@type': 'openChat',\n                chat_id: chat.id\n            });\n\n            const unread = !messageId && chat.unread_count > 0;\n            const fromMessageId = unread ? chat.last_read_inbox_message_id : messageId ? messageId : 0;\n            const offset = unread || messageId ? -1 - MESSAGE_SLICE_LIMIT : 0;\n            const limit = unread || messageId ? 2 * MESSAGE_SLICE_LIMIT : MESSAGE_SLICE_LIMIT;\n\n            const sessionId = this.sessionId;\n            const result = await TdLibController.send({\n                '@type': 'getChatHistory',\n                chat_id: chat.id,\n                from_message_id: fromMessageId,\n                offset: offset,\n                limit: limit\n            });\n\n            if (sessionId !== this.sessionId) {\n                return;\n            }\n\n            //TODO: replace result with one-way data flow\n\n            if (chat.last_message) {\n                this.completed = result.messages.length > 0 && chat.last_message.id === result.messages[0].id;\n            } else {\n                this.completed = true;\n            }\n\n            MessageStore.setItems(result.messages);\n            result.messages.reverse();\n\n            // calculate separator\n            let separatorMessageId = Number.MAX_VALUE;\n            if (chat && chat.unread_count > 1) {\n                for (let i = result.messages.length - 1; i >= 0; i--) {\n                    const { id } = result.messages[i];\n                    if (\n                        !result.messages[i].is_outgoing &&\n                        id > chat.last_read_inbox_message_id &&\n                        id < separatorMessageId\n                    ) {\n                        separatorMessageId = id;\n                    } else {\n                        break;\n                    }\n                }\n            }\n            separatorMessageId = separatorMessageId === Number.MAX_VALUE ? 0 : separatorMessageId;\n            console.log('[MessagesList] separator_message_id=' + separatorMessageId);\n\n            let scrollBehavior = ScrollBehaviorEnum.SCROLL_TO_BOTTOM;\n            if (messageId) {\n                scrollBehavior = ScrollBehaviorEnum.SCROLL_TO_MESSAGE;\n            } else if (unread && separatorMessageId) {\n                scrollBehavior = ScrollBehaviorEnum.SCROLL_TO_UNREAD;\n            }\n\n            this.replace(separatorMessageId, result.messages, scrollBehavior, () => {\n                this.suppressHandleScrollOnSelectChat = false;\n                if (messageId) {\n                    highlightMessage(chatId, messageId);\n                }\n            });\n\n            // load files\n            const store = FileStore.getStore();\n            loadMessageContents(store, result.messages);\n            loadChatsContent(store, [chatId]);\n            loadDraftContent(store, chatId);\n\n            MessagesList.viewMessages(result.messages);\n\n            this.loadIncompleteHistory(result);\n\n            // load full info\n            getChatFullInfo(chat.id);\n        } else {\n            this.replace(\n                0,\n                [],\n                ScrollBehaviorEnum.SCROLL_TO_BOTTOM,\n                () => (this.suppressHandleScrollOnSelectChat = false)\n            );\n        }\n\n        if (previousChat) {\n            TdLibController.send({\n                '@type': 'closeChat',\n                chat_id: previousChat.id\n            });\n        }\n    }\n\n    static viewMessages(messages) {\n        if (!messages) return;\n        if (messages.length === 0) return;\n        if (!messages[0].chat_id) return;\n\n        TdLibController.send({\n            '@type': 'viewMessages',\n            chat_id: messages[0].chat_id,\n            message_ids: messages.map(x => x.id)\n        });\n    }\n\n    cancelLoadMessageContents(messages) {\n        //return;\n        for (let i = messages.length - 1; i >= 0; i--) {\n            let message = messages[i];\n            if (message && message.content) {\n                switch (message.content['@type']) {\n                    case 'messagePhoto': {\n                        let [id, pid] = this.getMessagePhoto(message);\n                        if (pid) {\n                            let obj = getPhotoSize(message.content.photo.sizes);\n                            if (!obj.blob) {\n                                FileStore.cancelGetRemoteFile(id, message);\n                            }\n                        }\n                        break;\n                    }\n                    case 'messageSticker': {\n                        let [id, pid] = this.getMessageSticker(message);\n                        if (pid) {\n                            let obj = message.content.sticker.sticker;\n                            if (!obj.blob) {\n                                FileStore.cancelGetRemoteFile(id, message);\n                            }\n                        }\n                        break;\n                    }\n                    default:\n                        break;\n                }\n            }\n        }\n    }\n\n    loadIncompleteHistory = async result => {\n        const MAX_ITERATIONS = 5;\n        let incomplete = result && result.messages.length > 0 && result.messages.length < MESSAGE_SLICE_LIMIT;\n\n        for (let i = 0; i < MAX_ITERATIONS && incomplete; i++) {\n            result = await this.onLoadNext();\n            incomplete = result && result.messages.length > 0 && result.messages.length < MESSAGE_SLICE_LIMIT;\n        }\n    };\n\n    onLoadNext = async () => {\n        const { chatId } = this.props;\n\n        if (!chatId) return;\n        if (this.loading) return;\n\n        if (this.loadMigratedHistory) {\n            this.onLoadMigratedHistory();\n            return;\n        }\n\n        let fromMessageId = 0;\n        if (this.state.history && this.state.history.length > 0) {\n            fromMessageId = this.state.history[0].id;\n        }\n\n        this.loading = true;\n\n        const sessionId = this.sessionId;\n        let result = await TdLibController.send({\n            '@type': 'getChatHistory',\n            chat_id: chatId,\n            from_message_id: fromMessageId,\n            offset: 0,\n            limit: MESSAGE_SLICE_LIMIT\n        }).finally(() => {\n            this.loading = false;\n        });\n\n        if (sessionId !== this.sessionId) {\n            return;\n        }\n\n        if (this.props.chatId !== chatId) {\n            return;\n        }\n        //TODO: replace result with one-way data flow\n\n        MessageStore.setItems(result.messages);\n        result.messages.reverse();\n        this.insertBefore(this.filterMessages(result.messages), () => {\n            if (!result.messages.length) {\n                this.onLoadMigratedHistory();\n            }\n        });\n        const store = FileStore.getStore();\n        loadMessageContents(store, result.messages);\n        MessagesList.viewMessages(result.messages);\n\n        return result;\n    };\n\n    filterMessages = messages => {\n        return messages.filter(x => x.content['@type'] !== 'messageChatUpgradeTo');\n    };\n\n    onLoadMigratedHistory = async () => {\n        const { chatId } = this.props;\n\n        if (!chatId) return;\n        if (this.loading) return;\n\n        const supergroupId = getSupergroupId(chatId);\n        if (!supergroupId) return;\n\n        const fullInfo = SupergroupStore.getFullInfo(supergroupId);\n        if (!fullInfo) return;\n        if (!fullInfo.upgraded_from_basic_group_id) return;\n\n        this.loadMigratedHistory = true;\n\n        const basicGroupChat = await TdLibController.send({\n            '@type': 'createBasicGroupChat',\n            basic_group_id: fullInfo.upgraded_from_basic_group_id\n        });\n\n        if (!basicGroupChat) return;\n\n        let fromMessageId = 0;\n        if (\n            this.state.history &&\n            this.state.history.length > 0 &&\n            this.state.history[0].chat_id === basicGroupChat.id\n        ) {\n            fromMessageId = this.state.history[0].id;\n        }\n\n        this.loading = true;\n\n        const sessionId = this.sessionId;\n        const result = await TdLibController.send({\n            '@type': 'getChatHistory',\n            chat_id: basicGroupChat.id,\n            from_message_id: fromMessageId,\n            offset: 0,\n            limit: MESSAGE_SLICE_LIMIT\n        }).finally(() => {\n            this.loading = false;\n        });\n\n        if (sessionId !== this.sessionId) {\n            return;\n        }\n\n        if (this.props.chatId !== chatId) {\n            return;\n        }\n        //TODO: replace result with one-way data flow\n\n        MessageStore.setItems(result.messages);\n        result.messages.reverse();\n        this.insertBefore(this.filterMessages(result.messages));\n        const store = FileStore.getStore();\n        loadMessageContents(store, result.messages);\n        MessagesList.viewMessages(result.messages);\n    };\n\n    onLoadPrevious = async () => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n\n        if (!chat) return;\n        if (this.loading) return;\n        if (this.completed) return;\n\n        let fromMessageId = 0;\n        if (this.state.history && this.state.history.length > 0) {\n            fromMessageId = this.state.history[this.state.history.length - 1].id;\n        }\n\n        this.loading = true;\n\n        const sessionId = this.sessionId;\n        let result = await TdLibController.send({\n            '@type': 'getChatHistory',\n            chat_id: chatId,\n            from_message_id: fromMessageId,\n            offset: -MESSAGE_SLICE_LIMIT - 1,\n            limit: MESSAGE_SLICE_LIMIT + 1\n        }).finally(() => {\n            this.loading = false;\n        });\n\n        if (sessionId !== this.sessionId) {\n            return;\n        }\n\n        if (this.props.chatId !== chatId) {\n            return;\n        }\n\n        if (chat.last_message) {\n            this.completed = result.messages.length > 0 && chat.last_message.id === result.messages[0].id;\n        } else {\n            this.completed = true;\n        }\n\n        filterMessages(result, this.state.history);\n\n        //TODO: replace result with one-way data flow\n\n        MessageStore.setItems(result.messages);\n        result.messages.reverse();\n        console.log('SCROLL MessagesList.onLoadPrevious scrollBehavior=NONE');\n        this.insertAfter(this.filterMessages(result.messages), ScrollBehaviorEnum.NONE);\n        const store = FileStore.getStore();\n        loadMessageContents(store, result.messages);\n        MessagesList.viewMessages(result.messages);\n\n        return result;\n    };\n\n    replace(separatorMessageId, history, scrollBehavior, callback) {\n        this.setState(\n            { separatorMessageId: separatorMessageId, history: history, scrollBehavior: scrollBehavior },\n            callback\n        );\n    }\n\n    insertBefore(history, callback) {\n        if (history.length === 0) {\n            if (callback) callback();\n            return;\n        }\n\n        this.setState(\n            { history: history.concat(this.state.history), scrollBehavior: ScrollBehaviorEnum.KEEP_SCROLL_POSITION },\n            callback\n        );\n    }\n\n    replaceMessage(oldMessageId, message, scrollBehavior, callback) {\n        if (!message) return;\n\n        this.setState(\n            {\n                history: this.state.history.filter(x => x.id !== oldMessageId).concat([message]),\n                scrollBehavior: scrollBehavior\n            },\n            callback\n        );\n    }\n\n    insertAfter(history, scrollBehavior, callback) {\n        if (history.length === 0) return;\n\n        this.setState({ history: this.state.history.concat(history), scrollBehavior: scrollBehavior }, callback);\n    }\n\n    deleteHistory(message_ids, callback) {\n        const { history } = this.state;\n        if (history.length === 0) return;\n\n        let map = new Map(message_ids.map(x => [x, x]));\n\n        this.setState(\n            { history: history.filter(x => !map.has(x.id)), scrollBehavior: ScrollBehaviorEnum.SCROLL_TO_BOTTOM },\n            callback\n        );\n    }\n\n    handleScroll = () => {\n        this.updateItemsInView();\n\n        const list = this.listRef.current;\n        //console.log(`SCROLL HANDLESCROLL list.scrollTop=${list.scrollTop} list.offsetHeight=${list.offsetHeight} list.scrollHeight=${list.scrollHeight} chatId=${this.props.chatId}`);\n\n        if (this.suppressHandleScroll) {\n            console.log('SCROLL HANDLESCROLL suppressHandleScroll');\n            this.suppressHandleScroll = false;\n            return;\n        }\n\n        if (this.suppressHandleScrollOnSelectChat) {\n            console.log('SCROLL HANDLESCROLL suppressHandleScrollOnSelectChat');\n            return;\n        }\n\n        if (list.scrollTop <= 0) {\n            console.log('SCROLL HANDLESCROLL onLoadNext');\n            this.onLoadNext();\n        } else if (list.scrollTop + list.offsetHeight === list.scrollHeight) {\n            console.log('SCROLL HANDLESCROLL onLoadPrevious');\n            this.onLoadPrevious();\n        } else {\n            //console.log('SCROLL HANDLESCROLL updateItemsInView');\n        }\n    };\n\n    handleScrollBehavior = snapshot => {\n        const { chatId, messageId } = this.props;\n        const { scrollBehavior, history } = this.state;\n        const { scrollTop, scrollHeight, offsetHeight } = snapshot;\n\n        console.log(\n            `SCROLL HANDLESCROLLBEHAVIOR \\\\\n            scrollBehavior=${scrollBehavior} \\\\\n            previousScrollTop=${scrollTop} \\\\\n            previousScrollHeight=${scrollHeight} \\\\\n            previousOffsetHeight=${offsetHeight} \\\\\n            chatId=${chatId}`\n        );\n        if (scrollBehavior === ScrollBehaviorEnum.NONE) {\n        } else if (scrollBehavior === ScrollBehaviorEnum.SCROLL_TO_BOTTOM) {\n            this.scrollToBottom();\n        } else if (scrollBehavior === ScrollBehaviorEnum.SCROLL_TO_MESSAGE) {\n            this.scrollToMessage();\n        } else if (scrollBehavior === ScrollBehaviorEnum.SCROLL_TO_UNREAD) {\n            const list = this.listRef.current;\n            console.log(\n                `SCROLL SCROLL_TO_UNREAD before \\\\\n                list.scrollTop=${list.scrollTop} \\\\\n                list.offsetHeight=${list.offsetHeight} \\\\\n                list.scrollHeight=${list.scrollHeight} \\\\\n                chatId=${chatId}`\n            );\n\n            let scrolled = false;\n            for (let i = 0; i < history.length; i++) {\n                let itemComponent = this.itemsMap.get(i);\n                let item = ReactDOM.findDOMNode(itemComponent);\n                if (item) {\n                    // console.log(`SCROLL SCROLL_TO_UNREAD item item.scrollTop=${item.scrollTop} showUnreadSeparator=${itemComponent.props.showUnreadSeparator} item.offsetHeight=${item.offsetHeight} item.scrollHeight=${item.scrollHeight}`);\n                    if (itemComponent.props.showUnreadSeparator) {\n                        list.scrollTop = item.offsetTop; // + unread messages margin-top\n                        scrolled = true;\n                        break;\n                    }\n                }\n            }\n\n            if (!scrolled) {\n                this.scrollToBottom();\n            }\n\n            console.log(\n                `SCROLL SCROLL_TO_UNREAD after \\\\\n                list.scrollTop=${list.scrollTop} \\\\\n                list.offsetHeight=${list.offsetHeight} \\\\\n                list.scrollHeight=${list.scrollHeight} \\\\\n                chatId=${chatId}`\n            );\n        } else if (scrollBehavior === ScrollBehaviorEnum.KEEP_SCROLL_POSITION) {\n            const list = this.listRef.current;\n            console.log(\n                `SCROLL KEEP_SCROLL_POSITION before \\\\\n                list.scrollTop=${list.scrollTop} \\\\\n                list.offsetHeight=${list.offsetHeight} \\\\\n                list.scrollHeight=${list.scrollHeight} \\\\\n                chatId=${chatId}`\n            );\n            list.scrollTop = scrollTop + (list.scrollHeight - scrollHeight);\n            console.log(\n                `SCROLL KEEP_SCROLL_POSITION after \\\\\n                list.scrollTop=${list.scrollTop} \\\\\n                list.offsetHeight=${list.offsetHeight} \\\\\n                list.scrollHeight=${list.scrollHeight} \\\\\n                chatId=${chatId}`\n            );\n        }\n    };\n\n    scrollToMessage = () => {\n        const { chatId, messageId } = this.props;\n        const { history } = this.state;\n\n        const list = this.listRef.current;\n        console.log(\n            `SCROLL SCROLL_TO_MESSAGE message_id=${messageId} before \\\\\n            list.scrollTop=${list.scrollTop} \\\\\n            list.offsetHeight=${list.offsetHeight} \\\\\n            list.scrollHeight=${list.scrollHeight} \\\\\n            chatId=${chatId}`\n        );\n\n        let scrolled = false;\n        for (let i = 0; i < history.length; i++) {\n            let itemComponent = this.itemsMap.get(i);\n            let item = ReactDOM.findDOMNode(itemComponent);\n            if (item) {\n                // console.log(`SCROLL SCROLL_TO_MESSAGE message_id=${messageId} item item.scrollTop=${item.scrollTop} showUnreadSeparator=${itemComponent.props.showUnreadSeparator} item.offsetHeight=${item.offsetHeight} item.scrollHeight=${item.scrollHeight}`);\n                if (itemComponent.props.messageId === messageId) {\n                    list.scrollTop = item.offsetTop - list.offsetHeight / 2.0;\n                    scrolled = true;\n                    break;\n                }\n            }\n        }\n\n        if (!scrolled) {\n            this.scrollToBottom();\n        }\n\n        console.log(\n            `SCROLL SCROLL_TO_MESSAGE message_id=${messageId} after \\\\\n            list.scrollTop=${list.scrollTop} \\\\\n            list.offsetHeight=${list.offsetHeight} \\\\\n            list.scrollHeight=${list.scrollHeight} \\\\\n            chatId=${chatId}`\n        );\n    };\n\n    scrollToBottom = () => {\n        this.suppressHandleScroll = true;\n        const list = this.listRef.current;\n        console.log(\n            `SCROLL SCROLL_TO_BOTTOM before \\\\\n            list.scrollHeight=${list.scrollHeight} \\\\\n            list.offsetHeight=${list.offsetHeight} \\\\\n            list.scrollTop=${list.scrollTop} \\\\\n            chatId=${this.props.chatId}`\n        );\n\n        const nextScrollTop = list.scrollHeight - list.offsetHeight;\n        if (nextScrollTop !== list.scrollTop) {\n            list.scrollTop = list.scrollHeight - list.offsetHeight;\n            console.log(\n                `SCROLL SCROLL_TO_BOTTOM after \\\\\n                list.scrollTop=${list.scrollTop} \\\\\n                list.offsetHeight=${list.offsetHeight} \\\\\n                list.scrollHeight=${list.scrollHeight} \\\\\n                suppressHandleScroll=${this.suppressHandleScroll} \\\\\n                chatId=${this.props.chatId}`\n            );\n        } else {\n            console.log(\n                `SCROLL SCROLL_TO_BOTTOM after(already bottom) \\\\\n                list.scrollTop=${list.scrollTop} \\\\\n                list.offsetHeight=${list.offsetHeight} \\\\\n                list.scrollHeight=${list.scrollHeight} \\\\\n                suppressHandleScroll=${this.suppressHandleScroll} \\\\\n                chatId=${this.props.chatId}`\n            );\n        }\n    };\n\n    scrollToStart = async () => {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        this.sessionId = Date.now();\n        this.loading = false;\n        this.completed = false;\n\n        const fromMessageId = 0;\n        const offset = 0;\n        const limit = MESSAGE_SLICE_LIMIT;\n\n        const sessionId = this.sessionId;\n        const result = await TdLibController.send({\n            '@type': 'getChatHistory',\n            chat_id: chat.id,\n            from_message_id: fromMessageId,\n            offset: offset,\n            limit: limit\n        });\n\n        if (sessionId !== this.sessionId) {\n            return;\n        }\n\n        //TODO: replace result with one-way data flow\n\n        if (this.props.chatId !== chatId) {\n            return;\n        }\n\n        if (chat.last_message) {\n            this.completed = result.messages.length > 0 && chat.last_message.id === result.messages[0].id;\n        } else {\n            this.completed = true;\n        }\n\n        MessageStore.setItems(result.messages);\n        result.messages.reverse();\n\n        // calculate separator\n        let separatorMessageId = 0;\n        console.log('[MessagesList] separator_message_id=' + separatorMessageId);\n\n        this.replace(separatorMessageId, result.messages, ScrollBehaviorEnum.SCROLL_TO_BOTTOM);\n\n        // load files\n        const store = FileStore.getStore();\n        loadMessageContents(store, result.messages);\n        loadChatsContent(store, [chatId]);\n\n        MessagesList.viewMessages(result.messages);\n\n        this.loadIncompleteHistory(result);\n    };\n\n    handleListDragEnter = event => {\n        event.preventDefault();\n        event.stopPropagation();\n\n        const { chatId } = this.props;\n        if (!canSendFiles(chatId)) return;\n\n        ApplicationStore.setDragging(true);\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { history, separatorMessageId, clearHistory, selectionActive } = this.state;\n\n        console.log(`MessagesList.render clearHistory=${clearHistory}`, history);\n\n        this.itemsMap.clear();\n        this.messages = clearHistory\n            ? null\n            : history.map((x, i) =>\n                  isServiceMessage(x) ? (\n                      <ServiceMessage\n                          key={`chat_id=${x.chat_id} message_id=${x.id}`}\n                          ref={el => this.itemsMap.set(i, el)}\n                          chatId={x.chat_id}\n                          messageId={x.id}\n                          showUnreadSeparator={separatorMessageId === x.id}\n                      />\n                  ) : (\n                      <Message\n                          key={`chat_id=${x.chat_id} message_id=${x.id}`}\n                          ref={el => this.itemsMap.set(i, el)}\n                          chatId={x.chat_id}\n                          messageId={x.id}\n                          showTitle\n                          sendingState={x.sending_state}\n                          showUnreadSeparator={separatorMessageId === x.id}\n                      />\n                  )\n              );\n\n        return (\n            <div\n                className={classNames(classes.background, 'messages-list', {\n                    'messages-list-selection-active': selectionActive\n                })}\n                onDragEnter={this.handleListDragEnter}>\n                <div ref={this.listRef} className='messages-list-wrapper' onScroll={this.handleScroll}>\n                    <div className='messages-list-top' />\n                    <div ref={this.itemsRef} className='messages-list-items'>\n                        {this.messages}\n                    </div>\n                </div>\n                <FilesDropTarget />\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles, { withTheme: true })(MessagesList);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Dialog from '@material-ui/core/Dialog';\nimport ChatInfo from '../ColumnRight/ChatInfo';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './ChatInfoDialog.css';\n\nconst styles = theme => ({\n    chatInfoRoot: {\n        width: 336\n    },\n    containerRoot: {\n        alignItems: 'start'\n    },\n    dialogRoot: {\n        color: theme.palette.text.primary,\n        zIndex: 1\n    },\n    paperRoot: {\n        height: 'auto',\n        transition: 'height 2s linear'\n    }\n});\n\nclass ChatInfoDialog extends React.Component {\n    state = {\n        chatId: ApplicationStore.dialogChatId\n    };\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        const { chatId } = this.state;\n\n        return nextState.chatId !== chatId;\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateDialogChatId', this.handleClientUpdateDialogChatId);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateDialogChatId', this.handleClientUpdateDialogChatId);\n    }\n\n    handleClientUpdateDialogChatId = update => {\n        const { chatId } = update;\n\n        this.setState({ chatId });\n    };\n\n    handleClose = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateDialogChatId',\n            chatId: 0\n        });\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { chatId } = this.state;\n        if (!chatId) return null;\n\n        return (\n            <Dialog\n                open\n                transitionDuration={0}\n                onClose={this.handleClose}\n                classes={{root: classes.dialogRoot, container: classes.containerRoot, paper: classes.paperRoot}}\n                >\n                <ChatInfo className={classes.chatInfoRoot} chatId={chatId} popup/>\n            </Dialog>\n        );\n    }\n}\n\nChatInfoDialog.propTypes = {};\n\nexport default withStyles(styles)(ChatInfoDialog);","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass StickerStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.stickerSet = null;\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateInstalledStickerSets': {\n                const { sticker_set_ids } = update;\n                if (this.stickerSet) {\n                    const { id, is_installed } = this.stickerSet;\n                    if (is_installed !== sticker_set_ids.some(x => x === id)) {\n                        this.assign(this.stickerSet, { is_installed: !is_installed });\n                    }\n                }\n\n                this.emit('updateInstalledStickerSets', update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {\n        switch (update['@type']) {\n            case 'clientUpdateStickerSet': {\n                const { stickerSet } = update;\n\n                this.set(stickerSet);\n\n                this.emit('clientUpdateStickerSet', update);\n                break;\n            }\n            default:\n                break;\n        }\n    };\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    assign(source1, source2) {\n        this.set(Object.assign({}, source1, source2));\n    }\n\n    set(stickerSet) {\n        this.stickerSet = stickerSet;\n    }\n}\n\nconst store = new StickerStore();\nwindow.sticker = store;\nexport default store;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport copy from 'copy-to-clipboard';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport { withSnackbar } from 'notistack';\nimport { withStyles } from '@material-ui/core/styles';\nimport CloseIcon from '@material-ui/icons/Close';\nimport LinkIcon from '@material-ui/icons/Link';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport IconButton from '@material-ui/core/IconButton';\nimport ShareIcon from '@material-ui/icons/Share';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { NOTIFICATION_AUTO_HIDE_DURATION_MS } from '../../Constants';\nimport OptionStore from '../../Stores/OptionStore';\nimport StickerStore from '../../Stores/StickerStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\n\nconst styles = theme => ({\n    close: {\n        padding: theme.spacing.unit / 2\n    }\n});\n\nclass ShareStickerSetButton extends React.Component {\n    state = {\n        anchorEl: null\n    };\n\n    handleMenuClick = event => {\n        this.handleOpen(event.currentTarget);\n    };\n\n    handleOpen = anchorEl => {\n        this.setState({ anchorEl });\n    };\n\n    handleClose = () => {\n        this.setState({ anchorEl: null });\n    };\n\n    handleCopyLink = () => {\n        this.handleClose();\n\n        const { t } = this.props;\n\n        const link = this.getStickersLink(StickerStore.stickerSet);\n        if (!link) return;\n\n        copy(link);\n\n        const key = `${link}_copy_stickers_link`;\n        const message = t('LinkCopied');\n        const action = null;\n\n        this.handleScheduledAction(key, message, action);\n    };\n\n    getStickersLink = stickerSet => {\n        if (!stickerSet) return '';\n\n        const { name } = stickerSet;\n        if (!name) return '';\n\n        const telegramUrlOption = OptionStore.get('t_me_url');\n\n        return (telegramUrlOption ? telegramUrlOption.value : 'https://telegram.org/') + 'addstickers/' + name;\n    };\n\n    handleScheduledAction = (key, message, action) => {\n        if (!key) return;\n\n        const { enqueueSnackbar, classes, t } = this.props;\n        if (!enqueueSnackbar) return;\n\n        const TRANSITION_DELAY = 150;\n        if (\n            ApplicationStore.addScheduledAction(key, NOTIFICATION_AUTO_HIDE_DURATION_MS + 2 * TRANSITION_DELAY, action)\n        ) {\n            enqueueSnackbar(message, {\n                autoHideDuration: NOTIFICATION_AUTO_HIDE_DURATION_MS,\n                action: [\n                    <IconButton\n                        key='close'\n                        aria-label='Close'\n                        color='inherit'\n                        className={classes.close}\n                        onClick={() => ApplicationStore.removeScheduledAction(key)}>\n                        <CloseIcon />\n                    </IconButton>\n                ]\n            });\n        }\n    };\n\n    handleShare = () => {\n        this.handleClose();\n\n        const link = this.getStickersLink(StickerStore.stickerSet);\n        if (!link) return;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateStickerSet',\n            stickerSet: null\n        });\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateForward',\n            info: { link }\n        });\n    };\n\n    render() {\n        const { classes, t, className } = this.props;\n        const { anchorEl } = this.state;\n\n        return (\n            <>\n                <IconButton\n                    className={classes.iconButton + ' ' + className}\n                    aria-label='Share'\n                    open={Boolean(anchorEl)}\n                    onClick={this.handleMenuClick}>\n                    <MoreIcon />\n                </IconButton>\n                <Menu\n                    id='attach-menu'\n                    anchorEl={anchorEl}\n                    open={Boolean(anchorEl)}\n                    getContentAnchorEl={null}\n                    disableAutoFocusItem\n                    disableRestoreFocus={true}\n                    anchorOrigin={{\n                        vertical: 'bottom',\n                        horizontal: 'right'\n                    }}\n                    transformOrigin={{\n                        vertical: 'top',\n                        horizontal: 'right'\n                    }}\n                    onClose={this.handleClose}>\n                    <MenuItem onClick={this.handleCopyLink}>\n                        <ListItemIcon>\n                            <LinkIcon />\n                        </ListItemIcon>\n                        <ListItemText inset primary={t('CopyLink')} />\n                    </MenuItem>\n                    <MenuItem onClick={this.handleShare}>\n                        <ListItemIcon>\n                            <ShareIcon />\n                        </ListItemIcon>\n                        <ListItemText inset primary={t('StickersShare')} />\n                    </MenuItem>\n                </Menu>\n            </>\n        );\n    }\n}\n\nShareStickerSetButton.propTypes = {};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation(),\n    withSnackbar\n);\n\nexport default enhance(ShareStickerSetButton);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'recompose';\nimport { withStyles } from '@material-ui/core';\nimport { withTranslation } from 'react-i18next';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Typography from '@material-ui/core/Typography';\nimport ShareStickerSetButton from './ShareStickerSetButton';\nimport Sticker from '../Message/Media/Sticker';\nimport { loadStickerSetContent } from '../../Utils/File';\nimport { STICKER_SMALL_DISPLAY_SIZE } from '../../Constants';\nimport StickerStore from '../../Stores/StickerStore';\nimport FileStore from '../../Stores/FileStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './StickerSetDialog.css';\n\nconst styles = theme => ({\n    dialogTitleRoot: {\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center'\n    },\n    dialogRoot: {\n        color: theme.palette.text.primary\n    },\n    contentRoot: {\n        width: 320,\n        display: 'flex',\n        flexWrap: 'wrap',\n        maxHeight: 480,\n        padding: '0 12px 24px'\n    },\n    shareButtonRoot: {\n        margin: '-24px -12px -24px 0'\n    },\n    typographyRoot: {\n        flexGrow: 1,\n        flexShrink: 1\n    }\n});\n\nclass StickerSetDialog extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            stickerSet: StickerStore.stickerSet\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        const { stickerSet } = this.state;\n\n        return stickerSet !== nextState.stickerSet;\n    }\n\n    componentDidMount() {\n        StickerStore.on('clientUpdateStickerSet', this.handleClientUpdateStickerSet);\n        StickerStore.on('updateInstalledStickerSets', this.handleUpdateInstalledStickerSets);\n    }\n\n    componentWillUnmount() {\n        StickerStore.removeListener('clientUpdateStickerSet', this.handleClientUpdateStickerSet);\n        StickerStore.removeListener('updateInstalledStickerSets', this.handleUpdateInstalledStickerSets);\n    }\n\n    handleUpdateInstalledStickerSets = update => {\n        const { stickerSet } = StickerStore;\n\n        this.setState({ stickerSet });\n    };\n\n    handleClientUpdateStickerSet = update => {\n        const { stickerSet } = update;\n\n        this.setState({ stickerSet });\n\n        if (stickerSet) {\n            const store = FileStore.getStore();\n            loadStickerSetContent(store, stickerSet);\n        }\n    };\n\n    handleClose = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateStickerSet',\n            stickerSet: null\n        });\n    };\n\n    handleDone = () => {\n        const { stickerSet } = this.state;\n        if (!stickerSet) return;\n\n        const { is_installed } = stickerSet;\n\n        TdLibController.send({\n            '@type': 'changeStickerSet',\n            set_id: stickerSet.id,\n            is_installed: !is_installed\n        });\n\n        this.handleClose();\n    };\n\n    render() {\n        const { t, classes } = this.props;\n        const { stickerSet } = this.state;\n        if (!stickerSet) return null;\n\n        const { title, stickers, emojis, is_installed } = stickerSet;\n\n        const items = stickers.map(x => (\n            <div className='sticker-set-dialog-item' key={x.sticker.id}>\n                <Sticker\n                    key={x.sticker.id}\n                    chatId={0}\n                    messageId={0}\n                    sticker={x}\n                    blur={false}\n                    displaySize={STICKER_SMALL_DISPLAY_SIZE}\n                    style={{ padding: 6 }}\n                    openMedia={() => {}}\n                />\n                <div className='sticker-set-dialog-item-emoji'>{x.emoji}</div>\n            </div>\n        ));\n\n        return (\n            <Dialog\n                className={classes.dialogRoot}\n                open\n                transitionDuration={0}\n                onClose={this.handleClose}\n                aria-labelledby='sticker-set-dialog-title-text'>\n                <DialogTitle id='sticker-set-dialog-title-text' className={classes.dialogTitleRoot} disableTypography>\n                    <Typography variant='h6' className={classes.typographyRoot}>\n                        {title}\n                    </Typography>\n                    <ShareStickerSetButton className={classes.shareButtonRoot} />\n                </DialogTitle>\n                <DialogContent classes={{ root: classes.contentRoot }}>{items}</DialogContent>\n                <DialogActions>\n                    <Button color='primary' onClick={this.handleClose}>\n                        {t('Cancel')}\n                    </Button>\n                    <Button color='primary' onClick={this.handleDone}>\n                        {is_installed ? t('Remove') : t('Add')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nStickerSetDialog.propTypes = {};\n\nconst enhance = compose(\n    withStyles(styles),\n    withTranslation()\n);\n\nexport default enhance(StickerSetDialog);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport Footer from './Footer';\nimport Header from './Header';\nimport HeaderPlayer from '../Player/HeaderPlayer';\nimport MessagesList from './MessagesList';\nimport ChatInfoDialog from '../Dialog/ChatInfoDialog';\nimport StickerSetDialog from '../Dialog/StickerSetDialog';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport './DialogDetails.css';\n\nclass DialogDetails extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            chatId: ApplicationStore.getChatId(),\n            messageId: ApplicationStore.getMessageId(),\n            selectedCount: 0\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextState.chatId !== this.state.chatId) {\n            return true;\n        }\n        if (nextState.messageId !== this.state.messageId) {\n            return true;\n        }\n        if (nextState.selectedCount !== this.state.selectedItems) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateChatDetailsVisibility', this.onUpdateChatDetailsVisibility);\n        ApplicationStore.on('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateChatDetailsVisibility', this.onUpdateChatDetailsVisibility);\n        ApplicationStore.removeListener('clientUpdateChatId', this.onClientUpdateChatId);\n    }\n\n    onUpdateChatDetailsVisibility = update => {\n        this.forceUpdate();\n    };\n\n    onClientUpdateChatId = update => {\n        this.setState({\n            chatId: update.nextChatId,\n            messageId: update.nextMessageId\n        });\n    };\n\n    scrollToBottom = () => {\n        this.messagesList.scrollToBottom();\n    };\n\n    scrollToStart = () => {\n        this.messagesList.scrollToStart();\n    };\n\n    scrollToMessage = () => {\n        this.messagesList.scrollToMessage();\n    };\n\n    render() {\n        /*let groups = [];\n        if (this.props.history.length > 0){\n            let currentGroup = {\n                key: this.props.history[0].id,\n                date: this.props.history[0].date,\n                senderUserId: this.props.history[0].sender_user_id,\n                messages: [this.props.history[0]]\n            };\n\n            for (let i = 1; i < this.props.history.length; i++){\n                if (this.props.history[i].sender_user_id === currentGroup.senderUserId\n                    && Math.abs(this.props.history[i].date - currentGroup.date) <= 10 * 60\n                    && i % 20 !== 0){\n                    currentGroup.key += '_' + this.props.history[i].id;\n                    currentGroup.messages.push(this.props.history[i]);\n                }\n                else {\n                    groups.push(currentGroup);\n                    currentGroup = {\n                        key: this.props.history[i].id,\n                        date: this.props.history[i].date,\n                        senderUserId: this.props.history[i].sender_user_id,\n                        messages: [this.props.history[i]]\n                    };\n                }\n            }\n            groups.push(currentGroup);\n        }\n\n        this.groups = groups.map(x => {\n            return (<MessageGroup key={x.key} senderUserId={x.senderUserId} messages={x.messages} onSelectChat={this.props.onSelectChat}/>);\n        });*/\n        const { chatId, messageId, selectedCount } = this.state;\n        const { isChatDetailsVisible } = ApplicationStore;\n\n        return (\n            <div className={classNames('dialog-details', { 'dialog-details-third-column': isChatDetailsVisible })}>\n                <HeaderPlayer />\n                <Header chatId={chatId} />\n                <MessagesList innerRef={ref => (this.messagesList = ref)} chatId={chatId} messageId={messageId} />\n                <Footer chatId={chatId} />\n                <StickerSetDialog />\n                <ChatInfoDialog />\n            </div>\n        );\n    }\n}\n\nexport default DialogDetails;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withTranslation } from 'react-i18next';\nimport { compose } from 'recompose';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport { isValidPhoneNumber } from '../../Utils/Common';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport Link from '@material-ui/core/Link';\nimport Typography from '@material-ui/core/Typography';\nimport OptionStore from '../../Stores/OptionStore';\nimport LocalizationStore from '../../Stores/LocalizationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './SignInControl.css';\n\nconst styles = {\n    button: {\n        margin: '16px 0 0 0'\n    },\n    phone: {\n        fontWeight: 'bold',\n        textAlign: 'center'\n    },\n    continueAtLanguage: {\n        transform: 'translateY(100px)',\n        textAlign: 'center'\n    }\n};\n\nclass SignInControl extends React.Component {\n    state = {\n        error: null,\n        loading: false\n    };\n\n    componentDidMount() {\n        this.handleSuggestedLanguagePackId();\n\n        OptionStore.on('updateOption', this.handleUpdateOption);\n    }\n\n    componentWillUnmount() {\n        OptionStore.removeListener('updateOption', this.handleUpdateOption);\n    }\n\n    handleUpdateOption = update => {\n        const { name } = update;\n\n        if (name === 'suggested_language_pack_id') {\n            this.handleSuggestedLanguagePackId();\n        }\n    };\n\n    handleSuggestedLanguagePackId = () => {\n        const { i18n } = this.props;\n        if (!i18n) return;\n\n        const languagePackId = OptionStore.get('suggested_language_pack_id');\n        if (!languagePackId) return;\n\n        const { value } = languagePackId;\n        if (value === i18n.language) {\n            this.setState({ suggestedLanguage: null });\n            return;\n        }\n\n        LocalizationStore.loadLanguage(value).then(() => {\n            this.setState({ suggestedLanguage: value });\n        });\n    };\n\n    handleNext = () => {\n        const { phone } = this.props;\n\n        const phoneNumber = this.phoneNumber || phone;\n\n        if (isValidPhoneNumber(phoneNumber)) {\n            this.setState({ error: null, openConfirmation: true });\n        } else {\n            this.setState({ error: { code: 'InvalidPhoneNumber' } });\n        }\n    };\n\n    handleChange = event => {\n        this.phoneNumber = event.target.value;\n    };\n\n    handleKeyPress = event => {\n        if (event.key === 'Enter') {\n            event.preventDefault();\n            this.handleNext();\n        }\n    };\n\n    handleDone = () => {\n        const { phone, onPhoneEnter } = this.props;\n\n        const phoneNumber = this.phoneNumber || phone;\n        if (!isValidPhoneNumber(phoneNumber)) {\n            this.setState({ error: { code: 'InvalidPhoneNumber' } });\n            return;\n        }\n\n        onPhoneEnter(phoneNumber);\n        this.setState({ error: null, loading: true });\n        TdLibController.send({\n            '@type': 'setAuthenticationPhoneNumber',\n            phone_number: phoneNumber\n        })\n            .then(result => {})\n            .catch(error => {\n                let errorString = null;\n                if (error && error['@type'] === 'error' && error.message) {\n                    errorString = error.message;\n                } else {\n                    errorString = JSON.stringify(error);\n                }\n\n                this.setState({ error: { string: errorString } });\n            })\n            .finally(() => {\n                this.setState({ loading: false });\n            });\n    };\n\n    handleChangeLanguage = () => {\n        const { i18n } = this.props;\n        const { suggestedLanguage } = this.state;\n\n        if (!i18n) return;\n        if (!suggestedLanguage) return;\n\n        this.setState({ suggestedLanguage: i18n.language });\n\n        TdLibController.clientUpdate({ '@type': 'clientUpdateLanguageChange', language: suggestedLanguage });\n    };\n\n    render() {\n        const { phone, classes, t } = this.props;\n        const { loading, error, suggestedLanguage } = this.state;\n\n        let errorString = '';\n        if (error) {\n            const { code, string } = error;\n            if (code) {\n                errorString = t(code);\n            } else {\n                errorString = string;\n            }\n        }\n\n        return (\n            <FormControl fullWidth>\n                <div className='authorization-header'>\n                    <span className='authorization-header-content'>{t('YourPhone')}</span>\n                </div>\n                <div>{t('StartText')}</div>\n                <TextField\n                    color='primary'\n                    disabled={loading}\n                    error={Boolean(errorString)}\n                    fullWidth\n                    autoFocus\n                    id='phoneNumber'\n                    label=''\n                    margin='normal'\n                    onChange={this.handleChange}\n                    onKeyPress={this.handleKeyPress}\n                    defaultValue={phone}\n                />\n                <FormHelperText id='sign-in-error-text'>{errorString}</FormHelperText>\n                <div className='sign-in-actions'>\n                    <Button\n                        fullWidth\n                        color='primary'\n                        disabled={loading}\n                        className={classes.button}\n                        onClick={this.handleDone}>\n                        {t('Next')}\n                    </Button>\n                    <Typography className={classes.continueAtLanguage}>\n                        <Link onClick={this.handleChangeLanguage}>\n                            {Boolean(suggestedLanguage) ? t('ContinueOnThisLanguage', { lng: suggestedLanguage }) : ' '}\n                        </Link>\n                    </Typography>\n                </div>\n            </FormControl>\n        );\n    }\n}\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(SignInControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport './ConfirmCodeControl.css';\nimport FormControl from '@material-ui/core/FormControl';\nimport { formatPhoneNumber } from '../../Utils/Common';\nimport FormHelperText from '@material-ui/core/FormHelperText/FormHelperText';\nimport TdLibController from '../../Controllers/TdLibController';\n\nconst styles = {\n    buttonLeft: {\n        marginRight: '8px',\n        marginTop: '16px'\n    },\n    buttonRight: {\n        marginLeft: '8px',\n        marginTop: '16px'\n    }\n};\n\nclass ConfirmCodeControl extends React.Component {\n\n    constructor(props){\n        super(props);\n\n        this.state = {\n            error : '',\n            loading : false\n        };\n\n        this.handleChange = this.handleChange.bind(this);\n        this.handleNext = this.handleNext.bind(this);\n        this.handleBack = this.handleBack.bind(this);\n        this.handleDone = this.handleDone.bind(this);\n        this.handleKeyPress = this.handleKeyPress.bind(this);\n    }\n\n    handleNext(){\n        if (this.code && this.isValid(this.code)){\n            this.setState({ error : '' });\n            this.handleDone();\n        }\n        else{\n            this.setState({error : 'Invalid code. Please try again.'});\n        }\n    }\n    \n    handleDone(){\n        const code = this.code;\n\n        this.setState({ loading: true });\n        TdLibController\n            .send({\n                '@type': 'checkAuthenticationCode',\n                code: code,\n                first_name: 'A',\n                last_name: 'B'\n            })\n            .then(result => {\n\n            })\n            .catch(error => {\n                let errorString = null;\n                if (error\n                    && error['@type'] === 'error'\n                    && error.message){\n                    errorString = error.message;\n                }\n                else{\n                    errorString = JSON.stringify(error);\n                }\n\n                this.setState({ error: errorString });\n            })\n            .finally(() => {\n                this.setState({ loading: false });\n            });\n    }\n\n    handleBack(){\n        this.props.onChangePhone();\n    }\n\n    isValid(code){\n        let isBad = !code.match(/^[\\d\\-+\\s]+$/);\n        if (!isBad) {\n            code = code.replace(/\\D/g, '');\n            if (code.length !== 5) {\n                isBad = true\n            }\n        }\n\n        return !isBad;\n    }\n\n    handleChange(e) {\n        this.code = e.target.value;\n\n        if (this.code\n            && this.codeLength > 0\n            && this.code.length === this.codeLength){\n            this.handleNext();\n        }\n    }\n\n    handleKeyPress(e){\n        if (e.key === 'Enter'){\n            e.preventDefault();\n            this.handleNext();\n        }\n    }\n\n    getPhoneNumber(codeInfo){\n        if (!codeInfo) return null;\n        return codeInfo.phone_number;\n    }\n    \n    getCodeLength(codeInfo){\n        if (!codeInfo) return 0;\n        if (!codeInfo.type) return 0;\n        \n        switch (codeInfo.type['@type']) {\n            case 'authenticationCodeTypeCall': {\n                return codeInfo.type.length;\n            }\n            case 'authenticationCodeTypeFlashCall': {\n                return 0;\n            }\n            case 'authenticationCodeTypeSms': {\n                return codeInfo.type.length;\n            }\n            case 'authenticationCodeTypeTelegramMessage': {\n                return codeInfo.type.length;\n            }\n        }\n\n        return 0;\n    }\n\n    getSubtitle(codeInfo){\n        if (!codeInfo) return 'Subtitle';\n        if (!codeInfo.type) return 'Subtitle';\n\n        switch (codeInfo.type['@type']) {\n            case 'authenticationCodeTypeCall': {\n                return 'Telegram dialed your number';\n            }\n            case 'authenticationCodeTypeFlashCall': {\n                return 'Telegram dialed your number';\n            }\n            case 'authenticationCodeTypeSms': {\n                return 'We have sent you a message with activation code to your phone. Please enter it below.';\n            }\n            case 'authenticationCodeTypeTelegramMessage': {\n                return 'Please enter the code you\\'ve just received in your previous Telegram app.';\n            }\n        }\n\n        return 'Subtitle';\n    }\n\n    render() {\n        const {loading, error} = this.state;\n        const {classes, codeInfo} = this.props;\n\n        this.phoneNumber = this.getPhoneNumber(codeInfo);\n        this.codeLength = this.getCodeLength(codeInfo);\n        const subtitle = this.getSubtitle(codeInfo);\n\n        const title = this.phoneNumber? formatPhoneNumber(this.phoneNumber) : 'Your Code';\n\n        return (\n            <FormControl fullWidth>\n                <div className='authorization-header'>\n                    <span className='authorization-header-content'>{title}</span>\n                </div>\n                <div>\n                    {subtitle}\n                </div>\n                <TextField\n                    color='primary'\n                    disabled={loading}\n                    error={Boolean(error)}\n                    fullWidth\n                    autoFocus\n                    label='Your code'\n                    margin='normal'\n                    maxLength={this.codeLength > 0 ? this.codeLength : 256}\n                    onChange={this.handleChange}\n                    onKeyPress={this.handleKeyPress}\n                />\n                <FormHelperText id='confirm-code-error-text'>{error}</FormHelperText>\n                <div className='authorization-actions'>\n                    <Button\n                        fullWidth\n                        className={classes.buttonLeft}\n                        onClick={this.handleBack}\n                        disabled={loading}>\n                        Back\n                    </Button>\n                    <Button\n                        fullWidth\n                        color='primary'\n                        className={classes.buttonRight}\n                        onClick={this.handleNext}\n                        disabled={loading}>\n                        Next\n                    </Button>\n                </div>\n            </FormControl>\n        );\n    }\n}\n\nexport default withStyles(styles)(ConfirmCodeControl);","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { InputLabel, InputAdornment } from '@material-ui/core';\nimport Input from '@material-ui/core/Input'\nimport { FormControl } from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport './PasswordControl.css';\nimport FormHelperText from '@material-ui/core/FormHelperText/FormHelperText';\nimport TdLibController from '../../Controllers/TdLibController';\n\nconst styles = theme => ({\n    root: {\n        display: 'flex',\n        flexWrap: 'wrap',\n    },\n    margin: {\n        margin: '16px 0 8px 0'\n    },\n    withoutLabel: {\n        marginTop: theme.spacing.unit * 3,\n    },\n    textField: {\n        flexBasis: 200,\n    },\n    buttonLeft: {\n        marginRight: '8px',\n        marginTop: '16px'\n    },\n    buttonRight: {\n        marginLeft: '8px',\n        marginTop: '16px'\n    }\n});\n\n\nclass PasswordControl extends React.Component {\n\n    constructor(props){\n        super(props);\n\n        this.state ={\n            password : '',\n            showPassword : false,\n            error : ''\n        };\n\n        this.handleClickShowPassword = this.handleClickShowPassword.bind(this);\n        this.handleMouseDownPassword = this.handleMouseDownPassword.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.handleKeyPress = this.handleKeyPress.bind(this);\n        this.handleBack = this.handleBack.bind(this);\n        this.handleNext = this.handleNext.bind(this);\n        this.handleDone = this.handleDone.bind(this);\n    }\n\n    handleNext(){\n        if (this.password){\n            this.setState({ error : '' });\n            this.handleDone();\n        }\n        else{\n            this.setState({ error : 'Invalid password. Please try again.' });\n        }\n    }\n\n    handleBack(){\n        this.props.onChangePhone();\n    }\n\n    handleDone(){\n        const password = this.password;\n\n        this.setState({ loading: true });\n        TdLibController\n            .send({\n                '@type': 'checkAuthenticationPassword',\n                password: password\n            })\n            .then(result => {\n\n            })\n            .catch(error => {\n                let errorString = null;\n                if (error\n                    && error['@type'] === 'error'\n                    && error.message){\n                    errorString = error.message;\n                }\n                else{\n                    errorString = JSON.stringify(error);\n                }\n\n                this.setState({ error: errorString });\n            })\n            .finally(() => {\n                this.setState({ loading: false });\n            });\n    }\n\n    handleMouseDownPassword = event => {\n        event.preventDefault();\n    };\n\n    handleClickShowPassword = () => {\n        this.setState({ showPassword: !this.state.showPassword });\n    };\n\n    handleChange(e){\n        this.password = e.target.value;\n    }\n\n    handleKeyPress(e){\n        if (e.key === 'Enter'){\n            e.preventDefault();\n            this.handleNext();\n        }\n    }\n\n    render() {\n        const {loading, error, showPassword} = this.state;\n        const {passwordHint, classes} = this.props;\n\n        return (\n            <div>\n                <div className='authorization-header'>\n                    <span className='authorization-header-content'>Cloud Password Check</span>\n                </div>\n                <div>\n                    Please enter your cloud password.\n                </div>\n                <FormControl fullWidth className={classNames(classes.margin, classes.textField)}>\n                    <InputLabel\n                        htmlFor='adornment-password'\n                        error={error}>\n                        Your cloud password\n                    </InputLabel>\n                    <Input\n                        fullWidth\n                        autoFocus\n                        id='adornment-password'\n                        type={showPassword ? 'text' : 'password'}\n                        disabled={loading}\n                        error={Boolean(error)}\n                        onChange={this.handleChange}\n                        onKeyPress={this.handleKeyPress}\n                        endAdornment={\n                            <InputAdornment position='end'>\n                                <IconButton\n                                    aria-label='Toggle password visibility'\n                                    onClick={this.handleClickShowPassword}\n                                    onMouseDown={this.handleMouseDownPassword}>\n                                    {showPassword ? <VisibilityOff /> : <Visibility />}\n                                </IconButton>\n                            </InputAdornment>\n                        }\n                    />\n                </FormControl>\n                {passwordHint && <FormHelperText id='password-hint-text'><span className='password-hint-label'>Hint: </span>{passwordHint}</FormHelperText>}\n                <FormHelperText id='password-error-text'>{error}</FormHelperText>\n                <div className='authorization-actions'>\n                    <Button\n                        fullWidth\n                        className={classes.buttonLeft}\n                        onClick={this.handleBack}\n                        disabled={loading}>\n                        Back\n                    </Button>\n                    <Button\n                        fullWidth\n                        color='primary'\n                        className={classes.buttonRight}\n                        onClick={this.handleNext}\n                        disabled={loading}>\n                        Next\n                    </Button>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles)(PasswordControl);","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { DialogActions, DialogContent, DialogContentText, DialogTitle } from '@material-ui/core';\nimport Dialog from '@material-ui/core/Dialog';\nimport Button from '@material-ui/core/Button';\nimport TdLibController from '../../Controllers/TdLibController';\n\nclass AuthErrorDialog extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            open: false,\n            error: null\n        };\n\n        this.handleAuthError = this.handleAuthError.bind(this);\n        this.handleClose = this.handleClose.bind(this);\n        this.handleKeyDown = this.handleKeyDown.bind(this);\n    }\n\n    componentDidMount() {\n        TdLibController.on('tdlib_auth_error', this.handleAuthError);\n    }\n\n    componentWillUnmount() {\n        TdLibController.removeListener('tdlib_auth_error', this.handleAuthError);\n    }\n\n    handleAuthError(error) {\n        this.setState({\n            open: true,\n            error: error\n        });\n    }\n\n    handleClose() {\n        this.setState({\n            open: false\n        });\n    }\n\n    handleKeyDown(e) {\n        if (e.key === 'Enter') {\n            e.preventDefault();\n            this.handleClose();\n        }\n    }\n\n    render() {\n        let errorString = null;\n        if (this.state.error && this.state.error['@type'] === 'error' && this.state.error.message) {\n            errorString = this.state.error.message;\n        } else {\n            errorString = JSON.stringify(this.state.error);\n        }\n\n        return (\n            <Dialog\n                transitionDuration={0}\n                open={this.state.open}\n                onKeyDown={this.handleKeyDown}\n                onClose={this.handleClose}\n                aria-labelledby='form-dialog-title'>\n                <DialogTitle id='form-dialog-title'>Error</DialogTitle>\n                <DialogContent>\n                    <DialogContentText>{errorString}</DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={this.handleClose} color='primary'>\n                        Ok\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nexport default AuthErrorDialog;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nimport SignInControl from './SignInControl';\nimport ConfirmCodeControl from './ConfirmCodeControl';\nimport PasswordControl from './PasswordControl';\nimport AuthErrorDialog from './AuthErrorDialog';\nimport './AuthFormControl.css';\n\nconst styles = theme => ({\n    button: {\n        margin: '20px'\n    },\n    authorizationFormContent: {\n        background: theme.palette.background.default,\n        color: theme.palette.text.primary\n    }\n});\n\nclass AuthFormControl extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.phone = null;\n\n        this.handlePhoneEnter = this.handlePhoneEnter.bind(this);\n    }\n\n    handlePhoneEnter(phone) {\n        this.phone = phone;\n    }\n\n    render() {\n        const { classes, authorizationState } = this.props;\n\n        let control = null;\n        switch (authorizationState['@type']) {\n            case 'authorizationStateWaitPhoneNumber':\n                // control = (\n                //     <>\n                //         <SignInControl phone={this.phone} onPhoneEnter={this.handlePhoneEnter}/>\n                //         <ConfirmCodeControl phone={this.phone} onCodeEnter={this.handleCodeEnter} onChangePhone={this.handleChangePhone}/>\n                //         <PasswordControl passwordHint='hint' onPasswordEnter={this.handlePasswordEnter} onChangePhone={this.handleChangePhone}/>\n                //         <SignUpControl/>\n                //     </>);\n                control = <SignInControl phone={this.phone} onPhoneEnter={this.handlePhoneEnter} />;\n                break;\n            case 'authorizationStateWaitCode':\n                control = (\n                    <ConfirmCodeControl\n                        termsOfService={authorizationState.terms_of_service}\n                        codeInfo={authorizationState.code_info}\n                        onChangePhone={this.props.onChangePhone}\n                    />\n                );\n                break;\n            case 'authorizationStateWaitPassword':\n                control = (\n                    <PasswordControl\n                        passwordHint={authorizationState.password_hint}\n                        hasRecoveryEmailAddress={authorizationState.has_recovery_email_address}\n                        recoveryEmailAddressPattern={authorizationState.recovery_email_address_pattern}\n                        onChangePhone={this.props.onChangePhone}\n                    />\n                );\n                break;\n            default:\n                break;\n        }\n\n        return (\n            <div className='sign-in-wrap'>\n                <div className={classNames(classes.authorizationFormContent, 'authorization-form-content')}>\n                    {control}\n                </div>\n                <AuthErrorDialog />\n            </div>\n        );\n    }\n}\nexport default withStyles(styles)(AuthFormControl);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport packageJson from '../../package.json';\nimport './Footer.css'\n\nclass Footer extends React.PureComponent {\n\n    constructor(props){\n        super(props);\n    }\n\n    render() {\n        return (\n            <div className='footer-wrapper'>\n                <span>\n                    {packageJson.version}\n                </span>\n            </div>\n        );\n    }\n}\n\nexport default Footer;","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { getDateHint, getSenderUserId } from '../../Utils/Message';\nimport UserTileControl from './UserTileControl';\nimport ChatTileControl from './ChatTileControl';\nimport MessageAuthor from '../Message/MessageAuthor';\nimport MessageStore from '../../Stores/MessageStore';\nimport './MediaViewerControl.css';\n\nclass MediaViewerControl extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        const { chatId, messageId } = this.props;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n\n        const userId = getSenderUserId(message);\n        const dateHint = getDateHint(message);\n\n        const tileControl = userId ? (\n            <UserTileControl userId={userId} />\n        ) : (\n            <ChatTileControl chatId={chatId} />\n        );\n\n        return (\n            <div className='media-viewer-control'>\n                <div className='media-viewer-control-wrapper'>\n                    {tileControl}\n                    <div className='media-viewer-control-content'>\n                        <div className='media-viewer-row'>\n                            <MessageAuthor chatId={chatId} userId={userId} />\n                        </div>\n                        <div className='media-viewer-row message-meta'>\n                            <span className='message-date'>{dateHint}</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nMediaViewerControl.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired\n};\n\nexport default MediaViewerControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport lottie from 'lottie-web';\nimport './Lottie.css';\n\nclass Lottie extends React.Component {\n    componentDidMount() {\n        const { options, eventListeners } = this.props;\n\n        const {\n            loop,\n            autoplay,\n            animationData,\n            //path,\n            rendererSettings,\n            segments\n        } = options;\n\n        this.options = {\n            container: this.el,\n            renderer: 'svg',\n            loop: Boolean(loop),\n            autoplay: Boolean(autoplay),\n            segments: Boolean(segments),\n            animationData,\n            //path,\n            rendererSettings\n        };\n\n        this.options = { ...this.options, ...options };\n\n        this.anim = lottie.loadAnimation(this.options);\n        this.registerEvents(eventListeners);\n    }\n\n    componentWillUpdate(nextProps, nextState, nextContext) {\n        /* Recreate the animation handle if the data is changed */\n        if (\n            this.options.animationData !== nextProps.options.animationData ||\n            this.options.path !== nextProps.options.path\n        ) {\n            this.deRegisterEvents(this.props.eventListeners);\n            this.destroy();\n            this.options = { ...this.options, ...nextProps.options };\n            this.anim = lottie.loadAnimation(this.options);\n            this.registerEvents(nextProps.eventListeners);\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (this.props.isStopped) {\n            this.stop();\n        } else if (this.props.segments) {\n            this.playSegments();\n        } else {\n            this.play();\n        }\n\n        this.pause();\n        this.setSpeed();\n        this.setDirection();\n    }\n\n    componentWillUnmount() {\n        this.deRegisterEvents(this.props.eventListeners);\n        this.destroy();\n        this.options.animationData = null;\n        this.options.path = null;\n        this.anim = null;\n    }\n\n    setSpeed() {\n        this.anim.setSpeed(this.props.speed);\n    }\n\n    setDirection() {\n        this.anim.setDirection(this.props.direction);\n    }\n\n    play() {\n        this.anim.play();\n    }\n\n    playSegments() {\n        this.anim.playSegments(this.props.segments);\n    }\n\n    stop() {\n        this.anim.stop();\n    }\n\n    pause() {\n        if (this.props.isPaused && !this.anim.isPaused) {\n            this.anim.pause();\n        } else if (!this.props.isPaused && this.anim.isPaused) {\n            this.anim.pause();\n        }\n    }\n\n    destroy() {\n        this.anim.destroy();\n    }\n\n    registerEvents(eventListeners) {\n        eventListeners.forEach(eventListener => {\n            this.anim.addEventListener(eventListener.eventName, eventListener.callback);\n        });\n    }\n\n    deRegisterEvents(eventListeners) {\n        eventListeners.forEach(eventListener => {\n            this.anim.removeEventListener(eventListener.eventName, eventListener.callback);\n        });\n    }\n\n    handleClickToPause = () => {\n        // The pause() method is for handling pausing by passing a prop isPaused\n        // This method is for handling the ability to pause by clicking on the animation\n        if (this.anim.isPaused) {\n            this.anim.play();\n        } else {\n            this.anim.pause();\n        }\n    };\n\n    render() {\n        const { width, height, ariaRole, ariaLabel, isClickToPauseDisabled, title } = this.props;\n\n        const getSize = initial => {\n            let size;\n\n            if (typeof initial === 'number') {\n                size = `${initial}px`;\n            } else {\n                size = initial || '100%';\n            }\n\n            return size;\n        };\n\n        const lottieStyles = {\n            width: getSize(width),\n            height: getSize(height),\n            overflow: 'hidden',\n            margin: '0 auto',\n            outline: 'none',\n            ...this.props.style\n        };\n\n        const onClickHandler = isClickToPauseDisabled ? () => null : this.handleClickToPause;\n\n        return (\n            // Bug with eslint rules https://github.com/airbnb/javascript/issues/1374\n            // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n            <div\n                ref={c => {\n                    this.el = c;\n                }}\n                style={lottieStyles}\n                onClick={onClickHandler}\n                title={title}\n                role={ariaRole}\n                aria-label={ariaLabel}\n                tabIndex='0'\n            />\n        );\n    }\n}\n\nLottie.propTypes = {\n    eventListeners: PropTypes.arrayOf(PropTypes.object),\n    options: PropTypes.object.isRequired,\n    height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    isStopped: PropTypes.bool,\n    isPaused: PropTypes.bool,\n    speed: PropTypes.number,\n    segments: PropTypes.arrayOf(PropTypes.number),\n    direction: PropTypes.number,\n    ariaRole: PropTypes.string,\n    ariaLabel: PropTypes.string,\n    isClickToPauseDisabled: PropTypes.bool,\n    title: PropTypes.string,\n    style: PropTypes.string\n};\n\nLottie.defaultProps = {\n    eventListeners: [],\n    isStopped: false,\n    isPaused: false,\n    speed: 1,\n    ariaRole: 'button',\n    ariaLabel: 'animation',\n    isClickToPauseDisabled: false,\n    title: ''\n};\n\nexport default Lottie;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { getText } from '../../Utils/Message';\nimport MessageStore from '../../Stores/MessageStore';\nimport './MediaCaption.css';\n\nclass MediaCaption extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    handleClick = event => {\n        event.stopPropagation();\n    };\n\n    render() {\n        const { text } = this.props;\n\n        return (\n            <div className='media-caption' onClick={this.handleClick}>\n                <div className='media-caption-text'>{text}</div>\n            </div>\n        );\n    }\n}\n\nMediaCaption.propTypes = {\n    text: PropTypes.array\n};\n\nMediaCaption.defaultProps = {};\n\nexport default MediaCaption;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport FileProgress from './FileProgress';\nimport Lottie from './Lottie';\nimport MediaCaption from './MediaCaption';\nimport { getMediaFile, getMediaPreviewFile } from '../../Utils/File';\nimport { getText, isAnimationMessage, isLottieMessage, isVideoMessage } from '../../Utils/Message';\nimport { isBlurredThumbnail } from '../../Utils/Media';\nimport FileStore from '../../Stores/FileStore';\nimport MessageStore from '../../Stores/MessageStore';\nimport PlayerStore from '../../Stores/PlayerStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './MediaViewerContent.css';\n\nclass MediaViewerContent extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.videoRef = React.createRef();\n        this.lottieRef = React.createRef();\n\n        const { chatId, messageId, size } = this.props;\n\n        let [width, height, file] = getMediaFile(chatId, messageId, size);\n        file = FileStore.get(file.id) || file;\n\n        let [thumbnailWidth, thumbnailHeight, thumbnail] = getMediaPreviewFile(chatId, messageId);\n        thumbnail = FileStore.get(thumbnail.id) || thumbnail;\n\n        const message = MessageStore.get(chatId, messageId);\n        const text = getText(message);\n\n        //console.log('mediaViewer file', file);\n        //console.log('mediaViewer thumbnail', thumbnail);\n\n        this.state = {\n            speed: 1,\n            prevChatId: chatId,\n            prevMessageId: messageId,\n            isPlaying: false,\n            width: width,\n            height: height,\n            file: file,\n            text: text,\n            thumbnailWidth: thumbnailWidth,\n            thumbnailHeight: thumbnailHeight,\n            thumbnail: thumbnail\n        };\n\n        this.updateAnimationData();\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        const { chatId, messageId, size } = props;\n\n        if (chatId !== state.prevChatId || messageId !== state.prevMessageId) {\n            let [width, height, file] = getMediaFile(chatId, messageId, size);\n            file = FileStore.get(file.id) || file;\n\n            let [thumbnailWidth, thumbnailHeight, thumbnail] = getMediaPreviewFile(chatId, messageId);\n            thumbnail = FileStore.get(thumbnail.id) || thumbnail;\n\n            const message = MessageStore.get(chatId, messageId);\n            const text = getText(message);\n\n            return {\n                speed: 1,\n                prevChatId: chatId,\n                prevMessageId: messageId,\n                isPlaying: false,\n                width: width,\n                height: height,\n                file: file,\n                text: text,\n                thumbnailWidth: thumbnailWidth,\n                thumbnailHeight: thumbnailHeight,\n                thumbnail: thumbnail\n            };\n        }\n\n        return null;\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdateDocumentBlob', this.onClientUpdateDocumentBlob);\n        FileStore.on('clientUpdatePhotoBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateVideoBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateAnimationBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateVideoThumbnailBlob', this.onClientUpdateMediaThumbnailBlob);\n        FileStore.on('clientUpdateAnimationThumbnailBlob', this.onClientUpdateMediaThumbnailBlob);\n        MessageStore.on('updateMessageContent', this.onUpdateMessageContent);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateDocumentBlob', this.onClientUpdateDocumentBlob);\n        FileStore.removeListener('clientUpdatePhotoBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateVideoBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateAnimationBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateVideoThumbnailBlob', this.onClientUpdateMediaThumbnailBlob);\n        FileStore.removeListener('clientUpdateAnimationThumbnailBlob', this.onClientUpdateMediaThumbnailBlob);\n        MessageStore.removeListener('updateMessageContent', this.onUpdateMessageContent);\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { chatId, messageId } = this.props;\n\n        if (prevProps.chatId !== chatId || prevProps.messageId !== messageId) {\n            this.updateAnimationData();\n        }\n    }\n\n    onClientUpdateDocumentBlob = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.updateAnimationData();\n        }\n    };\n\n    updateAnimationData = async () => {\n        const { chatId, messageId, size } = this.props;\n\n        if (!isLottieMessage(chatId, messageId)) {\n            return;\n        }\n\n        const [width, height, file] = getMediaFile(chatId, messageId, size);\n        const animationData = await this.getAnimationData(file);\n\n        this.setState({ animationData });\n    };\n\n    getAnimationData = file => {\n        return new Promise(resolve => {\n            if (!file) {\n                resolve(null);\n                return;\n            }\n\n            const blob = FileStore.getBlob(file.id);\n            if (!blob) {\n                resolve(null);\n                return;\n            }\n\n            const fileReader = new FileReader();\n            fileReader.onload = event => resolve(JSON.parse(event.target.result));\n            fileReader.onerror = () => resolve(null);\n            fileReader.onabort = () => resolve(null);\n            fileReader.readAsText(blob);\n        });\n    };\n\n    onClientUpdateMediaBlob = update => {\n        const { chatId, messageId, size } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            const [width, height, file] = getMediaFile(chatId, messageId, size);\n            this.setState({\n                width,\n                height,\n                file\n            });\n        }\n    };\n\n    onClientUpdateMediaThumbnailBlob = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            const [width, height, file] = getMediaPreviewFile(chatId, messageId);\n            this.setState({\n                thumbnailWidth: width,\n                thumbnailHeight: height,\n                thumbnail: file\n            });\n        }\n    };\n\n    onUpdateMessageContent = update => {\n        const { chatId, messageId, size } = this.props;\n        const { chat_id, message_id } = update;\n\n        if (chatId === chat_id && messageId === message_id) {\n            const [width, height, file] = getMediaFile(chatId, messageId, size);\n            const message = MessageStore.get(chatId, messageId);\n            const text = getText(message);\n            this.setState({\n                width: width,\n                height: height,\n                file: file,\n                text: text\n            });\n        }\n    };\n\n    handleContentClick = event => {\n        if (event) event.stopPropagation();\n    };\n\n    changeSpeed = speed => {\n        this.setState({\n            speed\n        });\n    };\n\n    render() {\n        const { chatId, messageId } = this.props;\n        const {\n            animationData,\n            width,\n            height,\n            thumbnailWidth,\n            thumbnailHeight,\n            file,\n            text,\n            thumbnail,\n            isPlaying\n        } = this.state;\n        if (!file) return null;\n\n        const blob = FileStore.getBlob(file.id) || file.blob;\n        const src = FileStore.getBlobUrl(blob) || '';\n\n        const thumbnailBlob = thumbnail ? FileStore.getBlob(thumbnail.id) || thumbnail.blob : null;\n        const thumbnailSrc = FileStore.getBlobUrl(thumbnailBlob);\n        const isBlurred = isBlurredThumbnail({ width: thumbnailWidth, height: thumbnailHeight });\n\n        const isVideo = isVideoMessage(chatId, messageId);\n        const isAnimation = isAnimationMessage(chatId, messageId);\n        const isLottie = isLottieMessage(chatId, messageId);\n        let videoWidth = width;\n        let videoHeight = height;\n        if (Math.max(videoWidth, videoHeight) > 640) {\n            const scale = 640 / Math.max(videoWidth, videoHeight);\n            videoWidth = videoWidth > videoHeight ? 640 : Math.floor(videoWidth * scale);\n            videoHeight = videoHeight > videoWidth ? 640 : Math.floor(videoHeight * scale);\n        }\n\n        let content = null;\n        if (isVideo) {\n            content = (\n                <div className='media-viewer-content-wrapper'>\n                    <video\n                        ref={this.videoRef}\n                        className='media-viewer-content-video-player'\n                        src={src}\n                        onClick={this.handleContentClick}\n                        controls\n                        autoPlay\n                        width={videoWidth}\n                        height={videoHeight}\n                        onPlay={() => {\n                            this.setState({ isPlaying: true });\n                            TdLibController.clientUpdate({\n                                '@type': 'clientUpdateMediaViewerPlay'\n                            });\n                        }}\n                        onCanPlay={() => {\n                            const player = this.videoRef.current;\n                            if (player) {\n                                player.volume = PlayerStore.volume;\n                            }\n                        }}\n                        onPause={() => {\n                            TdLibController.clientUpdate({\n                                '@type': 'clientUpdateMediaViewerPause'\n                            });\n                        }}\n                        onEnded={() => {\n                            TdLibController.clientUpdate({\n                                '@type': 'clientUpdateMediaViewerEnded'\n                            });\n                        }}\n                        onVolumeChange={() => {\n                            const player = this.videoRef.current;\n                            if (player) {\n                                TdLibController.clientUpdate({\n                                    '@type': 'clientUpdateMediaVolume',\n                                    volume: player.volume\n                                });\n                            }\n                        }}\n                    />\n                    {!isPlaying &&\n                        (!src && thumbnailSrc ? (\n                            <img\n                                className={classNames('media-viewer-content-video-thumbnail', {\n                                    'media-blurred': isBlurred\n                                })}\n                                src={thumbnailSrc}\n                                alt=''\n                                width={videoWidth}\n                                height={videoHeight}\n                            />\n                        ) : (\n                            <div\n                                className='media-viewer-content-video-thumbnail'\n                                style={{\n                                    width: videoWidth,\n                                    height: videoHeight\n                                }}\n                            />\n                        ))}\n                </div>\n            );\n        } else if (isAnimation) {\n            content = (\n                <div className='media-viewer-content-wrapper'>\n                    <video\n                        className='media-viewer-content-video-player'\n                        src={src}\n                        onClick={this.handleContentClick}\n                        loop\n                        autoPlay\n                        width={videoWidth}\n                        height={videoHeight}\n                        onPlay={() => {\n                            this.setState({ isPlaying: true });\n                        }}\n                    />\n                    {!isPlaying &&\n                        (!src && thumbnailSrc ? (\n                            <img\n                                className={classNames('media-viewer-content-video-thumbnail', {\n                                    'media-blurred': isBlurred\n                                })}\n                                src={thumbnailSrc}\n                                alt=''\n                                width={videoWidth}\n                                height={videoHeight}\n                            />\n                        ) : (\n                            <div\n                                className='media-viewer-content-video-thumbnail'\n                                style={{\n                                    width: videoWidth,\n                                    height: videoHeight\n                                }}\n                            />\n                        ))}\n                </div>\n            );\n        } else if (isLottie) {\n            const defaultOptions = {\n                loop: true,\n                autoplay: true,\n                //path: src,\n                animationData: animationData,\n                rendererSettings: {\n                    preserveAspectRatio: 'xMidYMid slice'\n                }\n            };\n            const { speed } = this.state;\n\n            content = (\n                <Lottie\n                    ref={this.lottieRef}\n                    speed={speed}\n                    options={defaultOptions}\n                    height='auto'\n                    width={400}\n                    isStopped={false}\n                    isPaused={false}\n                />\n            );\n        } else {\n            content = <img className='media-viewer-content-image' src={src} alt='' onClick={this.handleContentClick} />;\n        }\n\n        return (\n            <div className='media-viewer-content'>\n                {content}\n                {/*<img className='media-viewer-content-image-preview' src={previewSrc} alt='' />*/}\n                <FileProgress file={file} zIndex={2} />\n                {text && text.length > 0 && <MediaCaption text={text} />}\n            </div>\n        );\n    }\n}\n\nMediaViewerContent.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    size: PropTypes.number.isRequired\n};\n\nexport default MediaViewerContent;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport './MediaViewerButton.css';\n\nclass MediaViewerButton extends React.Component {\n    handleClick = event => {\n        event.stopPropagation();\n\n        const { disabled, onClick } = this.props;\n\n        if (disabled) return;\n\n        onClick(event);\n    };\n\n    render() {\n        const { disabled, grow, children } = this.props;\n\n        const className = classNames(\n            disabled ? 'media-viewer-button-disabled' : 'media-viewer-button',\n            { grow: grow }\n        );\n\n        return (\n            <div className={className} onClick={this.handleClick}>\n                {children}\n            </div>\n        );\n    }\n}\n\nMediaViewerButton.propTypes = {\n    disabled: PropTypes.bool,\n    onClick: PropTypes.func\n};\n\nexport default MediaViewerButton;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport './MediaViewerFooterText.css';\n\nclass MediaViewerFooterText extends React.Component {\n    render() {\n        const { title, subtitle } = this.props;\n\n        return (\n            <div className=\"media-viewer-footer-text\">\n                <div className=\"media-viewer-footer-text-wrapper\">\n                    <span>{title}</span>\n                    {\n                        Boolean(subtitle) && (\n                            <span>\n                                &nbsp;\n                                {subtitle}\n                            </span>\n                        )}\n                </div>\n            </div>\n        );\n    }\n}\n\nMediaViewerFooterText.propTypes = {\n    title: PropTypes.string,\n    subtitle: PropTypes.string\n};\n\nexport default MediaViewerFooterText;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport './MediaViewerFooterButton.css';\n\nconst styles = theme => ({\n    checked: {\n        color: theme.palette.primary.main\n    }\n});\n\nclass MediaViewerFooterButton extends React.Component {\n    handleClick = event => {\n        event.stopPropagation();\n\n        const { onClick, disabled } = this.props;\n\n        if (disabled) return;\n\n        onClick(event);\n    };\n\n    render() {\n        const { checked, children, classes, disabled, title } = this.props;\n\n        return (\n            <div\n                className={classNames(disabled ? 'media-viewer-footer-button-disabled' : 'media-viewer-footer-button', {\n                    [classes.checked]: checked\n                })}\n                title={title}\n                onClick={this.handleClick}>\n                {children}\n            </div>\n        );\n    }\n}\n\nMediaViewerFooterButton.propTypes = {\n    title: PropTypes.string,\n    disabled: PropTypes.bool,\n    checked: PropTypes.bool,\n    onClick: PropTypes.func\n};\n\nexport default withStyles(styles)(MediaViewerFooterButton);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport SaveIcon from '@material-ui/icons/GetApp';\nimport MediaViewerFooterButton from './MediaViewerFooterButton';\nimport FileStore from '../../Stores/FileStore';\nimport './MediaViewerFooterButton.css';\n\nconst iconStyle = {\n    padding: 20,\n    color: 'white'\n};\n\nclass MediaViewerDownloadButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { fileId } = props;\n\n        this.state = {\n            prevPropsFileId: fileId,\n            fileId: fileId,\n            disabled: MediaViewerDownloadButton.saveDisabled(fileId)\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        const { fileId } = props;\n        const { prevPropsFileId } = state;\n\n        if (fileId !== prevPropsFileId) {\n            return {\n                prevPropsFileId: fileId,\n                fileId: fileId,\n                disabled: MediaViewerDownloadButton.saveDisabled(fileId)\n            };\n        }\n\n        return null;\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdateAnimationBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateChatBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateDocumentBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdatePhotoBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateUserBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateVideoBlob', this.onClientUpdateMediaBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateAnimationBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateChatBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateDocumentBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdatePhotoBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateUserBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateVideoBlob', this.onClientUpdateMediaBlob);\n    }\n\n    onClientUpdateMediaBlob = update => {\n        const { fileId } = this.state;\n\n        if (fileId === update.fileId) {\n            this.setState({\n                disabled: MediaViewerDownloadButton.saveDisabled(fileId)\n            });\n        }\n    };\n\n    static saveDisabled = fileId => {\n        return !Boolean(FileStore.getBlob(fileId));\n    };\n\n    handleClick = event => {\n        event.stopPropagation();\n\n        const { onClick } = this.props;\n        const { disabled } = this.state;\n        if (disabled) return;\n\n        onClick(event);\n    };\n\n    render() {\n        const { title } = this.props;\n        const { disabled } = this.state;\n\n        return (\n            <MediaViewerFooterButton disabled={disabled} title={title} onClick={this.handleClick}>\n                <SaveIcon style={iconStyle} />\n            </MediaViewerFooterButton>\n        );\n    }\n}\n\nMediaViewerDownloadButton.propTypes = {\n    fileId: PropTypes.number.isRequired,\n    onClick: PropTypes.func.isRequired,\n    title: PropTypes.string\n};\n\nexport default MediaViewerDownloadButton;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withTranslation } from 'react-i18next';\nimport {\n    Button,\n    Checkbox,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogContentText,\n    DialogTitle,\n    FormControlLabel\n} from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\nimport ReplyIcon from '@material-ui/icons/Reply';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport InvertColorsIcon from '@material-ui/icons/InvertColors';\nimport SlowMotionVideoIcon from '@material-ui/icons/SlowMotionVideo';\nimport MediaViewerControl from '../Tile/MediaViewerControl';\nimport MediaViewerContent from './MediaViewerContent';\nimport MediaViewerButton from './MediaViewerButton';\nimport MediaViewerFooterText from './MediaViewerFooterText';\nimport MediaViewerFooterButton from './MediaViewerFooterButton';\nimport MediaViewerDownloadButton from './MediaViewerDownloadButton';\nimport { getSize } from '../../Utils/Common';\nimport {\n    cancelPreloadMediaViewerContent,\n    getMediaFile,\n    loadMediaViewerContent,\n    preloadMediaViewerContent,\n    saveOrDownload\n} from '../../Utils/File';\nimport {\n    filterMessages,\n    isAnimationMessage,\n    isLottieMessage,\n    isMediaContent,\n    isVideoMessage\n} from '../../Utils/Message';\nimport { between } from '../../Utils/Common';\nimport { PHOTO_SIZE, PHOTO_BIG_SIZE, MEDIA_SLICE_LIMIT } from '../../Constants';\nimport MessageStore from '../../Stores/MessageStore';\nimport FileStore from '../../Stores/FileStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './MediaViewer.css';\n\nconst forwardIconStyle = {\n    padding: 20,\n    transform: 'scaleX(-1)'\n};\n\nconst iconStyle = {\n    padding: 20\n};\n\nconst navigationIconStyle = {\n    padding: 35\n};\n\nclass MediaViewer extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.contentRef = React.createRef();\n        this.history = [];\n\n        const { chatId, messageId } = this.props;\n\n        this.state = {\n            speed: 1,\n            background: 'media-viewer-default',\n            prevChatId: chatId,\n            prevMessageId: messageId,\n            currentMessageId: messageId,\n            hasNextMedia: false,\n            hasPreviousMedia: false,\n            deleteConfirmationOpened: false,\n            deleteForAll: true\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId, messageId } = this.props;\n        const {\n            background,\n            currentMessageId,\n            deleteConfirmationOpened,\n            firstSliceLoaded,\n            hasNextMedia,\n            hasPreviousMedia,\n            speed,\n            totalCount\n        } = this.state;\n\n        if (nextState.background !== background) {\n            return true;\n        }\n\n        if (nextProps.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextProps.messageId !== messageId) {\n            return true;\n        }\n\n        if (nextState.currentMessageId !== currentMessageId) {\n            return true;\n        }\n\n        if (nextState.hasPrevousMedia !== hasPreviousMedia) {\n            return true;\n        }\n\n        if (nextState.hasNextMedia !== hasNextMedia) {\n            return true;\n        }\n\n        if (nextState.firstSliceLoaded !== firstSliceLoaded) {\n            return true;\n        }\n\n        if (nextState.totalCount !== totalCount) {\n            return true;\n        }\n\n        if (nextState.deleteConfirmationOpened !== deleteConfirmationOpened) {\n            return true;\n        }\n\n        if (nextState.speed !== speed) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        this.loadHistory();\n\n        document.addEventListener('keydown', this.onKeyDown, false);\n        MessageStore.on('updateDeleteMessages', this.onUpdateDeleteMessages);\n        MessageStore.on('updateNewMessage', this.onUpdateNewMessage);\n        MessageStore.on('updateMessageContent', this.onUpdateMessageContent);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('keydown', this.onKeyDown, false);\n        MessageStore.removeListener('updateDeleteMessages', this.onUpdateDeleteMessages);\n        MessageStore.removeListener('updateNewMessage', this.onUpdateNewMessage);\n        MessageStore.removeListener('updateMessageContent', this.onUpdateMessageContent);\n    }\n\n    onKeyDown = event => {\n        if (event.keyCode === 27) {\n            const { deleteConfirmationOpened } = this.state;\n            if (deleteConfirmationOpened) return;\n\n            this.handleClose();\n        } else if (event.keyCode === 39) {\n            this.handleNext();\n        } else if (event.keyCode === 37) {\n            this.handlePrevious();\n        }\n    };\n\n    onUpdateMessageContent = update => {\n        const { chat_id, message_id, new_content, old_content } = update;\n        const { chatId } = this.props;\n        const { currentMessageId, totalCount } = this.state;\n\n        if (chatId !== chat_id) return;\n\n        const message = MessageStore.get(chat_id, message_id);\n        if (!message) return;\n\n        loadMediaViewerContent([message]);\n\n        const addMessage = isMediaContent(new_content) && !isMediaContent(old_content);\n        if (addMessage) {\n            if (\n                this.history.length >= 2 &&\n                (this.firstSliceLoaded ||\n                    between(message_id, this.history[0].id, this.history[this.history.length - 1].id))\n            ) {\n                let inserted = false;\n                let history = [];\n                for (let i = 0; i < this.history.length; i++) {\n                    if (this.history[i].id > message_id) {\n                        history.push(this.history[i]);\n                    } else {\n                        if (!inserted) {\n                            inserted = true;\n                            history.push(message);\n                        }\n                        history.push(this.history[i]);\n                    }\n                }\n                this.history = history;\n            }\n\n            const index = this.history.findIndex(x => x.id === currentMessageId);\n            this.setState({\n                hasNextMedia: this.hasNextMedia(index),\n                hasPreviousMedia: this.hasPreviousMedia(index),\n                totalCount: totalCount + 1\n            });\n        }\n\n        const removeMessage = !isMediaContent(new_content) && isMediaContent(old_content);\n        if (removeMessage) {\n            let oldHistory = this.history;\n            this.history = this.history.filter(x => x.id !== message_id);\n\n            if (currentMessageId === message_id) {\n                const filterMap = new Map();\n                filterMap.set(message_id, message_id);\n\n                this.moveToNextMedia(oldHistory, filterMap);\n                this.setState({\n                    totalCount: Math.max(totalCount - 1, 0)\n                });\n            } else {\n                const index = this.history.findIndex(x => x.id === currentMessageId);\n                this.setState({\n                    hasNextMedia: this.hasNextMedia(index),\n                    hasPreviousMedia: this.hasPreviousMedia(index),\n                    totalCount: Math.max(totalCount - 1, 0)\n                });\n            }\n        }\n    };\n\n    onUpdateDeleteMessages = update => {\n        const { chat_id, message_ids, is_permanent } = update;\n        const { chatId } = this.props;\n        const { currentMessageId, totalCount } = this.state;\n\n        if (!is_permanent) return;\n        if (chatId !== chat_id) return;\n\n        const filterMap = message_ids.reduce((accumulator, currentId) => {\n            accumulator.set(currentId, currentId);\n            return accumulator;\n        }, new Map());\n\n        const oldHistory = this.history;\n        let deletedCount = oldHistory.length;\n\n        this.history = this.history.filter(x => !filterMap.has(x.id));\n        deletedCount -= this.history.length;\n\n        this.setState({ totalCount: Math.max(totalCount - deletedCount, 0) });\n\n        if (!this.history.length) {\n            ApplicationStore.setMediaViewerContent(null);\n            return;\n        }\n\n        if (filterMap.has(currentMessageId)) {\n            this.moveToNextMedia(oldHistory, filterMap);\n        }\n    };\n\n    onUpdateNewMessage = update => {\n        const { chatId } = this.props;\n        const { currentMessageId, totalCount } = this.state;\n\n        const { message } = update;\n        if (!message) return;\n        if (!isMediaContent(message.content)) return;\n\n        if (message.chat_id !== chatId) return;\n        if (!this.firstSliceLoaded) return;\n\n        this.history = [message].concat(this.history);\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n\n        this.setState({\n            hasNextMedia: this.hasNextMedia(index),\n            hasPreviousMedia: this.hasPreviousMedia(index),\n            totalCount: totalCount + 1\n        });\n    };\n\n    getFilter = (chatId, messageId) => {\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n\n        const { content } = message;\n        if (!content) return null;\n\n        switch (content['@type']) {\n            case 'messageChatChangePhoto': {\n                return {\n                    '@type': 'searchMessagesFilterChatPhoto'\n                };\n            }\n            case 'messagePhoto': {\n                return {\n                    '@type': 'searchMessagesFilterPhotoAndVideo'\n                };\n            }\n            case 'messageVideo': {\n                return {\n                    '@type': 'searchMessagesFilterPhotoAndVideo'\n                };\n            }\n            default: {\n                return null;\n            }\n        }\n    };\n\n    loadHistory = async () => {\n        const { chatId, messageId } = this.props;\n\n        const filter = this.getFilter(chatId, messageId);\n\n        let result = {\n            '@type': 'messages',\n            messages: [],\n            total_count: 0\n        };\n        if (filter) {\n            result = await TdLibController.send({\n                '@type': 'searchChatMessages',\n                chat_id: chatId,\n                query: '',\n                sender_user_id: 0,\n                from_message_id: messageId,\n                offset: -MEDIA_SLICE_LIMIT,\n                limit: 2 * MEDIA_SLICE_LIMIT,\n                filter: filter\n            });\n        }\n\n        filterMessages(result, this.history);\n        MessageStore.setItems(result.messages);\n\n        this.history = result.messages;\n        this.firstSliceLoaded = result.messages.length === 0;\n\n        const { currentMessageId } = this.state;\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n\n        this.setState({\n            hasNextMedia: this.hasNextMedia(index),\n            hasPreviousMedia: this.hasPreviousMedia(index)\n        });\n\n        if (index === -1) {\n            this.history = [MessageStore.get(chatId, currentMessageId)];\n            preloadMediaViewerContent(0, this.history);\n        } else {\n            preloadMediaViewerContent(index, this.history);\n\n            const filter = this.getFilter(chatId, messageId);\n            if (!filter) return;\n\n            const maxCount = 1500;\n            let count = 0;\n            while (!this.firstSliceLoaded && count < maxCount) {\n                const result = await TdLibController.send({\n                    '@type': 'searchChatMessages',\n                    chat_id: chatId,\n                    query: '',\n                    sender_user_id: 0,\n                    from_message_id: this.history.length > 0 ? this.history[0].id : 0,\n                    offset: -99,\n                    limit: 99 + 1,\n                    filter: filter\n                });\n                count += result.messages.length;\n\n                filterMessages(result, this.history);\n                MessageStore.setItems(result.messages);\n\n                this.history = result.messages.concat(this.history);\n                this.firstSliceLoaded = result.messages.length === 0;\n\n                const { currentMessageId } = this.state;\n                const index = this.history.findIndex(x => x.id === currentMessageId);\n\n                this.setState({\n                    hasNextMedia: this.hasNextMedia(index),\n                    hasPreviousMedia: this.hasPreviousMedia(index),\n                    firstSliceLoaded: this.firstSliceLoaded,\n                    totalCount: result.total_count\n                });\n            }\n        }\n    };\n\n    handleClose = () => {\n        ApplicationStore.setMediaViewerContent(null);\n\n        const { currentMessageId } = this.state;\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n        if (index !== -1) {\n            cancelPreloadMediaViewerContent(index, this.history);\n        }\n    };\n\n    saveAnimation = (animation, message) => {\n        if (!message) return;\n        const { chat_id, id } = message;\n\n        if (!animation) return;\n\n        const { animation: file, file_name } = animation;\n        if (!file) return;\n\n        const { id: fileId } = file;\n\n        saveOrDownload(file, file_name || id, message, () => FileStore.updateAnimationBlob(chat_id, id, fileId));\n    };\n\n    saveDocument = (document, message) => {\n        if (!message) return;\n        const { chat_id, id } = message;\n\n        if (!document) return;\n\n        const { document: file, file_name } = document;\n        if (!file) return;\n\n        const { id: fileId } = file;\n\n        saveOrDownload(file, file_name || id, message, () => FileStore.updateDocumentBlob(chat_id, id, fileId));\n    };\n\n    saveVideo = (video, message) => {\n        if (!message) return;\n        const { chat_id, id } = message;\n\n        if (!video) return;\n\n        const { video: file, file_name } = video;\n        if (!file) return;\n\n        const { id: fileId } = file;\n\n        saveOrDownload(file, file_name || id, message, () => FileStore.updateVideoBlob(chat_id, id, fileId));\n    };\n\n    savePhoto = (photo, message) => {\n        if (!message) return;\n        const { chat_id, id } = message;\n\n        if (!photo) return;\n\n        const photoSize = getSize(photo.sizes, PHOTO_BIG_SIZE);\n        if (!photoSize) return;\n\n        const { photo: file } = photoSize;\n        if (!file) return;\n\n        const { id: fileId } = file;\n\n        saveOrDownload(file, file.id + '.jpg', message, () => FileStore.updatePhotoBlob(chat_id, id, fileId));\n    };\n\n    handleSave = () => {\n        const { chatId } = this.props;\n        const { currentMessageId } = this.state;\n\n        const message = MessageStore.get(chatId, currentMessageId);\n        if (!message) return;\n\n        const { content } = message;\n        if (!content) return;\n\n        switch (content['@type']) {\n            case 'messageAnimation': {\n                const { animation } = content;\n\n                this.saveAnimation(animation, message);\n                break;\n            }\n            case 'messageChatChangePhoto': {\n                const { photo } = content;\n\n                this.savePhoto(photo, message);\n                break;\n            }\n            case 'messageDocument': {\n                const { document } = content;\n\n                this.saveDocument(document, message);\n                break;\n            }\n            case 'messagePhoto': {\n                const { photo } = content;\n\n                this.savePhoto(photo, message);\n                break;\n            }\n            case 'messageText': {\n                const { web_page } = content;\n                if (!web_page) return;\n\n                const { animation, document, photo, video } = web_page;\n\n                if (animation) {\n                    this.saveAnimation(animation, message);\n                    return;\n                }\n\n                if (document) {\n                    this.saveDocument(document, message);\n                    return;\n                }\n\n                if (photo) {\n                    this.savePhoto(photo, message);\n                    return;\n                }\n\n                if (video) {\n                    this.saveVideo(video, message);\n                    return;\n                }\n                break;\n            }\n            case 'messageVideo': {\n                const { video } = content;\n\n                this.saveVideo(video, message);\n                break;\n            }\n        }\n    };\n\n    handleForward = () => {\n        const { chatId } = this.props;\n        const { currentMessageId } = this.state;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateForward',\n            info: {\n                chatId: chatId,\n                messageIds: [currentMessageId]\n            }\n        });\n    };\n\n    handleDelete = () => {\n        this.handleDialogOpen();\n        return;\n\n        const { chatId, messageId } = this.props;\n        const { currentMessageId } = this.state;\n\n        const message = MessageStore.get(chatId, currentMessageId);\n        if (!message) return;\n        if (!message.content) return;\n\n        const { photo } = message.content;\n        if (photo) {\n            const photoSize = getSize(photo.sizes, PHOTO_BIG_SIZE);\n            if (photoSize) {\n                let file = photoSize.photo;\n                file = FileStore.get(file.id) || file;\n                if (file) {\n                    const store = FileStore.getReadWriteStore();\n\n                    FileStore.deleteLocalFile(store, file);\n                }\n            }\n        }\n    };\n\n    hasPreviousMedia = index => {\n        if (index === -1) return false;\n\n        const nextIndex = index + 1;\n        return nextIndex < this.history.length;\n    };\n\n    handlePrevious = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        const { currentMessageId } = this.state;\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n        const nextIndex = index + 1;\n\n        return this.loadMedia(nextIndex, () => {\n            if (nextIndex === this.history.length - 1) {\n                this.loadPrevious();\n            }\n        });\n    };\n\n    loadPrevious = async () => {\n        const { chatId, messageId } = this.props;\n        const { currentMessageId } = this.state;\n\n        const filter = this.getFilter(chatId, messageId);\n\n        let result = {\n            '@type': 'messages',\n            messages: [],\n            total_count: 0\n        };\n        if (filter) {\n            result = await TdLibController.send({\n                '@type': 'searchChatMessages',\n                chat_id: chatId,\n                query: '',\n                sender_user_id: 0,\n                from_message_id: currentMessageId,\n                offset: 0,\n                limit: MEDIA_SLICE_LIMIT,\n                filter: filter\n            });\n        }\n\n        filterMessages(result, this.history);\n        MessageStore.setItems(result.messages);\n\n        this.history = this.history.concat(result.messages);\n\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n\n        this.setState({\n            hasNextMedia: this.hasNextMedia(index),\n            hasPreviousMedia: this.hasPreviousMedia(index),\n            totalCount: result.total_count\n        });\n    };\n\n    hasNextMedia = index => {\n        if (index === -1) return false;\n\n        const nextIndex = index - 1;\n        return nextIndex >= 0;\n    };\n\n    handleNext = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        const { currentMessageId } = this.state;\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n        const nextIndex = index - 1;\n\n        return this.loadMedia(nextIndex, () => {\n            if (nextIndex === 0) {\n                this.loadNext();\n            }\n        });\n    };\n\n    loadNext = async () => {\n        const { chatId, messageId } = this.props;\n        const { currentMessageId } = this.state;\n\n        const filter = this.getFilter(chatId, messageId);\n\n        let result = {\n            '@type': 'messages',\n            messages: [],\n            total_count: 0\n        };\n        if (filter) {\n            result = await TdLibController.send({\n                '@type': 'searchChatMessages',\n                chat_id: chatId,\n                query: '',\n                sender_user_id: 0,\n                from_message_id: currentMessageId,\n                offset: -MEDIA_SLICE_LIMIT,\n                limit: MEDIA_SLICE_LIMIT + 1,\n                filter: filter\n            });\n        }\n\n        filterMessages(result, this.history);\n        MessageStore.setItems(result.messages);\n\n        this.firstSliceLoaded = result.messages.length === 0;\n        this.history = result.messages.concat(this.history);\n\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n\n        this.setState({\n            hasNextMedia: this.hasNextMedia(index),\n            hasPreviousMedia: this.hasPreviousMedia(index),\n            firstSliceLoaded: this.firstSliceLoaded,\n            totalCount: result.total_count\n        });\n    };\n\n    loadMedia = (index, callback) => {\n        if (index < 0) return false;\n        if (index >= this.history.length) return false;\n\n        this.setState(\n            {\n                currentMessageId: this.history[index].id,\n                hasNextMedia: this.hasNextMedia(index),\n                hasPreviousMedia: this.hasPreviousMedia(index)\n            },\n            callback\n        );\n\n        preloadMediaViewerContent(index, this.history);\n        return true;\n    };\n\n    moveToNextMedia = (oldHistory, filterMap) => {\n        const { currentMessageId } = this.state;\n\n        const index = oldHistory.findIndex(x => x.id === currentMessageId);\n        let nextId = 0;\n        for (let i = index - 1; i >= 0; i--) {\n            if (filterMap && !filterMap.has(oldHistory[i].id)) {\n                nextId = oldHistory[i].id;\n                break;\n            }\n        }\n        if (!nextId) {\n            for (let i = index + 1; i < oldHistory.length; i++) {\n                if (filterMap && !filterMap.has(oldHistory[i].id)) {\n                    nextId = oldHistory[i].id;\n                    break;\n                }\n            }\n        }\n\n        if (!nextId) return;\n\n        const nextIndex = this.history.findIndex(x => x.id === nextId);\n\n        return this.loadMedia(nextIndex, () => {\n            if (nextIndex === 0) {\n                this.loadNext();\n            } else if (nextIndex === this.history.length - 1) {\n                this.loadPrevious();\n            }\n        });\n    };\n\n    handleDialogOpen = () => {\n        this.setState({ deleteConfirmationOpened: true });\n    };\n\n    handleDialogClose = () => {\n        this.setState({ deleteConfirmationOpened: false });\n    };\n\n    handleDone = () => {\n        this.setState({ deleteConfirmationOpened: false });\n\n        const { chatId } = this.props;\n        const { currentMessageId, deleteForAll } = this.state;\n\n        const message = MessageStore.get(chatId, currentMessageId);\n        if (!message) return;\n\n        const { can_be_deleted_only_for_self, can_be_deleted_for_all_users } = message;\n        const canBeDeleted = can_be_deleted_only_for_self || can_be_deleted_for_all_users;\n        if (!canBeDeleted) return;\n\n        TdLibController.send({\n            '@type': 'deleteMessages',\n            chat_id: chatId,\n            message_ids: [currentMessageId],\n            revoke: can_be_deleted_for_all_users && deleteForAll\n        });\n    };\n\n    handleChangeDeleteForAll = event => {\n        this.setState({ deleteForAll: event.target.checked });\n    };\n\n    handleInvertColors = () => {\n        const { background } = this.state;\n\n        let nextBackground = 'media-viewer-default';\n        switch (background) {\n            case 'media-viewer-default': {\n                nextBackground = 'media-viewer-dark';\n                break;\n            }\n            case 'media-viewer-dark': {\n                nextBackground = 'media-viewer-light';\n                break;\n            }\n            case 'media-viewer-light': {\n                nextBackground = 'media-viewer-default';\n                break;\n            }\n        }\n\n        this.setState({\n            background: nextBackground\n        });\n    };\n\n    handleChangeSpeed = () => {\n        if (!this.contentRef) return;\n\n        const { current } = this.contentRef;\n        if (!current) return;\n\n        const { speed } = this.state;\n        const nextSpeed = speed < 1 ? 1 : 0.1;\n\n        this.setState({ speed: nextSpeed });\n\n        current.changeSpeed(nextSpeed);\n    };\n\n    canBeForwarded = (chatId, messageId) => {\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return false;\n\n        const { can_be_forwarded, content } = message;\n        if (!content) return false;\n\n        switch (content['@type']) {\n            case 'messageChatChangePhoto': {\n                return true;\n            }\n            default: {\n                return can_be_forwarded;\n            }\n        }\n    };\n\n    render() {\n        const { chatId, t } = this.props;\n        const {\n            background,\n            currentMessageId,\n            deleteConfirmationOpened,\n            deleteForAll,\n            firstSliceLoaded,\n            hasNextMedia,\n            hasPreviousMedia,\n            speed,\n            totalCount\n        } = this.state;\n\n        let index = -1;\n        if (totalCount && firstSliceLoaded) {\n            index = this.history.findIndex(x => x.id === currentMessageId);\n        }\n        const maxCount = Math.max(this.history.length, totalCount);\n\n        const message = MessageStore.get(chatId, currentMessageId);\n        const { can_be_deleted_for_all_users, can_be_deleted_only_for_self } = message;\n\n        const canBeDeleted = can_be_deleted_for_all_users || can_be_deleted_only_for_self;\n        const canBeForwarded = this.canBeForwarded(chatId, currentMessageId);\n\n        let deleteConfirmationContent = '';\n        if (isVideoMessage(chatId, currentMessageId)) {\n            deleteConfirmationContent = t('AreYouSureDeleteVideo');\n        } else if (isAnimationMessage(chatId, currentMessageId)) {\n            deleteConfirmationContent = t('AreYouSureDeleteGIF');\n        } else {\n            deleteConfirmationContent = t('AreYouSureDeletePhoto');\n        }\n        const deleteConfirmation = deleteConfirmationOpened ? (\n            <Dialog\n                transitionDuration={0}\n                open={deleteConfirmationOpened}\n                onClose={this.handleDialogClose}\n                aria-labelledby='form-dialog-title'>\n                <DialogTitle id='form-dialog-title'>{t('AppName')}</DialogTitle>\n                <DialogContent>\n                    <DialogContentText>{deleteConfirmationContent}</DialogContentText>\n                    {can_be_deleted_for_all_users && (\n                        <FormControlLabel\n                            label={t('DeleteForAll')}\n                            control={\n                                <Checkbox color='primary' value='deleteAll' onChange={this.handleChangeDeleteForAll} />\n                            }\n                            checked={deleteForAll}\n                        />\n                    )}\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={this.handleDialogClose} color='primary'>\n                        {t('Cancel')}\n                    </Button>\n                    <Button onClick={this.handleDone} color='primary'>\n                        {t('Ok')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        ) : null;\n\n        const [width, height, file] = getMediaFile(chatId, currentMessageId, PHOTO_BIG_SIZE);\n\n        const fileId = file ? file.id : 0;\n        let title = t('AttachPhoto');\n        if (isVideoMessage(chatId, currentMessageId)) {\n            title = t('AttachVideo');\n        } else if (isAnimationMessage(chatId, currentMessageId)) {\n            title = t('AttachGif');\n        } else if (isLottieMessage(chatId, currentMessageId)) {\n            title = '';\n        }\n\n        return (\n            <div className={classNames('media-viewer', background)}>\n                {deleteConfirmation}\n                <div className='media-viewer-wrapper' onClick={this.handlePrevious}>\n                    <div className='media-viewer-left-column'>\n                        <div className='media-viewer-button-placeholder' />\n                        <MediaViewerButton disabled={!hasPreviousMedia} grow onClick={this.handlePrevious}>\n                            <NavigateBeforeIcon fontSize='large' style={navigationIconStyle} />\n                        </MediaViewerButton>\n                    </div>\n\n                    <div className='media-viewer-content-column'>\n                        <MediaViewerContent\n                            ref={this.contentRef}\n                            chatId={chatId}\n                            messageId={currentMessageId}\n                            size={PHOTO_BIG_SIZE}\n                            onClick={this.handlePrevious}\n                        />\n                    </div>\n\n                    <div className='media-viewer-right-column'>\n                        <MediaViewerButton onClick={this.handleClose}>\n                            <CloseIcon fontSize='large' style={navigationIconStyle} />\n                        </MediaViewerButton>\n                        <MediaViewerButton disabled={!hasNextMedia} grow onClick={this.handleNext}>\n                            <NavigateNextIcon fontSize='large' style={navigationIconStyle} />\n                        </MediaViewerButton>\n                    </div>\n                </div>\n                <div className='media-viewer-footer'>\n                    <MediaViewerControl chatId={chatId} messageId={currentMessageId} />\n                    <MediaViewerFooterText\n                        title={title}\n                        subtitle={maxCount && index >= 0 ? `${maxCount - index} of ${maxCount}` : null}\n                    />\n                    {isLottieMessage(chatId, currentMessageId) && (\n                        <>\n                            <MediaViewerFooterButton\n                                title={t('ChangeSpeed')}\n                                checked={speed < 1}\n                                onClick={this.handleChangeSpeed}>\n                                <SlowMotionVideoIcon style={iconStyle} />\n                            </MediaViewerFooterButton>\n                            <MediaViewerFooterButton\n                                title={t('InvertBackgroundColor')}\n                                onClick={this.handleInvertColors}>\n                                <InvertColorsIcon style={iconStyle} />\n                            </MediaViewerFooterButton>\n                        </>\n                    )}\n                    <MediaViewerDownloadButton title={t('Save')} fileId={fileId} onClick={this.handleSave} />\n                    <MediaViewerFooterButton\n                        title={t('Forward')}\n                        disabled={!canBeForwarded}\n                        onClick={this.handleForward}>\n                        <ReplyIcon style={forwardIconStyle} />\n                    </MediaViewerFooterButton>\n                    <MediaViewerFooterButton title={t('Delete')} disabled={!canBeDeleted} onClick={this.handleDelete}>\n                        <DeleteIcon style={iconStyle} />\n                    </MediaViewerFooterButton>\n                </div>\n            </div>\n        );\n    }\n}\n\nMediaViewer.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired\n};\n\nexport default withTranslation()(MediaViewer);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport FileProgress from './FileProgress';\nimport { getChatUserId } from '../../Utils/Chat';\nimport { PROFILE_PHOTO_BIG_SIZE } from '../../Constants';\nimport FileStore from '../../Stores/FileStore';\nimport './ProfileMediaViewer.css';\n\nclass ProfileMediaViewerContent extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { chatId, photo } = this.props;\n\n        let { big: file } = photo;\n        file = FileStore.get(file.id) || file;\n\n        this.state = {\n            prevChatId: chatId,\n            prevPhoto: photo,\n            width: PROFILE_PHOTO_BIG_SIZE,\n            height: PROFILE_PHOTO_BIG_SIZE,\n            file: file\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        const { chatId, photo } = props;\n\n        if (chatId !== state.prevChatId || photo !== state.prevPhoto) {\n            return {\n                prevChatId: chatId,\n                prevPhoto: photo,\n                width: PROFILE_PHOTO_BIG_SIZE,\n                height: PROFILE_PHOTO_BIG_SIZE,\n                file: photo.big\n            };\n        }\n\n        return null;\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdateChatBlob', this.onClientUpdateChatBlob);\n        FileStore.on('clientUpdateUserBlob', this.onClientUpdateUserBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateChatBlob', this.onClientUpdateChatBlob);\n        FileStore.removeListener('clientUpdateUserBlob', this.onClientUpdateUserBlob);\n    }\n\n    onClientUpdateChatBlob = update => {\n        const { chatId, photo } = this.props;\n\n        if (chatId === update.chatId && photo.big.id === update.fileId) {\n            const file = FileStore.get(update.fileId) || this.state.file;\n            this.setState({\n                file: file\n            });\n        }\n    };\n\n    onClientUpdateUserBlob = update => {\n        const { chatId, photo } = this.props;\n        const userId = getChatUserId(chatId);\n\n        if (userId === update.userId && photo.big.id === update.fileId) {\n            const file = FileStore.get(update.fileId) || this.state.file;\n            this.setState({\n                file: file\n            });\n        }\n    };\n\n    handleContentClick = event => {\n        if (event) event.stopPropagation();\n\n        this.props.onClick(event);\n    };\n\n    render() {\n        const { width, height, file } = this.state;\n        if (!file) return null;\n\n        const blob = FileStore.getBlob(file.id) || file.blob;\n        const src = FileStore.getBlobUrl(blob);\n\n        return (\n            <div className='media-viewer-content'>\n                <img className='media-viewer-content-image' src={src} alt='' onClick={this.handleContentClick} />\n                {/*<img className='media-viewer-content-image-preview' src={previewSrc} alt='' />*/}\n                <FileProgress file={file} />\n            </div>\n        );\n    }\n}\n\nProfileMediaViewerContent.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    photo: PropTypes.object.isRequired\n};\n\nexport default ProfileMediaViewerContent;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ChatTileControl from './ChatTileControl';\nimport MessageAuthor from '../Message/MessageAuthor';\nimport './MediaViewerControl.css';\n\nclass ProfileMediaViewerControl extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        const { chatId, date } = this.props;\n\n        return (\n            <div className='media-viewer-control'>\n                <div className='media-viewer-control-wrapper'>\n                    <ChatTileControl chatId={chatId} showSavedMessages={false} />\n                    <div className='media-viewer-control-content'>\n                        <div className='media-viewer-row'>\n                            <MessageAuthor chatId={chatId} />\n                        </div>\n                        {date && (\n                            <div className='media-viewer-row message-meta'>\n                                <span className='message-date'>{date}</span>\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nProfileMediaViewerControl.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    date: PropTypes.string\n};\n\nexport default ProfileMediaViewerControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport CloseIcon from '@material-ui/icons/Close';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\nimport ReplyIcon from '@material-ui/icons/Reply';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport MediaViewerDownloadButton from './MediaViewerDownloadButton';\nimport MediaViewerButton from './MediaViewerButton';\nimport MediaViewerFooterText from './MediaViewerFooterText';\nimport MediaViewerFooterButton from './MediaViewerFooterButton';\nimport ProfileMediaViewerContent from './ProfileMediaViewerContent';\nimport ProfileMediaViewerControl from '../Tile/ProfileMediaViewerControl';\nimport { getPhotoFromChat, getChatUserId, isPrivateChat } from '../../Utils/Chat';\nimport { getProfilePhotoDateHint, getProfilePhoto } from '../../Utils/User';\nimport { loadProfileMediaViewerContent, preloadProfileMediaViewerContent, saveOrDownload } from '../../Utils/File';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport FileStore from '../../Stores/FileStore';\nimport ChatStore from '../../Stores/ChatStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './ProfileMediaViewer.css';\n\nconst forwardIconStyle = {\n    padding: 20,\n    color: 'white',\n    transform: 'scaleX(-1)'\n};\n\nconst deleteIconStyle = {\n    padding: 20,\n    color: 'white'\n};\n\nconst navigationIconStyle = {\n    padding: 35,\n    color: 'white'\n};\n\nclass ProfileMediaViewer extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.history = [];\n\n        const { chatId, fileId } = this.props;\n\n        this.state = {\n            prevChatId: chatId,\n            prevFileId: fileId,\n            currentIndex: 0,\n            hasNextMedia: false,\n            hasPreviousMedia: false,\n            deleteConfirmationOpened: false\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId, messageId } = this.props;\n        const {\n            currentFileId,\n            hasPreviousMedia,\n            hasNextMedia,\n            firstSliceLoaded,\n            totalCount,\n            deleteConfirmationOpened\n        } = this.state;\n\n        if (nextProps.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextProps.messageId !== messageId) {\n            return true;\n        }\n\n        if (nextState.currentFileId !== currentFileId) {\n            return true;\n        }\n\n        if (nextState.hasPrevousMedia !== hasPreviousMedia) {\n            return true;\n        }\n\n        if (nextState.hasNextMedia !== hasNextMedia) {\n            return true;\n        }\n\n        if (nextState.firstSliceLoaded !== firstSliceLoaded) {\n            return true;\n        }\n\n        if (nextState.totalCount !== totalCount) {\n            return true;\n        }\n\n        if (nextState.deleteConfirmationOpened !== deleteConfirmationOpened) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        const { chatId } = this.props;\n        const photo = getPhotoFromChat(chatId);\n        loadProfileMediaViewerContent(chatId, [photo]);\n\n        this.loadHistory();\n\n        document.addEventListener('keydown', this.onKeyDown, false);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('keydown', this.onKeyDown, false);\n    }\n\n    onKeyDown = event => {\n        if (event.keyCode === 27) {\n            const { deleteConfirmationOpened } = this.state;\n            if (deleteConfirmationOpened) return;\n\n            this.handleClose();\n        } else if (event.keyCode === 39) {\n            this.handlePrevious();\n        } else if (event.keyCode === 37) {\n            this.handleNext();\n        }\n    };\n\n    loadHistory = async () => {\n        const { chatId } = this.props;\n\n        if (!isPrivateChat(chatId)) return;\n\n        const result = await TdLibController.send({\n            '@type': 'getUserProfilePhotos',\n            user_id: getChatUserId(chatId),\n            offset: 0,\n            limit: 100\n        });\n\n        this.history = result.photos;\n        this.firstSliceLoaded = result.photos.length === 0;\n\n        const index = 0;\n\n        this.setState({\n            currentIndex: index,\n            hasNextMedia: this.hasNextMedia(index),\n            hasPreviousMedia: this.hasPreviousMedia(index),\n            totalCount: result.total_count\n        });\n\n        preloadProfileMediaViewerContent(chatId, index, this.history);\n    };\n\n    handleClose = () => {\n        ApplicationStore.setProfileMediaViewerContent(null);\n    };\n\n    handleSave = () => {\n        const { chatId } = this.props;\n        const { currentIndex, totalCount } = this.state;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n\n        let index = -1;\n        if (totalCount) {\n            index = currentIndex;\n        }\n\n        const photo =\n            index > 0 && index < this.history.length ? getProfilePhoto(this.history[index]) : getPhotoFromChat(chatId);\n        if (!photo) return;\n        if (!photo.big) return;\n\n        const file = FileStore.get(photo.big.id) || photo.big;\n        if (!file) return;\n\n        saveOrDownload(file, file.id + '.jpg', chat, () => FileStore.updateChatPhotoBlob(chatId, file.id));\n    };\n\n    handleForward = () => {\n        const { chatId } = this.props;\n        if (!isPrivateChat(chatId)) return;\n\n        const { currentIndex, totalCount } = this.state;\n\n        let index = -1;\n        if (totalCount) {\n            index = currentIndex;\n        }\n\n        if (index < 0 || index >= this.history.length) return;\n        const photo = getProfilePhoto(this.history[index]);\n        if (!photo) return;\n\n        let { big: file } = photo;\n        file = FileStore.get(file.id) || file;\n        if (!file) return;\n\n        const photoSize = {\n            '@type': 'photoSize',\n            type: 'c',\n            photo: file,\n            width: 640,\n            height: 640\n        };\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateForward',\n            info: { photoSize }\n        });\n    };\n\n    handleDelete = () => {\n        const { chatId, messageId } = this.props;\n        const { currentIndex, totalCount } = this.state;\n\n        let index = -1;\n        if (totalCount) {\n            index = currentIndex;\n        }\n\n        const photo =\n            index > 0 && index < this.history.length ? getProfilePhoto(this.history[index]) : getPhotoFromChat(chatId);\n\n        if (photo) {\n            let file = photo.big;\n            file = FileStore.get(file.id) || file;\n            if (file) {\n                const store = FileStore.getReadWriteStore();\n\n                FileStore.deleteLocalFile(store, file);\n            }\n        }\n    };\n\n    hasPreviousMedia = index => {\n        if (index === -1) return false;\n\n        const nextIndex = index + 1;\n        return nextIndex < this.history.length;\n    };\n\n    handlePrevious = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        const { currentIndex } = this.state;\n        const nextIndex = currentIndex + 1;\n\n        return this.loadMedia(nextIndex, () => {\n            if (nextIndex === this.history.length - 1) {\n                this.loadPrevious();\n            }\n        });\n    };\n\n    loadPrevious = async () => {\n        return;\n    };\n\n    hasNextMedia = index => {\n        if (index === -1) return false;\n\n        const nextIndex = index - 1;\n        return nextIndex >= 0;\n    };\n\n    handleNext = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        const { currentIndex } = this.state;\n        const nextIndex = currentIndex - 1;\n\n        return this.loadMedia(nextIndex, () => {\n            if (nextIndex === 0) {\n                this.loadNext();\n            }\n        });\n    };\n\n    loadNext = async () => {\n        return;\n    };\n\n    loadMedia = (index, callback) => {\n        if (index < 0) return false;\n        if (index >= this.history.length) return false;\n\n        this.setState(\n            {\n                currentIndex: index,\n                hasNextMedia: this.hasNextMedia(index),\n                hasPreviousMedia: this.hasPreviousMedia(index)\n            },\n            callback\n        );\n\n        const { chatId } = this.props;\n\n        preloadProfileMediaViewerContent(chatId, index, this.history);\n        return true;\n    };\n\n    render() {\n        const { chatId, t } = this.props;\n        const {\n            currentIndex,\n            hasNextMedia,\n            hasPreviousMedia,\n            firstSliceLoaded,\n            totalCount,\n            deleteConfirmationOpened,\n            deleteForAll\n        } = this.state;\n\n        let index = -1;\n        if (totalCount) {\n            index = currentIndex;\n        }\n\n        const deleteConfirmation = null;\n        const inHistory = index >= 0 && index < this.history.length;\n        const photo = inHistory ? getProfilePhoto(this.history[index]) : getPhotoFromChat(chatId);\n        const userProfilePhoto = inHistory ? this.history[index] : null;\n        const { big: file } = photo;\n\n        return (\n            <div className='media-viewer'>\n                {deleteConfirmation}\n                <div className='media-viewer-wrapper' onClick={this.handlePrevious}>\n                    <div className='media-viewer-left-column'>\n                        <div className='media-viewer-button-placeholder' />\n                        <MediaViewerButton disabled={!hasNextMedia} grow onClick={this.handleNext}>\n                            <NavigateBeforeIcon fontSize='large' style={navigationIconStyle} />\n                        </MediaViewerButton>\n                    </div>\n\n                    <div className='media-viewer-content-column'>\n                        <ProfileMediaViewerContent chatId={chatId} photo={photo} onClick={this.handlePrevious} />\n                    </div>\n\n                    <div className='media-viewer-right-column'>\n                        <MediaViewerButton onClick={this.handleClose}>\n                            <CloseIcon fontSize='large' style={navigationIconStyle} />\n                        </MediaViewerButton>\n                        <MediaViewerButton disabled={!hasPreviousMedia} grow onClick={this.handlePrevious}>\n                            <NavigateNextIcon fontSize='large' style={navigationIconStyle} />\n                        </MediaViewerButton>\n                    </div>\n                </div>\n                <div className='media-viewer-footer'>\n                    <ProfileMediaViewerControl chatId={chatId} date={getProfilePhotoDateHint(userProfilePhoto)} />\n                    <MediaViewerFooterText\n                        title={t('AttachPhoto')}\n                        subtitle={totalCount && index >= 0 ? `${index + 1} of ${totalCount}` : null}\n                    />\n                    <MediaViewerDownloadButton title={t('Save')} fileId={file.id} onClick={this.handleSave} />\n                    {isPrivateChat(chatId) && (\n                        <MediaViewerFooterButton\n                            title={t('Forward')}\n                            disabled={!inHistory}\n                            onClick={this.handleForward}>\n                            <ReplyIcon style={forwardIconStyle} />\n                        </MediaViewerFooterButton>\n                    )}\n                    <MediaViewerFooterButton title={t('Delete')} disabled onClick={this.handleDelete}>\n                        <DeleteIcon style={deleteIconStyle} />\n                    </MediaViewerFooterButton>\n                </div>\n            </div>\n        );\n    }\n}\n\nProfileMediaViewer.propTypes = {\n    chatId: PropTypes.number.isRequired\n};\n\nexport default withTranslation()(ProfileMediaViewer);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport Button from '@material-ui/core/Button/Button';\nimport './AppInactiveControl.css';\n\nclass AppInactiveControl extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    static handleReload() {\n        window.location.reload();\n    }\n\n    render() {\n        return (\n            <div className='app-inactive'>\n                <div className='app-inactive-wrapper'>\n                    <a className='app-inactive-image' onClick={AppInactiveControl.handleReload} />\n                    <h3 className='app-inactive-title'>Such error, many tabs</h3>\n                    <div className='app-inactive-description'>\n                        Telegram supports only one active tab with the app.\n                        <br />\n                        Please reload this page to continue using this tab or close it.\n                    </div>\n                    <div className='app-inactive-actions'>\n                        <Button color='primary' onClick={AppInactiveControl.handleReload}>\n                            Reload app\n                        </Button>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default AppInactiveControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport Cookies from 'universal-cookie';\nimport { compose } from 'recompose';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport localForage from 'localforage';\nimport LocalForageWithGetItems from 'localforage-getitems';\nimport packageJson from '../package.json';\nimport withLanguage from './Language';\nimport withTheme from './Theme';\nimport withSnackbarNotifications from './Notifications';\nimport ForwardDialog from './Components/Dialog/ForwardDialog';\nimport ChatInfo from './Components/ColumnRight/ChatInfo';\nimport Dialogs from './Components/ColumnLeft/Dialogs';\nimport DialogDetails from './Components/ColumnMiddle/DialogDetails';\nimport AuthFormControl from './Components/Auth/AuthFormControl';\nimport Footer from './Components/Footer';\nimport MediaViewer from './Components/Viewer/MediaViewer';\nimport ProfileMediaViewer from './Components/Viewer/ProfileMediaViewer';\nimport AppInactiveControl from './Components/Additional/AppInactiveControl';\nimport registerServiceWorker from './registerServiceWorker';\nimport { highlightMessage } from './Actions/Client';\nimport { FIRST_START_OPTIMIZATIONS } from './Constants';\nimport ChatStore from './Stores/ChatStore';\nimport UserStore from './Stores/UserStore';\nimport ApplicationStore from './Stores/ApplicationStore';\nimport TdLibController from './Controllers/TdLibController';\nimport './TelegramApp.css';\n\nconst styles = theme => ({\n    page: {\n        background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF',\n        color: theme.palette.text.primary\n    },\n    '@global': {\n        a: {\n            color: theme.palette.primary.main\n        },\n        code: {\n            color: theme.palette.primary.dark\n        }\n    }\n});\n\nclass TelegramApp extends Component {\n    constructor(props) {\n        super(props);\n\n        console.log(`Start Telegram Web ${packageJson.version}`);\n\n        this.dialogDetailsRef = React.createRef();\n\n        this.state = {\n            authorizationState: null,\n            inactive: false,\n            mediaViewerContent: ApplicationStore.mediaViewerContent,\n            fatalError: false,\n            forwardInfo: null\n        };\n\n        /*this.store = localForage.createInstance({\n                    name: 'tdlib'\n                });*/\n\n        //this.initDB();\n    }\n\n    componentWillMount() {\n        const { location } = this.props;\n\n        TdLibController.init(location);\n    }\n\n    componentDidMount() {\n        TdLibController.addListener('update', this.onUpdate);\n\n        UserStore.on('clientUpdateOpenUser', this.onClientUpdateOpenUser);\n        ChatStore.on('clientUpdateOpenChat', this.onClientUpdateOpenChat);\n\n        ApplicationStore.on('updateAuthorizationState', this.onUpdateAuthorizationState);\n        ApplicationStore.on('clientUpdateChatDetailsVisibility', this.onClientUpdateChatDetailsVisibility);\n        ApplicationStore.on('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n        ApplicationStore.on('clientUpdateProfileMediaViewerContent', this.onClientUpdateProfileMediaViewerContent);\n        ApplicationStore.on('clientUpdateAppInactive', this.onClientUpdateAppInactive);\n        ApplicationStore.on('updateFatalError', this.onUpdateFatalError);\n        ApplicationStore.on('clientUpdateForward', this.onClientUpdateForward);\n    }\n\n    componentWillUnmount() {\n        TdLibController.removeListener('update', this.onUpdate);\n\n        UserStore.removeListener('clientUpdateOpenUser', this.onClientUpdateOpenUser);\n        ChatStore.removeListener('clientUpdateOpenChat', this.onClientUpdateOpenChat);\n\n        ApplicationStore.removeListener('updateAuthorizationState', this.onUpdateAuthorizationState);\n        ApplicationStore.removeListener('clientUpdateChatDetailsVisibility', this.onClientUpdateChatDetailsVisibility);\n        ApplicationStore.removeListener('clientUpdateMediaViewerContent', this.onClientUpdateMediaViewerContent);\n        ApplicationStore.removeListener(\n            'clientUpdateProfileMediaViewerContent',\n            this.onClientUpdateProfileMediaViewerContent\n        );\n        ApplicationStore.removeListener('clientUpdateAppInactive', this.onClientUpdateAppInactive);\n        ApplicationStore.removeListener('updateFatalError', this.onUpdateFatalError);\n        ApplicationStore.removeListener('clientUpdateForward', this.onClientUpdateForward);\n    }\n\n    onClientUpdateOpenChat = update => {\n        const { chatId, messageId, popup } = update;\n\n        this.handleSelectChat(chatId, messageId, popup);\n    };\n\n    onClientUpdateOpenUser = update => {\n        const { userId, popup } = update;\n\n        this.handleSelectUser(userId, popup);\n    };\n\n    onUpdate = update => {\n        if (FIRST_START_OPTIMIZATIONS) {\n            if (!this.checkServiceWorker) {\n                this.checkServiceWorker = true;\n\n                const cookieEnabled = navigator.cookieEnabled;\n                if (cookieEnabled) {\n                    const cookies = new Cookies();\n                    const register = cookies.get('register');\n                    if (!register) {\n                        registerServiceWorker();\n                    }\n                }\n            }\n        }\n    };\n\n    onClientUpdateForward = update => {\n        const { info } = update;\n\n        this.setState({ forwardInfo: info });\n    };\n\n    onUpdateFatalError = update => {\n        this.setState({ fatalError: true });\n    };\n\n    onUpdateAuthorizationState = update => {\n        const { authorization_state } = update;\n\n        this.setState({ authorizationState: authorization_state });\n\n        if (!window.hasFocus) return;\n        if (!authorization_state) return;\n        if (authorization_state['@type'] !== 'authorizationStateReady') return;\n\n        TdLibController.send({\n            '@type': 'setOption',\n            name: 'online',\n            value: { '@type': 'optionValueBoolean', value: true }\n        });\n    };\n\n    onClientUpdateChatDetailsVisibility = update => {\n        this.setState({\n            isChatDetailsVisible: ApplicationStore.isChatDetailsVisible\n        });\n    };\n\n    onClientUpdateMediaViewerContent = update => {\n        this.setState({ mediaViewerContent: ApplicationStore.mediaViewerContent });\n    };\n\n    onClientUpdateProfileMediaViewerContent = update => {\n        this.setState({\n            profileMediaViewerContent: ApplicationStore.profileMediaViewerContent\n        });\n    };\n\n    onClientUpdateAppInactive = update => {\n        this.setState({ inactive: true });\n    };\n\n    handleSelectChat = (chatId, messageId = null, popup = false) => {\n        const currentChatId = ApplicationStore.getChatId();\n        const currentDialogChatId = ApplicationStore.dialogChatId;\n        const currentMessageId = ApplicationStore.getMessageId();\n\n        if (popup){\n            if (currentDialogChatId !== chatId){\n                TdLibController.clientUpdate({\n                    '@type': 'clientUpdateDialogChatId',\n                    chatId\n                });\n            }\n\n            return;\n        }\n\n        if (currentChatId === chatId && messageId && currentMessageId === messageId) {\n            this.dialogDetailsRef.current.scrollToMessage();\n            if (messageId) {\n                highlightMessage(chatId, messageId);\n            }\n        } else if (currentChatId === chatId && !messageId) {\n            const chat = ChatStore.get(chatId);\n            if (chat && chat.unread_count > 0) {\n                this.dialogDetailsRef.current.scrollToStart();\n            } else {\n                this.dialogDetailsRef.current.scrollToBottom();\n            }\n        } else {\n            TdLibController.setChatId(chatId, messageId);\n        }\n    };\n\n    handleSelectUser = async (userId, popup) => {\n        if (!userId) return;\n\n        const chat = await TdLibController.send({\n            '@type': 'createPrivateChat',\n            user_id: userId,\n            force: true\n        });\n\n        this.handleSelectChat(chat.id, null, popup);\n    };\n\n    handleChangePhone = () => {\n        this.setState({\n            authorizationState: { '@type': 'authorizationStateWaitPhoneNumber' }\n        });\n    };\n\n    handleDragOver = event => {\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    handleDrop = event => {\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    handleRefresh = () => {\n        this.setState({ fatalError: false });\n        window.location.reload();\n    };\n\n    handleDestroy = () => {\n        this.setState({ fatalError: false });\n        TdLibController.send({ '@type': 'destroy' });\n    };\n\n    handleKeyDown = event => {\n        //console.log('KeyDown', event);\n    };\n\n    render() {\n        const {\n            inactive,\n            authorizationState,\n            isChatDetailsVisible,\n            mediaViewerContent,\n            profileMediaViewerContent,\n            fatalError,\n            forwardInfo\n        } = this.state;\n        const { classes } = this.props;\n\n        let page = (\n            <>\n                <div className={classNames(classes.page, 'page', { 'page-third-column': isChatDetailsVisible })}>\n                    <Dialogs onClearCache={this.clearCache} onSelectChat={this.handleSelectChat} />\n                    <DialogDetails ref={this.dialogDetailsRef} />\n                    {isChatDetailsVisible && <ChatInfo />}\n                </div>\n                <Footer />\n            </>\n        );\n\n        if (inactive) {\n            page = (\n                <>\n                    <div className='header-wrapper' />\n                    <div className={classNames(classes.page, 'page')}>\n                        <AppInactiveControl />\n                    </div>\n                    <Footer />\n                </>\n            );\n        } else if (authorizationState) {\n            switch (authorizationState['@type']) {\n                case 'authorizationStateClosed': {\n                    break;\n                }\n                case 'authorizationStateClosing': {\n                    break;\n                }\n                case 'authorizationStateLoggingOut': {\n                    break;\n                }\n                case 'authorizationStateReady': {\n                    break;\n                }\n                case 'authorizationStateWaitCode':\n                case 'authorizationStateWaitPassword':\n                case 'authorizationStateWaitPhoneNumber':\n                    page = (\n                        <AuthFormControl\n                            authorizationState={authorizationState}\n                            onChangePhone={this.handleChangePhone}\n                        />\n                    );\n                    break;\n                case 'authorizationStateWaitEncryptionKey': {\n                    break;\n                }\n                case 'authorizationStateWaitTdlibParameters': {\n                    break;\n                }\n            }\n        }\n\n        return (\n            <div id='app' onDragOver={this.handleDragOver} onDrop={this.handleDrop} onKeyDown={this.handleKeyDown}>\n                {page}\n                {mediaViewerContent && <MediaViewer {...mediaViewerContent} />}\n                {profileMediaViewerContent && <ProfileMediaViewer {...profileMediaViewerContent} />}\n                <Dialog\n                    transitionDuration={0}\n                    open={fatalError}\n                    onClose={this.handleRefresh}\n                    aria-labelledby='fatal-error-dialog-title'\n                    aria-describedby='fatal-error-dialog-description'>\n                    <DialogTitle id='fatal-error-dialog-title'>Telegram</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText id='fatal-error-dialog-description'>\n                            Oops! Something went wrong. We need to refresh this page.\n                        </DialogContentText>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.handleDestroy} color='primary'>\n                            Log out\n                        </Button>\n                        <Button onClick={this.handleRefresh} color='primary' autoFocus>\n                            Refresh\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n                {forwardInfo && <ForwardDialog {...forwardInfo} />}\n            </div>\n        );\n    }\n}\n\nconst keyMap = new Map();\nwindow.keyMap = keyMap;\n\nasync function openPinnedChat(index) {\n    const chats = await TdLibController.send({\n        '@type': 'getChats',\n        offset_order: '9223372036854775807',\n        offset_chat_id: 0,\n        limit: 10\n    });\n\n    if (chats) {\n        let pinnedIndex = -1;\n        for (let i = 0; i < chats.chat_ids.length; i++) {\n            const chat = ChatStore.get(chats.chat_ids[i]);\n            if (chat && chat.is_pinned) {\n                pinnedIndex++;\n            }\n\n            if (pinnedIndex === index) {\n                TdLibController.setChatId(chat.id);\n                return;\n            }\n        }\n    }\n}\n\ndocument.addEventListener('keyup', event => {\n    keyMap.delete(event.key);\n    //console.log('keyup key=' + event.key, keyMap);\n});\n\ndocument.addEventListener('keydown', async event => {\n    keyMap.set(event.key, event.key);\n    //console.log('keydown key=' + event.key, event.altKey, event.ctrlKey, event, keyMap);\n\n    const { authorizationState } = ApplicationStore;\n    if (!authorizationState) return;\n    if (authorizationState['@type'] !== 'authorizationStateReady') return;\n    if (keyMap.size > 3) return;\n\n    if (event.altKey && event.ctrlKey) {\n        switch (event.key) {\n            case '0': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                const chat = await TdLibController.send({\n                    '@type': 'createPrivateChat',\n                    user_id: UserStore.getMyId(),\n                    force: true\n                });\n\n                if (chat) {\n                    TdLibController.setChatId(chat.id);\n                }\n                break;\n            }\n            case '1': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                openPinnedChat(0);\n                break;\n            }\n            case '2': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                openPinnedChat(1);\n                break;\n            }\n            case '3': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                openPinnedChat(2);\n                break;\n            }\n            case '4': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                openPinnedChat(3);\n                break;\n            }\n            case '5': {\n                event.preventDefault();\n                event.stopPropagation();\n\n                openPinnedChat(4);\n                break;\n            }\n        }\n    }\n});\n\nwindow.hasFocus = true;\n\n// set offline on page lost focus\nwindow.onblur = function() {\n    keyMap.clear();\n    //console.log('window.blur key', keyMap);\n\n    const { authorizationState } = ApplicationStore;\n\n    if (!authorizationState) return;\n    if (authorizationState['@type'] !== 'authorizationStateReady') return;\n\n    window.hasFocus = false;\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateFocusWindow',\n        focused: false\n    });\n};\n\n// set online on page get focus\nwindow.onfocus = function() {\n    keyMap.clear();\n    //console.log('window.focus key', keyMap);\n    const { authorizationState } = ApplicationStore;\n\n    if (!authorizationState) return;\n    if (authorizationState['@type'] !== 'authorizationStateReady') return;\n\n    window.hasFocus = true;\n\n    TdLibController.clientUpdate({\n        '@type': 'clientUpdateFocusWindow',\n        focused: true\n    });\n};\n\n// disable back navigation\nwindow.history.pushState(null, null, window.location.href);\nwindow.onpopstate = function() {\n    window.history.go(1);\n};\n\nconst enhance = compose(\n    withLanguage,\n    withTheme,\n    withStyles(styles),\n    withSnackbarNotifications\n);\n\nexport default enhance(TelegramApp);\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport TelegramApp from './TelegramApp';\nimport registerServiceWorker from './registerServiceWorker';\nimport Cookies from 'universal-cookie';\nimport { FIRST_START_OPTIMIZATIONS } from './Constants';\nimport './index.css';\n\nReactDOM.render(\n    <Router>\n        <Route path='' component={TelegramApp} />\n    </Router>,\n    document.getElementById('root')\n);\n\nif (FIRST_START_OPTIMIZATIONS) {\n    const cookieEnabled = navigator.cookieEnabled;\n    if (cookieEnabled) {\n        const cookies = new Cookies();\n        const register = cookies.get('register');\n        if (register) {\n            registerServiceWorker();\n        }\n    } else {\n        registerServiceWorker();\n    }\n} else {\n    registerServiceWorker();\n}\n"],"sourceRoot":""}