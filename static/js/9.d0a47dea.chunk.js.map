{"version":3,"sources":["../node_modules/@material-ui/core/FormControlLabel/index.js","../node_modules/@material-ui/core/FormControlLabel/FormControlLabel.js","../node_modules/@material-ui/core/Checkbox/index.js","Components/Viewer/MediaViewerFooterButton.js","../node_modules/@material-ui/core/Checkbox/Checkbox.js","../node_modules/@material-ui/core/internal/svg-icons/CheckBoxOutlineBlank.js","../node_modules/@material-ui/core/internal/svg-icons/CheckBox.js","../node_modules/@material-ui/core/internal/svg-icons/IndeterminateCheckBox.js","Components/Viewer/MediaViewerButton.js","Components/Viewer/MediaViewerFooterText.js","Components/Viewer/MediaViewerDownloadButton.js","../node_modules/@material-ui/icons/GetApp.js","../node_modules/@material-ui/icons/NavigateBefore.js","../node_modules/@material-ui/icons/NavigateNext.js","../node_modules/@material-ui/icons/Delete.js","../node_modules/@material-ui/icons/SlowMotionVideo.js","../node_modules/@material-ui/icons/InvertColors.js","Components/Tile/MediaViewerControl.js","Components/Viewer/MediaCaption.js","Components/Viewer/MediaViewerContent.js","Components/Viewer/MediaViewer.js"],"names":["_interopRequireDefault","__webpack_require__","Object","defineProperty","exports","value","enumerable","get","_FormControlLabel","default","styles","_extends2","_defineProperty2","_objectWithoutProperties2","_react","_classnames","_withFormControlContext","_withStyles","_Typography","_helpers","theme","root","display","alignItems","cursor","verticalAlign","WebkitTapHighlightColor","marginLeft","marginRight","&$disabled","labelPlacementStart","flexDirection","labelPlacementTop","labelPlacementBottom","disabled","label","color","palette","text","FormControlLabel","props","checked","_classNames","classes","classNameProp","className","control","disabledProp","inputRef","labelPlacement","muiFormControl","other","name","onChange","controlProps","forEach","key","createElement","concat","capitalize","cloneElement","component","defaultProps","_default","_Checkbox","MediaViewerFooterButton","handleClick","event","stopPropagation","_this$props","_this","onClick","_this$props2","this","children","title","react__WEBPACK_IMPORTED_MODULE_6___default","a","classNames","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","React","Component","withStyles","primary","main","_SwitchBase","_CheckBoxOutlineBlank","_CheckBox","_IndeterminateCheckBox","secondary","indeterminate","colorPrimary","&$checked","action","colorSecondary","Checkbox","checkedIcon","icon","indeterminateIcon","inputProps","type","data-indeterminate","_pure","_SvgIcon","_ref","d","CheckBoxOutlineBlank","muiName","CheckBox","IndeterminateCheckBox","MediaViewerButton","grow","react__WEBPACK_IMPORTED_MODULE_5___default","MediaViewerFooterText","subtitle","Boolean","iconStyle","padding","MediaViewerDownloadButton","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_Users_evgeny_telegram_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","onClientUpdateMediaBlob","update","fileId","state","setState","saveDisabled","prevPropsFileId","FileStore","on","removeListener","_MediaViewerFooterButton__WEBPACK_IMPORTED_MODULE_7__","_material_ui_icons_GetApp__WEBPACK_IMPORTED_MODULE_6___default","style","getBlob","Fragment","fill","MediaViewerControl","classCallCheck","possibleConstructorReturn","getPrototypeOf","chatId","messageId","message","MessageStore","userId","getSenderUserId","dateHint","getDateHint","tileControl","react_default","UserTileControl","ChatTileControl","MessageAuthor","MediaCaption","LazyLottie","lazy","Promise","all","e","then","bind","MediaViewerContent","onClientUpdateDocumentBlob","updateAnimationData","asyncToGenerator","regenerator_default","mark","_callee","size","_getMediaFile","_getMediaFile2","file","animationData","wrap","_context","prev","next","isLottieMessage","abrupt","getMediaFile","slicedToArray","getAnimationData","sent","stop","resolve","blob","id","fileReader","FileReader","onload","JSON","parse","target","result","onerror","onabort","readAsText","_this$props3","_getMediaFile3","_getMediaFile4","width","height","onClientUpdateMediaThumbnailBlob","_this$props4","_getMediaPreviewFile","getMediaPreviewFile","_getMediaPreviewFile2","thumbnailWidth","thumbnailHeight","thumbnail","onUpdateMessageContent","_this$props5","chat_id","message_id","_getMediaFile5","_getMediaFile6","getText","handleContentClick","changeSpeed","speed","videoRef","createRef","lottieRef","_this$props6","_getMediaFile7","_getMediaFile8","_getMediaPreviewFile3","_getMediaPreviewFile4","prevChatId","prevMessageId","isPlaying","prevProps","prevState","snapshot","_this$props7","_this2","_this$props8","_this$state","src","getBlobUrl","thumbnailBlob","thumbnailSrc","isBlurred","isBlurredThumbnail","isVideo","isVideoMessage","isAnimation","isAnimationMessage","isLottie","videoWidth","videoHeight","Math","max","scale","floor","content","ref","controls","autoPlay","onPlay","TdLibController","clientUpdate","@type","onCanPlay","player","current","volume","PlayerStore","onPause","onEnded","onVolumeChange","media-blurred","alt","loop","defaultOptions","autoplay","rendererSettings","preserveAspectRatio","options","isStopped","isPaused","Suspense","fallback","FileProgress","zIndex","length","Components_Viewer_MediaCaption","_getMediaFile9","_getMediaFile10","_getMediaPreviewFile5","_getMediaPreviewFile6","forwardIconStyle","transform","navigationIconStyle","MediaViewer","onKeyDown","keyCode","deleteConfirmationOpened","handleClose","handleNext","handlePrevious","new_content","old_content","currentMessageId","totalCount","loadMediaViewerContent","isMediaContent","history","firstSliceLoaded","between","inserted","i","push","index","findIndex","x","hasNextMedia","hasPreviousMedia","oldHistory","filter","filterMap","Map","set","moveToNextMedia","onUpdateDeleteMessages","message_ids","is_permanent","_this$state2","reduce","accumulator","currentId","deletedCount","has","ApplicationStore","setMediaViewerContent","onUpdateNewMessage","_this$state3","getFilter","loadHistory","_filter","maxCount","count","_loop","_context2","messages","total_count","send","query","sender_user_id","from_message_id","offset","MEDIA_SLICE_LIMIT","limit","filterMessages","setItems","preloadMediaViewerContent","delegateYield","cancelPreloadMediaViewerContent","saveAnimation","animation","file_name","saveOrDownload","updateAnimationBlob","saveDocument","document","updateDocumentBlob","saveVideo","video","updateVideoBlob","savePhoto","photo","photoSize","getSize","sizes","PHOTO_BIG_SIZE","updatePhotoBlob","handleSave","web_page","handleForward","info","messageIds","handleDelete","handleDialogOpen","nextIndex","loadMedia","loadPrevious","_callee2","_context3","loadNext","_callee3","_context4","callback","nextId","handleDialogClose","handleDone","_this$state4","deleteForAll","can_be_deleted_only_for_self","can_be_deleted_for_all_users","revoke","handleChangeDeleteForAll","handleInvertColors","nextBackground","background","handleChangeSpeed","contentRef","nextSpeed","canBeForwarded","can_be_forwarded","nextProps","nextState","_this$state5","hasPrevousMedia","addEventListener","removeEventListener","t","_this$state6","canBeDeleted","deleteConfirmationContent","deleteConfirmation","Dialog_default","transitionDuration","open","onClose","aria-labelledby","DialogTitle_default","DialogContent_default","DialogContentText_default","FormControlLabel_default","Checkbox_default","DialogActions_default","Button_default","NavigateBefore_default","fontSize","Components_Viewer_MediaViewerContent","Close_default","NavigateNext_default","Components_Tile_MediaViewerControl","SlowMotionVideo_default","InvertColors_default","Reply_default","Delete_default","withTranslation"],"mappings":"0FAEA,IAAAA,EAA6BC,EAAQ,GAErCC,OAAAC,eAAAC,EAAA,cACAC,OAAA,IAEAH,OAAAC,eAAAC,EAAA,WACAE,YAAA,EACAC,IAAA,WACA,OAAAC,EAAAC,WAIA,IAAAD,EAAAR,EAA+CC,EAAQ,wCCZvD,IAAAD,EAA6BC,EAAQ,GAErCC,OAAAC,eAAAC,EAAA,cACAC,OAAA,IAEAD,EAAAK,QAAAL,EAAAM,YAAA,EAEA,IAAAC,EAAAX,EAAuCC,EAAQ,IAE/CW,EAAAZ,EAA8CC,EAAQ,KAEtDY,EAAAb,EAAuDC,EAAQ,IAE/Da,EAAAd,EAAoCC,EAAQ,IAI5Cc,GAFAf,EAAwCC,EAAQ,IAEhDD,EAAyCC,EAAQ,KAEjDe,EAAAhB,EAAqDC,EAAQ,KAE7DgB,EAAAjB,EAAyCC,EAAQ,IAEjDiB,EAAAlB,EAAyCC,EAAQ,KAEjDkB,EAAelB,EAAQ,IAEvBS,EAAA,SAAAU,GACA,OAEAC,KAAA,CACAC,QAAA,cACAC,WAAA,SACAC,OAAA,UAEAC,cAAA,SAEAC,wBAAA,cACAC,YAAA,GACAC,YAAA,GAEAC,aAAA,CACAL,OAAA,YAKAM,oBAAA,CACAC,cAAA,cACAJ,WAAA,GAEAC,aAAA,IAIAI,kBAAA,CACAD,cAAA,iBACAJ,WAAA,IAIAM,qBAAA,CACAF,cAAA,SACAJ,WAAA,IAIAO,SAAA,GAGAC,MAAA,CACAN,aAAA,CACAO,MAAAhB,EAAAiB,QAAAC,KAAAJ,aAaA,SAAAK,EAAAC,GAGAA,EAAAC,QAFA,IAAAC,EAGAC,EAAAH,EAAAG,QACAC,EAAAJ,EAAAK,UACAC,EAAAN,EAAAM,QACAC,EAAAP,EAAAN,SAEAC,GADAK,EAAAQ,SACAR,EAAAL,OACAc,EAAAT,EAAAS,eACAC,EAAAV,EAAAU,eAIAC,GAHAX,EAAAY,KACAZ,EAAAa,SACAb,EAAAnC,OACA,EAAAQ,EAAAJ,SAAA+B,EAAA,wIACAN,EAAAa,EAEA,qBAAAb,GAAA,qBAAAY,EAAAN,MAAAN,WACAA,EAAAY,EAAAN,MAAAN,UAGA,qBAAAA,GAAAgB,IACAhB,EAAAgB,EAAAhB,UAGA,IAAAoB,EAAA,CACApB,YAOA,MALA,iDAAAqB,QAAA,SAAAC,GACA,qBAAAV,EAAAN,MAAAgB,IAAA,qBAAAhB,EAAAgB,KACAF,EAAAE,GAAAhB,EAAAgB,MAGA1C,EAAAL,QAAAgD,cAAA,WAAA9C,EAAAF,SAAA,CACAoC,WAAA,EAAA9B,EAAAN,SAAAkC,EAAAtB,MAAAqB,EAAA,IAAuE,EAAA9B,EAAAH,SAAAiC,EAAAC,EAAA,iBAAAe,QAAA,EAAAvC,EAAAwC,YAAAV,KAAA,QAAAA,IAAA,EAAArC,EAAAH,SAAAiC,EAAAC,EAAAT,YAAAQ,GAAAE,IACpEO,GAAArC,EAAAL,QAAAmD,aAAAd,EAAAQ,GAAAxC,EAAAL,QAAAgD,cAAAvC,EAAAT,QAAA,CACHoD,UAAA,OACAhB,WAAA,EAAA9B,EAAAN,SAAAkC,EAAAR,OAAA,EAAAvB,EAAAH,SAAA,GAAuFkC,EAAAT,cACpFC,IAzCH/B,EAAAM,SA8GA6B,EAAAuB,aAAA,CACAb,eAAA,OAGA,IAAAc,GAAA,EAAA9C,EAAAR,SAAAC,EAAA,CACA0C,KAAA,uBADA,EAEC,EAAApC,EAAAP,SAAA8B,IAEDnC,EAAAK,QAAAsD,oCCzMA,IAAA/D,EAA6BC,EAAQ,GAErCC,OAAAC,eAAAC,EAAA,cACAC,OAAA,IAEAH,OAAAC,eAAAC,EAAA,WACAE,YAAA,EACAC,IAAA,WACA,OAAAyD,EAAAvD,WAIA,IAAAuD,EAAAhE,EAAuCC,EAAQ,4ICFzCgE,qNACFC,YAAc,SAAAC,GACVA,EAAMC,kBADa,IAAAC,EAGWC,EAAK9B,MAA3B+B,EAHWF,EAGXE,QAHWF,EAGFnC,UAIjBqC,EAAQJ,4EAGH,IAAAK,EACmDC,KAAKjC,MAArDC,EADH+B,EACG/B,QAASiC,EADZF,EACYE,SAAU/B,EADtB6B,EACsB7B,QAAST,EAD/BsC,EAC+BtC,SAAUyC,EADzCH,EACyCG,MAE9C,OACIC,EAAAC,EAAApB,cAAA,OACIZ,UAAWiC,IAAW5C,EAAW,sCAAwC,6BAApDhC,OAAA6E,EAAA,EAAA7E,CAAA,GAChByC,EAAQF,QAAUA,IAEvBkC,MAAOA,EACPJ,QAASE,KAAKP,aACbQ,UArBqBM,IAAMC,YAkC7BC,QAxCA,SAAA9D,GAAK,MAAK,CACrBqB,QAAS,CACLL,MAAOhB,EAAMiB,QAAQ8C,QAAQC,QAsCtBF,CAAmBjB,2DC5ClC,IAAAjE,EAA6BC,EAAQ,GAErCC,OAAAC,eAAAC,EAAA,cACAC,OAAA,IAEAD,EAAAK,QAAAL,EAAAM,YAAA,EAEA,IAAAC,EAAAX,EAAuCC,EAAQ,IAE/CW,EAAAZ,EAA8CC,EAAQ,KAEtDY,EAAAb,EAAuDC,EAAQ,IAE/Da,EAAAd,EAAoCC,EAAQ,IAI5Cc,GAFAf,EAAwCC,EAAQ,IAEhDD,EAAyCC,EAAQ,KAEjDoF,EAAArF,EAAyCC,EAAQ,MAEjDqF,EAAAtF,EAAmDC,EAAQ,MAE3DsF,EAAAvF,EAAuCC,EAAQ,MAE/CuF,EAAAxF,EAAoDC,EAAQ,MAE5DkB,EAAelB,EAAQ,IAEvBgB,EAAAjB,EAAyCC,EAAQ,IAEjDS,EAAA,SAAAU,GACA,OAEAC,KAAA,CACAe,MAAAhB,EAAAiB,QAAAC,KAAAmD,WAIAhD,QAAA,GAGAP,SAAA,GAGAwD,cAAA,GAGAC,aAAA,CACAC,YAAA,CACAxD,MAAAhB,EAAAiB,QAAA8C,QAAAC,MAEAvD,aAAA,CACAO,MAAAhB,EAAAiB,QAAAwD,OAAA3D,WAKA4D,eAAA,CACAF,YAAA,CACAxD,MAAAhB,EAAAiB,QAAAoD,UAAAL,MAEAvD,aAAA,CACAO,MAAAhB,EAAAiB,QAAAwD,OAAA3D,aAQA,SAAA6D,EAAAvD,GACA,IAAAwD,EAAAxD,EAAAwD,YACArD,EAAAH,EAAAG,QACAE,EAAAL,EAAAK,UACAT,EAAAI,EAAAJ,MACA6D,EAAAzD,EAAAyD,KACAP,EAAAlD,EAAAkD,cACAQ,EAAA1D,EAAA0D,kBACAC,EAAA3D,EAAA2D,WACAhD,GAAA,EAAAtC,EAAAJ,SAAA+B,EAAA,uGACA,OAAA1B,EAAAL,QAAAgD,cAAA4B,EAAA5E,SAAA,EAAAE,EAAAF,SAAA,CACA2F,KAAA,WACAJ,YAAAN,EAAAQ,EAAAF,EACAnD,WAAA,EAAA9B,EAAAN,UAAA,EAAAG,EAAAH,SAAA,GAAwEkC,EAAA+C,iBAAA7C,GACxEF,QAAA,CACAtB,MAAA,EAAAN,EAAAN,SAAAkC,EAAAtB,KAAAsB,EAAA,QAAAe,QAAA,EAAAvC,EAAAwC,YAAAvB,MACAK,QAAAE,EAAAF,QACAP,SAAAS,EAAAT,UAEAiE,YAAA,EAAAxF,EAAAF,SAAA,CACA4F,qBAAAX,GACKS,GACLF,KAAAP,EAAAQ,EAAAD,GACG9C,IAzBH/C,EAAAM,SAqHAqF,EAAAjC,aAAA,CACAkC,YAAAlF,EAAAL,QAAAgD,cAAA8B,EAAA9E,QAAA,MACA2B,MAAA,YACA6D,KAAAnF,EAAAL,QAAAgD,cAAA6B,EAAA7E,QAAA,MACAiF,eAAA,EACAQ,kBAAApF,EAAAL,QAAAgD,cAAA+B,EAAA/E,QAAA,OAGA,IAAAsD,GAAA,EAAA9C,EAAAR,SAAAC,EAAA,CACA0C,KAAA,eADA,CAEC2C,GAED3F,EAAAK,QAAAsD,oCCtMA,IAAA/D,EAA6BC,EAAQ,GAErCC,OAAAC,eAAAC,EAAA,cACAC,OAAA,IAEAD,EAAAK,aAAA,EAEA,IAAAK,EAAAd,EAAoCC,EAAQ,IAE5CqG,EAAAtG,EAAmCC,EAAQ,MAE3CsG,EAAAvG,EAAsCC,EAAQ,KAE9CuG,EAAA1F,EAAAL,QAAAgD,cAAA,QACAgD,EAAA,+FAOAC,EAAA,SAAAlE,GACA,OAAA1B,EAAAL,QAAAgD,cAAA8C,EAAA9F,QAAA+B,EAAAgE,KAGAE,GAAA,EAAAJ,EAAA7F,SAAAiG,IACAC,QAAA,UACA,IAAA5C,EAAA2C,EACAtG,EAAAK,QAAAsD,oCC5BA,IAAA/D,EAA6BC,EAAQ,GAErCC,OAAAC,eAAAC,EAAA,cACAC,OAAA,IAEAD,EAAAK,aAAA,EAEA,IAAAK,EAAAd,EAAoCC,EAAQ,IAE5CqG,EAAAtG,EAAmCC,EAAQ,MAE3CsG,EAAAvG,EAAsCC,EAAQ,KAE9CuG,EAAA1F,EAAAL,QAAAgD,cAAA,QACAgD,EAAA,wIAOAG,EAAA,SAAApE,GACA,OAAA1B,EAAAL,QAAAgD,cAAA8C,EAAA9F,QAAA+B,EAAAgE,KAGAI,GAAA,EAAAN,EAAA7F,SAAAmG,IACAD,QAAA,UACA,IAAA5C,EAAA6C,EACAxG,EAAAK,QAAAsD,oCC5BA,IAAA/D,EAA6BC,EAAQ,GAErCC,OAAAC,eAAAC,EAAA,cACAC,OAAA,IAEAD,EAAAK,aAAA,EAEA,IAAAK,EAAAd,EAAoCC,EAAQ,IAE5CqG,EAAAtG,EAAmCC,EAAQ,MAE3CsG,EAAAvG,EAAsCC,EAAQ,KAE9CuG,EAAA1F,EAAAL,QAAAgD,cAAA,QACAgD,EAAA,kGAOAI,EAAA,SAAArE,GACA,OAAA1B,EAAAL,QAAAgD,cAAA8C,EAAA9F,QAAA+B,EAAAgE,KAGAK,GAAA,EAAAP,EAAA7F,SAAAoG,IACAF,QAAA,UACA,IAAA5C,EAAA8C,EACAzG,EAAAK,QAAAsD,qIClBM+C,qNACF5C,YAAc,SAAAC,GACVA,EAAMC,kBADa,IAAAC,EAGWC,EAAK9B,MAA3BN,EAHWmC,EAGXnC,SAAUqC,EAHCF,EAGDE,QAEdrC,GAEJqC,EAAQJ,4EAGH,IAAAK,EACgCC,KAAKjC,MAAlCN,EADHsC,EACGtC,SAAU6E,EADbvC,EACauC,KAAMrC,EADnBF,EACmBE,SAElB7B,EAAYiC,IACd5C,EAAW,+BAAiC,sBAC5C,CAAE6E,KAAMA,IAGZ,OACIC,EAAAnC,EAAApB,cAAA,OAAKZ,UAAWA,EAAW0B,QAASE,KAAKP,aACpCQ,UArBeM,IAAMC,YAgCvB6B,yHCjCTG,2LACO,IAAA5C,EACuBI,KAAKjC,MAAzBmC,EADHN,EACGM,MAAOuC,EADV7C,EACU6C,SAEf,OACIF,EAAAnC,EAAApB,cAAA,OAAKZ,UAAU,4BACXmE,EAAAnC,EAAApB,cAAA,OAAKZ,UAAU,oCACXmE,EAAAnC,EAAApB,cAAA,YAAOkB,GAEHwC,QAAQD,IACJF,EAAAnC,EAAApB,cAAA,mBAEKyD,YAZGlC,IAAMC,YA0B3BgC,6JC9BTG,UAAY,CACdC,QAAS,GACTjF,MAAO,UAGLkF,cACF,SAAAA,EAAY9E,GAAO,IAAA8B,EAAApE,OAAAqH,EAAA,EAAArH,CAAAuE,KAAA6C,IACfhD,EAAApE,OAAAsH,EAAA,EAAAtH,CAAAuE,KAAAvE,OAAAuH,EAAA,EAAAvH,CAAAoH,GAAAI,KAAAjD,KAAMjC,KA4CVmF,wBAA0B,SAAAC,GAAU,IACxBC,EAAWvD,EAAKwD,MAAhBD,OAEJA,IAAWD,EAAOC,QAClBvD,EAAKyD,SAAS,CACV7F,SAAUoF,EAA0BU,aAAaH,MAlD1CvD,EA2DnBJ,YAAc,SAAAC,GACVA,EAAMC,kBADa,IAGXG,EAAYD,EAAK9B,MAAjB+B,QACaD,EAAKwD,MAAlB5F,UAGRqC,EAAQJ,IAlEO,IAGP0D,EAAWrF,EAAXqF,OAHO,OAKfvD,EAAKwD,MAAQ,CACTG,gBAAiBJ,EACjBA,OAAQA,EACR3F,SAAUoF,EAA0BU,aAAaH,IARtCvD,mFA4Bf4D,IAAUC,GAAG,4BAA6B1D,KAAKkD,yBAC/CO,IAAUC,GAAG,uBAAwB1D,KAAKkD,yBAC1CO,IAAUC,GAAG,2BAA4B1D,KAAKkD,yBAC9CO,IAAUC,GAAG,wBAAyB1D,KAAKkD,yBAC3CO,IAAUC,GAAG,uBAAwB1D,KAAKkD,yBAC1CO,IAAUC,GAAG,wBAAyB1D,KAAKkD,wEAI3CO,IAAUE,eAAe,4BAA6B3D,KAAKkD,yBAC3DO,IAAUE,eAAe,uBAAwB3D,KAAKkD,yBACtDO,IAAUE,eAAe,2BAA4B3D,KAAKkD,yBAC1DO,IAAUE,eAAe,wBAAyB3D,KAAKkD,yBACvDO,IAAUE,eAAe,uBAAwB3D,KAAKkD,yBACtDO,IAAUE,eAAe,wBAAyB3D,KAAKkD,0DA2BlD,IACGhD,EAAUF,KAAKjC,MAAfmC,MACAzC,EAAauC,KAAKqD,MAAlB5F,SAER,OACI8E,EAAAnC,EAAApB,cAAC4E,EAAA,EAAD,CAAyBnG,SAAUA,EAAUyC,MAAOA,EAAOJ,QAASE,KAAKP,aACrE8C,EAAAnC,EAAApB,cAAC6E,EAAAzD,EAAD,CAAU0D,MAAOnB,wDA/DG5E,EAAOsF,GAAO,IAClCD,EAAWrF,EAAXqF,OAGR,OAAIA,IAFwBC,EAApBG,gBAGG,CACHA,gBAAiBJ,EACjBA,OAAQA,EACR3F,SAAUoF,EAA0BU,aAAaH,IAIlD,YAzByB7C,IAAMC,WAAxCqC,EAwDKU,aAAe,SAAAH,GAClB,OAAQV,QAAQe,IAAUM,QAAQX,KA+B3BP,wCClGf,IAAAtH,EAA6BC,EAAQ,IAErCC,OAAAC,eAAAC,EAAA,cACAC,OAAA,IAEAD,EAAAK,aAAA,EAEA,IAAAK,EAAAd,EAAoCC,EAAQ,IAI5C8D,GAAA,EAFA/D,EAA4CC,EAAQ,MAEpDQ,SAAAK,EAAAL,QAAAgD,cAAA3C,EAAAL,QAAAgI,SAAA,KAAA3H,EAAAL,QAAAgD,cAAA,QACAgD,EAAA,8CACC3F,EAAAL,QAAAgD,cAAA,QACDiF,KAAA,OACAjC,EAAA,mBACC,UAEDrG,EAAAK,QAAAsD,oCClBA,IAAA/D,EAA6BC,EAAQ,IAErCC,OAAAC,eAAAC,EAAA,cACAC,OAAA,IAEAD,EAAAK,aAAA,EAEA,IAAAK,EAAAd,EAAoCC,EAAQ,IAI5C8D,GAAA,EAFA/D,EAA4CC,EAAQ,MAEpDQ,SAAAK,EAAAL,QAAAgD,cAAA3C,EAAAL,QAAAgI,SAAA,KAAA3H,EAAAL,QAAAgD,cAAA,QACAgD,EAAA,kDACC3F,EAAAL,QAAAgD,cAAA,QACDiF,KAAA,OACAjC,EAAA,mBACC,kBAEDrG,EAAAK,QAAAsD,oCClBA,IAAA/D,EAA6BC,EAAQ,IAErCC,OAAAC,eAAAC,EAAA,cACAC,OAAA,IAEAD,EAAAK,aAAA,EAEA,IAAAK,EAAAd,EAAoCC,EAAQ,IAI5C8D,GAAA,EAFA/D,EAA4CC,EAAQ,MAEpDQ,SAAAK,EAAAL,QAAAgD,cAAA3C,EAAAL,QAAAgI,SAAA,KAAA3H,EAAAL,QAAAgD,cAAA,QACAgD,EAAA,mDACC3F,EAAAL,QAAAgD,cAAA,QACDiF,KAAA,OACAjC,EAAA,mBACC,gBAEDrG,EAAAK,QAAAsD,oCClBA,IAAA/D,EAA6BC,EAAQ,IAErCC,OAAAC,eAAAC,EAAA,cACAC,OAAA,IAEAD,EAAAK,aAAA,EAEA,IAAAK,EAAAd,EAAoCC,EAAQ,IAI5C8D,GAAA,EAFA/D,EAA4CC,EAAQ,MAEpDQ,SAAAK,EAAAL,QAAAgD,cAAA3C,EAAAL,QAAAgI,SAAA,KAAA3H,EAAAL,QAAAgD,cAAA,QACAgD,EAAA,kFACC3F,EAAAL,QAAAgD,cAAA,QACDiF,KAAA,OACAjC,EAAA,mBACC,UAEDrG,EAAAK,QAAAsD,sGClBA,IAAA/D,EAA6BC,EAAQ,IAErCC,OAAAC,eAAAC,EAAA,cACAC,OAAA,IAEAD,EAAAK,aAAA,EAEA,IAAAK,EAAAd,EAAoCC,EAAQ,IAI5C8D,GAAA,EAFA/D,EAA4CC,EAAQ,MAEpDQ,SAAAK,EAAAL,QAAAgD,cAAA3C,EAAAL,QAAAgI,SAAA,KAAA3H,EAAAL,QAAAgD,cAAA,QACAiF,KAAA,OACAjC,EAAA,oBACC3F,EAAAL,QAAAgD,cAAA,QACDgD,EAAA,0hBACC,mBAEDrG,EAAAK,QAAAsD,oCClBA,IAAA/D,EAA6BC,EAAQ,IAErCC,OAAAC,eAAAC,EAAA,cACAC,OAAA,IAEAD,EAAAK,aAAA,EAEA,IAAAK,EAAAd,EAAoCC,EAAQ,IAI5C8D,GAAA,EAFA/D,EAA4CC,EAAQ,MAEpDQ,SAAAK,EAAAL,QAAAgD,cAAA3C,EAAAL,QAAAgI,SAAA,KAAA3H,EAAAL,QAAAgD,cAAA,QACAiF,KAAA,OACAjC,EAAA,mBACC3F,EAAAL,QAAAgD,cAAA,QACDgD,EAAA,kPACC,gBAEDrG,EAAAK,QAAAsD,odCuCe4E,sBA1CX,SAAAA,EAAYnG,GAAQ,OAAAtC,OAAA0I,EAAA,EAAA1I,CAAAuE,KAAAkE,GAAAzI,OAAA2I,EAAA,EAAA3I,CAAAuE,KAAAvE,OAAA4I,EAAA,EAAA5I,CAAAyI,GAAAjB,KAAAjD,KACVjC,0EAGD,IAAA6B,EACyBI,KAAKjC,MAA3BuG,EADH1E,EACG0E,OAAQC,EADX3E,EACW2E,UAEVC,EAAUC,IAAa3I,IAAIwI,EAAQC,GACzC,IAAKC,EAAS,OAAO,KAErB,IAAME,EAASC,YAAgBH,GACzBI,EAAWC,YAAYL,GAEvBM,EAAcJ,EAChBK,EAAA3E,EAAApB,cAACgG,EAAA,EAAD,CAAiBN,OAAQA,IAEzBK,EAAA3E,EAAApB,cAACiG,EAAA,EAAD,CAAiBX,OAAQA,IAG7B,OACIS,EAAA3E,EAAApB,cAAA,OAAKZ,UAAU,wBACX2G,EAAA3E,EAAApB,cAAA,OAAKZ,UAAU,gCACV0G,EACDC,EAAA3E,EAAApB,cAAA,OAAKZ,UAAU,gCACX2G,EAAA3E,EAAApB,cAAA,OAAKZ,UAAU,oBACX2G,EAAA3E,EAAApB,cAACkG,EAAA,EAAD,CAAeZ,OAAQA,EAAQI,OAAQA,KAE3CK,EAAA3E,EAAApB,cAAA,OAAKZ,UAAU,iCACX2G,EAAA3E,EAAApB,cAAA,QAAMZ,UAAU,gBAAgBwG,cA7B3BrE,IAAMC,qBCHjC2E,uBACF,SAAAA,EAAYpH,GAAO,IAAA8B,EAAA,OAAApE,OAAA0I,EAAA,EAAA1I,CAAAuE,KAAAmF,IACftF,EAAApE,OAAA2I,EAAA,EAAA3I,CAAAuE,KAAAvE,OAAA4I,EAAA,EAAA5I,CAAA0J,GAAAlC,KAAAjD,KAAMjC,KAGV0B,YAAc,SAAAC,GACVA,EAAMC,mBALSE,wEAQV,IACGhC,EAASmC,KAAKjC,MAAdF,KAER,OACIkH,EAAA3E,EAAApB,cAAA,OAAKZ,UAAU,gBAAgB0B,QAASE,KAAKP,aACzCsF,EAAA3E,EAAApB,cAAA,OAAKZ,UAAU,sBAAsBP,WAd1B0C,IAAMC,YAwBjC2E,GAAa9F,aAAe,GAEb8F,0DCjBTC,WAAa7E,IAAM8E,KAAK,kBAAMC,QAAAC,IAAA,CAAA/J,EAAAgK,EAAA,IAAAhK,EAAAgK,EAAA,MAAAC,KAAAjK,EAAAkK,KAAA,cAuXrBC,eApXX,SAAAA,EAAY5H,GAAO,IAAA8B,EAAApE,OAAA0I,EAAA,EAAA1I,CAAAuE,KAAA2F,IACf9F,EAAApE,OAAA2I,EAAA,EAAA3I,CAAAuE,KAAAvE,OAAA4I,EAAA,EAAA5I,CAAAkK,GAAA1C,KAAAjD,KAAMjC,KA+FV6H,2BAA6B,SAAAzC,GAAU,IAAAvD,EACLC,EAAK9B,MAA3BuG,EAD2B1E,EAC3B0E,OAAQC,EADmB3E,EACnB2E,UAEZD,IAAWnB,EAAOmB,QAAUC,IAAcpB,EAAOoB,WACjD1E,EAAKgG,uBApGMhG,EAwGnBgG,oBAxGmBpK,OAAAqK,EAAA,EAAArK,CAAAsK,EAAA3F,EAAA4F,KAwGG,SAAAC,IAAA,IAAAlG,EAAAuE,EAAAC,EAAA2B,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAP,EAAA3F,EAAAmG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAAA3G,EACkBF,EAAK9B,MAAjCuG,EADUvE,EACVuE,OAAQC,EADExE,EACFwE,UAAW2B,EADTnG,EACSmG,KAEtBS,YAAgBrC,EAAQC,GAHX,CAAAiC,EAAAE,KAAA,eAAAF,EAAAI,OAAA,wBAAAT,EAOYU,aAAavC,EAAQC,EAAW2B,GAP5CE,EAAA3K,OAAAqL,EAAA,EAAArL,CAAA0K,EAAA,GAAAC,EAAA,GAAAA,EAAA,GAOIC,EAPJD,EAAA,GAAAI,EAAAE,KAAA,EAQU7G,EAAKkH,iBAAiBV,GARhC,OAQZC,EARYE,EAAAQ,KAUlBnH,EAAKyD,SAAS,CAAEgD,kBAVE,wBAAAE,EAAAS,SAAAhB,MAxGHpG,EAqHnBkH,iBAAmB,SAAAV,GACf,OAAO,IAAIf,QAAQ,SAAA4B,GACf,GAAKb,EAAL,CAKA,IAAMc,EAAO1D,KAAUM,QAAQsC,EAAKe,IACpC,GAAKD,EAAL,CAKA,IAAME,EAAa,IAAIC,WACvBD,EAAWE,OAAS,SAAA7H,GAAK,OAAIwH,EAAQM,KAAKC,MAAM/H,EAAMgI,OAAOC,UAC7DN,EAAWO,QAAU,kBAAMV,EAAQ,OACnCG,EAAWQ,QAAU,kBAAMX,EAAQ,OACnCG,EAAWS,WAAWX,QARlBD,EAAQ,WANRA,EAAQ,SAxHDrH,EA0InBqD,wBAA0B,SAAAC,GAAU,IAAA4E,EACIlI,EAAK9B,MAAjCuG,EADwByD,EACxBzD,OAAQC,EADgBwD,EAChBxD,UAAW2B,EADK6B,EACL7B,KAE3B,GAAI5B,IAAWnB,EAAOmB,QAAUC,IAAcpB,EAAOoB,UAAW,KAAAyD,EAC9BnB,aAAavC,EAAQC,EAAW2B,GADF+B,EAAAxM,OAAAqL,EAAA,EAAArL,CAAAuM,EAAA,GACrDE,EADqDD,EAAA,GAC9CE,EAD8CF,EAAA,GACtC5B,EADsC4B,EAAA,GAE5DpI,EAAKyD,SAAS,CACV4E,QACAC,SACA9B,WAlJOxG,EAuJnBuI,iCAAmC,SAAAjF,GAAU,IAAAkF,EACXxI,EAAK9B,MAA3BuG,EADiC+D,EACjC/D,OAAQC,EADyB8D,EACzB9D,UAEhB,GAAID,IAAWnB,EAAOmB,QAAUC,IAAcpB,EAAOoB,UAAW,KAAA+D,EAC9BC,aAAoBjE,EAAQC,GADEiE,EAAA/M,OAAAqL,EAAA,EAAArL,CAAA6M,EAAA,GACrDJ,EADqDM,EAAA,GAC9CL,EAD8CK,EAAA,GACtCnC,EADsCmC,EAAA,GAE5D3I,EAAKyD,SAAS,CACVmF,eAAgBP,EAChBQ,gBAAiBP,EACjBQ,UAAWtC,MA/JJxG,EAoKnB+I,uBAAyB,SAAAzF,GAAU,IAAA0F,EACKhJ,EAAK9B,MAAjCuG,EADuBuE,EACvBvE,OAAQC,EADesE,EACftE,UAAW2B,EADI2C,EACJ3C,KACnB4C,EAAwB3F,EAAxB2F,QAASC,EAAe5F,EAAf4F,WAEjB,GAAIzE,IAAWwE,GAAWvE,IAAcwE,EAAY,KAAAC,EAClBnC,aAAavC,EAAQC,EAAW2B,GADd+C,EAAAxN,OAAAqL,EAAA,EAAArL,CAAAuN,EAAA,GACzCd,EADyCe,EAAA,GAClCd,EADkCc,EAAA,GAC1B5C,EAD0B4C,EAAA,GAE1CzE,EAAUC,IAAa3I,IAAIwI,EAAQC,GACnC1G,EAAOqL,YAAQ1E,GACrB3E,EAAKyD,SAAS,CACV4E,MAAOA,EACPC,OAAQA,EACR9B,KAAMA,EACNxI,KAAMA,MAhLCgC,EAqLnBsJ,mBAAqB,SAAAzJ,GACbA,GAAOA,EAAMC,mBAtLFE,EAyLnBuJ,YAAc,SAAAC,GACVxJ,EAAKyD,SAAS,CACV+F,WAxLJxJ,EAAKyJ,SAAW/I,IAAMgJ,YACtB1J,EAAK2J,UAAYjJ,IAAMgJ,YAJR,IAAAE,EAMqB5J,EAAK9B,MAAjCuG,EANOmF,EAMPnF,OAAQC,EANDkF,EAMClF,UAAW2B,EANZuD,EAMYvD,KANZwD,EAQa7C,aAAavC,EAAQC,EAAW2B,GAR7CyD,EAAAlO,OAAAqL,EAAA,EAAArL,CAAAiO,EAAA,GAQVxB,EARUyB,EAAA,GAQHxB,EARGwB,EAAA,GAQKtD,EARLsD,EAAA,GASftD,EAAO5C,KAAU3H,IAAIuK,EAAKe,KAAOf,EATlB,IAAAuD,EAWoCrB,aAAoBjE,EAAQC,GAXhEsF,EAAApO,OAAAqL,EAAA,EAAArL,CAAAmO,EAAA,GAWVnB,EAXUoB,EAAA,GAWMnB,EAXNmB,EAAA,GAWuBlB,EAXvBkB,EAAA,GAYflB,EAAYlF,KAAU3H,IAAI6M,EAAUvB,KAAOuB,EAE3C,IAAMnE,EAAUC,IAAa3I,IAAIwI,EAAQC,GACnC1G,EAAOqL,YAAQ1E,GAfN,OAoBf3E,EAAKwD,MAAQ,CACTgG,MAAO,EACPS,WAAYxF,EACZyF,cAAexF,EACfyF,WAAW,EACX9B,MAAOA,EACPC,OAAQA,EACR9B,KAAMA,EACNxI,KAAMA,EACN4K,eAAgBA,EAChBC,gBAAiBA,EACjBC,UAAWA,GAGf9I,EAAKgG,sBAlCUhG,mFAqEf4D,KAAUC,GAAG,2BAA4B1D,KAAK4F,4BAC9CnC,KAAUC,GAAG,wBAAyB1D,KAAKkD,yBAC3CO,KAAUC,GAAG,wBAAyB1D,KAAKkD,yBAC3CO,KAAUC,GAAG,4BAA6B1D,KAAKkD,yBAC/CO,KAAUC,GAAG,iCAAkC1D,KAAKoI,kCACpD3E,KAAUC,GAAG,qCAAsC1D,KAAKoI,kCACxD3D,IAAaf,GAAG,uBAAwB1D,KAAK4I,uEAI7CnF,KAAUE,eAAe,2BAA4B3D,KAAK4F,4BAC1DnC,KAAUE,eAAe,wBAAyB3D,KAAKkD,yBACvDO,KAAUE,eAAe,wBAAyB3D,KAAKkD,yBACvDO,KAAUE,eAAe,4BAA6B3D,KAAKkD,yBAC3DO,KAAUE,eAAe,iCAAkC3D,KAAKoI,kCAChE3E,KAAUE,eAAe,qCAAsC3D,KAAKoI,kCACpE3D,IAAad,eAAe,uBAAwB3D,KAAK4I,mEAG1CqB,EAAWC,EAAWC,GAAU,IAAAC,EACjBpK,KAAKjC,MAA3BuG,EADuC8F,EACvC9F,OAAQC,EAD+B6F,EAC/B7F,UAEZ0F,EAAU3F,SAAWA,GAAU2F,EAAU1F,YAAcA,GACvDvE,KAAK6F,uDAmGJ,IAAAwE,EAAArK,KAAAsK,EACyBtK,KAAKjC,MAA3BuG,EADHgG,EACGhG,OAAQC,EADX+F,EACW/F,UADXgG,EAYDvK,KAAKqD,MATLiD,EAHCiE,EAGDjE,cACA4B,EAJCqC,EAIDrC,MACAC,EALCoC,EAKDpC,OACAM,EANC8B,EAMD9B,eACAC,EAPC6B,EAOD7B,gBACArC,EARCkE,EAQDlE,KACAxI,EATC0M,EASD1M,KACA8K,EAVC4B,EAUD5B,UACAqB,EAXCO,EAWDP,UAEJ,IAAK3D,EAAM,OAAO,KAElB,IAAMc,EAAO1D,KAAUM,QAAQsC,EAAKe,KAAOf,EAAKc,KAC1CqD,EAAM/G,KAAUgH,WAAWtD,IAAS,GAEpCuD,EAAgB/B,EAAYlF,KAAUM,QAAQ4E,EAAUvB,KAAOuB,EAAUxB,KAAO,KAChFwD,EAAelH,KAAUgH,WAAWC,GACpCE,EAAYC,aAAmB,CAAE3C,MAAOO,EAAgBN,OAAQO,IAEhEoC,EAAUC,YAAezG,EAAQC,GACjCyG,EAAcC,YAAmB3G,EAAQC,GACzC2G,EAAWvE,YAAgBrC,EAAQC,GACrC4G,EAAajD,EACbkD,EAAcjD,EAClB,GAAIkD,KAAKC,IAAIH,EAAYC,GAAe,IAAK,CACzC,IAAMG,EAAQ,IAAMF,KAAKC,IAAIH,EAAYC,GAEzCA,EAAcA,GADdD,EAAaA,EAAaC,EAAc,IAAMC,KAAKG,MAAML,EAAaI,IAC7B,IAAMF,KAAKG,MAAMJ,EAAcG,GAG5E,IAAIE,EAAU,KACd,GAAIX,EACAW,EACI1G,EAAA3E,EAAApB,cAAA,OAAKZ,UAAU,gCACX2G,EAAA3E,EAAApB,cAAA,SACI0M,IAAK1L,KAAKsJ,SACVlL,UAAU,oCACVoM,IAAKA,EACL1K,QAASE,KAAKmJ,mBACdwC,UAAQ,EACRC,UAAQ,EACR1D,MAAOiD,EACPhD,OAAQiD,EACRS,OAAQ,WACJxB,EAAK/G,SAAS,CAAE0G,WAAW,IAC3B8B,KAAgBC,aAAa,CACzBC,QAAS,iCAGjBC,UAAW,WACP,IAAMC,EAAS7B,EAAKf,SAAS6C,QACzBD,IACAA,EAAOE,OAASC,KAAYD,SAGpCE,QAAS,WACLR,KAAgBC,aAAa,CACzBC,QAAS,kCAGjBO,QAAS,WACLT,KAAgBC,aAAa,CACzBC,QAAS,kCAGjBQ,eAAgB,WACZ,IAAMN,EAAS7B,EAAKf,SAAS6C,QACzBD,GACAJ,KAAgBC,aAAa,CACzBC,QAAS,0BACTI,OAAQF,EAAOE,aAK7BpC,KACIQ,GAAOG,EACL5F,EAAA3E,EAAApB,cAAA,OACIZ,UAAWiC,IAAW,uCAAwC,CAC1DoM,gBAAiB7B,IAErBJ,IAAKG,EACL+B,IAAI,GACJxE,MAAOiD,EACPhD,OAAQiD,IAGZrG,EAAA3E,EAAApB,cAAA,OACIZ,UAAU,uCACV0F,MAAO,CACHoE,MAAOiD,EACPhD,OAAQiD,YAM7B,GAAIJ,EACPS,EACI1G,EAAA3E,EAAApB,cAAA,OAAKZ,UAAU,gCACX2G,EAAA3E,EAAApB,cAAA,SACIZ,UAAU,oCACVoM,IAAKA,EACL1K,QAASE,KAAKmJ,mBACdwD,MAAI,EACJf,UAAQ,EACR1D,MAAOiD,EACPhD,OAAQiD,EACRS,OAAQ,WACJxB,EAAK/G,SAAS,CAAE0G,WAAW,QAGjCA,KACIQ,GAAOG,EACL5F,EAAA3E,EAAApB,cAAA,OACIZ,UAAWiC,IAAW,uCAAwC,CAC1DoM,gBAAiB7B,IAErBJ,IAAKG,EACL+B,IAAI,GACJxE,MAAOiD,EACPhD,OAAQiD,IAGZrG,EAAA3E,EAAApB,cAAA,OACIZ,UAAU,uCACV0F,MAAO,CACHoE,MAAOiD,EACPhD,OAAQiD,YAM7B,GAAIF,EAAU,CACjB,IAAM0B,EAAiB,CACnBD,MAAM,EACNE,UAAU,EAEVvG,cAAeA,EACfwG,iBAAkB,CACdC,oBAAqB,mBAGrB1D,EAAUrJ,KAAKqD,MAAfgG,MAERoC,EACI1G,EAAA3E,EAAApB,cAACoG,GAAD,CACIsG,IAAK1L,KAAKwJ,UACVH,MAAOA,EACP2D,QAASJ,EACTzE,OAAO,OACPD,MAAO,IACP+E,WAAW,EACXC,UAAU,SAIlBzB,EAAU1G,EAAA3E,EAAApB,cAAA,OAAKZ,UAAU,6BAA6BoM,IAAKA,EAAKkC,IAAI,GAAG5M,QAASE,KAAKmJ,qBAGzF,OACIpE,EAAA3E,EAAApB,cAAA,OAAKZ,UAAU,wBACX2G,EAAA3E,EAAApB,cAAC+F,EAAA3E,EAAM+M,SAAP,CAAgBC,SAAUrI,EAAA3E,EAAApB,cAAA,aAAcyM,GAExC1G,EAAA3E,EAAApB,cAACqO,EAAA,EAAD,CAAchH,KAAMA,EAAMiH,OAAQ,IACjCzP,GAAQA,EAAK0P,OAAS,GAAKxI,EAAA3E,EAAApB,cAACwO,GAAD,CAAc3P,KAAMA,wDAnU5BE,EAAOsF,GAAO,IAClCiB,EAA4BvG,EAA5BuG,OAAQC,EAAoBxG,EAApBwG,UAAW2B,EAASnI,EAATmI,KAE3B,GAAI5B,IAAWjB,EAAMyG,YAAcvF,IAAclB,EAAM0G,cAAe,KAAA0D,EACtC5G,aAAavC,EAAQC,EAAW2B,GADMwH,EAAAjS,OAAAqL,EAAA,EAAArL,CAAAgS,EAAA,GAC7DvF,EAD6DwF,EAAA,GACtDvF,EADsDuF,EAAA,GAC9CrH,EAD8CqH,EAAA,GAElErH,EAAO5C,KAAU3H,IAAIuK,EAAKe,KAAOf,EAFiC,IAAAsH,EAIfpF,aAAoBjE,EAAQC,GAJbqJ,EAAAnS,OAAAqL,EAAA,EAAArL,CAAAkS,EAAA,GAI7DlF,EAJ6DmF,EAAA,GAI7ClF,EAJ6CkF,EAAA,GAI5BjF,EAJ4BiF,EAAA,GAKlEjF,EAAYlF,KAAU3H,IAAI6M,EAAUvB,KAAOuB,EAE3C,IAAMnE,EAAUC,IAAa3I,IAAIwI,EAAQC,GAGzC,MAAO,CACH8E,MAAO,EACPS,WAAYxF,EACZyF,cAAexF,EACfyF,WAAW,EACX9B,MAAOA,EACPC,OAAQA,EACR9B,KAAMA,EACNxI,KAVSqL,YAAQ1E,GAWjBiE,eAAgBA,EAChBC,gBAAiBA,EACjBC,UAAWA,GAInB,OAAO,YAlEkBpI,IAAMC,8EC+BjCqN,WAAmB,CACrBjL,QAAS,GACTkL,UAAW,eAGTnL,GAAY,CACdC,QAAS,IAGPmL,GAAsB,CACxBnL,QAAS,IAGPoL,eACF,SAAAA,EAAYjQ,GAAO,IAAA8B,EAAApE,OAAA0I,EAAA,EAAA1I,CAAAuE,KAAAgO,IACfnO,EAAApE,OAAA2I,EAAA,EAAA3I,CAAAuE,KAAAvE,OAAA4I,EAAA,EAAA5I,CAAAuS,GAAA/K,KAAAjD,KAAMjC,KA4FVkQ,UAAY,SAAAvO,GACR,GAAsB,KAAlBA,EAAMwO,QAAgB,CAEtB,GADqCrO,EAAKwD,MAAlC8K,yBACsB,OAE9BtO,EAAKuO,mBACoB,KAAlB1O,EAAMwO,QACbrO,EAAKwO,aACoB,KAAlB3O,EAAMwO,SACbrO,EAAKyO,kBAtGMzO,EA0GnB+I,uBAAyB,SAAAzF,GAAU,IACvB2F,EAAkD3F,EAAlD2F,QAASC,EAAyC5F,EAAzC4F,WAAYwF,EAA6BpL,EAA7BoL,YAAaC,EAAgBrL,EAAhBqL,YAClClK,EAAWzE,EAAK9B,MAAhBuG,OAFuBiG,EAGU1K,EAAKwD,MAAtCoL,EAHuBlE,EAGvBkE,iBAAkBC,EAHKnE,EAGLmE,WAE1B,GAAIpK,IAAWwE,EAAf,CAEA,IAAMtE,EAAUC,IAAa3I,IAAIgN,EAASC,GAC1C,GAAKvE,EAAL,CAKA,GAHAmK,aAAuB,CAACnK,IAELoK,YAAeL,KAAiBK,YAAeJ,GAClD,CACZ,GACI3O,EAAKgP,QAAQtB,QAAU,IACtB1N,EAAKiP,kBACFC,aAAQhG,EAAYlJ,EAAKgP,QAAQ,GAAGzH,GAAIvH,EAAKgP,QAAQhP,EAAKgP,QAAQtB,OAAS,GAAGnG,KACpF,CAGE,IAFA,IAAI4H,GAAW,EACXH,EAAU,GACLI,EAAI,EAAGA,EAAIpP,EAAKgP,QAAQtB,OAAQ0B,IACjCpP,EAAKgP,QAAQI,GAAG7H,GAAK2B,EACrB8F,EAAQK,KAAKrP,EAAKgP,QAAQI,KAErBD,IACDA,GAAW,EACXH,EAAQK,KAAK1K,IAEjBqK,EAAQK,KAAKrP,EAAKgP,QAAQI,KAGlCpP,EAAKgP,QAAUA,EAGnB,IAAMM,EAAQtP,EAAKgP,QAAQO,UAAU,SAAAC,GAAC,OAAIA,EAAEjI,KAAOqH,IACnD5O,EAAKyD,SAAS,CACVgM,aAAczP,EAAKyP,aAAaH,GAChCI,iBAAkB1P,EAAK0P,iBAAiBJ,GACxCT,WAAYA,EAAa,IAKjC,IADuBE,YAAeL,IAAgBK,YAAeJ,GAClD,CACf,IAAIgB,EAAa3P,EAAKgP,QAGtB,GAFAhP,EAAKgP,QAAUhP,EAAKgP,QAAQY,OAAO,SAAAJ,GAAC,OAAIA,EAAEjI,KAAO2B,IAE7C0F,IAAqB1F,EAAY,CACjC,IAAM2G,EAAY,IAAIC,IACtBD,EAAUE,IAAI7G,EAAYA,GAE1BlJ,EAAKgQ,gBAAgBL,EAAYE,GACjC7P,EAAKyD,SAAS,CACVoL,WAAYrD,KAAKC,IAAIoD,EAAa,EAAG,SAEtC,CACH,IAAMS,EAAQtP,EAAKgP,QAAQO,UAAU,SAAAC,GAAC,OAAIA,EAAEjI,KAAOqH,IACnD5O,EAAKyD,SAAS,CACVgM,aAAczP,EAAKyP,aAAaH,GAChCI,iBAAkB1P,EAAK0P,iBAAiBJ,GACxCT,WAAYrD,KAAKC,IAAIoD,EAAa,EAAG,UAvKlC7O,EA6KnBiQ,uBAAyB,SAAA3M,GAAU,IACvB2F,EAAuC3F,EAAvC2F,QAASiH,EAA8B5M,EAA9B4M,YAAaC,EAAiB7M,EAAjB6M,aACtB1L,EAAWzE,EAAK9B,MAAhBuG,OAFuB2L,EAGUpQ,EAAKwD,MAAtCoL,EAHuBwB,EAGvBxB,iBAAkBC,EAHKuB,EAGLvB,WAE1B,GAAKsB,GACD1L,IAAWwE,EAAf,CAEA,IAAM4G,EAAYK,EAAYG,OAAO,SAACC,EAAaC,GAE/C,OADAD,EAAYP,IAAIQ,EAAWA,GACpBD,GACR,IAAIR,KAEDH,EAAa3P,EAAKgP,QACpBwB,EAAeb,EAAWjC,OAE9B1N,EAAKgP,QAAUhP,EAAKgP,QAAQY,OAAO,SAAAJ,GAAC,OAAKK,EAAUY,IAAIjB,EAAEjI,MACzDiJ,GAAgBxQ,EAAKgP,QAAQtB,OAE7B1N,EAAKyD,SAAS,CAAEoL,WAAYrD,KAAKC,IAAIoD,EAAa2B,EAAc,KAE3DxQ,EAAKgP,QAAQtB,OAKdmC,EAAUY,IAAI7B,IACd5O,EAAKgQ,gBAAgBL,EAAYE,GALjCa,KAAiBC,sBAAsB,QAnM5B3Q,EA4MnB4Q,mBAAqB,SAAAtN,GAAU,IACnBmB,EAAWzE,EAAK9B,MAAhBuG,OADmBoM,EAEc7Q,EAAKwD,MAAtCoL,EAFmBiC,EAEnBjC,iBAAkBC,EAFCgC,EAEDhC,WAElBlK,EAAYrB,EAAZqB,QACR,GAAKA,GACAoK,YAAepK,EAAQiH,UAExBjH,EAAQsE,UAAYxE,GACnBzE,EAAKiP,iBAAV,CAEAjP,EAAKgP,QAAU,CAACrK,GAASvF,OAAOY,EAAKgP,SACrC,IAAMM,EAAQtP,EAAKgP,QAAQO,UAAU,SAAAC,GAAC,OAAIA,EAAEjI,KAAOqH,IAEnD5O,EAAKyD,SAAS,CACVgM,aAAczP,EAAKyP,aAAaH,GAChCI,iBAAkB1P,EAAK0P,iBAAiBJ,GACxCT,WAAYA,EAAa,MA7Nd7O,EAiOnB8Q,UAAY,SAACrM,EAAQC,GACjB,IAAMC,EAAUC,IAAa3I,IAAIwI,EAAQC,GACzC,IAAKC,EAAS,OAAO,KAFU,IAIvBiH,EAAYjH,EAAZiH,QACR,IAAKA,EAAS,OAAO,KAErB,OAAQA,EAAQ,UACZ,IAAK,yBACD,MAAO,CACHO,QAAS,iCAGjB,IAAK,eAKL,IAAK,eACD,MAAO,CACHA,QAAS,qCAGjB,QACI,OAAO,OAzPAnM,EA8PnB+Q,YA9PmBnV,OAAAqK,EAAA,EAAArK,CAAAsK,EAAA3F,EAAA4F,KA8PL,SAAAC,IAAA,IAAArG,EAAA0E,EAAAC,EAAAkL,EAAA9H,EAAA8G,EAAAU,EAAA0B,EAAAC,EAAAC,EAAAC,EAAA,OAAAjL,EAAA3F,EAAAmG,KAAA,SAAA0K,GAAA,cAAAA,EAAAxK,KAAAwK,EAAAvK,MAAA,UAAA9G,EACoBC,EAAK9B,MAA3BuG,EADE1E,EACF0E,OAAQC,EADN3E,EACM2E,UAEVkL,EAAS5P,EAAK8Q,UAAUrM,EAAQC,GAElCoD,EAAS,CACTqE,QAAS,WACTkF,SAAU,GACVC,YAAa,IAEb1B,EAVM,CAAAwB,EAAAvK,KAAA,eAAAuK,EAAAvK,KAAA,EAWSoF,KAAgBsF,KAAK,CAChCpF,QAAS,qBACTlD,QAASxE,EACT+M,MAAO,GACPC,eAAgB,EAChBC,gBAAiBhN,EACjBiN,QAASC,KACTC,MAAO,EAAID,KACXhC,OAAQA,IAnBN,OAWN9H,EAXMsJ,EAAAjK,KAAA,UAuBV2K,YAAehK,EAAQ9H,EAAKgP,SAC5BpK,IAAamN,SAASjK,EAAOuJ,UAE7BrR,EAAKgP,QAAUlH,EAAOuJ,SACtBrR,EAAKiP,iBAA8C,IAA3BnH,EAAOuJ,SAAS3D,OAEhCkB,EAAqB5O,EAAKwD,MAA1BoL,iBACFU,EAAQtP,EAAKgP,QAAQO,UAAU,SAAAC,GAAC,OAAIA,EAAEjI,KAAOqH,IAEnD5O,EAAKyD,SAAS,CACVgM,aAAczP,EAAKyP,aAAaH,GAChCI,iBAAkB1P,EAAK0P,iBAAiBJ,MAG7B,IAAXA,EArCM,CAAA8B,EAAAvK,KAAA,SAsCN7G,EAAKgP,QAAU,CAACpK,IAAa3I,IAAIwI,EAAQmK,IACzCoD,aAA0B,EAAGhS,EAAKgP,SAvC5BoC,EAAAvK,KAAA,oBAyCNmL,aAA0B1C,EAAOtP,EAAKgP,SAEhCY,EAAS5P,EAAK8Q,UAAUrM,EAAQC,GA3ChC,CAAA0M,EAAAvK,KAAA,gBAAAuK,EAAArK,OAAA,kBA8CAkK,EAAW,KACbC,EAAQ,EA/CNC,EAAAjL,EAAA3F,EAAA4F,KAAA,SAAAgL,IAAA,IAAArJ,EAAA8G,EAAAU,EAAA,OAAApJ,EAAA3F,EAAAmG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAiDmBoF,KAAgBsF,KAAK,CACtCpF,QAAS,qBACTlD,QAASxE,EACT+M,MAAO,GACPC,eAAgB,EAChBC,gBAAiB1R,EAAKgP,QAAQtB,OAAS,EAAI1N,EAAKgP,QAAQ,GAAGzH,GAAK,EAChEoK,QAAS,GACTE,MAAO,IACPjC,OAAQA,IAzDV,OAiDI9H,EAjDJnB,EAAAQ,KA2DF+J,GAASpJ,EAAOuJ,SAAS3D,OAEzBoE,YAAehK,EAAQ9H,EAAKgP,SAC5BpK,IAAamN,SAASjK,EAAOuJ,UAE7BrR,EAAKgP,QAAUlH,EAAOuJ,SAASjS,OAAOY,EAAKgP,SAC3ChP,EAAKiP,iBAA8C,IAA3BnH,EAAOuJ,SAAS3D,OAEhCkB,EAAqB5O,EAAKwD,MAA1BoL,iBACFU,EAAQtP,EAAKgP,QAAQO,UAAU,SAAAC,GAAC,OAAIA,EAAEjI,KAAOqH,IAEnD5O,EAAKyD,SAAS,CACVgM,aAAczP,EAAKyP,aAAaH,GAChCI,iBAAkB1P,EAAK0P,iBAAiBJ,GACxCL,iBAAkBjP,EAAKiP,iBACvBJ,WAAY/G,EAAOwJ,cA1ErB,yBAAA3K,EAAAS,SAAA+J,KAAA,WAgDEnR,EAAKiP,oBAAoBiC,EAAQD,GAhDnC,CAAAG,EAAAvK,KAAA,gBAAAuK,EAAAa,cAAAd,IAAA,iBAAAC,EAAAvK,KAAA,kCAAAuK,EAAAhK,SAAAhB,MA9PKpG,EA8UnBuO,YAAc,WACVmC,KAAiBC,sBAAsB,MADvB,IAGR/B,EAAqB5O,EAAKwD,MAA1BoL,iBACFU,EAAQtP,EAAKgP,QAAQO,UAAU,SAAAC,GAAC,OAAIA,EAAEjI,KAAOqH,KACpC,IAAXU,GACA4C,aAAgC5C,EAAOtP,EAAKgP,UApVjChP,EAwVnBmS,cAAgB,SAACC,EAAWzN,GACxB,GAAKA,EAAL,CADoC,IAE5BsE,EAAgBtE,EAAhBsE,QAAS1B,EAAO5C,EAAP4C,GAEjB,GAAK6K,EAAL,CAJoC,IAMjB5L,EAAoB4L,EAA/BA,UAAiBC,EAAcD,EAAdC,UACzB,GAAK7L,EAAL,CAPoC,IASxBjD,EAAWiD,EAAfe,GAER+K,aAAe9L,EAAM6L,GAAa9K,EAAI5C,EAAS,kBAAMf,KAAU2O,oBAAoBtJ,EAAS1B,EAAIhE,SAnWjFvD,EAsWnBwS,aAAe,SAACC,EAAU9N,GACtB,GAAKA,EAAL,CADkC,IAE1BsE,EAAgBtE,EAAhBsE,QAAS1B,EAAO5C,EAAP4C,GAEjB,GAAKkL,EAAL,CAJkC,IAMhBjM,EAAoBiM,EAA9BA,SAAgBJ,EAAcI,EAAdJ,UACxB,GAAK7L,EAAL,CAPkC,IAStBjD,EAAWiD,EAAfe,GAER+K,aAAe9L,EAAM6L,GAAa9K,EAAI5C,EAAS,kBAAMf,KAAU8O,mBAAmBzJ,EAAS1B,EAAIhE,SAjXhFvD,EAoXnB2S,UAAY,SAACC,EAAOjO,GAChB,GAAKA,EAAL,CAD4B,IAEpBsE,EAAgBtE,EAAhBsE,QAAS1B,EAAO5C,EAAP4C,GAEjB,GAAKqL,EAAL,CAJ4B,IAMbpM,EAAoBoM,EAA3BA,MAAaP,EAAcO,EAAdP,UACrB,GAAK7L,EAAL,CAP4B,IAShBjD,EAAWiD,EAAfe,GAER+K,aAAe9L,EAAM6L,GAAa9K,EAAI5C,EAAS,kBAAMf,KAAUiP,gBAAgB5J,EAAS1B,EAAIhE,SA/X7EvD,EAkYnB8S,UAAY,SAACC,EAAOpO,GAChB,GAAKA,EAAL,CAD4B,IAEpBsE,EAAgBtE,EAAhBsE,QAAS1B,EAAO5C,EAAP4C,GAEjB,GAAKwL,EAAL,CAEA,IAAMC,EAAYC,aAAQF,EAAMG,MAAOC,MACvC,GAAKH,EAAL,CAP4B,IASbxM,EAASwM,EAAhBD,MACR,GAAKvM,EAAL,CAV4B,IAYhBjD,EAAWiD,EAAfe,GAER+K,aAAe9L,EAAMA,EAAKe,GAAK,OAAQ5C,EAAS,kBAAMf,KAAUwP,gBAAgBnK,EAAS1B,EAAIhE,UAhZ9EvD,EAmZnBqT,WAAa,WAAM,IACP5O,EAAWzE,EAAK9B,MAAhBuG,OACAmK,EAAqB5O,EAAKwD,MAA1BoL,iBAEFjK,EAAUC,IAAa3I,IAAIwI,EAAQmK,GACzC,GAAKjK,EAAL,CALe,IAOPiH,EAAYjH,EAAZiH,QACR,GAAKA,EAEL,OAAQA,EAAQ,UACZ,IAAK,mBAAoB,IACbwG,EAAcxG,EAAdwG,UAERpS,EAAKmS,cAAcC,EAAWzN,GAC9B,MAEJ,IAAK,yBAA0B,IACnBoO,EAAUnH,EAAVmH,MAER/S,EAAK8S,UAAUC,EAAOpO,GACtB,MAEJ,IAAK,kBAAmB,IACZ8N,EAAa7G,EAAb6G,SAERzS,EAAKwS,aAAaC,EAAU9N,GAC5B,MAEJ,IAAK,eAAgB,IACToO,EAAUnH,EAAVmH,MAER/S,EAAK8S,UAAUC,EAAOpO,GACtB,MAEJ,IAAK,cAAe,IACR2O,EAAa1H,EAAb0H,SACR,IAAKA,EAAU,OAFC,IAIRlB,EAAsCkB,EAAtClB,UAAWK,EAA2Ba,EAA3Bb,SAAUM,EAAiBO,EAAjBP,MAAOH,EAAUU,EAAVV,MAEpC,GAAIR,EAEA,YADApS,EAAKmS,cAAcC,EAAWzN,GAIlC,GAAI8N,EAEA,YADAzS,EAAKwS,aAAaC,EAAU9N,GAIhC,GAAIoO,EAEA,YADA/S,EAAK8S,UAAUC,EAAOpO,GAI1B,GAAIiO,EAEA,YADA5S,EAAK2S,UAAUC,EAAOjO,GAG1B,MAEJ,IAAK,eAAgB,IACTiO,EAAUhH,EAAVgH,MAER5S,EAAK2S,UAAUC,EAAOjO,MApdf3E,EA0dnBuT,cAAgB,WAAM,IACV9O,EAAWzE,EAAK9B,MAAhBuG,OACAmK,EAAqB5O,EAAKwD,MAA1BoL,iBAER3C,KAAgBC,aAAa,CACzBC,QAAS,sBACTqH,KAAM,CACF/O,OAAQA,EACRgP,WAAY,CAAC7E,OAleN5O,EAuenB0T,aAAe,WACX1T,EAAK2T,oBAxeU3T,EAigBnB0P,iBAAmB,SAAAJ,GACf,OAAe,IAAXA,GAEcA,EAAQ,EACPtP,EAAKgP,QAAQtB,QArgBjB1N,EAwgBnByO,eAAiB,SAAA5O,GACTA,GACAA,EAAMC,kBAFY,IAKd8O,EAAqB5O,EAAKwD,MAA1BoL,iBAEFgF,EADQ5T,EAAKgP,QAAQO,UAAU,SAAAC,GAAC,OAAIA,EAAEjI,KAAOqH,IACzB,EAE1B,OAAO5O,EAAK6T,UAAUD,EAAW,WACzBA,IAAc5T,EAAKgP,QAAQtB,OAAS,GACpC1N,EAAK8T,kBAnhBE9T,EAwhBnB8T,aAxhBmBlY,OAAAqK,EAAA,EAAArK,CAAAsK,EAAA3F,EAAA4F,KAwhBJ,SAAA4N,IAAA,IAAA7L,EAAAzD,EAAAC,EAAAkK,EAAAgB,EAAA9H,EAAAwH,EAAA,OAAApJ,EAAA3F,EAAAmG,KAAA,SAAAsN,GAAA,cAAAA,EAAApN,KAAAoN,EAAAnN,MAAA,UAAAqB,EACmBlI,EAAK9B,MAA3BuG,EADGyD,EACHzD,OAAQC,EADLwD,EACKxD,UACRkK,EAAqB5O,EAAKwD,MAA1BoL,iBAEFgB,EAAS5P,EAAK8Q,UAAUrM,EAAQC,GAElCoD,EAAS,CACTqE,QAAS,WACTkF,SAAU,GACVC,YAAa,IAEb1B,EAXO,CAAAoE,EAAAnN,KAAA,eAAAmN,EAAAnN,KAAA,EAYQoF,KAAgBsF,KAAK,CAChCpF,QAAS,qBACTlD,QAASxE,EACT+M,MAAO,GACPC,eAAgB,EAChBC,gBAAiB9C,EACjB+C,OAAQ,EACRE,MAAOD,KACPhC,OAAQA,IApBL,OAYP9H,EAZOkM,EAAA7M,KAAA,OAwBX2K,YAAehK,EAAQ9H,EAAKgP,SAC5BpK,IAAamN,SAASjK,EAAOuJ,UAE7BrR,EAAKgP,QAAUhP,EAAKgP,QAAQ5P,OAAO0I,EAAOuJ,UAEpC/B,EAAQtP,EAAKgP,QAAQO,UAAU,SAAAC,GAAC,OAAIA,EAAEjI,KAAOqH,IAEnD5O,EAAKyD,SAAS,CACVgM,aAAczP,EAAKyP,aAAaH,GAChCI,iBAAkB1P,EAAK0P,iBAAiBJ,GACxCT,WAAY/G,EAAOwJ,cAlCZ,yBAAA0C,EAAA5M,SAAA2M,MAxhBI/T,EA8jBnByP,aAAe,SAAAH,GACX,OAAe,IAAXA,GAEcA,EAAQ,GACN,GAlkBLtP,EAqkBnBwO,WAAa,SAAA3O,GACLA,GACAA,EAAMC,kBAFQ,IAKV8O,EAAqB5O,EAAKwD,MAA1BoL,iBAEFgF,EADQ5T,EAAKgP,QAAQO,UAAU,SAAAC,GAAC,OAAIA,EAAEjI,KAAOqH,IACzB,EAE1B,OAAO5O,EAAK6T,UAAUD,EAAW,WACX,IAAdA,GACA5T,EAAKiU,cAhlBEjU,EAqlBnBiU,SArlBmBrY,OAAAqK,EAAA,EAAArK,CAAAsK,EAAA3F,EAAA4F,KAqlBR,SAAA+N,IAAA,IAAA1L,EAAA/D,EAAAC,EAAAkK,EAAAgB,EAAA9H,EAAAwH,EAAA,OAAApJ,EAAA3F,EAAAmG,KAAA,SAAAyN,GAAA,cAAAA,EAAAvN,KAAAuN,EAAAtN,MAAA,UAAA2B,EACuBxI,EAAK9B,MAA3BuG,EADD+D,EACC/D,OAAQC,EADT8D,EACS9D,UACRkK,EAAqB5O,EAAKwD,MAA1BoL,iBAEFgB,EAAS5P,EAAK8Q,UAAUrM,EAAQC,GAElCoD,EAAS,CACTqE,QAAS,WACTkF,SAAU,GACVC,YAAa,IAEb1B,EAXG,CAAAuE,EAAAtN,KAAA,eAAAsN,EAAAtN,KAAA,EAYYoF,KAAgBsF,KAAK,CAChCpF,QAAS,qBACTlD,QAASxE,EACT+M,MAAO,GACPC,eAAgB,EAChBC,gBAAiB9C,EACjB+C,QAASC,KACTC,MAAOD,KAAoB,EAC3BhC,OAAQA,IApBT,OAYH9H,EAZGqM,EAAAhN,KAAA,OAwBP2K,YAAehK,EAAQ9H,EAAKgP,SAC5BpK,IAAamN,SAASjK,EAAOuJ,UAE7BrR,EAAKiP,iBAA8C,IAA3BnH,EAAOuJ,SAAS3D,OACxC1N,EAAKgP,QAAUlH,EAAOuJ,SAASjS,OAAOY,EAAKgP,SAErCM,EAAQtP,EAAKgP,QAAQO,UAAU,SAAAC,GAAC,OAAIA,EAAEjI,KAAOqH,IAEnD5O,EAAKyD,SAAS,CACVgM,aAAczP,EAAKyP,aAAaH,GAChCI,iBAAkB1P,EAAK0P,iBAAiBJ,GACxCL,iBAAkBjP,EAAKiP,iBACvBJ,WAAY/G,EAAOwJ,cApChB,yBAAA6C,EAAA/M,SAAA8M,MArlBQlU,EA6nBnB6T,UAAY,SAACvE,EAAO8E,GAChB,QAAI9E,EAAQ,OACRA,GAAStP,EAAKgP,QAAQtB,UAE1B1N,EAAKyD,SACD,CACImL,iBAAkB5O,EAAKgP,QAAQM,GAAO/H,GACtCkI,aAAczP,EAAKyP,aAAaH,GAChCI,iBAAkB1P,EAAK0P,iBAAiBJ,IAE5C8E,GAGJpC,aAA0B1C,EAAOtP,EAAKgP,UAC/B,KA3oBQhP,EA8oBnBgQ,gBAAkB,SAACL,EAAYE,GAK3B,IALyC,IACjCjB,EAAqB5O,EAAKwD,MAA1BoL,iBAEFU,EAAQK,EAAWJ,UAAU,SAAAC,GAAC,OAAIA,EAAEjI,KAAOqH,IAC7CyF,EAAS,EACJjF,EAAIE,EAAQ,EAAGF,GAAK,EAAGA,IAC5B,GAAIS,IAAcA,EAAUY,IAAId,EAAWP,GAAG7H,IAAK,CAC/C8M,EAAS1E,EAAWP,GAAG7H,GACvB,MAGR,IAAK8M,EACD,IAAK,IAAIjF,EAAIE,EAAQ,EAAGF,EAAIO,EAAWjC,OAAQ0B,IAC3C,GAAIS,IAAcA,EAAUY,IAAId,EAAWP,GAAG7H,IAAK,CAC/C8M,EAAS1E,EAAWP,GAAG7H,GACvB,MAKZ,GAAK8M,EAAL,CAEA,IAAMT,EAAY5T,EAAKgP,QAAQO,UAAU,SAAAC,GAAC,OAAIA,EAAEjI,KAAO8M,IAEvD,OAAOrU,EAAK6T,UAAUD,EAAW,WACX,IAAdA,EACA5T,EAAKiU,WACEL,IAAc5T,EAAKgP,QAAQtB,OAAS,GAC3C1N,EAAK8T,mBA1qBE9T,EA+qBnB2T,iBAAmB,WACf3T,EAAKyD,SAAS,CAAE6K,0BAA0B,KAhrB3BtO,EAmrBnBsU,kBAAoB,WAChBtU,EAAKyD,SAAS,CAAE6K,0BAA0B,KAprB3BtO,EAurBnBuU,WAAa,WACTvU,EAAKyD,SAAS,CAAE6K,0BAA0B,IAD3B,IAGP7J,EAAWzE,EAAK9B,MAAhBuG,OAHO+P,EAI4BxU,EAAKwD,MAAxCoL,EAJO4F,EAIP5F,iBAAkB6F,EAJXD,EAIWC,aAEpB9P,EAAUC,IAAa3I,IAAIwI,EAAQmK,GACzC,GAAKjK,EAAL,CAPe,IASP+P,EAA+D/P,EAA/D+P,6BAA8BC,EAAiChQ,EAAjCgQ,8BACjBD,GAAgCC,IAGrD1I,KAAgBsF,KAAK,CACjBpF,QAAS,iBACTlD,QAASxE,EACTyL,YAAa,CAACtB,GACdgG,OAAQD,GAAgCF,MAxsB7BzU,EA4sBnB6U,yBAA2B,SAAAhV,GACvBG,EAAKyD,SAAS,CAAEgR,aAAc5U,EAAMgI,OAAO1J,WA7sB5B6B,EAgtBnB8U,mBAAqB,WAAM,IAGnBC,EAAiB,uBACrB,OAHuB/U,EAAKwD,MAApBwR,YAIJ,IAAK,uBACDD,EAAiB,oBACjB,MAEJ,IAAK,oBACDA,EAAiB,qBACjB,MAEJ,IAAK,qBACDA,EAAiB,uBAKzB/U,EAAKyD,SAAS,CACVuR,WAAYD,KApuBD/U,EAwuBnBiV,kBAAoB,WAChB,GAAKjV,EAAKkV,WAAV,CADsB,IAGd5I,EAAYtM,EAAKkV,WAAjB5I,QACR,GAAKA,EAAL,CAJsB,IAOhB6I,EADYnV,EAAKwD,MAAfgG,MACkB,EAAI,EAAI,GAElCxJ,EAAKyD,SAAS,CAAE+F,MAAO2L,IAEvB7I,EAAQ/C,YAAY4L,MAnvBLnV,EAsvBnBoV,eAAiB,SAAC3Q,EAAQC,GACtB,IAAMC,EAAUC,IAAa3I,IAAIwI,EAAQC,GACzC,IAAKC,EAAS,OAAO,EAFe,IAI5B0Q,EAA8B1Q,EAA9B0Q,iBAAkBzJ,EAAYjH,EAAZiH,QAC1B,IAAKA,EAAS,OAAO,EAErB,OAAQA,EAAQ,UACZ,IAAK,yBACD,OAAO,EAEX,QACI,OAAOyJ,IA/vBfrV,EAAKkV,WAAaxU,IAAMgJ,YACxB1J,EAAKgP,QAAU,GAJA,IAAAhG,EAMehJ,EAAK9B,MAA3BuG,EANOuE,EAMPvE,OAAQC,EANDsE,EAMCtE,UAND,OAQf1E,EAAKwD,MAAQ,CACTgG,MAAO,EACPwL,WAAY,uBACZ/K,WAAYxF,EACZyF,cAAexF,EACfkK,iBAAkBlK,EAClB+K,cAAc,EACdC,kBAAkB,EAClBpB,0BAA0B,EAC1BmG,cAAc,GAjBHzU,qFAqBGsV,EAAWC,GAAW,IAAA3L,EACVzJ,KAAKjC,MAA3BuG,EADgCmF,EAChCnF,OAAQC,EADwBkF,EACxBlF,UADwB8Q,EAWpCrV,KAAKqD,MARLwR,EAHoCQ,EAGpCR,WACApG,EAJoC4G,EAIpC5G,iBACAN,EALoCkH,EAKpClH,yBACAW,EANoCuG,EAMpCvG,iBACAQ,EAPoC+F,EAOpC/F,aACAC,EARoC8F,EAQpC9F,iBACAlG,EAToCgM,EASpChM,MACAqF,EAVoC2G,EAUpC3G,WAGJ,OAAI0G,EAAUP,aAAeA,IAIzBM,EAAU7Q,SAAWA,IAIrB6Q,EAAU5Q,YAAcA,IAIxB6Q,EAAU3G,mBAAqBA,IAI/B2G,EAAUE,kBAAoB/F,IAI9B6F,EAAU9F,eAAiBA,IAI3B8F,EAAUtG,mBAAqBA,IAI/BsG,EAAU1G,aAAeA,IAIzB0G,EAAUjH,2BAA6BA,GAIvCiH,EAAU/L,QAAUA,sDAQxBrJ,KAAK4Q,cAEL0B,SAASiD,iBAAiB,UAAWvV,KAAKiO,WAAW,GACrDxJ,IAAaf,GAAG,uBAAwB1D,KAAK8P,wBAC7CrL,IAAaf,GAAG,mBAAoB1D,KAAKyQ,oBACzChM,IAAaf,GAAG,uBAAwB1D,KAAK4I,uEAI7C0J,SAASkD,oBAAoB,UAAWxV,KAAKiO,WAAW,GACxDxJ,IAAad,eAAe,uBAAwB3D,KAAK8P,wBACzDrL,IAAad,eAAe,mBAAoB3D,KAAKyQ,oBACrDhM,IAAad,eAAe,uBAAwB3D,KAAK4I,yDA6qBpD,IAAAwB,EACiBpK,KAAKjC,MAAnBuG,EADH8F,EACG9F,OAAQmR,EADXrL,EACWqL,EADXC,EAYD1V,KAAKqD,MATLwR,EAHCa,EAGDb,WACApG,EAJCiH,EAIDjH,iBACAN,EALCuH,EAKDvH,yBACAmG,EANCoB,EAMDpB,aACAxF,EAPC4G,EAOD5G,iBACAQ,EARCoG,EAQDpG,aACAC,EATCmG,EASDnG,iBACAlG,EAVCqM,EAUDrM,MACAqF,EAXCgH,EAWDhH,WAGAS,GAAS,EACTT,GAAcI,IACdK,EAAQnP,KAAK6O,QAAQO,UAAU,SAAAC,GAAC,OAAIA,EAAEjI,KAAOqH,KAEjD,IAAMqC,EAAWzF,KAAKC,IAAItL,KAAK6O,QAAQtB,OAAQmB,GAEzClK,EAAUC,IAAa3I,IAAIwI,EAAQmK,GACjC+F,EAA+DhQ,EAA/DgQ,6BAA8BD,EAAiC/P,EAAjC+P,6BAEhCoB,EAAenB,GAAgCD,EAC/CU,EAAiBjV,KAAKiV,eAAe3Q,EAAQmK,GAE/CmH,EAA4B,GAE5BA,EADA7K,YAAezG,EAAQmK,GACKgH,EAAE,yBACvBxK,YAAmB3G,EAAQmK,GACNgH,EAAE,uBAEFA,EAAE,yBAElC,IAAMI,EAAqB1H,EACvBpJ,EAAA3E,EAAApB,cAAC8W,EAAA1V,EAAD,CACI2V,mBAAoB,EACpBC,KAAM7H,EACN8H,QAASjW,KAAKmU,kBACd+B,kBAAgB,qBAChBnR,EAAA3E,EAAApB,cAACmX,EAAA/V,EAAD,CAAagH,GAAG,qBAAqBqO,EAAE,YACvC1Q,EAAA3E,EAAApB,cAACoX,EAAAhW,EAAD,KACI2E,EAAA3E,EAAApB,cAACqX,EAAAjW,EAAD,KAAoBwV,GACnBpB,GACGzP,EAAA3E,EAAApB,cAACsX,EAAAlW,EAAD,CACI1C,MAAO+X,EAAE,gBACTpX,QACI0G,EAAA3E,EAAApB,cAACuX,EAAAnW,EAAD,CAAUzC,MAAM,UAAU/B,MAAM,YAAYgD,SAAUoB,KAAK0U,2BAE/D1W,QAASsW,KAIrBvP,EAAA3E,EAAApB,cAACwX,EAAApW,EAAD,KACI2E,EAAA3E,EAAApB,cAACyX,EAAArW,EAAD,CAAQN,QAASE,KAAKmU,kBAAmBxW,MAAM,WAC1C8X,EAAE,WAEP1Q,EAAA3E,EAAApB,cAACyX,EAAArW,EAAD,CAAQN,QAASE,KAAKoU,WAAYzW,MAAM,WACnC8X,EAAE,SAIf,KA9DCtP,EAgEyBU,aAAavC,EAAQmK,EAAkBuE,MAhEhE5M,EAAA3K,OAAAqL,EAAA,EAAArL,CAAA0K,EAAA,GAgEiBE,GAhEjBD,EAAA,GAAAA,EAAA,GAAAA,EAAA,IAkEChD,EAASiD,EAAOA,EAAKe,GAAK,EAC5BlH,EAAQuV,EAAE,eASd,OARI1K,YAAezG,EAAQmK,GACvBvO,EAAQuV,EAAE,eACHxK,YAAmB3G,EAAQmK,GAClCvO,EAAQuV,EAAE,aACH9O,YAAgBrC,EAAQmK,KAC/BvO,EAAQ,IAIR6E,EAAA3E,EAAApB,cAAA,OAAKZ,UAAWiC,IAAW,eAAgBwU,IACtCgB,EACD9Q,EAAA3E,EAAApB,cAAA,OAAKZ,UAAU,uBAAuB0B,QAASE,KAAKsO,gBAChDvJ,EAAA3E,EAAApB,cAAA,OAAKZ,UAAU,4BACX2G,EAAA3E,EAAApB,cAAA,OAAKZ,UAAU,oCACf2G,EAAA3E,EAAApB,cAACqD,GAAA,EAAD,CAAmB5E,UAAW8R,EAAkBjN,MAAI,EAACxC,QAASE,KAAKsO,gBAC/DvJ,EAAA3E,EAAApB,cAAC0X,EAAAtW,EAAD,CAAoBuW,SAAS,QAAQ7S,MAAOiK,OAIpDhJ,EAAA3E,EAAApB,cAAA,OAAKZ,UAAU,+BACX2G,EAAA3E,EAAApB,cAAC4X,GAAD,CACIlL,IAAK1L,KAAK+U,WACVzQ,OAAQA,EACRC,UAAWkK,EACXvI,KAAM8M,KACNlT,QAASE,KAAKsO,kBAItBvJ,EAAA3E,EAAApB,cAAA,OAAKZ,UAAU,6BACX2G,EAAA3E,EAAApB,cAACqD,GAAA,EAAD,CAAmBvC,QAASE,KAAKoO,aAC7BrJ,EAAA3E,EAAApB,cAAC6X,EAAAzW,EAAD,CAAWuW,SAAS,QAAQ7S,MAAOiK,MAEvChJ,EAAA3E,EAAApB,cAACqD,GAAA,EAAD,CAAmB5E,UAAW6R,EAAchN,MAAI,EAACxC,QAASE,KAAKqO,YAC3DtJ,EAAA3E,EAAApB,cAAC8X,EAAA1W,EAAD,CAAkBuW,SAAS,QAAQ7S,MAAOiK,QAItDhJ,EAAA3E,EAAApB,cAAA,OAAKZ,UAAU,uBACX2G,EAAA3E,EAAApB,cAAC+X,EAAD,CAAoBzS,OAAQA,EAAQC,UAAWkK,IAC/C1J,EAAA3E,EAAApB,cAACwD,GAAA,EAAD,CACItC,MAAOA,EACPuC,SAAUqO,GAAY3B,GAAS,EAArB,GAAAlQ,OAA4B6R,EAAW3B,EAAvC,QAAAlQ,OAAmD6R,GAAa,OAE7EnK,YAAgBrC,EAAQmK,IACrB1J,EAAA3E,EAAApB,cAAA+F,EAAA3E,EAAA4D,SAAA,KACIe,EAAA3E,EAAApB,cAACQ,GAAA,EAAD,CACIU,MAAOuV,EAAE,eACTzX,QAASqL,EAAQ,EACjBvJ,QAASE,KAAK8U,mBACd/P,EAAA3E,EAAApB,cAACgY,EAAA5W,EAAD,CAAqB0D,MAAOnB,MAEhCoC,EAAA3E,EAAApB,cAACQ,GAAA,EAAD,CACIU,MAAOuV,EAAE,yBACT3V,QAASE,KAAK2U,oBACd5P,EAAA3E,EAAApB,cAACiY,EAAA7W,EAAD,CAAkB0D,MAAOnB,OAIrCoC,EAAA3E,EAAApB,cAAC6D,GAAA,EAAD,CAA2B3C,MAAOuV,EAAE,QAASrS,OAAQA,EAAQtD,QAASE,KAAKkT,aAC3EnO,EAAA3E,EAAApB,cAACQ,GAAA,EAAD,CACIU,MAAOuV,EAAE,WACThY,UAAWwX,EACXnV,QAASE,KAAKoT,eACdrO,EAAA3E,EAAApB,cAACkY,EAAA9W,EAAD,CAAW0D,MAAO+J,MAEtB9I,EAAA3E,EAAApB,cAACQ,GAAA,EAAD,CAAyBU,MAAOuV,EAAE,UAAWhY,UAAWkY,EAAc7V,QAASE,KAAKuT,cAChFxO,EAAA3E,EAAApB,cAACmY,EAAA/W,EAAD,CAAY0D,MAAOnB,eA/4BjBpC,IAAMC,WA45BjB4W,wBAAkBpJ","file":"static/js/9.d0a47dea.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function get() {\n    return _FormControlLabel.default;\n  }\n});\n\nvar _FormControlLabel = _interopRequireDefault(require(\"./FormControlLabel\"));","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.styles = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _withFormControlContext = _interopRequireDefault(require(\"../FormControl/withFormControlContext\"));\n\nvar _withStyles = _interopRequireDefault(require(\"../styles/withStyles\"));\n\nvar _Typography = _interopRequireDefault(require(\"../Typography\"));\n\nvar _helpers = require(\"../utils/helpers\");\n\nvar styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      display: 'inline-flex',\n      alignItems: 'center',\n      cursor: 'pointer',\n      // For correct alignment with the text.\n      verticalAlign: 'middle',\n      // Remove grey highlight\n      WebkitTapHighlightColor: 'transparent',\n      marginLeft: -14,\n      marginRight: 16,\n      // used for row presentation of radio/checkbox\n      '&$disabled': {\n        cursor: 'default'\n      }\n    },\n\n    /* Styles applied to the root element if `labelPlacement=\"start\"`. */\n    labelPlacementStart: {\n      flexDirection: 'row-reverse',\n      marginLeft: 16,\n      // used for row presentation of radio/checkbox\n      marginRight: -14\n    },\n\n    /* Styles applied to the root element if `labelPlacement=\"top\"`. */\n    labelPlacementTop: {\n      flexDirection: 'column-reverse',\n      marginLeft: 16\n    },\n\n    /* Styles applied to the root element if `labelPlacement=\"bottom\"`. */\n    labelPlacementBottom: {\n      flexDirection: 'column',\n      marginLeft: 16\n    },\n\n    /* Styles applied to the root element if `disabled={true}`. */\n    disabled: {},\n\n    /* Styles applied to the label's Typography component. */\n    label: {\n      '&$disabled': {\n        color: theme.palette.text.disabled\n      }\n    }\n  };\n};\n/**\r\n * Drop in replacement of the `Radio`, `Switch` and `Checkbox` component.\r\n * Use this component if you want to display an extra label.\r\n */\n\n\nexports.styles = styles;\n\nfunction FormControlLabel(props) {\n  var _classNames;\n\n  var checked = props.checked,\n      classes = props.classes,\n      classNameProp = props.className,\n      control = props.control,\n      disabledProp = props.disabled,\n      inputRef = props.inputRef,\n      label = props.label,\n      labelPlacement = props.labelPlacement,\n      muiFormControl = props.muiFormControl,\n      name = props.name,\n      onChange = props.onChange,\n      value = props.value,\n      other = (0, _objectWithoutProperties2.default)(props, [\"checked\", \"classes\", \"className\", \"control\", \"disabled\", \"inputRef\", \"label\", \"labelPlacement\", \"muiFormControl\", \"name\", \"onChange\", \"value\"]);\n  var disabled = disabledProp;\n\n  if (typeof disabled === 'undefined' && typeof control.props.disabled !== 'undefined') {\n    disabled = control.props.disabled;\n  }\n\n  if (typeof disabled === 'undefined' && muiFormControl) {\n    disabled = muiFormControl.disabled;\n  }\n\n  var controlProps = {\n    disabled: disabled\n  };\n  ['checked', 'name', 'onChange', 'value', 'inputRef'].forEach(function (key) {\n    if (typeof control.props[key] === 'undefined' && typeof props[key] !== 'undefined') {\n      controlProps[key] = props[key];\n    }\n  });\n  return _react.default.createElement(\"label\", (0, _extends2.default)({\n    className: (0, _classnames.default)(classes.root, (_classNames = {}, (0, _defineProperty2.default)(_classNames, classes[\"labelPlacement\".concat((0, _helpers.capitalize)(labelPlacement))], labelPlacement !== 'end'), (0, _defineProperty2.default)(_classNames, classes.disabled, disabled), _classNames), classNameProp)\n  }, other), _react.default.cloneElement(control, controlProps), _react.default.createElement(_Typography.default, {\n    component: \"span\",\n    className: (0, _classnames.default)(classes.label, (0, _defineProperty2.default)({}, classes.disabled, disabled))\n  }, label));\n}\n\nprocess.env.NODE_ENV !== \"production\" ? FormControlLabel.propTypes = {\n  /**\r\n   * If `true`, the component appears selected.\r\n   */\n  checked: _propTypes.default.oneOfType([_propTypes.default.bool, _propTypes.default.string]),\n\n  /**\r\n   * Override or extend the styles applied to the component.\r\n   * See [CSS API](#css-api) below for more details.\r\n   */\n  classes: _propTypes.default.object.isRequired,\n\n  /**\r\n   * @ignore\r\n   */\n  className: _propTypes.default.string,\n\n  /**\r\n   * A control element. For instance, it can be be a `Radio`, a `Switch` or a `Checkbox`.\r\n   */\n  control: _propTypes.default.element,\n\n  /**\r\n   * If `true`, the control will be disabled.\r\n   */\n  disabled: _propTypes.default.bool,\n\n  /**\r\n   * Use that property to pass a ref callback to the native input component.\r\n   */\n  inputRef: _propTypes.default.oneOfType([_propTypes.default.func, _propTypes.default.object]),\n\n  /**\r\n   * The text to be used in an enclosing label element.\r\n   */\n  label: _propTypes.default.node,\n\n  /**\r\n   * The position of the label.\r\n   */\n  labelPlacement: _propTypes.default.oneOf(['end', 'start', 'top', 'bottom']),\n\n  /**\r\n   * @ignore\r\n   */\n  muiFormControl: _propTypes.default.object,\n\n  /*\r\n   * @ignore\r\n   */\n  name: _propTypes.default.string,\n\n  /**\r\n   * Callback fired when the state is changed.\r\n   *\r\n   * @param {object} event The event source of the callback.\r\n   * You can pull out the new value by accessing `event.target.checked`.\r\n   * @param {boolean} checked The `checked` value of the switch\r\n   */\n  onChange: _propTypes.default.func,\n\n  /**\r\n   * The value of the component.\r\n   */\n  value: _propTypes.default.string\n} : void 0;\nFormControlLabel.defaultProps = {\n  labelPlacement: 'end'\n};\n\nvar _default = (0, _withStyles.default)(styles, {\n  name: 'MuiFormControlLabel'\n})((0, _withFormControlContext.default)(FormControlLabel));\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function get() {\n    return _Checkbox.default;\n  }\n});\n\nvar _Checkbox = _interopRequireDefault(require(\"./Checkbox\"));","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport './MediaViewerFooterButton.css';\n\nconst styles = theme => ({\n    checked: {\n        color: theme.palette.primary.main\n    }\n});\n\nclass MediaViewerFooterButton extends React.Component {\n    handleClick = event => {\n        event.stopPropagation();\n\n        const { onClick, disabled } = this.props;\n\n        if (disabled) return;\n\n        onClick(event);\n    };\n\n    render() {\n        const { checked, children, classes, disabled, title } = this.props;\n\n        return (\n            <div\n                className={classNames(disabled ? 'media-viewer-footer-button-disabled' : 'media-viewer-footer-button', {\n                    [classes.checked]: checked\n                })}\n                title={title}\n                onClick={this.handleClick}>\n                {children}\n            </div>\n        );\n    }\n}\n\nMediaViewerFooterButton.propTypes = {\n    title: PropTypes.string,\n    disabled: PropTypes.bool,\n    checked: PropTypes.bool,\n    onClick: PropTypes.func\n};\n\nexport default withStyles(styles)(MediaViewerFooterButton);\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.styles = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _SwitchBase = _interopRequireDefault(require(\"../internal/SwitchBase\"));\n\nvar _CheckBoxOutlineBlank = _interopRequireDefault(require(\"../internal/svg-icons/CheckBoxOutlineBlank\"));\n\nvar _CheckBox = _interopRequireDefault(require(\"../internal/svg-icons/CheckBox\"));\n\nvar _IndeterminateCheckBox = _interopRequireDefault(require(\"../internal/svg-icons/IndeterminateCheckBox\"));\n\nvar _helpers = require(\"../utils/helpers\");\n\nvar _withStyles = _interopRequireDefault(require(\"../styles/withStyles\"));\n\nvar styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      color: theme.palette.text.secondary\n    },\n\n    /* Styles applied to the root element if `checked={true}`. */\n    checked: {},\n\n    /* Styles applied to the root element if `disabled={true}`. */\n    disabled: {},\n\n    /* Styles applied to the root element if `indeterminate={true}`. */\n    indeterminate: {},\n\n    /* Styles applied to the root element if `color=\"primary\"`. */\n    colorPrimary: {\n      '&$checked': {\n        color: theme.palette.primary.main\n      },\n      '&$disabled': {\n        color: theme.palette.action.disabled\n      }\n    },\n\n    /* Styles applied to the root element if `color=\"secondary\"`. */\n    colorSecondary: {\n      '&$checked': {\n        color: theme.palette.secondary.main\n      },\n      '&$disabled': {\n        color: theme.palette.action.disabled\n      }\n    }\n  };\n};\n\nexports.styles = styles;\n\nfunction Checkbox(props) {\n  var checkedIcon = props.checkedIcon,\n      classes = props.classes,\n      className = props.className,\n      color = props.color,\n      icon = props.icon,\n      indeterminate = props.indeterminate,\n      indeterminateIcon = props.indeterminateIcon,\n      inputProps = props.inputProps,\n      other = (0, _objectWithoutProperties2.default)(props, [\"checkedIcon\", \"classes\", \"className\", \"color\", \"icon\", \"indeterminate\", \"indeterminateIcon\", \"inputProps\"]);\n  return _react.default.createElement(_SwitchBase.default, (0, _extends2.default)({\n    type: \"checkbox\",\n    checkedIcon: indeterminate ? indeterminateIcon : checkedIcon,\n    className: (0, _classnames.default)((0, _defineProperty2.default)({}, classes.indeterminate, indeterminate), className),\n    classes: {\n      root: (0, _classnames.default)(classes.root, classes[\"color\".concat((0, _helpers.capitalize)(color))]),\n      checked: classes.checked,\n      disabled: classes.disabled\n    },\n    inputProps: (0, _extends2.default)({\n      'data-indeterminate': indeterminate\n    }, inputProps),\n    icon: indeterminate ? indeterminateIcon : icon\n  }, other));\n}\n\nprocess.env.NODE_ENV !== \"production\" ? Checkbox.propTypes = {\n  /**\r\n   * If `true`, the component is checked.\r\n   */\n  checked: _propTypes.default.oneOfType([_propTypes.default.bool, _propTypes.default.string]),\n\n  /**\r\n   * The icon to display when the component is checked.\r\n   */\n  checkedIcon: _propTypes.default.node,\n\n  /**\r\n   * Override or extend the styles applied to the component.\r\n   * See [CSS API](#css-api) below for more details.\r\n   */\n  classes: _propTypes.default.object.isRequired,\n\n  /**\r\n   * @ignore\r\n   */\n  className: _propTypes.default.string,\n\n  /**\r\n   * The color of the component. It supports those theme colors that make sense for this component.\r\n   */\n  color: _propTypes.default.oneOf(['primary', 'secondary', 'default']),\n\n  /**\r\n   * If `true`, the switch will be disabled.\r\n   */\n  disabled: _propTypes.default.bool,\n\n  /**\r\n   * If `true`, the ripple effect will be disabled.\r\n   */\n  disableRipple: _propTypes.default.bool,\n\n  /**\r\n   * The icon to display when the component is unchecked.\r\n   */\n  icon: _propTypes.default.node,\n\n  /**\r\n   * The id of the `input` element.\r\n   */\n  id: _propTypes.default.string,\n\n  /**\r\n   * If `true`, the component appears indeterminate.\r\n   * This does not set the native input element to indeterminate due\r\n   * to inconsistent behavior across browsers.\r\n   * However, we set a `data-indeterminate` attribute on the input.\r\n   */\n  indeterminate: _propTypes.default.bool,\n\n  /**\r\n   * The icon to display when the component is indeterminate.\r\n   */\n  indeterminateIcon: _propTypes.default.node,\n\n  /**\r\n   * Properties applied to the `input` element.\r\n   */\n  inputProps: _propTypes.default.object,\n\n  /**\r\n   * Use that property to pass a ref callback to the native input component.\r\n   */\n  inputRef: _propTypes.default.oneOfType([_propTypes.default.func, _propTypes.default.object]),\n\n  /**\r\n   * Callback fired when the state is changed.\r\n   *\r\n   * @param {object} event The event source of the callback.\r\n   * You can pull out the new value by accessing `event.target.checked`.\r\n   * @param {boolean} checked The `checked` value of the switch\r\n   */\n  onChange: _propTypes.default.func,\n\n  /**\r\n   * The input component property `type`.\r\n   */\n  type: _propTypes.default.string,\n\n  /**\r\n   * The value of the component.\r\n   */\n  value: _propTypes.default.string\n} : void 0;\nCheckbox.defaultProps = {\n  checkedIcon: _react.default.createElement(_CheckBox.default, null),\n  color: 'secondary',\n  icon: _react.default.createElement(_CheckBoxOutlineBlank.default, null),\n  indeterminate: false,\n  indeterminateIcon: _react.default.createElement(_IndeterminateCheckBox.default, null)\n};\n\nvar _default = (0, _withStyles.default)(styles, {\n  name: 'MuiCheckbox'\n})(Checkbox);\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _pure = _interopRequireDefault(require(\"recompose/pure\"));\n\nvar _SvgIcon = _interopRequireDefault(require(\"../../SvgIcon\"));\n\nvar _ref = _react.default.createElement(\"path\", {\n  d: \"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"\n});\n/**\r\n * @ignore - internal component.\r\n */\n\n\nvar CheckBoxOutlineBlank = function CheckBoxOutlineBlank(props) {\n  return _react.default.createElement(_SvgIcon.default, props, _ref);\n};\n\nCheckBoxOutlineBlank = (0, _pure.default)(CheckBoxOutlineBlank);\nCheckBoxOutlineBlank.muiName = 'SvgIcon';\nvar _default = CheckBoxOutlineBlank;\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _pure = _interopRequireDefault(require(\"recompose/pure\"));\n\nvar _SvgIcon = _interopRequireDefault(require(\"../../SvgIcon\"));\n\nvar _ref = _react.default.createElement(\"path\", {\n  d: \"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"\n});\n/**\r\n * @ignore - internal component.\r\n */\n\n\nvar CheckBox = function CheckBox(props) {\n  return _react.default.createElement(_SvgIcon.default, props, _ref);\n};\n\nCheckBox = (0, _pure.default)(CheckBox);\nCheckBox.muiName = 'SvgIcon';\nvar _default = CheckBox;\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _pure = _interopRequireDefault(require(\"recompose/pure\"));\n\nvar _SvgIcon = _interopRequireDefault(require(\"../../SvgIcon\"));\n\nvar _ref = _react.default.createElement(\"path\", {\n  d: \"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z\"\n});\n/**\r\n * @ignore - internal component.\r\n */\n\n\nvar IndeterminateCheckBox = function IndeterminateCheckBox(props) {\n  return _react.default.createElement(_SvgIcon.default, props, _ref);\n};\n\nIndeterminateCheckBox = (0, _pure.default)(IndeterminateCheckBox);\nIndeterminateCheckBox.muiName = 'SvgIcon';\nvar _default = IndeterminateCheckBox;\nexports.default = _default;","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport './MediaViewerButton.css';\n\nclass MediaViewerButton extends React.Component {\n    handleClick = event => {\n        event.stopPropagation();\n\n        const { disabled, onClick } = this.props;\n\n        if (disabled) return;\n\n        onClick(event);\n    };\n\n    render() {\n        const { disabled, grow, children } = this.props;\n\n        const className = classNames(\n            disabled ? 'media-viewer-button-disabled' : 'media-viewer-button',\n            { grow: grow }\n        );\n\n        return (\n            <div className={className} onClick={this.handleClick}>\n                {children}\n            </div>\n        );\n    }\n}\n\nMediaViewerButton.propTypes = {\n    disabled: PropTypes.bool,\n    onClick: PropTypes.func\n};\n\nexport default MediaViewerButton;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport './MediaViewerFooterText.css';\n\nclass MediaViewerFooterText extends React.Component {\n    render() {\n        const { title, subtitle } = this.props;\n\n        return (\n            <div className=\"media-viewer-footer-text\">\n                <div className=\"media-viewer-footer-text-wrapper\">\n                    <span>{title}</span>\n                    {\n                        Boolean(subtitle) && (\n                            <span>\n                                &nbsp;\n                                {subtitle}\n                            </span>\n                        )}\n                </div>\n            </div>\n        );\n    }\n}\n\nMediaViewerFooterText.propTypes = {\n    title: PropTypes.string,\n    subtitle: PropTypes.string\n};\n\nexport default MediaViewerFooterText;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport SaveIcon from '@material-ui/icons/GetApp';\nimport MediaViewerFooterButton from './MediaViewerFooterButton';\nimport FileStore from '../../Stores/FileStore';\nimport './MediaViewerFooterButton.css';\n\nconst iconStyle = {\n    padding: 20,\n    color: 'white'\n};\n\nclass MediaViewerDownloadButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { fileId } = props;\n\n        this.state = {\n            prevPropsFileId: fileId,\n            fileId: fileId,\n            disabled: MediaViewerDownloadButton.saveDisabled(fileId)\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        const { fileId } = props;\n        const { prevPropsFileId } = state;\n\n        if (fileId !== prevPropsFileId) {\n            return {\n                prevPropsFileId: fileId,\n                fileId: fileId,\n                disabled: MediaViewerDownloadButton.saveDisabled(fileId)\n            };\n        }\n\n        return null;\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdateAnimationBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateChatBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateDocumentBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdatePhotoBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateUserBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateVideoBlob', this.onClientUpdateMediaBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateAnimationBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateChatBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateDocumentBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdatePhotoBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateUserBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateVideoBlob', this.onClientUpdateMediaBlob);\n    }\n\n    onClientUpdateMediaBlob = update => {\n        const { fileId } = this.state;\n\n        if (fileId === update.fileId) {\n            this.setState({\n                disabled: MediaViewerDownloadButton.saveDisabled(fileId)\n            });\n        }\n    };\n\n    static saveDisabled = fileId => {\n        return !Boolean(FileStore.getBlob(fileId));\n    };\n\n    handleClick = event => {\n        event.stopPropagation();\n\n        const { onClick } = this.props;\n        const { disabled } = this.state;\n        if (disabled) return;\n\n        onClick(event);\n    };\n\n    render() {\n        const { title } = this.props;\n        const { disabled } = this.state;\n\n        return (\n            <MediaViewerFooterButton disabled={disabled} title={title} onClick={this.handleClick}>\n                <SaveIcon style={iconStyle} />\n            </MediaViewerFooterButton>\n        );\n    }\n}\n\nMediaViewerDownloadButton.propTypes = {\n    fileId: PropTypes.number.isRequired,\n    onClick: PropTypes.func.isRequired,\n    title: PropTypes.string\n};\n\nexport default MediaViewerDownloadButton;\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(_react.default.Fragment, null, _react.default.createElement(\"path\", {\n  d: \"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"\n}), _react.default.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n})), 'GetApp');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(_react.default.Fragment, null, _react.default.createElement(\"path\", {\n  d: \"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\"\n}), _react.default.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n})), 'NavigateBefore');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(_react.default.Fragment, null, _react.default.createElement(\"path\", {\n  d: \"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"\n}), _react.default.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n})), 'NavigateNext');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(_react.default.Fragment, null, _react.default.createElement(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n}), _react.default.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n})), 'Delete');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(_react.default.Fragment, null, _react.default.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0V0z\"\n}), _react.default.createElement(\"path\", {\n  d: \"M13.05 9.79L10 7.5v9l3.05-2.29L16 12zm0 0L10 7.5v9l3.05-2.29L16 12zm0 0L10 7.5v9l3.05-2.29L16 12zM11 4.07V2.05c-2.01.2-3.84 1-5.32 2.21L7.1 5.69c1.11-.86 2.44-1.44 3.9-1.62zM5.69 7.1L4.26 5.68C3.05 7.16 2.25 8.99 2.05 11h2.02c.18-1.46.76-2.79 1.62-3.9zM4.07 13H2.05c.2 2.01 1 3.84 2.21 5.32l1.43-1.43c-.86-1.1-1.44-2.43-1.62-3.89zm1.61 6.74C7.16 20.95 9 21.75 11 21.95v-2.02c-1.46-.18-2.79-.76-3.9-1.62l-1.42 1.43zM22 12c0 5.16-3.92 9.42-8.95 9.95v-2.02C16.97 19.41 20 16.05 20 12s-3.03-7.41-6.95-7.93V2.05C18.08 2.58 22 6.84 22 12z\"\n})), 'SlowMotionVideo');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(_react.default.Fragment, null, _react.default.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M24 0H0v24h24z\"\n}), _react.default.createElement(\"path\", {\n  d: \"M17.66 7.93L12 2.27 6.34 7.93c-3.12 3.12-3.12 8.19 0 11.31C7.9 20.8 9.95 21.58 12 21.58c2.05 0 4.1-.78 5.66-2.34 3.12-3.12 3.12-8.19 0-11.31zM12 19.59c-1.6 0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59s.62-3.11 1.76-4.24L12 5.1v14.49z\"\n})), 'InvertColors');\n\nexports.default = _default;","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { getDateHint, getSenderUserId } from '../../Utils/Message';\nimport UserTileControl from './UserTileControl';\nimport ChatTileControl from './ChatTileControl';\nimport MessageAuthor from '../Message/MessageAuthor';\nimport MessageStore from '../../Stores/MessageStore';\nimport './MediaViewerControl.css';\n\nclass MediaViewerControl extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        const { chatId, messageId } = this.props;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n\n        const userId = getSenderUserId(message);\n        const dateHint = getDateHint(message);\n\n        const tileControl = userId ? (\n            <UserTileControl userId={userId} />\n        ) : (\n            <ChatTileControl chatId={chatId} />\n        );\n\n        return (\n            <div className='media-viewer-control'>\n                <div className='media-viewer-control-wrapper'>\n                    {tileControl}\n                    <div className='media-viewer-control-content'>\n                        <div className='media-viewer-row'>\n                            <MessageAuthor chatId={chatId} userId={userId} />\n                        </div>\n                        <div className='media-viewer-row message-meta'>\n                            <span className='message-date'>{dateHint}</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nMediaViewerControl.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired\n};\n\nexport default MediaViewerControl;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { getText } from '../../Utils/Message';\nimport MessageStore from '../../Stores/MessageStore';\nimport './MediaCaption.css';\n\nclass MediaCaption extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    handleClick = event => {\n        event.stopPropagation();\n    };\n\n    render() {\n        const { text } = this.props;\n\n        return (\n            <div className='media-caption' onClick={this.handleClick}>\n                <div className='media-caption-text'>{text}</div>\n            </div>\n        );\n    }\n}\n\nMediaCaption.propTypes = {\n    text: PropTypes.array\n};\n\nMediaCaption.defaultProps = {};\n\nexport default MediaCaption;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport FileProgress from './FileProgress';\n//import Lottie from './Lottie';\nimport MediaCaption from './MediaCaption';\nimport { getMediaFile, getMediaPreviewFile } from '../../Utils/File';\nimport { getText, isAnimationMessage, isLottieMessage, isVideoMessage } from '../../Utils/Message';\nimport { isBlurredThumbnail } from '../../Utils/Media';\nimport FileStore from '../../Stores/FileStore';\nimport MessageStore from '../../Stores/MessageStore';\nimport PlayerStore from '../../Stores/PlayerStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './MediaViewerContent.css';\n\nconst LazyLottie = React.lazy(() => import('./Lottie'));\n\nclass MediaViewerContent extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.videoRef = React.createRef();\n        this.lottieRef = React.createRef();\n\n        const { chatId, messageId, size } = this.props;\n\n        let [width, height, file] = getMediaFile(chatId, messageId, size);\n        file = FileStore.get(file.id) || file;\n\n        let [thumbnailWidth, thumbnailHeight, thumbnail] = getMediaPreviewFile(chatId, messageId);\n        thumbnail = FileStore.get(thumbnail.id) || thumbnail;\n\n        const message = MessageStore.get(chatId, messageId);\n        const text = getText(message);\n\n        //console.log('mediaViewer file', file);\n        //console.log('mediaViewer thumbnail', thumbnail);\n\n        this.state = {\n            speed: 1,\n            prevChatId: chatId,\n            prevMessageId: messageId,\n            isPlaying: false,\n            width: width,\n            height: height,\n            file: file,\n            text: text,\n            thumbnailWidth: thumbnailWidth,\n            thumbnailHeight: thumbnailHeight,\n            thumbnail: thumbnail\n        };\n\n        this.updateAnimationData();\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        const { chatId, messageId, size } = props;\n\n        if (chatId !== state.prevChatId || messageId !== state.prevMessageId) {\n            let [width, height, file] = getMediaFile(chatId, messageId, size);\n            file = FileStore.get(file.id) || file;\n\n            let [thumbnailWidth, thumbnailHeight, thumbnail] = getMediaPreviewFile(chatId, messageId);\n            thumbnail = FileStore.get(thumbnail.id) || thumbnail;\n\n            const message = MessageStore.get(chatId, messageId);\n            const text = getText(message);\n\n            return {\n                speed: 1,\n                prevChatId: chatId,\n                prevMessageId: messageId,\n                isPlaying: false,\n                width: width,\n                height: height,\n                file: file,\n                text: text,\n                thumbnailWidth: thumbnailWidth,\n                thumbnailHeight: thumbnailHeight,\n                thumbnail: thumbnail\n            };\n        }\n\n        return null;\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdateDocumentBlob', this.onClientUpdateDocumentBlob);\n        FileStore.on('clientUpdatePhotoBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateVideoBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateAnimationBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateVideoThumbnailBlob', this.onClientUpdateMediaThumbnailBlob);\n        FileStore.on('clientUpdateAnimationThumbnailBlob', this.onClientUpdateMediaThumbnailBlob);\n        MessageStore.on('updateMessageContent', this.onUpdateMessageContent);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateDocumentBlob', this.onClientUpdateDocumentBlob);\n        FileStore.removeListener('clientUpdatePhotoBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateVideoBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateAnimationBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateVideoThumbnailBlob', this.onClientUpdateMediaThumbnailBlob);\n        FileStore.removeListener('clientUpdateAnimationThumbnailBlob', this.onClientUpdateMediaThumbnailBlob);\n        MessageStore.removeListener('updateMessageContent', this.onUpdateMessageContent);\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { chatId, messageId } = this.props;\n\n        if (prevProps.chatId !== chatId || prevProps.messageId !== messageId) {\n            this.updateAnimationData();\n        }\n    }\n\n    onClientUpdateDocumentBlob = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.updateAnimationData();\n        }\n    };\n\n    updateAnimationData = async () => {\n        const { chatId, messageId, size } = this.props;\n\n        if (!isLottieMessage(chatId, messageId)) {\n            return;\n        }\n\n        const [width, height, file] = getMediaFile(chatId, messageId, size);\n        const animationData = await this.getAnimationData(file);\n\n        this.setState({ animationData });\n    };\n\n    getAnimationData = file => {\n        return new Promise(resolve => {\n            if (!file) {\n                resolve(null);\n                return;\n            }\n\n            const blob = FileStore.getBlob(file.id);\n            if (!blob) {\n                resolve(null);\n                return;\n            }\n\n            const fileReader = new FileReader();\n            fileReader.onload = event => resolve(JSON.parse(event.target.result));\n            fileReader.onerror = () => resolve(null);\n            fileReader.onabort = () => resolve(null);\n            fileReader.readAsText(blob);\n        });\n    };\n\n    onClientUpdateMediaBlob = update => {\n        const { chatId, messageId, size } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            const [width, height, file] = getMediaFile(chatId, messageId, size);\n            this.setState({\n                width,\n                height,\n                file\n            });\n        }\n    };\n\n    onClientUpdateMediaThumbnailBlob = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            const [width, height, file] = getMediaPreviewFile(chatId, messageId);\n            this.setState({\n                thumbnailWidth: width,\n                thumbnailHeight: height,\n                thumbnail: file\n            });\n        }\n    };\n\n    onUpdateMessageContent = update => {\n        const { chatId, messageId, size } = this.props;\n        const { chat_id, message_id } = update;\n\n        if (chatId === chat_id && messageId === message_id) {\n            const [width, height, file] = getMediaFile(chatId, messageId, size);\n            const message = MessageStore.get(chatId, messageId);\n            const text = getText(message);\n            this.setState({\n                width: width,\n                height: height,\n                file: file,\n                text: text\n            });\n        }\n    };\n\n    handleContentClick = event => {\n        if (event) event.stopPropagation();\n    };\n\n    changeSpeed = speed => {\n        this.setState({\n            speed\n        });\n    };\n\n    render() {\n        const { chatId, messageId } = this.props;\n        const {\n            animationData,\n            width,\n            height,\n            thumbnailWidth,\n            thumbnailHeight,\n            file,\n            text,\n            thumbnail,\n            isPlaying\n        } = this.state;\n        if (!file) return null;\n\n        const blob = FileStore.getBlob(file.id) || file.blob;\n        const src = FileStore.getBlobUrl(blob) || '';\n\n        const thumbnailBlob = thumbnail ? FileStore.getBlob(thumbnail.id) || thumbnail.blob : null;\n        const thumbnailSrc = FileStore.getBlobUrl(thumbnailBlob);\n        const isBlurred = isBlurredThumbnail({ width: thumbnailWidth, height: thumbnailHeight });\n\n        const isVideo = isVideoMessage(chatId, messageId);\n        const isAnimation = isAnimationMessage(chatId, messageId);\n        const isLottie = isLottieMessage(chatId, messageId);\n        let videoWidth = width;\n        let videoHeight = height;\n        if (Math.max(videoWidth, videoHeight) > 640) {\n            const scale = 640 / Math.max(videoWidth, videoHeight);\n            videoWidth = videoWidth > videoHeight ? 640 : Math.floor(videoWidth * scale);\n            videoHeight = videoHeight > videoWidth ? 640 : Math.floor(videoHeight * scale);\n        }\n\n        let content = null;\n        if (isVideo) {\n            content = (\n                <div className='media-viewer-content-wrapper'>\n                    <video\n                        ref={this.videoRef}\n                        className='media-viewer-content-video-player'\n                        src={src}\n                        onClick={this.handleContentClick}\n                        controls\n                        autoPlay\n                        width={videoWidth}\n                        height={videoHeight}\n                        onPlay={() => {\n                            this.setState({ isPlaying: true });\n                            TdLibController.clientUpdate({\n                                '@type': 'clientUpdateMediaViewerPlay'\n                            });\n                        }}\n                        onCanPlay={() => {\n                            const player = this.videoRef.current;\n                            if (player) {\n                                player.volume = PlayerStore.volume;\n                            }\n                        }}\n                        onPause={() => {\n                            TdLibController.clientUpdate({\n                                '@type': 'clientUpdateMediaViewerPause'\n                            });\n                        }}\n                        onEnded={() => {\n                            TdLibController.clientUpdate({\n                                '@type': 'clientUpdateMediaViewerEnded'\n                            });\n                        }}\n                        onVolumeChange={() => {\n                            const player = this.videoRef.current;\n                            if (player) {\n                                TdLibController.clientUpdate({\n                                    '@type': 'clientUpdateMediaVolume',\n                                    volume: player.volume\n                                });\n                            }\n                        }}\n                    />\n                    {!isPlaying &&\n                        (!src && thumbnailSrc ? (\n                            <img\n                                className={classNames('media-viewer-content-video-thumbnail', {\n                                    'media-blurred': isBlurred\n                                })}\n                                src={thumbnailSrc}\n                                alt=''\n                                width={videoWidth}\n                                height={videoHeight}\n                            />\n                        ) : (\n                            <div\n                                className='media-viewer-content-video-thumbnail'\n                                style={{\n                                    width: videoWidth,\n                                    height: videoHeight\n                                }}\n                            />\n                        ))}\n                </div>\n            );\n        } else if (isAnimation) {\n            content = (\n                <div className='media-viewer-content-wrapper'>\n                    <video\n                        className='media-viewer-content-video-player'\n                        src={src}\n                        onClick={this.handleContentClick}\n                        loop\n                        autoPlay\n                        width={videoWidth}\n                        height={videoHeight}\n                        onPlay={() => {\n                            this.setState({ isPlaying: true });\n                        }}\n                    />\n                    {!isPlaying &&\n                        (!src && thumbnailSrc ? (\n                            <img\n                                className={classNames('media-viewer-content-video-thumbnail', {\n                                    'media-blurred': isBlurred\n                                })}\n                                src={thumbnailSrc}\n                                alt=''\n                                width={videoWidth}\n                                height={videoHeight}\n                            />\n                        ) : (\n                            <div\n                                className='media-viewer-content-video-thumbnail'\n                                style={{\n                                    width: videoWidth,\n                                    height: videoHeight\n                                }}\n                            />\n                        ))}\n                </div>\n            );\n        } else if (isLottie) {\n            const defaultOptions = {\n                loop: true,\n                autoplay: true,\n                //path: src,\n                animationData: animationData,\n                rendererSettings: {\n                    preserveAspectRatio: 'xMidYMid slice'\n                }\n            };\n            const { speed } = this.state;\n\n            content = (\n                <LazyLottie\n                    ref={this.lottieRef}\n                    speed={speed}\n                    options={defaultOptions}\n                    height='auto'\n                    width={400}\n                    isStopped={false}\n                    isPaused={false}\n                />\n            );\n        } else {\n            content = <img className='media-viewer-content-image' src={src} alt='' onClick={this.handleContentClick} />;\n        }\n\n        return (\n            <div className='media-viewer-content'>\n                <React.Suspense fallback={<div></div>}>{content}</React.Suspense>\n                {/*<img className='media-viewer-content-image-preview' src={previewSrc} alt='' />*/}\n                <FileProgress file={file} zIndex={2} />\n                {text && text.length > 0 && <MediaCaption text={text} />}\n            </div>\n        );\n    }\n}\n\nMediaViewerContent.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    size: PropTypes.number.isRequired\n};\n\nexport default MediaViewerContent;\n","/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withTranslation } from 'react-i18next';\nimport Button from '@material-ui/core/Button';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport CloseIcon from '@material-ui/icons/Close';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\nimport ReplyIcon from '@material-ui/icons/Reply';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport InvertColorsIcon from '@material-ui/icons/InvertColors';\nimport SlowMotionVideoIcon from '@material-ui/icons/SlowMotionVideo';\nimport MediaViewerControl from '../Tile/MediaViewerControl';\nimport MediaViewerContent from './MediaViewerContent';\nimport MediaViewerButton from './MediaViewerButton';\nimport MediaViewerFooterText from './MediaViewerFooterText';\nimport MediaViewerFooterButton from './MediaViewerFooterButton';\nimport MediaViewerDownloadButton from './MediaViewerDownloadButton';\nimport { getSize } from '../../Utils/Common';\nimport {\n    cancelPreloadMediaViewerContent,\n    getMediaFile,\n    loadMediaViewerContent,\n    preloadMediaViewerContent,\n    saveOrDownload\n} from '../../Utils/File';\nimport {\n    filterMessages,\n    isAnimationMessage,\n    isLottieMessage,\n    isMediaContent,\n    isVideoMessage\n} from '../../Utils/Message';\nimport { between } from '../../Utils/Common';\nimport { PHOTO_SIZE, PHOTO_BIG_SIZE, MEDIA_SLICE_LIMIT } from '../../Constants';\nimport MessageStore from '../../Stores/MessageStore';\nimport FileStore from '../../Stores/FileStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './MediaViewer.css';\n\nconst forwardIconStyle = {\n    padding: 20,\n    transform: 'scaleX(-1)'\n};\n\nconst iconStyle = {\n    padding: 20\n};\n\nconst navigationIconStyle = {\n    padding: 35\n};\n\nclass MediaViewer extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.contentRef = React.createRef();\n        this.history = [];\n\n        const { chatId, messageId } = this.props;\n\n        this.state = {\n            speed: 1,\n            background: 'media-viewer-default',\n            prevChatId: chatId,\n            prevMessageId: messageId,\n            currentMessageId: messageId,\n            hasNextMedia: false,\n            hasPreviousMedia: false,\n            deleteConfirmationOpened: false,\n            deleteForAll: true\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId, messageId } = this.props;\n        const {\n            background,\n            currentMessageId,\n            deleteConfirmationOpened,\n            firstSliceLoaded,\n            hasNextMedia,\n            hasPreviousMedia,\n            speed,\n            totalCount\n        } = this.state;\n\n        if (nextState.background !== background) {\n            return true;\n        }\n\n        if (nextProps.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextProps.messageId !== messageId) {\n            return true;\n        }\n\n        if (nextState.currentMessageId !== currentMessageId) {\n            return true;\n        }\n\n        if (nextState.hasPrevousMedia !== hasPreviousMedia) {\n            return true;\n        }\n\n        if (nextState.hasNextMedia !== hasNextMedia) {\n            return true;\n        }\n\n        if (nextState.firstSliceLoaded !== firstSliceLoaded) {\n            return true;\n        }\n\n        if (nextState.totalCount !== totalCount) {\n            return true;\n        }\n\n        if (nextState.deleteConfirmationOpened !== deleteConfirmationOpened) {\n            return true;\n        }\n\n        if (nextState.speed !== speed) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        this.loadHistory();\n\n        document.addEventListener('keydown', this.onKeyDown, false);\n        MessageStore.on('updateDeleteMessages', this.onUpdateDeleteMessages);\n        MessageStore.on('updateNewMessage', this.onUpdateNewMessage);\n        MessageStore.on('updateMessageContent', this.onUpdateMessageContent);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('keydown', this.onKeyDown, false);\n        MessageStore.removeListener('updateDeleteMessages', this.onUpdateDeleteMessages);\n        MessageStore.removeListener('updateNewMessage', this.onUpdateNewMessage);\n        MessageStore.removeListener('updateMessageContent', this.onUpdateMessageContent);\n    }\n\n    onKeyDown = event => {\n        if (event.keyCode === 27) {\n            const { deleteConfirmationOpened } = this.state;\n            if (deleteConfirmationOpened) return;\n\n            this.handleClose();\n        } else if (event.keyCode === 39) {\n            this.handleNext();\n        } else if (event.keyCode === 37) {\n            this.handlePrevious();\n        }\n    };\n\n    onUpdateMessageContent = update => {\n        const { chat_id, message_id, new_content, old_content } = update;\n        const { chatId } = this.props;\n        const { currentMessageId, totalCount } = this.state;\n\n        if (chatId !== chat_id) return;\n\n        const message = MessageStore.get(chat_id, message_id);\n        if (!message) return;\n\n        loadMediaViewerContent([message]);\n\n        const addMessage = isMediaContent(new_content) && !isMediaContent(old_content);\n        if (addMessage) {\n            if (\n                this.history.length >= 2 &&\n                (this.firstSliceLoaded ||\n                    between(message_id, this.history[0].id, this.history[this.history.length - 1].id))\n            ) {\n                let inserted = false;\n                let history = [];\n                for (let i = 0; i < this.history.length; i++) {\n                    if (this.history[i].id > message_id) {\n                        history.push(this.history[i]);\n                    } else {\n                        if (!inserted) {\n                            inserted = true;\n                            history.push(message);\n                        }\n                        history.push(this.history[i]);\n                    }\n                }\n                this.history = history;\n            }\n\n            const index = this.history.findIndex(x => x.id === currentMessageId);\n            this.setState({\n                hasNextMedia: this.hasNextMedia(index),\n                hasPreviousMedia: this.hasPreviousMedia(index),\n                totalCount: totalCount + 1\n            });\n        }\n\n        const removeMessage = !isMediaContent(new_content) && isMediaContent(old_content);\n        if (removeMessage) {\n            let oldHistory = this.history;\n            this.history = this.history.filter(x => x.id !== message_id);\n\n            if (currentMessageId === message_id) {\n                const filterMap = new Map();\n                filterMap.set(message_id, message_id);\n\n                this.moveToNextMedia(oldHistory, filterMap);\n                this.setState({\n                    totalCount: Math.max(totalCount - 1, 0)\n                });\n            } else {\n                const index = this.history.findIndex(x => x.id === currentMessageId);\n                this.setState({\n                    hasNextMedia: this.hasNextMedia(index),\n                    hasPreviousMedia: this.hasPreviousMedia(index),\n                    totalCount: Math.max(totalCount - 1, 0)\n                });\n            }\n        }\n    };\n\n    onUpdateDeleteMessages = update => {\n        const { chat_id, message_ids, is_permanent } = update;\n        const { chatId } = this.props;\n        const { currentMessageId, totalCount } = this.state;\n\n        if (!is_permanent) return;\n        if (chatId !== chat_id) return;\n\n        const filterMap = message_ids.reduce((accumulator, currentId) => {\n            accumulator.set(currentId, currentId);\n            return accumulator;\n        }, new Map());\n\n        const oldHistory = this.history;\n        let deletedCount = oldHistory.length;\n\n        this.history = this.history.filter(x => !filterMap.has(x.id));\n        deletedCount -= this.history.length;\n\n        this.setState({ totalCount: Math.max(totalCount - deletedCount, 0) });\n\n        if (!this.history.length) {\n            ApplicationStore.setMediaViewerContent(null);\n            return;\n        }\n\n        if (filterMap.has(currentMessageId)) {\n            this.moveToNextMedia(oldHistory, filterMap);\n        }\n    };\n\n    onUpdateNewMessage = update => {\n        const { chatId } = this.props;\n        const { currentMessageId, totalCount } = this.state;\n\n        const { message } = update;\n        if (!message) return;\n        if (!isMediaContent(message.content)) return;\n\n        if (message.chat_id !== chatId) return;\n        if (!this.firstSliceLoaded) return;\n\n        this.history = [message].concat(this.history);\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n\n        this.setState({\n            hasNextMedia: this.hasNextMedia(index),\n            hasPreviousMedia: this.hasPreviousMedia(index),\n            totalCount: totalCount + 1\n        });\n    };\n\n    getFilter = (chatId, messageId) => {\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n\n        const { content } = message;\n        if (!content) return null;\n\n        switch (content['@type']) {\n            case 'messageChatChangePhoto': {\n                return {\n                    '@type': 'searchMessagesFilterChatPhoto'\n                };\n            }\n            case 'messagePhoto': {\n                return {\n                    '@type': 'searchMessagesFilterPhotoAndVideo'\n                };\n            }\n            case 'messageVideo': {\n                return {\n                    '@type': 'searchMessagesFilterPhotoAndVideo'\n                };\n            }\n            default: {\n                return null;\n            }\n        }\n    };\n\n    loadHistory = async () => {\n        const { chatId, messageId } = this.props;\n\n        const filter = this.getFilter(chatId, messageId);\n\n        let result = {\n            '@type': 'messages',\n            messages: [],\n            total_count: 0\n        };\n        if (filter) {\n            result = await TdLibController.send({\n                '@type': 'searchChatMessages',\n                chat_id: chatId,\n                query: '',\n                sender_user_id: 0,\n                from_message_id: messageId,\n                offset: -MEDIA_SLICE_LIMIT,\n                limit: 2 * MEDIA_SLICE_LIMIT,\n                filter: filter\n            });\n        }\n\n        filterMessages(result, this.history);\n        MessageStore.setItems(result.messages);\n\n        this.history = result.messages;\n        this.firstSliceLoaded = result.messages.length === 0;\n\n        const { currentMessageId } = this.state;\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n\n        this.setState({\n            hasNextMedia: this.hasNextMedia(index),\n            hasPreviousMedia: this.hasPreviousMedia(index)\n        });\n\n        if (index === -1) {\n            this.history = [MessageStore.get(chatId, currentMessageId)];\n            preloadMediaViewerContent(0, this.history);\n        } else {\n            preloadMediaViewerContent(index, this.history);\n\n            const filter = this.getFilter(chatId, messageId);\n            if (!filter) return;\n\n            const maxCount = 1500;\n            let count = 0;\n            while (!this.firstSliceLoaded && count < maxCount) {\n                const result = await TdLibController.send({\n                    '@type': 'searchChatMessages',\n                    chat_id: chatId,\n                    query: '',\n                    sender_user_id: 0,\n                    from_message_id: this.history.length > 0 ? this.history[0].id : 0,\n                    offset: -99,\n                    limit: 99 + 1,\n                    filter: filter\n                });\n                count += result.messages.length;\n\n                filterMessages(result, this.history);\n                MessageStore.setItems(result.messages);\n\n                this.history = result.messages.concat(this.history);\n                this.firstSliceLoaded = result.messages.length === 0;\n\n                const { currentMessageId } = this.state;\n                const index = this.history.findIndex(x => x.id === currentMessageId);\n\n                this.setState({\n                    hasNextMedia: this.hasNextMedia(index),\n                    hasPreviousMedia: this.hasPreviousMedia(index),\n                    firstSliceLoaded: this.firstSliceLoaded,\n                    totalCount: result.total_count\n                });\n            }\n        }\n    };\n\n    handleClose = () => {\n        ApplicationStore.setMediaViewerContent(null);\n\n        const { currentMessageId } = this.state;\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n        if (index !== -1) {\n            cancelPreloadMediaViewerContent(index, this.history);\n        }\n    };\n\n    saveAnimation = (animation, message) => {\n        if (!message) return;\n        const { chat_id, id } = message;\n\n        if (!animation) return;\n\n        const { animation: file, file_name } = animation;\n        if (!file) return;\n\n        const { id: fileId } = file;\n\n        saveOrDownload(file, file_name || id, message, () => FileStore.updateAnimationBlob(chat_id, id, fileId));\n    };\n\n    saveDocument = (document, message) => {\n        if (!message) return;\n        const { chat_id, id } = message;\n\n        if (!document) return;\n\n        const { document: file, file_name } = document;\n        if (!file) return;\n\n        const { id: fileId } = file;\n\n        saveOrDownload(file, file_name || id, message, () => FileStore.updateDocumentBlob(chat_id, id, fileId));\n    };\n\n    saveVideo = (video, message) => {\n        if (!message) return;\n        const { chat_id, id } = message;\n\n        if (!video) return;\n\n        const { video: file, file_name } = video;\n        if (!file) return;\n\n        const { id: fileId } = file;\n\n        saveOrDownload(file, file_name || id, message, () => FileStore.updateVideoBlob(chat_id, id, fileId));\n    };\n\n    savePhoto = (photo, message) => {\n        if (!message) return;\n        const { chat_id, id } = message;\n\n        if (!photo) return;\n\n        const photoSize = getSize(photo.sizes, PHOTO_BIG_SIZE);\n        if (!photoSize) return;\n\n        const { photo: file } = photoSize;\n        if (!file) return;\n\n        const { id: fileId } = file;\n\n        saveOrDownload(file, file.id + '.jpg', message, () => FileStore.updatePhotoBlob(chat_id, id, fileId));\n    };\n\n    handleSave = () => {\n        const { chatId } = this.props;\n        const { currentMessageId } = this.state;\n\n        const message = MessageStore.get(chatId, currentMessageId);\n        if (!message) return;\n\n        const { content } = message;\n        if (!content) return;\n\n        switch (content['@type']) {\n            case 'messageAnimation': {\n                const { animation } = content;\n\n                this.saveAnimation(animation, message);\n                break;\n            }\n            case 'messageChatChangePhoto': {\n                const { photo } = content;\n\n                this.savePhoto(photo, message);\n                break;\n            }\n            case 'messageDocument': {\n                const { document } = content;\n\n                this.saveDocument(document, message);\n                break;\n            }\n            case 'messagePhoto': {\n                const { photo } = content;\n\n                this.savePhoto(photo, message);\n                break;\n            }\n            case 'messageText': {\n                const { web_page } = content;\n                if (!web_page) return;\n\n                const { animation, document, photo, video } = web_page;\n\n                if (animation) {\n                    this.saveAnimation(animation, message);\n                    return;\n                }\n\n                if (document) {\n                    this.saveDocument(document, message);\n                    return;\n                }\n\n                if (photo) {\n                    this.savePhoto(photo, message);\n                    return;\n                }\n\n                if (video) {\n                    this.saveVideo(video, message);\n                    return;\n                }\n                break;\n            }\n            case 'messageVideo': {\n                const { video } = content;\n\n                this.saveVideo(video, message);\n                break;\n            }\n        }\n    };\n\n    handleForward = () => {\n        const { chatId } = this.props;\n        const { currentMessageId } = this.state;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateForward',\n            info: {\n                chatId: chatId,\n                messageIds: [currentMessageId]\n            }\n        });\n    };\n\n    handleDelete = () => {\n        this.handleDialogOpen();\n        return;\n\n        const { chatId, messageId } = this.props;\n        const { currentMessageId } = this.state;\n\n        const message = MessageStore.get(chatId, currentMessageId);\n        if (!message) return;\n        if (!message.content) return;\n\n        const { photo } = message.content;\n        if (photo) {\n            const photoSize = getSize(photo.sizes, PHOTO_BIG_SIZE);\n            if (photoSize) {\n                let file = photoSize.photo;\n                file = FileStore.get(file.id) || file;\n                if (file) {\n                    const store = FileStore.getReadWriteStore();\n\n                    FileStore.deleteLocalFile(store, file);\n                }\n            }\n        }\n    };\n\n    hasPreviousMedia = index => {\n        if (index === -1) return false;\n\n        const nextIndex = index + 1;\n        return nextIndex < this.history.length;\n    };\n\n    handlePrevious = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        const { currentMessageId } = this.state;\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n        const nextIndex = index + 1;\n\n        return this.loadMedia(nextIndex, () => {\n            if (nextIndex === this.history.length - 1) {\n                this.loadPrevious();\n            }\n        });\n    };\n\n    loadPrevious = async () => {\n        const { chatId, messageId } = this.props;\n        const { currentMessageId } = this.state;\n\n        const filter = this.getFilter(chatId, messageId);\n\n        let result = {\n            '@type': 'messages',\n            messages: [],\n            total_count: 0\n        };\n        if (filter) {\n            result = await TdLibController.send({\n                '@type': 'searchChatMessages',\n                chat_id: chatId,\n                query: '',\n                sender_user_id: 0,\n                from_message_id: currentMessageId,\n                offset: 0,\n                limit: MEDIA_SLICE_LIMIT,\n                filter: filter\n            });\n        }\n\n        filterMessages(result, this.history);\n        MessageStore.setItems(result.messages);\n\n        this.history = this.history.concat(result.messages);\n\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n\n        this.setState({\n            hasNextMedia: this.hasNextMedia(index),\n            hasPreviousMedia: this.hasPreviousMedia(index),\n            totalCount: result.total_count\n        });\n    };\n\n    hasNextMedia = index => {\n        if (index === -1) return false;\n\n        const nextIndex = index - 1;\n        return nextIndex >= 0;\n    };\n\n    handleNext = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        const { currentMessageId } = this.state;\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n        const nextIndex = index - 1;\n\n        return this.loadMedia(nextIndex, () => {\n            if (nextIndex === 0) {\n                this.loadNext();\n            }\n        });\n    };\n\n    loadNext = async () => {\n        const { chatId, messageId } = this.props;\n        const { currentMessageId } = this.state;\n\n        const filter = this.getFilter(chatId, messageId);\n\n        let result = {\n            '@type': 'messages',\n            messages: [],\n            total_count: 0\n        };\n        if (filter) {\n            result = await TdLibController.send({\n                '@type': 'searchChatMessages',\n                chat_id: chatId,\n                query: '',\n                sender_user_id: 0,\n                from_message_id: currentMessageId,\n                offset: -MEDIA_SLICE_LIMIT,\n                limit: MEDIA_SLICE_LIMIT + 1,\n                filter: filter\n            });\n        }\n\n        filterMessages(result, this.history);\n        MessageStore.setItems(result.messages);\n\n        this.firstSliceLoaded = result.messages.length === 0;\n        this.history = result.messages.concat(this.history);\n\n        const index = this.history.findIndex(x => x.id === currentMessageId);\n\n        this.setState({\n            hasNextMedia: this.hasNextMedia(index),\n            hasPreviousMedia: this.hasPreviousMedia(index),\n            firstSliceLoaded: this.firstSliceLoaded,\n            totalCount: result.total_count\n        });\n    };\n\n    loadMedia = (index, callback) => {\n        if (index < 0) return false;\n        if (index >= this.history.length) return false;\n\n        this.setState(\n            {\n                currentMessageId: this.history[index].id,\n                hasNextMedia: this.hasNextMedia(index),\n                hasPreviousMedia: this.hasPreviousMedia(index)\n            },\n            callback\n        );\n\n        preloadMediaViewerContent(index, this.history);\n        return true;\n    };\n\n    moveToNextMedia = (oldHistory, filterMap) => {\n        const { currentMessageId } = this.state;\n\n        const index = oldHistory.findIndex(x => x.id === currentMessageId);\n        let nextId = 0;\n        for (let i = index - 1; i >= 0; i--) {\n            if (filterMap && !filterMap.has(oldHistory[i].id)) {\n                nextId = oldHistory[i].id;\n                break;\n            }\n        }\n        if (!nextId) {\n            for (let i = index + 1; i < oldHistory.length; i++) {\n                if (filterMap && !filterMap.has(oldHistory[i].id)) {\n                    nextId = oldHistory[i].id;\n                    break;\n                }\n            }\n        }\n\n        if (!nextId) return;\n\n        const nextIndex = this.history.findIndex(x => x.id === nextId);\n\n        return this.loadMedia(nextIndex, () => {\n            if (nextIndex === 0) {\n                this.loadNext();\n            } else if (nextIndex === this.history.length - 1) {\n                this.loadPrevious();\n            }\n        });\n    };\n\n    handleDialogOpen = () => {\n        this.setState({ deleteConfirmationOpened: true });\n    };\n\n    handleDialogClose = () => {\n        this.setState({ deleteConfirmationOpened: false });\n    };\n\n    handleDone = () => {\n        this.setState({ deleteConfirmationOpened: false });\n\n        const { chatId } = this.props;\n        const { currentMessageId, deleteForAll } = this.state;\n\n        const message = MessageStore.get(chatId, currentMessageId);\n        if (!message) return;\n\n        const { can_be_deleted_only_for_self, can_be_deleted_for_all_users } = message;\n        const canBeDeleted = can_be_deleted_only_for_self || can_be_deleted_for_all_users;\n        if (!canBeDeleted) return;\n\n        TdLibController.send({\n            '@type': 'deleteMessages',\n            chat_id: chatId,\n            message_ids: [currentMessageId],\n            revoke: can_be_deleted_for_all_users && deleteForAll\n        });\n    };\n\n    handleChangeDeleteForAll = event => {\n        this.setState({ deleteForAll: event.target.checked });\n    };\n\n    handleInvertColors = () => {\n        const { background } = this.state;\n\n        let nextBackground = 'media-viewer-default';\n        switch (background) {\n            case 'media-viewer-default': {\n                nextBackground = 'media-viewer-dark';\n                break;\n            }\n            case 'media-viewer-dark': {\n                nextBackground = 'media-viewer-light';\n                break;\n            }\n            case 'media-viewer-light': {\n                nextBackground = 'media-viewer-default';\n                break;\n            }\n        }\n\n        this.setState({\n            background: nextBackground\n        });\n    };\n\n    handleChangeSpeed = () => {\n        if (!this.contentRef) return;\n\n        const { current } = this.contentRef;\n        if (!current) return;\n\n        const { speed } = this.state;\n        const nextSpeed = speed < 1 ? 1 : 0.1;\n\n        this.setState({ speed: nextSpeed });\n\n        current.changeSpeed(nextSpeed);\n    };\n\n    canBeForwarded = (chatId, messageId) => {\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return false;\n\n        const { can_be_forwarded, content } = message;\n        if (!content) return false;\n\n        switch (content['@type']) {\n            case 'messageChatChangePhoto': {\n                return true;\n            }\n            default: {\n                return can_be_forwarded;\n            }\n        }\n    };\n\n    render() {\n        const { chatId, t } = this.props;\n        const {\n            background,\n            currentMessageId,\n            deleteConfirmationOpened,\n            deleteForAll,\n            firstSliceLoaded,\n            hasNextMedia,\n            hasPreviousMedia,\n            speed,\n            totalCount\n        } = this.state;\n\n        let index = -1;\n        if (totalCount && firstSliceLoaded) {\n            index = this.history.findIndex(x => x.id === currentMessageId);\n        }\n        const maxCount = Math.max(this.history.length, totalCount);\n\n        const message = MessageStore.get(chatId, currentMessageId);\n        const { can_be_deleted_for_all_users, can_be_deleted_only_for_self } = message;\n\n        const canBeDeleted = can_be_deleted_for_all_users || can_be_deleted_only_for_self;\n        const canBeForwarded = this.canBeForwarded(chatId, currentMessageId);\n\n        let deleteConfirmationContent = '';\n        if (isVideoMessage(chatId, currentMessageId)) {\n            deleteConfirmationContent = t('AreYouSureDeleteVideo');\n        } else if (isAnimationMessage(chatId, currentMessageId)) {\n            deleteConfirmationContent = t('AreYouSureDeleteGIF');\n        } else {\n            deleteConfirmationContent = t('AreYouSureDeletePhoto');\n        }\n        const deleteConfirmation = deleteConfirmationOpened ? (\n            <Dialog\n                transitionDuration={0}\n                open={deleteConfirmationOpened}\n                onClose={this.handleDialogClose}\n                aria-labelledby='form-dialog-title'>\n                <DialogTitle id='form-dialog-title'>{t('AppName')}</DialogTitle>\n                <DialogContent>\n                    <DialogContentText>{deleteConfirmationContent}</DialogContentText>\n                    {can_be_deleted_for_all_users && (\n                        <FormControlLabel\n                            label={t('DeleteForAll')}\n                            control={\n                                <Checkbox color='primary' value='deleteAll' onChange={this.handleChangeDeleteForAll} />\n                            }\n                            checked={deleteForAll}\n                        />\n                    )}\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={this.handleDialogClose} color='primary'>\n                        {t('Cancel')}\n                    </Button>\n                    <Button onClick={this.handleDone} color='primary'>\n                        {t('Ok')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        ) : null;\n\n        const [width, height, file] = getMediaFile(chatId, currentMessageId, PHOTO_BIG_SIZE);\n\n        const fileId = file ? file.id : 0;\n        let title = t('AttachPhoto');\n        if (isVideoMessage(chatId, currentMessageId)) {\n            title = t('AttachVideo');\n        } else if (isAnimationMessage(chatId, currentMessageId)) {\n            title = t('AttachGif');\n        } else if (isLottieMessage(chatId, currentMessageId)) {\n            title = '';\n        }\n\n        return (\n            <div className={classNames('media-viewer', background)}>\n                {deleteConfirmation}\n                <div className='media-viewer-wrapper' onClick={this.handlePrevious}>\n                    <div className='media-viewer-left-column'>\n                        <div className='media-viewer-button-placeholder' />\n                        <MediaViewerButton disabled={!hasPreviousMedia} grow onClick={this.handlePrevious}>\n                            <NavigateBeforeIcon fontSize='large' style={navigationIconStyle} />\n                        </MediaViewerButton>\n                    </div>\n\n                    <div className='media-viewer-content-column'>\n                        <MediaViewerContent\n                            ref={this.contentRef}\n                            chatId={chatId}\n                            messageId={currentMessageId}\n                            size={PHOTO_BIG_SIZE}\n                            onClick={this.handlePrevious}\n                        />\n                    </div>\n\n                    <div className='media-viewer-right-column'>\n                        <MediaViewerButton onClick={this.handleClose}>\n                            <CloseIcon fontSize='large' style={navigationIconStyle} />\n                        </MediaViewerButton>\n                        <MediaViewerButton disabled={!hasNextMedia} grow onClick={this.handleNext}>\n                            <NavigateNextIcon fontSize='large' style={navigationIconStyle} />\n                        </MediaViewerButton>\n                    </div>\n                </div>\n                <div className='media-viewer-footer'>\n                    <MediaViewerControl chatId={chatId} messageId={currentMessageId} />\n                    <MediaViewerFooterText\n                        title={title}\n                        subtitle={maxCount && index >= 0 ? `${maxCount - index} of ${maxCount}` : null}\n                    />\n                    {isLottieMessage(chatId, currentMessageId) && (\n                        <>\n                            <MediaViewerFooterButton\n                                title={t('ChangeSpeed')}\n                                checked={speed < 1}\n                                onClick={this.handleChangeSpeed}>\n                                <SlowMotionVideoIcon style={iconStyle} />\n                            </MediaViewerFooterButton>\n                            <MediaViewerFooterButton\n                                title={t('InvertBackgroundColor')}\n                                onClick={this.handleInvertColors}>\n                                <InvertColorsIcon style={iconStyle} />\n                            </MediaViewerFooterButton>\n                        </>\n                    )}\n                    <MediaViewerDownloadButton title={t('Save')} fileId={fileId} onClick={this.handleSave} />\n                    <MediaViewerFooterButton\n                        title={t('Forward')}\n                        disabled={!canBeForwarded}\n                        onClick={this.handleForward}>\n                        <ReplyIcon style={forwardIconStyle} />\n                    </MediaViewerFooterButton>\n                    <MediaViewerFooterButton title={t('Delete')} disabled={!canBeDeleted} onClick={this.handleDelete}>\n                        <DeleteIcon style={iconStyle} />\n                    </MediaViewerFooterButton>\n                </div>\n            </div>\n        );\n    }\n}\n\nMediaViewer.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired\n};\n\nexport default withTranslation()(MediaViewer);\n"],"sourceRoot":""}